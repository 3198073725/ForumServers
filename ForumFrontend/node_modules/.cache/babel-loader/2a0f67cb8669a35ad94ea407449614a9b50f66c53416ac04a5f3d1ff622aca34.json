{"ast":null,"code":"import \"core-js/modules/es.date.to-json.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport { createStore } from 'vuex';\nimport axios from '@/utils/request';\nimport notificationsModule from './modules/notifications';\nimport chatModule from './modules/chat';\nexport default createStore({\n  state: {\n    token: localStorage.getItem('token') || '',\n    user: JSON.parse(localStorage.getItem('user') || '{}')\n  },\n  getters: {\n    isLoggedIn: function isLoggedIn(state) {\n      return !!state.token;\n    },\n    isAdmin: function isAdmin(state) {\n      return state.user && state.user.role === 'admin';\n    },\n    isModerator: function isModerator(state) {\n      return state.user && (state.user.role === 'moderator' || state.user.role === 'admin');\n    },\n    userId: function userId(state) {\n      return state.user ? state.user.id : null;\n    },\n    username: function username(state) {\n      return state.user ? state.user.username : '';\n    },\n    userAvatar: function userAvatar(state) {\n      return state.user && state.user.avatar_url ? state.user.avatar_url : '';\n    },\n    userRole: function userRole(state) {\n      return state.user ? state.user.role : '';\n    },\n    currentUser: function currentUser(state) {\n      return state.user;\n    }\n  },\n  mutations: {\n    // 用户认证相关\n    setToken: function setToken(state, token) {\n      state.token = token;\n      localStorage.setItem('token', token);\n    },\n    setUser: function setUser(state, user) {\n      state.user = user;\n      localStorage.setItem('user', JSON.stringify(user));\n    },\n    logout: function logout(state) {\n      state.token = '';\n      state.user = {};\n      localStorage.removeItem('token');\n      localStorage.removeItem('user');\n    }\n  },\n  actions: {\n    // 用户认证相关\n    login: function login(_ref, credentials) {\n      var commit = _ref.commit;\n      return axios.post('/api/v1/auth/login/', credentials).then(function (response) {\n        var _response$data$data = response.data.data,\n          token = _response$data$data.token,\n          user = _response$data$data.user;\n        commit('setToken', token);\n        commit('setUser', user);\n        return user;\n      });\n    },\n    logout: function logout(_ref2) {\n      var commit = _ref2.commit;\n      commit('logout');\n    }\n  },\n  modules: {\n    notifications: notificationsModule,\n    chat: chatModule\n  }\n});","map":{"version":3,"names":["createStore","axios","notificationsModule","chatModule","state","token","localStorage","getItem","user","JSON","parse","getters","isLoggedIn","isAdmin","role","isModerator","userId","id","username","userAvatar","avatar_url","userRole","currentUser","mutations","setToken","setItem","setUser","stringify","logout","removeItem","actions","login","_ref","credentials","commit","post","then","response","_response$data$data","data","_ref2","modules","notifications","chat"],"sources":["H:/ForumServers/ForumFrontend/src/store/index.js"],"sourcesContent":["import { createStore } from 'vuex'\nimport axios from '@/utils/request'\nimport notificationsModule from './modules/notifications'\nimport chatModule from './modules/chat'\n\nexport default createStore({\n  state: {\n    token: localStorage.getItem('token') || '',\n    user: JSON.parse(localStorage.getItem('user') || '{}')\n  },\n  getters: {\n    isLoggedIn: state => !!state.token,\n    isAdmin: state => state.user && state.user.role === 'admin',\n    isModerator: state => state.user && (state.user.role === 'moderator' || state.user.role === 'admin'),\n    userId: state => state.user ? state.user.id : null,\n    username: state => state.user ? state.user.username : '',\n    userAvatar: state => state.user && state.user.avatar_url ? state.user.avatar_url : '',\n    userRole: state => state.user ? state.user.role : '',\n    currentUser: state => state.user\n  },\n  mutations: {\n    // 用户认证相关\n    setToken(state, token) {\n      state.token = token;\n      localStorage.setItem('token', token);\n    },\n    setUser(state, user) {\n      state.user = user;\n      localStorage.setItem('user', JSON.stringify(user));\n    },\n    logout(state) {\n      state.token = '';\n      state.user = {};\n      localStorage.removeItem('token');\n      localStorage.removeItem('user');\n    }\n  },\n  actions: {\n    // 用户认证相关\n    login({ commit }, credentials) {\n      return axios.post('/api/v1/auth/login/', credentials)\n        .then(response => {\n          const { token, user } = response.data.data;\n          commit('setToken', token);\n          commit('setUser', user);\n          return user;\n        });\n    },\n    logout({ commit }) {\n      commit('logout');\n    }\n  },\n  modules: {\n    notifications: notificationsModule,\n    chat: chatModule\n  }\n})\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}