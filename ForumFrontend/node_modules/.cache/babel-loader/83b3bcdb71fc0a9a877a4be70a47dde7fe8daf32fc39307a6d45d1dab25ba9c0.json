{"ast":null,"code":"'use strict';\n\nrequire(\"core-js/modules/es.array.for-each.js\");\nrequire(\"core-js/modules/es.array.push.js\");\nrequire(\"core-js/modules/es.function.name.js\");\nrequire(\"core-js/modules/es.iterator.constructor.js\");\nrequire(\"core-js/modules/es.iterator.for-each.js\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nvar lodashUnified = require('lodash-unified');\nvar token = require('./token.js');\nvar shared = require('@vue/shared');\nvar ElOptions = vue.defineComponent({\n  name: \"ElOptions\",\n  setup: function setup(_, _ref) {\n    var slots = _ref.slots;\n    var select = vue.inject(token.selectKey);\n    var cachedValueList = [];\n    return function () {\n      var _a, _b;\n      var children = (_a = slots[\"default\"]) == null ? void 0 : _a.call(slots);\n      var valueList = [];\n      function filterOptions(children2) {\n        if (!shared.isArray(children2)) return;\n        children2.forEach(function (item) {\n          var _a2, _b2, _c, _d;\n          var name = (_a2 = (item == null ? void 0 : item.type) || {}) == null ? void 0 : _a2.name;\n          if (name === \"ElOptionGroup\") {\n            filterOptions(!shared.isString(item.children) && !shared.isArray(item.children) && shared.isFunction((_b2 = item.children) == null ? void 0 : _b2[\"default\"]) ? (_c = item.children) == null ? void 0 : _c[\"default\"]() : item.children);\n          } else if (name === \"ElOption\") {\n            valueList.push((_d = item.props) == null ? void 0 : _d.value);\n          } else if (shared.isArray(item.children)) {\n            filterOptions(item.children);\n          }\n        });\n      }\n      if (children.length) {\n        filterOptions((_b = children[0]) == null ? void 0 : _b.children);\n      }\n      if (!lodashUnified.isEqual(valueList, cachedValueList)) {\n        cachedValueList = valueList;\n        if (select) {\n          select.states.optionValues = valueList;\n        }\n      }\n      return children;\n    };\n  }\n});\nexports[\"default\"] = ElOptions;","map":{"version":3,"names":["ElOptions","vue","defineComponent","name","setup","_","_ref","slots","select","inject","token","selectKey","cachedValueList","_a","_b","children","call","valueList","filterOptions","children2","shared","isArray","forEach","item","_a2","_b2","_c","_d","type","isString","isFunction","push","props","value","length","lodashUnified","isEqual","states","optionValues"],"sources":["../../../../../../packages/components/select/src/options.ts"],"sourcesContent":["import { defineComponent, inject } from 'vue'\nimport { isEqual } from 'lodash-unified'\nimport { isArray, isFunction, isString } from '@element-plus/utils'\nimport { selectKey } from './token'\n\nimport type { Component, VNode, VNodeNormalizedChildren } from 'vue'\nimport type { OptionValue } from './type'\n\nexport default defineComponent({\n  name: 'ElOptions',\n  setup(_, { slots }) {\n    const select = inject(selectKey)\n    let cachedValueList: OptionValue[] = []\n\n    return () => {\n      const children = slots.default?.()!\n      const valueList: OptionValue[] = []\n\n      function filterOptions(children?: VNodeNormalizedChildren) {\n        if (!isArray(children)) return\n        ;(children as VNode[]).forEach((item) => {\n          const name = ((item?.type || {}) as Component)?.name\n\n          if (name === 'ElOptionGroup') {\n            filterOptions(\n              !isString(item.children) &&\n                !isArray(item.children) &&\n                isFunction(item.children?.default)\n                ? item.children?.default()\n                : item.children\n            )\n          } else if (name === 'ElOption') {\n            valueList.push(item.props?.value)\n          } else if (isArray(item.children)) {\n            filterOptions(item.children)\n          }\n        })\n      }\n\n      if (children.length) {\n        filterOptions(children[0]?.children)\n      }\n\n      if (!isEqual(valueList, cachedValueList)) {\n        cachedValueList = valueList\n        if (select) {\n          select.states.optionValues = valueList\n        }\n      }\n\n      return children\n    }\n  },\n})\n"],"mappings":";;;;;;;;;;;;;;;;;AAIA,IAAAA,SAAA,GAAeC,GAAA,CAAAC,eAAe,CAAC;EAC7BC,IAAI,EAAE,WAAW;EACjBC,KAAK,WAALA,KAAKA,CAACC,CAAC,EAAAC,IAAA,EAAa;IAAA,IAATC,KAAK,GAAAD,IAAA,CAALC,KAAK;IACd,IAAMC,MAAM,GAAGP,GAAA,CAAAQ,MAAM,CAACC,KAAA,CAAAC,SAAS,CAAC;IAChC,IAAIC,eAAe,GAAG,EAAE;IACxB,OAAO,YAAM;MACX,IAAIC,EAAE,EAAEC,EAAE;MACV,IAAMC,QAAQ,GAAG,CAACF,EAAE,GAAGN,KAAK,WAAQ,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGM,EAAE,CAACG,IAAI,CAACT,KAAK,CAAC;MACvE,IAAMU,SAAS,GAAG,EAAE;MACpB,SAASC,aAAaA,CAACC,SAAS,EAAE;QAChC,IAAI,CAACC,MAAA,CAAAC,OAAO,CAACF,SAAS,CAAC,EACrB;QACFA,SAAS,CAACG,OAAO,CAAC,UAACC,IAAI,EAAK;UAC1B,IAAIC,GAAG,EAAEC,GAAG,EAAEC,EAAE,EAAEC,EAAE;UACpB,IAAMxB,IAAI,GAAG,CAACqB,GAAG,GAAG,CAACD,IAAI,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,IAAI,CAACK,IAAI,KAAK,EAAE,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGJ,GAAG,CAACrB,IAAI;UAC1F,IAAIA,IAAI,KAAK,eAAe,EAAE;YAC5Be,aAAa,CAAC,CAACE,MAAA,CAAAS,QAAQ,CAACN,IAAI,CAACR,QAAQ,CAAC,IAAI,CAACK,MAAA,CAAAC,OAAO,CAACE,IAAI,CAACR,QAAQ,CAAC,IAAIK,MAAA,CAAAU,UAAU,CAAC,CAACL,GAAG,GAAGF,IAAI,CAACR,QAAQ,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGU,GAAG,WAAQ,CAAC,GAAG,CAACC,EAAE,GAAGH,IAAI,CAACR,QAAQ,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGW,EAAE,WAAQ,EAAE,GAAGH,IAAI,CAACR,QAAQ,CAAC;UACzN,CAAW,MAAM,IAAIZ,IAAI,KAAK,UAAU,EAAE;YAC9Bc,SAAS,CAACc,IAAI,CAAC,CAACJ,EAAE,GAAGJ,IAAI,CAACS,KAAK,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGL,EAAE,CAACM,KAAK,CAAC;UACzE,CAAW,MAAM,IAAIb,MAAA,CAAAC,OAAO,CAACE,IAAI,CAACR,QAAQ,CAAC,EAAE;YACjCG,aAAa,CAACK,IAAI,CAACR,QAAQ,CAAC;UACxC;QACA,CAAS,CAAC;MACV;MACM,IAAIA,QAAQ,CAACmB,MAAM,EAAE;QACnBhB,aAAa,CAAC,CAACJ,EAAE,GAAGC,QAAQ,CAAC,CAAC,CAAC,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGD,EAAE,CAACC,QAAQ,CAAC;MACxE;MACM,IAAI,CAACoB,aAAA,CAAAC,OAAO,CAACnB,SAAS,EAAEL,eAAe,CAAC,EAAE;QACxCA,eAAe,GAAGK,SAAS;QAC3B,IAAIT,MAAM,EAAE;UACVA,MAAM,CAAC6B,MAAM,CAACC,YAAY,GAAGrB,SAAS;QAChD;MACA;MACM,OAAOF,QAAQ;IACrB,CAAK;EACL;AACA,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}