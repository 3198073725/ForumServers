{"ast":null,"code":"import \"core-js/modules/es.string.trim.js\";\nimport { createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, withModifiers as _withModifiers, openBlock as _openBlock, createBlock as _createBlock, withCtx as _withCtx, createElementBlock as _createElementBlock, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass, withKeys as _withKeys } from \"vue\";\nvar _hoisted_1 = {\n  \"class\": \"user-info\"\n};\nvar _hoisted_2 = {\n  \"class\": \"username\"\n};\nvar _hoisted_3 = {\n  \"class\": \"header-actions\"\n};\nvar _hoisted_4 = {\n  key: 0,\n  \"class\": \"chat-body\"\n};\nvar _hoisted_5 = {\n  \"class\": \"message-container\",\n  ref: \"messageContainer\"\n};\nvar _hoisted_6 = {\n  key: 0,\n  \"class\": \"loading-messages\"\n};\nvar _hoisted_7 = {\n  key: 1,\n  \"class\": \"no-messages\"\n};\nvar _hoisted_8 = {\n  key: 0,\n  \"class\": \"load-more\"\n};\nvar _hoisted_9 = {\n  \"class\": \"message-content\"\n};\nvar _hoisted_10 = {\n  \"class\": \"message-text\"\n};\nvar _hoisted_11 = {\n  \"class\": \"message-time\"\n};\nvar _hoisted_12 = {\n  \"class\": \"message-input\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_el_avatar = _resolveComponent(\"el-avatar\");\n  var _component_el_button = _resolveComponent(\"el-button\");\n  var _component_Loading = _resolveComponent(\"Loading\");\n  var _component_el_icon = _resolveComponent(\"el-icon\");\n  var _component_el_input = _resolveComponent(\"el-input\");\n  return _openBlock(), _createElementBlock(\"div\", {\n    \"class\": _normalizeClass([\"chat-window\", {\n      'is-minimized': $setup.minimized\n    }])\n  }, [_createCommentVNode(\" 聊天窗口标题栏 \"), _createElementVNode(\"div\", {\n    \"class\": \"chat-header\",\n    onClick: _cache[0] || (_cache[0] = function () {\n      return $setup.toggleMinimize && $setup.toggleMinimize.apply($setup, arguments);\n    })\n  }, [_createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_el_avatar, {\n    size: 24,\n    src: $setup.chatUser.avatar_url\n  }, null, 8 /* PROPS */, [\"src\"]), _createElementVNode(\"span\", _hoisted_2, _toDisplayString($setup.chatUser.nickname || $setup.chatUser.username), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_3, [!$setup.minimized ? (_openBlock(), _createBlock(_component_el_button, {\n    key: 0,\n    \"class\": \"action-button\",\n    icon: $setup.Minus,\n    circle: \"\",\n    onClick: _withModifiers($setup.minimize, [\"stop\"])\n  }, null, 8 /* PROPS */, [\"icon\", \"onClick\"])) : (_openBlock(), _createBlock(_component_el_button, {\n    key: 1,\n    \"class\": \"action-button\",\n    icon: $setup.ArrowUp,\n    circle: \"\",\n    onClick: _withModifiers($setup.maximize, [\"stop\"])\n  }, null, 8 /* PROPS */, [\"icon\", \"onClick\"])), _createVNode(_component_el_button, {\n    \"class\": \"action-button\",\n    icon: $setup.Close,\n    circle: \"\",\n    onClick: _withModifiers($setup.closeChat, [\"stop\"])\n  }, null, 8 /* PROPS */, [\"icon\", \"onClick\"])])]), _createCommentVNode(\" 聊天消息区域 \"), !$setup.minimized ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [$setup.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [_createVNode(_component_el_icon, {\n    \"class\": \"is-loading\"\n  }, {\n    \"default\": _withCtx(function () {\n      return [_createVNode(_component_Loading)];\n    }),\n    _: 1 /* STABLE */\n  }), _cache[2] || (_cache[2] = _createElementVNode(\"span\", null, \"加载中...\", -1 /* HOISTED */))])) : $setup.messages.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, _cache[3] || (_cache[3] = [_createElementVNode(\"p\", null, \"暂无消息记录，发送一条消息开始聊天吧！\", -1 /* HOISTED */)]))) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 2\n  }, [$setup.hasMoreMessages ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [_createVNode(_component_el_button, {\n    type: \"text\",\n    onClick: $setup.loadMoreMessages,\n    loading: $setup.loadingMore\n  }, {\n    \"default\": _withCtx(function () {\n      return _cache[4] || (_cache[4] = [_createTextVNode(\" 加载更多消息 \")]);\n    }),\n    _: 1 /* STABLE */,\n    __: [4]\n  }, 8 /* PROPS */, [\"onClick\", \"loading\"])])) : _createCommentVNode(\"v-if\", true), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.sortedMessages, function (message) {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: message.id,\n      \"class\": _normalizeClass([\"message\", {\n        'outgoing': message.senderId === $setup.currentUserId\n      }])\n    }, [message.senderId !== $setup.currentUserId ? (_openBlock(), _createBlock(_component_el_avatar, {\n      key: 0,\n      size: 32,\n      src: $setup.chatUser.avatar_url\n    }, null, 8 /* PROPS */, [\"src\"])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, _toDisplayString(message.content), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_11, _toDisplayString($setup.formatTime(message.timestamp)), 1 /* TEXT */)]), message.senderId === $setup.currentUserId ? (_openBlock(), _createBlock(_component_el_avatar, {\n      key: 1,\n      size: 32,\n      src: $setup.currentUser.avatar_url\n    }, null, 8 /* PROPS */, [\"src\"])) : _createCommentVNode(\"v-if\", true)], 2 /* CLASS */);\n  }), 128 /* KEYED_FRAGMENT */))], 64 /* STABLE_FRAGMENT */))], 512 /* NEED_PATCH */), _createCommentVNode(\" 消息输入区域 \"), _createElementVNode(\"div\", _hoisted_12, [_createVNode(_component_el_input, {\n    modelValue: $setup.messageText,\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = function ($event) {\n      return $setup.messageText = $event;\n    }),\n    type: \"textarea\",\n    rows: 2,\n    placeholder: \"输入消息...\",\n    resize: \"none\",\n    onKeydown: _withKeys(_withModifiers($setup.sendMessage, [\"prevent\"]), [\"enter\"])\n  }, null, 8 /* PROPS */, [\"modelValue\", \"onKeydown\"]), _createVNode(_component_el_button, {\n    type: \"primary\",\n    icon: $setup.Send,\n    onClick: $setup.sendMessage,\n    disabled: !$setup.messageText.trim()\n  }, {\n    \"default\": _withCtx(function () {\n      return _cache[5] || (_cache[5] = [_createTextVNode(\" 发送 \")]);\n    }),\n    _: 1 /* STABLE */,\n    __: [5]\n  }, 8 /* PROPS */, [\"icon\", \"onClick\", \"disabled\"])])])) : _createCommentVNode(\"v-if\", true)], 2 /* CLASS */);\n}","map":{"version":3,"names":["key","ref","_createElementBlock","_normalizeClass","$setup","minimized","_createCommentVNode","_createElementVNode","onClick","_cache","toggleMinimize","apply","arguments","_hoisted_1","_createVNode","_component_el_avatar","size","src","chatUser","avatar_url","_hoisted_2","_toDisplayString","nickname","username","_hoisted_3","_createBlock","_component_el_button","icon","Minus","circle","_withModifiers","minimize","ArrowUp","maximize","Close","closeChat","_hoisted_4","_hoisted_5","loading","_hoisted_6","_component_el_icon","_withCtx","_component_Loading","_","messages","length","_hoisted_7","_Fragment","hasMoreMessages","_hoisted_8","type","loadMoreMessages","loadingMore","_createTextVNode","__","_renderList","sortedMessages","message","id","senderId","currentUserId","_hoisted_9","_hoisted_10","content","_hoisted_11","formatTime","timestamp","currentUser","_hoisted_12","_component_el_input","modelValue","messageText","$event","rows","placeholder","resize","onKeydown","_withKeys","sendMessage","Send","disabled","trim"],"sources":["H:\\ForumServers\\ForumFrontend\\src\\components\\ChatWindow.vue"],"sourcesContent":["<template>\r\n  <div class=\"chat-window\" :class=\"{ 'is-minimized': minimized }\">\r\n    <!-- 聊天窗口标题栏 -->\r\n    <div class=\"chat-header\" @click=\"toggleMinimize\">\r\n      <div class=\"user-info\">\r\n        <el-avatar :size=\"24\" :src=\"chatUser.avatar_url\" />\r\n        <span class=\"username\">{{ chatUser.nickname || chatUser.username }}</span>\r\n      </div>\r\n      <div class=\"header-actions\">\r\n        <el-button v-if=\"!minimized\" class=\"action-button\" :icon=\"Minus\" circle @click.stop=\"minimize\" />\r\n        <el-button v-else class=\"action-button\" :icon=\"ArrowUp\" circle @click.stop=\"maximize\" />\r\n        <el-button class=\"action-button\" :icon=\"Close\" circle @click.stop=\"closeChat\" />\r\n      </div>\r\n    </div>\r\n    \r\n    <!-- 聊天消息区域 -->\r\n    <div v-if=\"!minimized\" class=\"chat-body\">\r\n      <div class=\"message-container\" ref=\"messageContainer\">\r\n        <div v-if=\"loading\" class=\"loading-messages\">\r\n          <el-icon class=\"is-loading\"><Loading /></el-icon>\r\n          <span>加载中...</span>\r\n        </div>\r\n        \r\n        <div v-else-if=\"messages.length === 0\" class=\"no-messages\">\r\n          <p>暂无消息记录，发送一条消息开始聊天吧！</p>\r\n        </div>\r\n        \r\n        <template v-else>\r\n          <div v-if=\"hasMoreMessages\" class=\"load-more\">\r\n            <el-button type=\"text\" @click=\"loadMoreMessages\" :loading=\"loadingMore\">\r\n              加载更多消息\r\n            </el-button>\r\n          </div>\r\n          \r\n          <div \r\n            v-for=\"message in sortedMessages\" \r\n            :key=\"message.id\" \r\n            class=\"message\" \r\n            :class=\"{ 'outgoing': message.senderId === currentUserId }\"\r\n          >\r\n            <el-avatar \r\n              v-if=\"message.senderId !== currentUserId\" \r\n              :size=\"32\" \r\n              :src=\"chatUser.avatar_url\" \r\n            />\r\n            \r\n            <div class=\"message-content\">\r\n              <div class=\"message-text\">{{ message.content }}</div>\r\n              <div class=\"message-time\">{{ formatTime(message.timestamp) }}</div>\r\n            </div>\r\n            \r\n            <el-avatar \r\n              v-if=\"message.senderId === currentUserId\" \r\n              :size=\"32\" \r\n              :src=\"currentUser.avatar_url\" \r\n            />\r\n          </div>\r\n        </template>\r\n      </div>\r\n      \r\n      <!-- 消息输入区域 -->\r\n      <div class=\"message-input\">\r\n        <el-input\r\n          v-model=\"messageText\"\r\n          type=\"textarea\"\r\n          :rows=\"2\"\r\n          placeholder=\"输入消息...\"\r\n          resize=\"none\"\r\n          @keydown.enter.prevent=\"sendMessage\"\r\n        />\r\n        <el-button type=\"primary\" :icon=\"Send\" @click=\"sendMessage\" :disabled=\"!messageText.trim()\">\r\n          发送\r\n        </el-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed, watch, nextTick, onMounted, onUnmounted } from 'vue';\r\nimport { useStore } from 'vuex';\r\nimport { ElMessage } from 'element-plus';\r\nimport { Close, Minus, ArrowUp, Send, Loading } from '@element-plus/icons-vue';\r\nimport wsManager from '@/utils/websocket';\r\nimport { sendMessage as sendMessageApi } from '@/api/messages';\r\n\r\nexport default {\r\n  name: 'ChatWindow',\r\n  props: {\r\n    userId: {\r\n      type: [Number, String],\r\n      required: true\r\n    }\r\n  },\r\n  emits: ['close'],\r\n  setup(props, { emit }) {\r\n    const store = useStore();\r\n    const messageContainer = ref(null);\r\n    const messageText = ref('');\r\n    const minimized = ref(false);\r\n    const loading = ref(true);\r\n    const loadingMore = ref(false);\r\n    \r\n    // 计算属性\r\n    const currentUser = computed(() => store.state.user);\r\n    const currentUserId = computed(() => store.getters.userId);\r\n    const messages = computed(() => store.getters['chat/messagesByUserId'](props.userId) || []);\r\n    const hasMoreMessages = computed(() => store.getters['chat/hasMoreMessages'](props.userId));\r\n    const chatUser = computed(() => {\r\n      // 这里应该从用户缓存中获取用户信息\r\n      // 简单实现，实际应用中应该有更完善的用户信息获取机制\r\n      return {\r\n        id: props.userId,\r\n        username: `用户${props.userId}`,\r\n        nickname: null,\r\n        avatar_url: null\r\n      };\r\n    });\r\n    \r\n    // 按时间排序的消息列表\r\n    const sortedMessages = computed(() => {\r\n      return [...messages.value].sort((a, b) => {\r\n        return new Date(a.timestamp) - new Date(b.timestamp);\r\n      });\r\n    });\r\n    \r\n    // 监听消息列表变化，自动滚动到底部\r\n    watch(sortedMessages, () => {\r\n      nextTick(() => {\r\n        scrollToBottom();\r\n      });\r\n    });\r\n    \r\n    // 初始化\r\n    onMounted(async () => {\r\n      // 连接WebSocket\r\n      wsManager.connectChat(props.userId);\r\n      \r\n      // 加载消息历史\r\n      await loadMessages();\r\n      \r\n      // 标记消息为已读\r\n      store.dispatch('chat/markMessagesAsRead', props.userId);\r\n    });\r\n    \r\n    // 组件销毁时断开WebSocket连接\r\n    onUnmounted(() => {\r\n      wsManager.disconnectChat(props.userId);\r\n    });\r\n    \r\n    // 加载消息\r\n    const loadMessages = async () => {\r\n      loading.value = true;\r\n      try {\r\n        await store.dispatch('chat/fetchMessagesWithUser', {\r\n          userId: props.userId,\r\n          page: 1\r\n        });\r\n        \r\n        // 滚动到底部\r\n        nextTick(() => {\r\n          scrollToBottom();\r\n        });\r\n      } catch (error) {\r\n        console.error('加载消息失败:', error);\r\n        ElMessage.error('加载消息失败');\r\n      } finally {\r\n        loading.value = false;\r\n      }\r\n    };\r\n    \r\n    // 加载更多消息\r\n    const loadMoreMessages = async () => {\r\n      if (loadingMore.value || !hasMoreMessages.value) return;\r\n      \r\n      loadingMore.value = true;\r\n      try {\r\n        await store.dispatch('chat/loadMoreMessages', props.userId);\r\n      } catch (error) {\r\n        console.error('加载更多消息失败:', error);\r\n        ElMessage.error('加载更多消息失败');\r\n      } finally {\r\n        loadingMore.value = false;\r\n      }\r\n    };\r\n    \r\n    // 发送消息\r\n    const sendMessage = async () => {\r\n      const content = messageText.value.trim();\r\n      if (!content) return;\r\n      \r\n      try {\r\n        // 通过WebSocket发送消息\r\n        wsManager.sendChatMessage(props.userId, content);\r\n        \r\n        // 备用方案：通过API发送消息\r\n        await sendMessageApi(props.userId, content);\r\n        \r\n        // 清空输入框\r\n        messageText.value = '';\r\n      } catch (error) {\r\n        console.error('发送消息失败:', error);\r\n        ElMessage.error('发送消息失败');\r\n      }\r\n    };\r\n    \r\n    // 滚动到底部\r\n    const scrollToBottom = () => {\r\n      if (messageContainer.value) {\r\n        messageContainer.value.scrollTop = messageContainer.value.scrollHeight;\r\n      }\r\n    };\r\n    \r\n    // 最小化聊天窗口\r\n    const minimize = () => {\r\n      minimized.value = true;\r\n    };\r\n    \r\n    // 最大化聊天窗口\r\n    const maximize = () => {\r\n      minimized.value = false;\r\n      // 恢复窗口后滚动到底部\r\n      nextTick(() => {\r\n        scrollToBottom();\r\n      });\r\n    };\r\n    \r\n    // 切换最小化/最大化\r\n    const toggleMinimize = () => {\r\n      minimized.value = !minimized.value;\r\n      if (!minimized.value) {\r\n        nextTick(() => {\r\n          scrollToBottom();\r\n        });\r\n      }\r\n    };\r\n    \r\n    // 关闭聊天窗口\r\n    const closeChat = () => {\r\n      emit('close', props.userId);\r\n    };\r\n    \r\n    // 格式化时间\r\n    const formatTime = (timestamp) => {\r\n      const date = new Date(timestamp);\r\n      const now = new Date();\r\n      const isToday = date.toDateString() === now.toDateString();\r\n      const isYesterday = new Date(now - 86400000).toDateString() === date.toDateString();\r\n      \r\n      // 格式化时间部分\r\n      const hours = date.getHours().toString().padStart(2, '0');\r\n      const minutes = date.getMinutes().toString().padStart(2, '0');\r\n      const timeStr = `${hours}:${minutes}`;\r\n      \r\n      // 今天的消息只显示时间\r\n      if (isToday) {\r\n        return timeStr;\r\n      }\r\n      \r\n      // 昨天的消息显示\"昨天 HH:MM\"\r\n      if (isYesterday) {\r\n        return `昨天 ${timeStr}`;\r\n      }\r\n      \r\n      // 今年的消息显示\"MM-DD HH:MM\"\r\n      if (date.getFullYear() === now.getFullYear()) {\r\n        const month = (date.getMonth() + 1).toString().padStart(2, '0');\r\n        const day = date.getDate().toString().padStart(2, '0');\r\n        return `${month}-${day} ${timeStr}`;\r\n      }\r\n      \r\n      // 其他情况显示完整日期\"YYYY-MM-DD HH:MM\"\r\n      return `${date.getFullYear()}-${(date.getMonth() + 1).toString().padStart(2, '0')}-${date.getDate().toString().padStart(2, '0')} ${timeStr}`;\r\n    };\r\n    \r\n    return {\r\n      messageContainer,\r\n      messageText,\r\n      minimized,\r\n      loading,\r\n      loadingMore,\r\n      currentUser,\r\n      currentUserId,\r\n      messages,\r\n      sortedMessages,\r\n      hasMoreMessages,\r\n      chatUser,\r\n      loadMessages,\r\n      loadMoreMessages,\r\n      sendMessage,\r\n      minimize,\r\n      maximize,\r\n      toggleMinimize,\r\n      closeChat,\r\n      formatTime,\r\n      // 图标\r\n      Close,\r\n      Minus,\r\n      ArrowUp,\r\n      Send,\r\n      Loading\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.chat-window {\r\n  width: 320px;\r\n  height: 400px;\r\n  border: 1px solid #dcdfe6;\r\n  border-radius: 4px;\r\n  background-color: #fff;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n  display: flex;\r\n  flex-direction: column;\r\n  position: fixed;\r\n  bottom: 0;\r\n  right: 20px;\r\n  z-index: 1000;\r\n  transition: height 0.3s;\r\n}\r\n\r\n.chat-window.is-minimized {\r\n  height: 40px;\r\n}\r\n\r\n.chat-header {\r\n  height: 40px;\r\n  padding: 0 10px;\r\n  background-color: #409eff;\r\n  color: white;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  cursor: pointer;\r\n  user-select: none;\r\n}\r\n\r\n.user-info {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.username {\r\n  margin-left: 8px;\r\n  font-weight: bold;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.header-actions {\r\n  display: flex;\r\n  gap: 5px;\r\n}\r\n\r\n.action-button {\r\n  padding: 2px;\r\n  color: white;\r\n  background: transparent;\r\n  border: none;\r\n}\r\n\r\n.action-button:hover {\r\n  background-color: rgba(255, 255, 255, 0.2);\r\n}\r\n\r\n.chat-body {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n}\r\n\r\n.message-container {\r\n  flex: 1;\r\n  padding: 10px;\r\n  overflow-y: auto;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.loading-messages {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  color: #909399;\r\n}\r\n\r\n.no-messages {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  color: #909399;\r\n  text-align: center;\r\n}\r\n\r\n.load-more {\r\n  text-align: center;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.message {\r\n  display: flex;\r\n  margin-bottom: 10px;\r\n  align-items: flex-start;\r\n}\r\n\r\n.message.outgoing {\r\n  flex-direction: row-reverse;\r\n}\r\n\r\n.message-content {\r\n  max-width: 70%;\r\n  margin: 0 8px;\r\n}\r\n\r\n.message-text {\r\n  padding: 8px 12px;\r\n  border-radius: 4px;\r\n  background-color: #f4f4f5;\r\n  word-break: break-word;\r\n  line-height: 1.4;\r\n}\r\n\r\n.message.outgoing .message-text {\r\n  background-color: #ecf5ff;\r\n  color: #409eff;\r\n}\r\n\r\n.message-time {\r\n  font-size: 12px;\r\n  color: #909399;\r\n  margin-top: 4px;\r\n  text-align: right;\r\n}\r\n\r\n.message.outgoing .message-time {\r\n  text-align: left;\r\n}\r\n\r\n.message-input {\r\n  padding: 10px;\r\n  border-top: 1px solid #ebeef5;\r\n  display: flex;\r\n  align-items: flex-end;\r\n}\r\n\r\n.message-input .el-input {\r\n  margin-right: 10px;\r\n}\r\n\r\n.message-input .el-button {\r\n  height: 40px;\r\n}\r\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}