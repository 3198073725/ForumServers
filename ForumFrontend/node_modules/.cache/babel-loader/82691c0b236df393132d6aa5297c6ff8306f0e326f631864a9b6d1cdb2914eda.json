{"ast":null,"code":"'use strict';\n\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/web.timers.js\");\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nvar types = require('../../utils/types.js');\nvar shared = require('@vue/shared');\nvar useThrottleRender = function useThrottleRender(loading) {\n  var throttle = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  if (throttle === 0) return loading;\n  var initVal = shared.isObject(throttle) && Boolean(throttle.initVal);\n  var throttled = vue.ref(initVal);\n  var timeoutHandle = null;\n  var dispatchThrottling = function dispatchThrottling(timer) {\n    if (types.isUndefined(timer)) {\n      throttled.value = loading.value;\n      return;\n    }\n    if (timeoutHandle) {\n      clearTimeout(timeoutHandle);\n    }\n    timeoutHandle = setTimeout(function () {\n      throttled.value = loading.value;\n    }, timer);\n  };\n  var dispatcher = function dispatcher(type) {\n    if (type === \"leading\") {\n      if (types.isNumber(throttle)) {\n        dispatchThrottling(throttle);\n      } else {\n        dispatchThrottling(throttle.leading);\n      }\n    } else {\n      if (shared.isObject(throttle)) {\n        dispatchThrottling(throttle.trailing);\n      } else {\n        throttled.value = false;\n      }\n    }\n  };\n  vue.onMounted(function () {\n    return dispatcher(\"leading\");\n  });\n  vue.watch(function () {\n    return loading.value;\n  }, function (val) {\n    dispatcher(val ? \"leading\" : \"trailing\");\n  });\n  return throttled;\n};\nexports.useThrottleRender = useThrottleRender;","map":{"version":3,"names":["useThrottleRender","loading","throttle","arguments","length","undefined","initVal","shared","isObject","Boolean","throttled","vue","ref","timeoutHandle","dispatchThrottling","timer","types","isUndefined","value","clearTimeout","setTimeout","dispatcher","type","isNumber","leading","trailing","onMounted","watch","val"],"sources":["../../../../../packages/hooks/use-throttle-render/index.ts"],"sourcesContent":["import { onMounted, ref, watch } from 'vue'\nimport { isNumber, isObject, isUndefined } from '@element-plus/utils'\n\nimport type { Ref } from 'vue'\n\nexport type ThrottleType =\n  | { leading?: number; trailing?: number; initVal?: boolean }\n  | number\n\nexport const useThrottleRender = (\n  loading: Ref<boolean>,\n  throttle: ThrottleType = 0\n) => {\n  if (throttle === 0) return loading\n  const initVal = isObject(throttle) && Boolean(throttle.initVal)\n  const throttled = ref(initVal)\n  let timeoutHandle: ReturnType<typeof setTimeout> | null = null\n\n  const dispatchThrottling = (timer: number | undefined) => {\n    if (isUndefined(timer)) {\n      throttled.value = loading.value\n      return\n    }\n    if (timeoutHandle) {\n      clearTimeout(timeoutHandle)\n    }\n    timeoutHandle = setTimeout(() => {\n      throttled.value = loading.value\n    }, timer)\n  }\n\n  const dispatcher = (type: 'leading' | 'trailing') => {\n    if (type === 'leading') {\n      if (isNumber(throttle)) {\n        dispatchThrottling(throttle)\n      } else {\n        dispatchThrottling(throttle.leading)\n      }\n    } else {\n      if (isObject(throttle)) {\n        dispatchThrottling(throttle.trailing)\n      } else {\n        throttled.value = false\n      }\n    }\n  }\n\n  onMounted(() => dispatcher('leading'))\n\n  watch(\n    () => loading.value,\n    (val) => {\n      dispatcher(val ? 'leading' : 'trailing')\n    }\n  )\n\n  return throttled\n}\n"],"mappings":";;;;;;;;;;AAEY,IAACA,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAIC,OAAO,EAAmB;EAAA,IAAjBC,QAAQ,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC;EACrD,IAAID,QAAQ,KAAK,CAAC,EAChB,OAAOD,OAAO;EAChB,IAAMK,OAAO,GAAGC,MAAA,CAAAC,QAAQ,CAACN,QAAQ,CAAC,IAAIO,OAAO,CAACP,QAAQ,CAACI,OAAO,CAAC;EAC/D,IAAMI,SAAS,GAAGC,GAAA,CAAAC,GAAG,CAACN,OAAO,CAAC;EAC9B,IAAIO,aAAa,GAAG,IAAI;EACxB,IAAMC,kBAAkB,GAAG,SAArBA,kBAAkBA,CAAIC,KAAK,EAAK;IACpC,IAAIC,KAAA,CAAAC,WAAW,CAACF,KAAK,CAAC,EAAE;MACtBL,SAAS,CAACQ,KAAK,GAAGjB,OAAO,CAACiB,KAAK;MAC/B;IACN;IACI,IAAIL,aAAa,EAAE;MACjBM,YAAY,CAACN,aAAa,CAAC;IACjC;IACIA,aAAa,GAAGO,UAAU,CAAC,YAAM;MAC/BV,SAAS,CAACQ,KAAK,GAAGjB,OAAO,CAACiB,KAAK;IACrC,CAAK,EAAEH,KAAK,CAAC;EACb,CAAG;EACD,IAAMM,UAAU,GAAG,SAAbA,UAAUA,CAAIC,IAAI,EAAK;IAC3B,IAAIA,IAAI,KAAK,SAAS,EAAE;MACtB,IAAIN,KAAA,CAAAO,QAAQ,CAACrB,QAAQ,CAAC,EAAE;QACtBY,kBAAkB,CAACZ,QAAQ,CAAC;MACpC,CAAO,MAAM;QACLY,kBAAkB,CAACZ,QAAQ,CAACsB,OAAO,CAAC;MAC5C;IACA,CAAK,MAAM;MACL,IAAIjB,MAAA,CAAAC,QAAQ,CAACN,QAAQ,CAAC,EAAE;QACtBY,kBAAkB,CAACZ,QAAQ,CAACuB,QAAQ,CAAC;MAC7C,CAAO,MAAM;QACLf,SAAS,CAACQ,KAAK,GAAG,KAAK;MAC/B;IACA;EACA,CAAG;EACDP,GAAA,CAAAe,SAAS,CAAC;IAAA,OAAML,UAAU,CAAC,SAAS,CAAC;EAAA,EAAC;EACtCV,GAAA,CAAAgB,KAAK,CAAC;IAAA,OAAM1B,OAAO,CAACiB,KAAK;EAAA,GAAE,UAACU,GAAG,EAAK;IAClCP,UAAU,CAACO,GAAG,GAAG,SAAS,GAAG,UAAU,CAAC;EAC5C,CAAG,CAAC;EACF,OAAOlB,SAAS;AAClB","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}