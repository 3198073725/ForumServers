{"ast":null,"code":"'use strict';\n\nvar _toConsumableArray = require(\"H:/ForumServers/ForumFrontend/node_modules/@babel/runtime/helpers/toConsumableArray.js\")[\"default\"];\nvar _classCallCheck = require(\"H:/ForumServers/ForumFrontend/node_modules/@babel/runtime/helpers/classCallCheck.js\")[\"default\"];\nvar _createClass = require(\"H:/ForumServers/ForumFrontend/node_modules/@babel/runtime/helpers/createClass.js\")[\"default\"];\nrequire(\"core-js/modules/es.error.cause.js\");\nrequire(\"core-js/modules/es.error.to-string.js\");\nrequire(\"core-js/modules/es.array.find-index.js\");\nrequire(\"core-js/modules/es.array.for-each.js\");\nrequire(\"core-js/modules/es.array.includes.js\");\nrequire(\"core-js/modules/es.array.index-of.js\");\nrequire(\"core-js/modules/es.array.map.js\");\nrequire(\"core-js/modules/es.array.push.js\");\nrequire(\"core-js/modules/es.array.some.js\");\nrequire(\"core-js/modules/es.array.splice.js\");\nrequire(\"core-js/modules/es.array.unshift.js\");\nrequire(\"core-js/modules/es.iterator.constructor.js\");\nrequire(\"core-js/modules/es.iterator.for-each.js\");\nrequire(\"core-js/modules/es.iterator.map.js\");\nrequire(\"core-js/modules/es.iterator.some.js\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.object.keys.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/es.string.includes.js\");\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nvar util = require('./util.js');\nvar shared = require('@vue/shared');\nvar types = require('../../../../utils/types.js');\nvar getChildState = function getChildState(node) {\n  var all = true;\n  var none = true;\n  var allWithoutDisable = true;\n  for (var i = 0, j = node.length; i < j; i++) {\n    var n = node[i];\n    if (n.checked !== true || n.indeterminate) {\n      all = false;\n      if (!n.disabled) {\n        allWithoutDisable = false;\n      }\n    }\n    if (n.checked !== false || n.indeterminate) {\n      none = false;\n    }\n  }\n  return {\n    all: all,\n    none: none,\n    allWithoutDisable: allWithoutDisable,\n    half: !all && !none\n  };\n};\nvar _reInitChecked = function reInitChecked(node) {\n  if (node.childNodes.length === 0 || node.loading) return;\n  var _getChildState = getChildState(node.childNodes),\n    all = _getChildState.all,\n    none = _getChildState.none,\n    half = _getChildState.half;\n  if (all) {\n    node.checked = true;\n    node.indeterminate = false;\n  } else if (half) {\n    node.checked = false;\n    node.indeterminate = true;\n  } else if (none) {\n    node.checked = false;\n    node.indeterminate = false;\n  }\n  var parent = node.parent;\n  if (!parent || parent.level === 0) return;\n  if (!node.store.checkStrictly) {\n    _reInitChecked(parent);\n  }\n};\nvar getPropertyFromData = function getPropertyFromData(node, prop) {\n  var props = node.store.props;\n  var data = node.data || {};\n  var config = props[prop];\n  if (shared.isFunction(config)) {\n    return config(data, node);\n  } else if (shared.isString(config)) {\n    return data[config];\n  } else if (types.isUndefined(config)) {\n    var dataProp = data[prop];\n    return types.isUndefined(dataProp) ? \"\" : dataProp;\n  }\n};\nvar nodeIdSeed = 0;\nvar Node = /*#__PURE__*/function () {\n  function Node(options) {\n    _classCallCheck(this, Node);\n    this.id = nodeIdSeed++;\n    this.text = null;\n    this.checked = false;\n    this.indeterminate = false;\n    this.data = null;\n    this.expanded = false;\n    this.parent = null;\n    this.visible = true;\n    this.isCurrent = false;\n    this.canFocus = false;\n    for (var name in options) {\n      if (shared.hasOwn(options, name)) {\n        this[name] = options[name];\n      }\n    }\n    this.level = 0;\n    this.loaded = false;\n    this.childNodes = [];\n    this.loading = false;\n    if (this.parent) {\n      this.level = this.parent.level + 1;\n    }\n  }\n  return _createClass(Node, [{\n    key: \"initialize\",\n    value: function initialize() {\n      var store = this.store;\n      if (!store) {\n        throw new Error(\"[Node]store is required!\");\n      }\n      store.registerNode(this);\n      var props = store.props;\n      if (props && typeof props.isLeaf !== \"undefined\") {\n        var isLeaf = getPropertyFromData(this, \"isLeaf\");\n        if (types.isBoolean(isLeaf)) {\n          this.isLeafByUser = isLeaf;\n        }\n      }\n      if (store.lazy !== true && this.data) {\n        this.setData(this.data);\n        if (store.defaultExpandAll) {\n          this.expanded = true;\n          this.canFocus = true;\n        }\n      } else if (this.level > 0 && store.lazy && store.defaultExpandAll && !this.isLeafByUser) {\n        this.expand();\n      }\n      if (!shared.isArray(this.data)) {\n        util.markNodeData(this, this.data);\n      }\n      if (!this.data) return;\n      var defaultExpandedKeys = store.defaultExpandedKeys;\n      var key = store.key;\n      if (key && defaultExpandedKeys && defaultExpandedKeys.includes(this.key)) {\n        this.expand(null, store.autoExpandParent);\n      }\n      if (key && store.currentNodeKey !== void 0 && this.key === store.currentNodeKey) {\n        store.currentNode = this;\n        store.currentNode.isCurrent = true;\n      }\n      if (store.lazy) {\n        store._initDefaultCheckedNode(this);\n      }\n      this.updateLeafState();\n      if (this.parent && (this.level === 1 || this.parent.expanded === true)) this.canFocus = true;\n    }\n  }, {\n    key: \"setData\",\n    value: function setData(data) {\n      if (!shared.isArray(data)) {\n        util.markNodeData(this, data);\n      }\n      this.data = data;\n      this.childNodes = [];\n      var children;\n      if (this.level === 0 && shared.isArray(this.data)) {\n        children = this.data;\n      } else {\n        children = getPropertyFromData(this, \"children\") || [];\n      }\n      for (var i = 0, j = children.length; i < j; i++) {\n        this.insertChild({\n          data: children[i]\n        });\n      }\n    }\n  }, {\n    key: \"label\",\n    get: function get() {\n      return getPropertyFromData(this, \"label\");\n    }\n  }, {\n    key: \"key\",\n    get: function get() {\n      var nodeKey = this.store.key;\n      if (this.data) return this.data[nodeKey];\n      return null;\n    }\n  }, {\n    key: \"disabled\",\n    get: function get() {\n      return getPropertyFromData(this, \"disabled\");\n    }\n  }, {\n    key: \"nextSibling\",\n    get: function get() {\n      var parent = this.parent;\n      if (parent) {\n        var index = parent.childNodes.indexOf(this);\n        if (index > -1) {\n          return parent.childNodes[index + 1];\n        }\n      }\n      return null;\n    }\n  }, {\n    key: \"previousSibling\",\n    get: function get() {\n      var parent = this.parent;\n      if (parent) {\n        var index = parent.childNodes.indexOf(this);\n        if (index > -1) {\n          return index > 0 ? parent.childNodes[index - 1] : null;\n        }\n      }\n      return null;\n    }\n  }, {\n    key: \"contains\",\n    value: function contains(target) {\n      var deep = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      return (this.childNodes || []).some(function (child) {\n        return child === target || deep && child.contains(target);\n      });\n    }\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      var parent = this.parent;\n      if (parent) {\n        parent.removeChild(this);\n      }\n    }\n  }, {\n    key: \"insertChild\",\n    value: function insertChild(child, index, batch) {\n      if (!child) throw new Error(\"InsertChild error: child is required.\");\n      if (!(child instanceof Node)) {\n        if (!batch) {\n          var children = this.getChildren(true);\n          if (!children.includes(child.data)) {\n            if (types.isUndefined(index) || index < 0) {\n              children.push(child.data);\n            } else {\n              children.splice(index, 0, child.data);\n            }\n          }\n        }\n        Object.assign(child, {\n          parent: this,\n          store: this.store\n        });\n        child = vue.reactive(new Node(child));\n        if (child instanceof Node) {\n          child.initialize();\n        }\n      }\n      child.level = this.level + 1;\n      if (types.isUndefined(index) || index < 0) {\n        this.childNodes.push(child);\n      } else {\n        this.childNodes.splice(index, 0, child);\n      }\n      this.updateLeafState();\n    }\n  }, {\n    key: \"insertBefore\",\n    value: function insertBefore(child, ref) {\n      var index;\n      if (ref) {\n        index = this.childNodes.indexOf(ref);\n      }\n      this.insertChild(child, index);\n    }\n  }, {\n    key: \"insertAfter\",\n    value: function insertAfter(child, ref) {\n      var index;\n      if (ref) {\n        index = this.childNodes.indexOf(ref);\n        if (index !== -1) index += 1;\n      }\n      this.insertChild(child, index);\n    }\n  }, {\n    key: \"removeChild\",\n    value: function removeChild(child) {\n      var children = this.getChildren() || [];\n      var dataIndex = children.indexOf(child.data);\n      if (dataIndex > -1) {\n        children.splice(dataIndex, 1);\n      }\n      var index = this.childNodes.indexOf(child);\n      if (index > -1) {\n        this.store && this.store.deregisterNode(child);\n        child.parent = null;\n        this.childNodes.splice(index, 1);\n      }\n      this.updateLeafState();\n    }\n  }, {\n    key: \"removeChildByData\",\n    value: function removeChildByData(data) {\n      var targetNode = null;\n      for (var i = 0; i < this.childNodes.length; i++) {\n        if (this.childNodes[i].data === data) {\n          targetNode = this.childNodes[i];\n          break;\n        }\n      }\n      if (targetNode) {\n        this.removeChild(targetNode);\n      }\n    }\n  }, {\n    key: \"expand\",\n    value: function expand(callback, expandParent) {\n      var _this = this;\n      var done = function done() {\n        if (expandParent) {\n          var parent = _this.parent;\n          while (parent.level > 0) {\n            parent.expanded = true;\n            parent = parent.parent;\n          }\n        }\n        _this.expanded = true;\n        if (callback) callback();\n        _this.childNodes.forEach(function (item) {\n          item.canFocus = true;\n        });\n      };\n      if (this.shouldLoadData()) {\n        this.loadData(function (data) {\n          if (shared.isArray(data)) {\n            if (_this.checked) {\n              _this.setChecked(true, true);\n            } else if (!_this.store.checkStrictly) {\n              _reInitChecked(_this);\n            }\n            done();\n          }\n        });\n      } else {\n        done();\n      }\n    }\n  }, {\n    key: \"doCreateChildren\",\n    value: function doCreateChildren(array) {\n      var _this2 = this;\n      var defaultProps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      array.forEach(function (item) {\n        _this2.insertChild(Object.assign({\n          data: item\n        }, defaultProps), void 0, true);\n      });\n    }\n  }, {\n    key: \"collapse\",\n    value: function collapse() {\n      this.expanded = false;\n      this.childNodes.forEach(function (item) {\n        item.canFocus = false;\n      });\n    }\n  }, {\n    key: \"shouldLoadData\",\n    value: function shouldLoadData() {\n      return this.store.lazy === true && this.store.load && !this.loaded;\n    }\n  }, {\n    key: \"updateLeafState\",\n    value: function updateLeafState() {\n      if (this.store.lazy === true && this.loaded !== true && typeof this.isLeafByUser !== \"undefined\") {\n        this.isLeaf = this.isLeafByUser;\n        return;\n      }\n      var childNodes = this.childNodes;\n      if (!this.store.lazy || this.store.lazy === true && this.loaded === true) {\n        this.isLeaf = !childNodes || childNodes.length === 0;\n        return;\n      }\n      this.isLeaf = false;\n    }\n  }, {\n    key: \"setChecked\",\n    value: function setChecked(value, deep, recursion, passValue) {\n      var _this3 = this;\n      this.indeterminate = value === \"half\";\n      this.checked = value === true;\n      if (this.store.checkStrictly) return;\n      if (!(this.shouldLoadData() && !this.store.checkDescendants)) {\n        var _getChildState2 = getChildState(this.childNodes),\n          all = _getChildState2.all,\n          allWithoutDisable = _getChildState2.allWithoutDisable;\n        if (!this.isLeaf && !all && allWithoutDisable) {\n          this.checked = false;\n          value = false;\n        }\n        var handleDescendants = function handleDescendants() {\n          if (deep) {\n            var childNodes = _this3.childNodes;\n            for (var i = 0, j = childNodes.length; i < j; i++) {\n              var child = childNodes[i];\n              passValue = passValue || value !== false;\n              var isCheck = child.disabled ? child.checked : passValue;\n              child.setChecked(isCheck, deep, true, passValue);\n            }\n            var _getChildState3 = getChildState(childNodes),\n              half = _getChildState3.half,\n              all2 = _getChildState3.all;\n            if (!all2) {\n              _this3.checked = all2;\n              _this3.indeterminate = half;\n            }\n          }\n        };\n        if (this.shouldLoadData()) {\n          this.loadData(function () {\n            handleDescendants();\n            _reInitChecked(_this3);\n          }, {\n            checked: value !== false\n          });\n          return;\n        } else {\n          handleDescendants();\n        }\n      }\n      var parent = this.parent;\n      if (!parent || parent.level === 0) return;\n      if (!recursion) {\n        _reInitChecked(parent);\n      }\n    }\n  }, {\n    key: \"getChildren\",\n    value: function getChildren() {\n      var forceInit = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      if (this.level === 0) return this.data;\n      var data = this.data;\n      if (!data) return null;\n      var props = this.store.props;\n      var children = \"children\";\n      if (props) {\n        children = props.children || \"children\";\n      }\n      if (types.isUndefined(data[children])) {\n        data[children] = null;\n      }\n      if (forceInit && !data[children]) {\n        data[children] = [];\n      }\n      return data[children];\n    }\n  }, {\n    key: \"updateChildren\",\n    value: function updateChildren() {\n      var _this4 = this;\n      var newData = this.getChildren() || [];\n      var oldData = this.childNodes.map(function (node) {\n        return node.data;\n      });\n      var newDataMap = {};\n      var newNodes = [];\n      newData.forEach(function (item, index) {\n        var key = item[util.NODE_KEY];\n        var isNodeExists = !!key && oldData.findIndex(function (data) {\n          return data[util.NODE_KEY] === key;\n        }) >= 0;\n        if (isNodeExists) {\n          newDataMap[key] = {\n            index: index,\n            data: item\n          };\n        } else {\n          newNodes.push({\n            index: index,\n            data: item\n          });\n        }\n      });\n      if (!this.store.lazy) {\n        oldData.forEach(function (item) {\n          if (!newDataMap[item[util.NODE_KEY]]) _this4.removeChildByData(item);\n        });\n      }\n      newNodes.forEach(function (_ref) {\n        var index = _ref.index,\n          data = _ref.data;\n        _this4.insertChild({\n          data: data\n        }, index);\n      });\n      this.updateLeafState();\n    }\n  }, {\n    key: \"loadData\",\n    value: function loadData(callback) {\n      var _this5 = this;\n      var defaultProps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      if (this.store.lazy === true && this.store.load && !this.loaded && (!this.loading || Object.keys(defaultProps).length)) {\n        this.loading = true;\n        var resolve = function resolve(children) {\n          _this5.childNodes = [];\n          _this5.doCreateChildren(children, defaultProps);\n          _this5.loaded = true;\n          _this5.loading = false;\n          _this5.updateLeafState();\n          if (callback) {\n            callback.call(_this5, children);\n          }\n        };\n        var reject = function reject() {\n          _this5.loading = false;\n        };\n        this.store.load(this, resolve, reject);\n      } else {\n        if (callback) {\n          callback.call(this);\n        }\n      }\n    }\n  }, {\n    key: \"eachNode\",\n    value: function eachNode(callback) {\n      var arr = [this];\n      while (arr.length) {\n        var node = arr.shift();\n        arr.unshift.apply(arr, _toConsumableArray(node.childNodes));\n        callback(node);\n      }\n    }\n  }, {\n    key: \"reInitChecked\",\n    value: function reInitChecked() {\n      if (this.store.checkStrictly) return;\n      _reInitChecked(this);\n    }\n  }]);\n}();\nexports[\"default\"] = Node;\nexports.getChildState = getChildState;","map":{"version":3,"names":["getChildState","node","all","none","allWithoutDisable","i","j","length","n","checked","indeterminate","disabled","half","reInitChecked","childNodes","loading","_getChildState","parent","level","store","checkStrictly","getPropertyFromData","prop","props","data","config","shared","isFunction","isString","types","isUndefined","dataProp","nodeIdSeed","Node","options","_classCallCheck","id","text","expanded","visible","isCurrent","canFocus","name","hasOwn","loaded","_createClass","key","value","initialize","Error","registerNode","isLeaf","isBoolean","isLeafByUser","lazy","setData","defaultExpandAll","expand","isArray","util","markNodeData","defaultExpandedKeys","includes","autoExpandParent","currentNodeKey","currentNode","_initDefaultCheckedNode","updateLeafState","children","insertChild","get","nodeKey","index","indexOf","contains","target","deep","arguments","undefined","some","child","remove","removeChild","batch","getChildren","push","splice","Object","assign","vue","reactive","insertBefore","ref","insertAfter","dataIndex","deregisterNode","removeChildByData","targetNode","callback","expandParent","_this","done","forEach","item","shouldLoadData","loadData","setChecked","doCreateChildren","array","_this2","defaultProps","collapse","load","recursion","passValue","_this3","checkDescendants","_getChildState2","handleDescendants","isCheck","_getChildState3","all2","forceInit","updateChildren","_this4","newData","oldData","map","newDataMap","newNodes","NODE_KEY","isNodeExists","findIndex","_ref","_this5","keys","resolve","call","reject","eachNode","arr","shift","unshift","apply","_toConsumableArray"],"sources":["../../../../../../../packages/components/tree/src/model/node.ts"],"sourcesContent":["// @ts-nocheck\nimport { reactive } from 'vue'\nimport {\n  hasOwn,\n  isArray,\n  isBoolean,\n  isFunction,\n  isString,\n  isUndefined,\n} from '@element-plus/utils'\nimport { NODE_KEY, markNodeData } from './util'\nimport type TreeStore from './tree-store'\n\nimport type { Nullable } from '@element-plus/utils'\nimport type {\n  FakeNode,\n  TreeKey,\n  TreeNodeChildState,\n  TreeNodeData,\n  TreeNodeLoadedDefaultProps,\n  TreeNodeOptions,\n} from '../tree.type'\n\nexport const getChildState = (node: Node[]): TreeNodeChildState => {\n  let all = true\n  let none = true\n  let allWithoutDisable = true\n  for (let i = 0, j = node.length; i < j; i++) {\n    const n = node[i]\n    if (n.checked !== true || n.indeterminate) {\n      all = false\n      if (!n.disabled) {\n        allWithoutDisable = false\n      }\n    }\n    if (n.checked !== false || n.indeterminate) {\n      none = false\n    }\n  }\n\n  return { all, none, allWithoutDisable, half: !all && !none }\n}\n\nconst reInitChecked = function (node: Node): void {\n  if (node.childNodes.length === 0 || node.loading) return\n\n  const { all, none, half } = getChildState(node.childNodes)\n  if (all) {\n    node.checked = true\n    node.indeterminate = false\n  } else if (half) {\n    node.checked = false\n    node.indeterminate = true\n  } else if (none) {\n    node.checked = false\n    node.indeterminate = false\n  }\n\n  const parent = node.parent\n  if (!parent || parent.level === 0) return\n\n  if (!node.store.checkStrictly) {\n    reInitChecked(parent)\n  }\n}\n\nconst getPropertyFromData = function (node: Node, prop: string): any {\n  const props = node.store.props\n  const data = node.data || {}\n  const config = props[prop]\n\n  if (isFunction(config)) {\n    return config(data, node)\n  } else if (isString(config)) {\n    return data[config]\n  } else if (isUndefined(config)) {\n    const dataProp = data[prop]\n    return isUndefined(dataProp) ? '' : dataProp\n  }\n}\n\nlet nodeIdSeed = 0\n\nclass Node {\n  id: number\n  text: string\n  checked: boolean\n  indeterminate: boolean\n  data: TreeNodeData\n  expanded: boolean\n  parent: Node\n  visible: boolean\n  isCurrent: boolean\n  store: TreeStore\n  isLeafByUser: boolean\n  isLeaf: boolean\n  canFocus: boolean\n\n  level: number\n  loaded: boolean\n  childNodes: Node[]\n  loading: boolean\n\n  constructor(options: TreeNodeOptions) {\n    this.id = nodeIdSeed++\n    this.text = null\n    this.checked = false\n    this.indeterminate = false\n    this.data = null\n    this.expanded = false\n    this.parent = null\n    this.visible = true\n    this.isCurrent = false\n    this.canFocus = false\n\n    for (const name in options) {\n      if (hasOwn(options, name)) {\n        this[name] = options[name]\n      }\n    }\n\n    // internal\n    this.level = 0\n    this.loaded = false\n    this.childNodes = []\n    this.loading = false\n\n    if (this.parent) {\n      this.level = this.parent.level + 1\n    }\n  }\n\n  initialize() {\n    const store = this.store\n    if (!store) {\n      throw new Error('[Node]store is required!')\n    }\n    store.registerNode(this)\n\n    const props = store.props\n    if (props && typeof props.isLeaf !== 'undefined') {\n      const isLeaf = getPropertyFromData(this, 'isLeaf')\n      if (isBoolean(isLeaf)) {\n        this.isLeafByUser = isLeaf\n      }\n    }\n\n    if (store.lazy !== true && this.data) {\n      this.setData(this.data)\n\n      if (store.defaultExpandAll) {\n        this.expanded = true\n        this.canFocus = true\n      }\n    } else if (\n      this.level > 0 &&\n      store.lazy &&\n      store.defaultExpandAll &&\n      !this.isLeafByUser\n    ) {\n      this.expand()\n    }\n    if (!isArray(this.data)) {\n      markNodeData(this, this.data)\n    }\n    if (!this.data) return\n\n    const defaultExpandedKeys = store.defaultExpandedKeys\n    const key = store.key\n\n    if (key && defaultExpandedKeys && defaultExpandedKeys.includes(this.key)) {\n      this.expand(null, store.autoExpandParent)\n    }\n\n    if (\n      key &&\n      store.currentNodeKey !== undefined &&\n      this.key === store.currentNodeKey\n    ) {\n      store.currentNode = this\n      store.currentNode.isCurrent = true\n    }\n\n    if (store.lazy) {\n      store._initDefaultCheckedNode(this)\n    }\n\n    this.updateLeafState()\n    if (this.parent && (this.level === 1 || this.parent.expanded === true))\n      this.canFocus = true\n  }\n\n  setData(data: TreeNodeData): void {\n    if (!isArray(data)) {\n      markNodeData(this, data)\n    }\n\n    this.data = data\n    this.childNodes = []\n\n    let children\n    if (this.level === 0 && isArray(this.data)) {\n      children = this.data\n    } else {\n      children = getPropertyFromData(this, 'children') || []\n    }\n\n    for (let i = 0, j = children.length; i < j; i++) {\n      this.insertChild({ data: children[i] })\n    }\n  }\n\n  get label(): string {\n    return getPropertyFromData(this, 'label')\n  }\n\n  get key(): TreeKey {\n    const nodeKey = this.store.key\n    if (this.data) return this.data[nodeKey]\n    return null\n  }\n\n  get disabled(): boolean {\n    return getPropertyFromData(this, 'disabled')\n  }\n\n  get nextSibling(): Nullable<Node> {\n    const parent = this.parent\n    if (parent) {\n      const index = parent.childNodes.indexOf(this)\n      if (index > -1) {\n        return parent.childNodes[index + 1]\n      }\n    }\n    return null\n  }\n\n  get previousSibling(): Nullable<Node> {\n    const parent = this.parent\n    if (parent) {\n      const index = parent.childNodes.indexOf(this)\n      if (index > -1) {\n        return index > 0 ? parent.childNodes[index - 1] : null\n      }\n    }\n    return null\n  }\n\n  contains(target: Node, deep = true): boolean {\n    return (this.childNodes || []).some(\n      (child) => child === target || (deep && child.contains(target))\n    )\n  }\n\n  remove(): void {\n    const parent = this.parent\n    if (parent) {\n      parent.removeChild(this)\n    }\n  }\n\n  insertChild(child?: FakeNode | Node, index?: number, batch?: boolean): void {\n    if (!child) throw new Error('InsertChild error: child is required.')\n\n    if (!(child instanceof Node)) {\n      if (!batch) {\n        const children = this.getChildren(true)\n        if (!children.includes(child.data)) {\n          if (isUndefined(index) || index < 0) {\n            children.push(child.data)\n          } else {\n            children.splice(index, 0, child.data)\n          }\n        }\n      }\n      Object.assign(child, {\n        parent: this,\n        store: this.store,\n      })\n      child = reactive(new Node(child as TreeNodeOptions))\n      if (child instanceof Node) {\n        child.initialize()\n      }\n    }\n\n    ;(child as Node).level = this.level + 1\n\n    if (isUndefined(index) || index < 0) {\n      this.childNodes.push(child as Node)\n    } else {\n      this.childNodes.splice(index, 0, child as Node)\n    }\n\n    this.updateLeafState()\n  }\n\n  insertBefore(child: FakeNode | Node, ref: Node): void {\n    let index\n    if (ref) {\n      index = this.childNodes.indexOf(ref)\n    }\n    this.insertChild(child, index)\n  }\n\n  insertAfter(child: FakeNode | Node, ref: Node): void {\n    let index\n    if (ref) {\n      index = this.childNodes.indexOf(ref)\n      if (index !== -1) index += 1\n    }\n    this.insertChild(child, index)\n  }\n\n  removeChild(child: Node): void {\n    const children = this.getChildren() || []\n    const dataIndex = children.indexOf(child.data)\n    if (dataIndex > -1) {\n      children.splice(dataIndex, 1)\n    }\n\n    const index = this.childNodes.indexOf(child)\n\n    if (index > -1) {\n      this.store && this.store.deregisterNode(child)\n      child.parent = null\n      this.childNodes.splice(index, 1)\n    }\n\n    this.updateLeafState()\n  }\n\n  removeChildByData(data: TreeNodeData): void {\n    let targetNode: Node = null\n\n    for (let i = 0; i < this.childNodes.length; i++) {\n      if (this.childNodes[i].data === data) {\n        targetNode = this.childNodes[i]\n        break\n      }\n    }\n\n    if (targetNode) {\n      this.removeChild(targetNode)\n    }\n  }\n\n  expand(callback?: () => void, expandParent?: boolean): void {\n    const done = (): void => {\n      if (expandParent) {\n        let parent = this.parent\n        while (parent.level > 0) {\n          parent.expanded = true\n          parent = parent.parent\n        }\n      }\n      this.expanded = true\n      if (callback) callback()\n      this.childNodes.forEach((item) => {\n        item.canFocus = true\n      })\n    }\n\n    if (this.shouldLoadData()) {\n      this.loadData((data) => {\n        if (isArray(data)) {\n          if (this.checked) {\n            this.setChecked(true, true)\n          } else if (!this.store.checkStrictly) {\n            reInitChecked(this)\n          }\n          done()\n        }\n      })\n    } else {\n      done()\n    }\n  }\n\n  doCreateChildren(\n    array: TreeNodeData[],\n    defaultProps: TreeNodeLoadedDefaultProps = {}\n  ): void {\n    array.forEach((item) => {\n      this.insertChild(\n        Object.assign({ data: item }, defaultProps),\n        undefined,\n        true\n      )\n    })\n  }\n\n  collapse(): void {\n    this.expanded = false\n    this.childNodes.forEach((item) => {\n      item.canFocus = false\n    })\n  }\n\n  shouldLoadData(): boolean {\n    return this.store.lazy === true && this.store.load && !this.loaded\n  }\n\n  updateLeafState(): void {\n    if (\n      this.store.lazy === true &&\n      this.loaded !== true &&\n      typeof this.isLeafByUser !== 'undefined'\n    ) {\n      this.isLeaf = this.isLeafByUser\n      return\n    }\n    const childNodes = this.childNodes\n    if (\n      !this.store.lazy ||\n      (this.store.lazy === true && this.loaded === true)\n    ) {\n      this.isLeaf = !childNodes || childNodes.length === 0\n      return\n    }\n    this.isLeaf = false\n  }\n\n  setChecked(\n    value?: boolean | string,\n    deep?: boolean,\n    recursion?: boolean,\n    passValue?: boolean\n  ) {\n    this.indeterminate = value === 'half'\n    this.checked = value === true\n\n    if (this.store.checkStrictly) return\n\n    if (!(this.shouldLoadData() && !this.store.checkDescendants)) {\n      const { all, allWithoutDisable } = getChildState(this.childNodes)\n\n      if (!this.isLeaf && !all && allWithoutDisable) {\n        this.checked = false\n        value = false\n      }\n\n      const handleDescendants = (): void => {\n        if (deep) {\n          const childNodes = this.childNodes\n          for (let i = 0, j = childNodes.length; i < j; i++) {\n            const child = childNodes[i]\n            passValue = passValue || value !== false\n            const isCheck = child.disabled ? child.checked : passValue\n            child.setChecked(isCheck, deep, true, passValue)\n          }\n          const { half, all } = getChildState(childNodes)\n          if (!all) {\n            this.checked = all\n            this.indeterminate = half\n          }\n        }\n      }\n\n      if (this.shouldLoadData()) {\n        // Only work on lazy load data.\n        this.loadData(\n          () => {\n            handleDescendants()\n            reInitChecked(this)\n          },\n          {\n            checked: value !== false,\n          }\n        )\n        return\n      } else {\n        handleDescendants()\n      }\n    }\n\n    const parent = this.parent\n    if (!parent || parent.level === 0) return\n\n    if (!recursion) {\n      reInitChecked(parent)\n    }\n  }\n\n  getChildren(forceInit = false): TreeNodeData | TreeNodeData[] {\n    // this is data\n    if (this.level === 0) return this.data\n    const data = this.data\n    if (!data) return null\n\n    const props = this.store.props\n    let children = 'children'\n    if (props) {\n      children = props.children || 'children'\n    }\n\n    if (isUndefined(data[children])) {\n      data[children] = null\n    }\n\n    if (forceInit && !data[children]) {\n      data[children] = []\n    }\n\n    return data[children]\n  }\n\n  updateChildren(): void {\n    const newData = (this.getChildren() || []) as TreeNodeData[]\n    const oldData = this.childNodes.map((node) => node.data)\n\n    const newDataMap = {}\n    const newNodes = []\n\n    newData.forEach((item, index) => {\n      const key = item[NODE_KEY]\n      const isNodeExists =\n        !!key && oldData.findIndex((data) => data[NODE_KEY] === key) >= 0\n      if (isNodeExists) {\n        newDataMap[key] = { index, data: item }\n      } else {\n        newNodes.push({ index, data: item })\n      }\n    })\n\n    if (!this.store.lazy) {\n      oldData.forEach((item) => {\n        if (!newDataMap[item[NODE_KEY]]) this.removeChildByData(item)\n      })\n    }\n\n    newNodes.forEach(({ index, data }) => {\n      this.insertChild({ data }, index)\n    })\n\n    this.updateLeafState()\n  }\n\n  loadData(\n    callback: (node: Node) => void,\n    defaultProps: TreeNodeLoadedDefaultProps = {}\n  ) {\n    if (\n      this.store.lazy === true &&\n      this.store.load &&\n      !this.loaded &&\n      (!this.loading || Object.keys(defaultProps).length)\n    ) {\n      this.loading = true\n\n      const resolve = (children) => {\n        this.childNodes = []\n\n        this.doCreateChildren(children, defaultProps)\n        this.loaded = true\n        this.loading = false\n\n        this.updateLeafState()\n        if (callback) {\n          callback.call(this, children)\n        }\n      }\n      const reject = () => {\n        this.loading = false\n      }\n\n      this.store.load(this, resolve, reject)\n    } else {\n      if (callback) {\n        callback.call(this)\n      }\n    }\n  }\n\n  eachNode(callback: (node: Node) => void) {\n    const arr: Node[] = [this]\n    while (arr.length) {\n      const node = arr.shift()!\n      arr.unshift(...node.childNodes)\n      callback(node)\n    }\n  }\n\n  reInitChecked() {\n    if (this.store.checkStrictly) return\n    reInitChecked(this)\n  }\n}\n\nexport default Node\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}