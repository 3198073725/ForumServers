{"ast":null,"code":"'use strict';\n\nvar _defineProperty = require(\"H:/ForumServers/ForumFrontend/node_modules/@babel/runtime/helpers/defineProperty.js\")[\"default\"];\nvar _objectSpread = require(\"H:/ForumServers/ForumFrontend/node_modules/@babel/runtime/helpers/objectSpread2.js\")[\"default\"];\nrequire(\"core-js/modules/es.array.push.js\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nvar dom = require('@floating-ui/dom');\nvar visualHidden = require('../../visual-hidden/src/visual-hidden2.js');\nvar constants = require('./constants.js');\nvar content = require('./content2.js');\nvar common = require('./common.js');\nvar pluginVue_exportHelper = require('../../../_virtual/plugin-vue_export-helper.js');\nvar index = require('../../../hooks/use-floating/index.js');\nvar index$1 = require('../../../hooks/use-z-index/index.js');\nvar index$2 = require('../../../hooks/use-namespace/index.js');\nvar __default__ = vue.defineComponent({\n  name: \"ElTooltipV2Content\"\n});\nvar _sfc_main = /* @__PURE__ */vue.defineComponent(_objectSpread(_objectSpread({}, __default__), {}, {\n  props: _objectSpread(_objectSpread({}, content.tooltipV2ContentProps), common.tooltipV2CommonProps),\n  setup: function setup(__props) {\n    var props = __props;\n    var _vue$inject = vue.inject(constants.tooltipV2RootKey),\n      triggerRef = _vue$inject.triggerRef,\n      contentId = _vue$inject.contentId;\n    var placement = vue.ref(props.placement);\n    var strategy = vue.ref(props.strategy);\n    var arrowRef = vue.ref(null);\n    var _index$useFloating = index.useFloating({\n        placement: placement,\n        strategy: strategy,\n        middleware: vue.computed(function () {\n          var middleware = [dom.offset(props.offset)];\n          if (props.showArrow) {\n            middleware.push(index.arrowMiddleware({\n              arrowRef: arrowRef\n            }));\n          }\n          return middleware;\n        })\n      }),\n      referenceRef = _index$useFloating.referenceRef,\n      contentRef = _index$useFloating.contentRef,\n      middlewareData = _index$useFloating.middlewareData,\n      x = _index$useFloating.x,\n      y = _index$useFloating.y,\n      update = _index$useFloating.update;\n    var zIndex = index$1.useZIndex().nextZIndex();\n    var ns = index$2.useNamespace(\"tooltip-v2\");\n    var side = vue.computed(function () {\n      return placement.value.split(\"-\")[0];\n    });\n    var contentStyle = vue.computed(function () {\n      return {\n        position: vue.unref(strategy),\n        top: \"\".concat(vue.unref(y) || 0, \"px\"),\n        left: \"\".concat(vue.unref(x) || 0, \"px\"),\n        zIndex: zIndex\n      };\n    });\n    var arrowStyle = vue.computed(function () {\n      if (!props.showArrow) return {};\n      var _vue$unref = vue.unref(middlewareData),\n        arrow = _vue$unref.arrow;\n      return _defineProperty(_defineProperty({}, \"--\".concat(ns.namespace.value, \"-tooltip-v2-arrow-x\"), \"\".concat(arrow == null ? void 0 : arrow.x, \"px\") || \"\"), \"--\".concat(ns.namespace.value, \"-tooltip-v2-arrow-y\"), \"\".concat(arrow == null ? void 0 : arrow.y, \"px\") || \"\");\n    });\n    var contentClass = vue.computed(function () {\n      return [ns.e(\"content\"), ns.is(\"dark\", props.effect === \"dark\"), ns.is(vue.unref(strategy)), props.contentClass];\n    });\n    vue.watch(arrowRef, function () {\n      return update();\n    });\n    vue.watch(function () {\n      return props.placement;\n    }, function (val) {\n      return placement.value = val;\n    });\n    vue.onMounted(function () {\n      vue.watch(function () {\n        return props.reference || triggerRef.value;\n      }, function (el) {\n        referenceRef.value = el || void 0;\n      }, {\n        immediate: true\n      });\n    });\n    vue.provide(constants.tooltipV2ContentKey, {\n      arrowRef: arrowRef\n    });\n    return function (_ctx, _cache) {\n      return vue.openBlock(), vue.createElementBlock(\"div\", {\n        ref_key: \"contentRef\",\n        ref: contentRef,\n        style: vue.normalizeStyle(vue.unref(contentStyle)),\n        \"data-tooltip-v2-root\": \"\"\n      }, [!_ctx.nowrap ? (vue.openBlock(), vue.createElementBlock(\"div\", {\n        key: 0,\n        \"data-side\": vue.unref(side),\n        \"class\": vue.normalizeClass(vue.unref(contentClass))\n      }, [vue.renderSlot(_ctx.$slots, \"default\", {\n        contentStyle: vue.unref(contentStyle),\n        contentClass: vue.unref(contentClass)\n      }), vue.createVNode(vue.unref(visualHidden[\"default\"]), {\n        id: vue.unref(contentId),\n        role: \"tooltip\"\n      }, {\n        \"default\": vue.withCtx(function () {\n          return [_ctx.ariaLabel ? (vue.openBlock(), vue.createElementBlock(vue.Fragment, {\n            key: 0\n          }, [vue.createTextVNode(vue.toDisplayString(_ctx.ariaLabel), 1)], 64)) : vue.renderSlot(_ctx.$slots, \"default\", {\n            key: 1\n          })];\n        }),\n        _: 3\n      }, 8, [\"id\"]), vue.renderSlot(_ctx.$slots, \"arrow\", {\n        style: vue.normalizeStyle(vue.unref(arrowStyle)),\n        side: vue.unref(side)\n      })], 10, [\"data-side\"])) : vue.createCommentVNode(\"v-if\", true)], 4);\n    };\n  }\n}));\nvar TooltipV2Content = /* @__PURE__ */pluginVue_exportHelper[\"default\"](_sfc_main, [[\"__file\", \"content.vue\"]]);\nexports[\"default\"] = TooltipV2Content;","map":{"version":3,"names":["name","_vue$inject","vue","inject","constants","tooltipV2RootKey","triggerRef","contentId","placement","ref","props","strategy","arrowRef","_index$useFloating","index","useFloating","middleware","computed","dom","offset","showArrow","push","arrowMiddleware","referenceRef","contentRef","middlewareData","x","y","update","zIndex","index$1","useZIndex","nextZIndex","ns","index$2","useNamespace","side","value","split","contentStyle","position","unref","top","concat","left","arrowStyle","_vue$unref","arrow","_defineProperty","namespace","contentClass","e","is","effect","watch","val","onMounted","reference","el","immediate","provide","tooltipV2ContentKey","_ctx","_cache","openBlock","createElementBlock","ref_key","style","normalizeStyle","nowrap"],"sources":["../../../../../../packages/components/tooltip-v2/src/content.vue"],"sourcesContent":["<template>\n  <div ref=\"contentRef\" :style=\"contentStyle\" data-tooltip-v2-root>\n    <div v-if=\"!nowrap\" :data-side=\"side\" :class=\"contentClass\">\n      <slot :content-style=\"contentStyle\" :content-class=\"contentClass\" />\n      <el-visually-hidden :id=\"contentId\" role=\"tooltip\">\n        <template v-if=\"ariaLabel\">\n          {{ ariaLabel }}\n        </template>\n        <slot v-else />\n      </el-visually-hidden>\n      <slot name=\"arrow\" :style=\"arrowStyle\" :side=\"side\" />\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, inject, onMounted, provide, ref, unref, watch } from 'vue'\nimport { offset } from '@floating-ui/dom'\nimport {\n  arrowMiddleware,\n  useFloating,\n  useNamespace,\n  useZIndex,\n} from '@element-plus/hooks'\nimport ElVisuallyHidden from '@element-plus/components/visual-hidden'\nimport { tooltipV2ContentKey, tooltipV2RootKey } from './constants'\nimport { tooltipV2ContentProps } from './content'\nimport { tooltipV2CommonProps } from './common'\n\nimport type { CSSProperties } from 'vue'\nimport type { Middleware } from '@floating-ui/dom'\n\ndefineOptions({\n  name: 'ElTooltipV2Content',\n})\n\nconst props = defineProps({ ...tooltipV2ContentProps, ...tooltipV2CommonProps })\n\nconst { triggerRef, contentId } = inject(tooltipV2RootKey)!\n\nconst placement = ref(props.placement)\nconst strategy = ref(props.strategy)\nconst arrowRef = ref<HTMLElement | null>(null)\n\nconst { referenceRef, contentRef, middlewareData, x, y, update } = useFloating({\n  placement,\n  strategy,\n  middleware: computed(() => {\n    const middleware: Middleware[] = [offset(props.offset)]\n\n    if (props.showArrow) {\n      middleware.push(\n        arrowMiddleware({\n          arrowRef,\n        })\n      )\n    }\n\n    return middleware\n  }),\n})\n\nconst zIndex = useZIndex().nextZIndex()\n\nconst ns = useNamespace('tooltip-v2')\n\nconst side = computed(() => {\n  return placement.value.split('-')[0]\n})\n\nconst contentStyle = computed<CSSProperties>(() => {\n  return {\n    position: unref(strategy),\n    top: `${unref(y) || 0}px`,\n    left: `${unref(x) || 0}px`,\n    zIndex,\n  }\n})\n\nconst arrowStyle = computed<CSSProperties>(() => {\n  if (!props.showArrow) return {}\n\n  const { arrow } = unref(middlewareData)\n\n  return {\n    [`--${ns.namespace.value}-tooltip-v2-arrow-x`]: `${arrow?.x}px` || '',\n    [`--${ns.namespace.value}-tooltip-v2-arrow-y`]: `${arrow?.y}px` || '',\n  }\n})\n\nconst contentClass = computed(() => [\n  ns.e('content'),\n  ns.is('dark', props.effect === 'dark'),\n  ns.is(unref(strategy)),\n  props.contentClass,\n])\n\nwatch(arrowRef, () => update())\n\nwatch(\n  () => props.placement,\n  (val) => (placement.value = val)\n)\n\nonMounted(() => {\n  watch(\n    () => props.reference || triggerRef.value,\n    (el) => {\n      referenceRef.value = el || undefined\n    },\n    {\n      immediate: true,\n    }\n  )\n})\n\nprovide(tooltipV2ContentKey, { arrowRef })\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}