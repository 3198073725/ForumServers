{"ast":null,"code":"'use strict';\n\nvar _toConsumableArray = require(\"H:/ForumServers/ForumFrontend/node_modules/@babel/runtime/helpers/toConsumableArray.js\")[\"default\"];\nvar _defineProperty = require(\"H:/ForumServers/ForumFrontend/node_modules/@babel/runtime/helpers/defineProperty.js\")[\"default\"];\nrequire(\"core-js/modules/es.array.concat.js\");\nrequire(\"core-js/modules/es.array.every.js\");\nrequire(\"core-js/modules/es.array.filter.js\");\nrequire(\"core-js/modules/es.array.for-each.js\");\nrequire(\"core-js/modules/es.array.from.js\");\nrequire(\"core-js/modules/es.array.includes.js\");\nrequire(\"core-js/modules/es.array.index-of.js\");\nrequire(\"core-js/modules/es.array.push.js\");\nrequire(\"core-js/modules/es.array.slice.js\");\nrequire(\"core-js/modules/es.array.splice.js\");\nrequire(\"core-js/modules/es.iterator.constructor.js\");\nrequire(\"core-js/modules/es.iterator.every.js\");\nrequire(\"core-js/modules/es.iterator.filter.js\");\nrequire(\"core-js/modules/es.iterator.for-each.js\");\nrequire(\"core-js/modules/es.number.constructor.js\");\nrequire(\"core-js/modules/es.number.parse-int.js\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/es.string.includes.js\");\nrequire(\"core-js/modules/es.string.iterator.js\");\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\nrequire(\"core-js/modules/web.timers.js\");\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nvar core = require('@vueuse/core');\nvar lodashUnified = require('lodash-unified');\nvar index$1 = require('../../icon/index.js');\nvar iconsVue = require('@element-plus/icons-vue');\nvar menuBar = require('./utils/menu-bar.js');\nvar menuCollapseTransition = require('./menu-collapse-transition.js');\nvar subMenu = require('./sub-menu.js');\nvar useMenuCssVar = require('./use-menu-css-var.js');\nvar index$2 = require('../../../directives/click-outside/index.js');\nvar runtime = require('../../../utils/vue/props/runtime.js');\nvar typescript = require('../../../utils/typescript.js');\nvar icon = require('../../../utils/vue/icon.js');\nvar index = require('../../../hooks/use-namespace/index.js');\nvar vnode = require('../../../utils/vue/vnode.js');\nvar shared = require('@vue/shared');\nvar types = require('../../../utils/types.js');\nvar menuProps = runtime.buildProps({\n  mode: {\n    type: String,\n    values: [\"horizontal\", \"vertical\"],\n    \"default\": \"vertical\"\n  },\n  defaultActive: {\n    type: String,\n    \"default\": \"\"\n  },\n  defaultOpeneds: {\n    type: runtime.definePropType(Array),\n    \"default\": function _default() {\n      return typescript.mutable([]);\n    }\n  },\n  uniqueOpened: Boolean,\n  router: Boolean,\n  menuTrigger: {\n    type: String,\n    values: [\"hover\", \"click\"],\n    \"default\": \"hover\"\n  },\n  collapse: Boolean,\n  backgroundColor: String,\n  textColor: String,\n  activeTextColor: String,\n  closeOnClickOutside: Boolean,\n  collapseTransition: {\n    type: Boolean,\n    \"default\": true\n  },\n  ellipsis: {\n    type: Boolean,\n    \"default\": true\n  },\n  popperOffset: {\n    type: Number,\n    \"default\": 6\n  },\n  ellipsisIcon: {\n    type: icon.iconPropType,\n    \"default\": function _default() {\n      return iconsVue.More;\n    }\n  },\n  popperEffect: {\n    type: runtime.definePropType(String),\n    \"default\": \"dark\"\n  },\n  popperClass: String,\n  showTimeout: {\n    type: Number,\n    \"default\": 300\n  },\n  hideTimeout: {\n    type: Number,\n    \"default\": 300\n  },\n  persistent: {\n    type: Boolean,\n    \"default\": true\n  }\n});\nvar checkIndexPath = function checkIndexPath(indexPath) {\n  return shared.isArray(indexPath) && indexPath.every(function (path) {\n    return shared.isString(path);\n  });\n};\nvar menuEmits = {\n  close: function close(index, indexPath) {\n    return shared.isString(index) && checkIndexPath(indexPath);\n  },\n  open: function open(index, indexPath) {\n    return shared.isString(index) && checkIndexPath(indexPath);\n  },\n  select: function select(index, indexPath, item, routerResult) {\n    return shared.isString(index) && checkIndexPath(indexPath) && shared.isObject(item) && (types.isUndefined(routerResult) || routerResult instanceof Promise);\n  }\n};\nvar Menu = vue.defineComponent({\n  name: \"ElMenu\",\n  props: menuProps,\n  emits: menuEmits,\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit,\n      slots = _ref.slots,\n      expose = _ref.expose;\n    var instance = vue.getCurrentInstance();\n    var router = instance.appContext.config.globalProperties.$router;\n    var menu = vue.ref();\n    var nsMenu = index.useNamespace(\"menu\");\n    var nsSubMenu = index.useNamespace(\"sub-menu\");\n    var sliceIndex = vue.ref(-1);\n    var openedMenus = vue.ref(props.defaultOpeneds && !props.collapse ? props.defaultOpeneds.slice(0) : []);\n    var activeIndex = vue.ref(props.defaultActive);\n    var items = vue.ref({});\n    var subMenus = vue.ref({});\n    var isMenuPopup = vue.computed(function () {\n      return props.mode === \"horizontal\" || props.mode === \"vertical\" && props.collapse;\n    });\n    var initMenu = function initMenu() {\n      var activeItem = activeIndex.value && items.value[activeIndex.value];\n      if (!activeItem || props.mode === \"horizontal\" || props.collapse) return;\n      var indexPath = activeItem.indexPath;\n      indexPath.forEach(function (index) {\n        var subMenu = subMenus.value[index];\n        subMenu && openMenu(index, subMenu.indexPath);\n      });\n    };\n    var openMenu = function openMenu(index, indexPath) {\n      if (openedMenus.value.includes(index)) return;\n      if (props.uniqueOpened) {\n        openedMenus.value = openedMenus.value.filter(function (index2) {\n          return indexPath.includes(index2);\n        });\n      }\n      openedMenus.value.push(index);\n      emit(\"open\", index, indexPath);\n    };\n    var close = function close(index) {\n      var i = openedMenus.value.indexOf(index);\n      if (i !== -1) {\n        openedMenus.value.splice(i, 1);\n      }\n    };\n    var closeMenu = function closeMenu(index, indexPath) {\n      close(index);\n      emit(\"close\", index, indexPath);\n    };\n    var handleSubMenuClick = function handleSubMenuClick(_ref2) {\n      var index = _ref2.index,\n        indexPath = _ref2.indexPath;\n      var isOpened = openedMenus.value.includes(index);\n      isOpened ? closeMenu(index, indexPath) : openMenu(index, indexPath);\n    };\n    var handleMenuItemClick = function handleMenuItemClick(menuItem) {\n      if (props.mode === \"horizontal\" || props.collapse) {\n        openedMenus.value = [];\n      }\n      var index = menuItem.index,\n        indexPath = menuItem.indexPath;\n      if (lodashUnified.isNil(index) || lodashUnified.isNil(indexPath)) return;\n      if (props.router && router) {\n        var route = menuItem.route || index;\n        var routerResult = router.push(route).then(function (res) {\n          if (!res) activeIndex.value = index;\n          return res;\n        });\n        emit(\"select\", index, indexPath, {\n          index: index,\n          indexPath: indexPath,\n          route: route\n        }, routerResult);\n      } else {\n        activeIndex.value = index;\n        emit(\"select\", index, indexPath, {\n          index: index,\n          indexPath: indexPath\n        });\n      }\n    };\n    var updateActiveIndex = function updateActiveIndex(val) {\n      var _a;\n      var itemsInData = items.value;\n      var item = itemsInData[val] || activeIndex.value && itemsInData[activeIndex.value] || itemsInData[props.defaultActive];\n      activeIndex.value = (_a = item == null ? void 0 : item.index) != null ? _a : val;\n    };\n    var calcMenuItemWidth = function calcMenuItemWidth(menuItem) {\n      var computedStyle = getComputedStyle(menuItem);\n      var marginLeft = Number.parseInt(computedStyle.marginLeft, 10);\n      var marginRight = Number.parseInt(computedStyle.marginRight, 10);\n      return menuItem.offsetWidth + marginLeft + marginRight || 0;\n    };\n    var calcSliceIndex = function calcSliceIndex() {\n      var _a, _b;\n      if (!menu.value) return -1;\n      var items2 = Array.from((_b = (_a = menu.value) == null ? void 0 : _a.childNodes) != null ? _b : []).filter(function (item) {\n        return item.nodeName !== \"#text\" || item.nodeValue;\n      });\n      var moreItemWidth = 64;\n      var computedMenuStyle = getComputedStyle(menu.value);\n      var paddingLeft = Number.parseInt(computedMenuStyle.paddingLeft, 10);\n      var paddingRight = Number.parseInt(computedMenuStyle.paddingRight, 10);\n      var menuWidth = menu.value.clientWidth - paddingLeft - paddingRight;\n      var calcWidth = 0;\n      var sliceIndex2 = 0;\n      items2.forEach(function (item, index) {\n        if (item.nodeName === \"#comment\") return;\n        calcWidth += calcMenuItemWidth(item);\n        if (calcWidth <= menuWidth - moreItemWidth) {\n          sliceIndex2 = index + 1;\n        }\n      });\n      return sliceIndex2 === items2.length ? -1 : sliceIndex2;\n    };\n    var getIndexPath = function getIndexPath(index) {\n      return subMenus.value[index].indexPath;\n    };\n    var debounce = function debounce(fn) {\n      var wait = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 33.34;\n      var timmer;\n      return function () {\n        timmer && clearTimeout(timmer);\n        timmer = setTimeout(function () {\n          fn();\n        }, wait);\n      };\n    };\n    var isFirstTimeRender = true;\n    var handleResize = function handleResize() {\n      if (sliceIndex.value === calcSliceIndex()) return;\n      var callback = function callback() {\n        sliceIndex.value = -1;\n        vue.nextTick(function () {\n          sliceIndex.value = calcSliceIndex();\n        });\n      };\n      isFirstTimeRender ? callback() : debounce(callback)();\n      isFirstTimeRender = false;\n    };\n    vue.watch(function () {\n      return props.defaultActive;\n    }, function (currentActive) {\n      if (!items.value[currentActive]) {\n        activeIndex.value = \"\";\n      }\n      updateActiveIndex(currentActive);\n    });\n    vue.watch(function () {\n      return props.collapse;\n    }, function (value) {\n      if (value) openedMenus.value = [];\n    });\n    vue.watch(items.value, initMenu);\n    var resizeStopper;\n    vue.watchEffect(function () {\n      if (props.mode === \"horizontal\" && props.ellipsis) resizeStopper = core.useResizeObserver(menu, handleResize).stop;else resizeStopper == null ? void 0 : resizeStopper();\n    });\n    var mouseInChild = vue.ref(false);\n    {\n      var addSubMenu = function addSubMenu(item) {\n        subMenus.value[item.index] = item;\n      };\n      var removeSubMenu = function removeSubMenu(item) {\n        delete subMenus.value[item.index];\n      };\n      var addMenuItem = function addMenuItem(item) {\n        items.value[item.index] = item;\n      };\n      var removeMenuItem = function removeMenuItem(item) {\n        delete items.value[item.index];\n      };\n      vue.provide(\"rootMenu\", vue.reactive({\n        props: props,\n        openedMenus: openedMenus,\n        items: items,\n        subMenus: subMenus,\n        activeIndex: activeIndex,\n        isMenuPopup: isMenuPopup,\n        addMenuItem: addMenuItem,\n        removeMenuItem: removeMenuItem,\n        addSubMenu: addSubMenu,\n        removeSubMenu: removeSubMenu,\n        openMenu: openMenu,\n        closeMenu: closeMenu,\n        handleMenuItemClick: handleMenuItemClick,\n        handleSubMenuClick: handleSubMenuClick\n      }));\n      vue.provide(\"subMenu:\".concat(instance.uid), {\n        addSubMenu: addSubMenu,\n        removeSubMenu: removeSubMenu,\n        mouseInChild: mouseInChild,\n        level: 0\n      });\n    }\n    vue.onMounted(function () {\n      if (props.mode === \"horizontal\") {\n        new menuBar[\"default\"](instance.vnode.el, nsMenu.namespace.value);\n      }\n    });\n    {\n      var open = function open(index) {\n        var indexPath = subMenus.value[index].indexPath;\n        indexPath.forEach(function (i) {\n          return openMenu(i, indexPath);\n        });\n      };\n      expose({\n        open: open,\n        close: close,\n        updateActiveIndex: updateActiveIndex,\n        handleResize: handleResize\n      });\n    }\n    var ulStyle = useMenuCssVar.useMenuCssVar(props, 0);\n    return function () {\n      var _a, _b;\n      var slot = (_b = (_a = slots[\"default\"]) == null ? void 0 : _a.call(slots)) != null ? _b : [];\n      var vShowMore = [];\n      if (props.mode === \"horizontal\" && menu.value) {\n        var originalSlot = vnode.flattedChildren(slot);\n        var slotDefault = sliceIndex.value === -1 ? originalSlot : originalSlot.slice(0, sliceIndex.value);\n        var slotMore = sliceIndex.value === -1 ? [] : originalSlot.slice(sliceIndex.value);\n        if ((slotMore == null ? void 0 : slotMore.length) && props.ellipsis) {\n          slot = slotDefault;\n          vShowMore.push(vue.h(subMenu[\"default\"], {\n            index: \"sub-menu-more\",\n            \"class\": nsSubMenu.e(\"hide-arrow\"),\n            popperOffset: props.popperOffset\n          }, {\n            title: function title() {\n              return vue.h(index$1.ElIcon, {\n                \"class\": nsSubMenu.e(\"icon-more\")\n              }, {\n                \"default\": function _default() {\n                  return vue.h(props.ellipsisIcon);\n                }\n              });\n            },\n            \"default\": function _default() {\n              return slotMore;\n            }\n          }));\n        }\n      }\n      var directives = props.closeOnClickOutside ? [[index$2[\"default\"], function () {\n        if (!openedMenus.value.length) return;\n        if (!mouseInChild.value) {\n          openedMenus.value.forEach(function (openedMenu) {\n            return emit(\"close\", openedMenu, getIndexPath(openedMenu));\n          });\n          openedMenus.value = [];\n        }\n      }]] : [];\n      var vMenu = vue.withDirectives(vue.h(\"ul\", {\n        key: String(props.collapse),\n        role: \"menubar\",\n        ref: menu,\n        style: ulStyle.value,\n        \"class\": _defineProperty(_defineProperty(_defineProperty({}, nsMenu.b(), true), nsMenu.m(props.mode), true), nsMenu.m(\"collapse\"), props.collapse)\n      }, [].concat(_toConsumableArray(slot), vShowMore)), directives);\n      if (props.collapseTransition && props.mode === \"vertical\") {\n        return vue.h(menuCollapseTransition[\"default\"], function () {\n          return vMenu;\n        });\n      }\n      return vMenu;\n    };\n  }\n});\nexports[\"default\"] = Menu;\nexports.menuEmits = menuEmits;\nexports.menuProps = menuProps;","map":{"version":3,"names":["menuProps","runtime","buildProps","mode","type","String","values","defaultActive","defaultOpeneds","definePropType","Array","default","typescript","mutable","uniqueOpened","Boolean","router","menuTrigger","collapse","backgroundColor","textColor","activeTextColor","closeOnClickOutside","collapseTransition","ellipsis","popperOffset","Number","ellipsisIcon","icon","iconPropType","iconsVue","More","popperEffect","popperClass","showTimeout","hideTimeout","persistent","checkIndexPath","indexPath","shared","isArray","every","path","isString","menuEmits","close","index","open","select","item","routerResult","isObject","types","isUndefined","Promise","Menu","vue","defineComponent","name","props","emits","setup","_ref","emit","slots","expose","instance","getCurrentInstance","appContext","config","globalProperties","$router","menu","ref","nsMenu","useNamespace","nsSubMenu","sliceIndex","openedMenus","slice","activeIndex","items","subMenus","isMenuPopup","computed","initMenu","activeItem","value","forEach","subMenu","openMenu","includes","filter","index2","push","i","indexOf","splice","closeMenu","handleSubMenuClick","_ref2","isOpened","handleMenuItemClick","menuItem","lodashUnified","isNil","route","then","res","updateActiveIndex","val","_a","itemsInData","calcMenuItemWidth","computedStyle","getComputedStyle","marginLeft","parseInt","marginRight","offsetWidth","calcSliceIndex","_b","items2","from","childNodes","nodeName","nodeValue","moreItemWidth","computedMenuStyle","paddingLeft","paddingRight","menuWidth","clientWidth","calcWidth","sliceIndex2","length","getIndexPath","debounce","fn","wait","arguments","undefined","timmer","clearTimeout","setTimeout","isFirstTimeRender","handleResize","callback","nextTick","watch","currentActive","resizeStopper","watchEffect","core","useResizeObserver","stop","mouseInChild","addSubMenu","removeSubMenu","addMenuItem","removeMenuItem","provide","reactive","concat","uid","level","onMounted","menuBar","vnode","el","namespace","ulStyle","useMenuCssVar","slot","call","vShowMore","originalSlot","flattedChildren","slotDefault","slotMore","h","e","title","index$1","ElIcon","directives","index$2","openedMenu","vMenu","withDirectives","key","role","style","_defineProperty","b","m","_toConsumableArray","menuCollapseTransition"],"sources":["../../../../../../packages/components/menu/src/menu.ts"],"sourcesContent":["import {\n  computed,\n  defineComponent,\n  getCurrentInstance,\n  h,\n  nextTick,\n  onMounted,\n  provide,\n  reactive,\n  ref,\n  watch,\n  watchEffect,\n  withDirectives,\n} from 'vue'\n\nimport { useResizeObserver } from '@vueuse/core'\nimport { isNil } from 'lodash-unified'\nimport ElIcon from '@element-plus/components/icon'\nimport { More } from '@element-plus/icons-vue'\nimport {\n  buildProps,\n  definePropType,\n  flattedChildren,\n  iconPropType,\n  isArray,\n  isObject,\n  isString,\n  isUndefined,\n  mutable,\n} from '@element-plus/utils'\nimport { useNamespace } from '@element-plus/hooks'\nimport { ClickOutside as vClickoutside } from '@element-plus/directives'\nimport Menubar from './utils/menu-bar'\nimport ElMenuCollapseTransition from './menu-collapse-transition.vue'\nimport ElSubMenu from './sub-menu'\nimport { useMenuCssVar } from './use-menu-css-var'\nimport type { PopperEffect } from '@element-plus/components/popper'\n\nimport type { MenuItemClicked, MenuProvider, SubMenuProvider } from './types'\nimport type { NavigationFailure, Router } from 'vue-router'\nimport type {\n  Component,\n  DirectiveArguments,\n  ExtractPropTypes,\n  VNode,\n  VNodeArrayChildren,\n} from 'vue'\nimport type { UseResizeObserverReturn } from '@vueuse/core'\n\nexport const menuProps = buildProps({\n  /**\n   * @description menu display mode\n   */\n  mode: {\n    type: String,\n    values: ['horizontal', 'vertical'],\n    default: 'vertical',\n  },\n  /**\n   * @description index of active menu on page load\n   */\n  defaultActive: {\n    type: String,\n    default: '',\n  },\n  /**\n   * @description array that contains indexes of currently active sub-menus\n   */\n  defaultOpeneds: {\n    type: definePropType<string[]>(Array),\n    default: () => mutable([] as const),\n  },\n  /**\n   * @description whether only one sub-menu can be active\n   */\n  uniqueOpened: Boolean,\n  /**\n   * @description whether `vue-router` mode is activated. If true, index will be used as 'path' to activate the route action. Use with `default-active` to set the active item on load.\n   */\n  router: Boolean,\n  /**\n   * @description how sub-menus are triggered, only works when `mode` is 'horizontal'\n   */\n  menuTrigger: {\n    type: String,\n    values: ['hover', 'click'],\n    default: 'hover',\n  },\n  /**\n   * @description whether the menu is collapsed (available only in vertical mode)\n   */\n  collapse: Boolean,\n  /**\n   * @description background color of Menu (hex format) (deprecated, use `--bg-color` instead)\n   * @deprecated use `--bg-color` instead\n   */\n  backgroundColor: String,\n  /**\n   * @description text color of Menu (hex format) (deprecated, use `--text-color` instead)\n   * @deprecated use `--text-color` instead\n   */\n  textColor: String,\n  /**\n   * @description text color of currently active menu item (hex format) (deprecated, use `--active-color` instead)\n   * @deprecated use `--active-color` instead\n   */\n  activeTextColor: String,\n  /**\n   * @description optional, whether menu is collapsed when clicking outside\n   */\n  closeOnClickOutside: Boolean,\n  /**\n   * @description whether to enable the collapse transition\n   */\n  collapseTransition: {\n    type: Boolean,\n    default: true,\n  },\n  /**\n   * @description whether the menu is ellipsis (available only in horizontal mode)\n   */\n  ellipsis: {\n    type: Boolean,\n    default: true,\n  },\n  /**\n   * @description offset of the popper (effective for all submenus)\n   */\n  popperOffset: {\n    type: Number,\n    default: 6,\n  },\n  /**\n   * @description custom ellipsis icon (available only in horizontal mode and ellipsis is true)\n   */\n  ellipsisIcon: {\n    type: iconPropType,\n    default: () => More,\n  },\n  /**\n   * @description Tooltip theme, built-in theme: `dark` / `light` when menu is collapsed\n   */\n  popperEffect: {\n    type: definePropType<PopperEffect>(String),\n    default: 'dark',\n  },\n  /**\n   * @description custom class name for all popup menus\n   */\n  popperClass: String,\n  /**\n   * @description control timeout for all menus before showing\n   */\n  showTimeout: {\n    type: Number,\n    default: 300,\n  },\n  /**\n   * @description control timeout for all menus before hiding\n   */\n  hideTimeout: {\n    type: Number,\n    default: 300,\n  },\n  /**\n   * @description when menu inactive and `persistent` is `false` , dropdown menu will be destroyed\n   */\n  persistent: {\n    type: Boolean,\n    default: true,\n  },\n} as const)\nexport type MenuProps = ExtractPropTypes<typeof menuProps>\n\nconst checkIndexPath = (indexPath: unknown): indexPath is string[] =>\n  isArray(indexPath) && indexPath.every((path) => isString(path))\n\nexport const menuEmits = {\n  close: (index: string, indexPath: string[]) =>\n    isString(index) && checkIndexPath(indexPath),\n\n  open: (index: string, indexPath: string[]) =>\n    isString(index) && checkIndexPath(indexPath),\n\n  select: (\n    index: string,\n    indexPath: string[],\n    item: MenuItemClicked,\n    routerResult?: Promise<void | NavigationFailure>\n  ) =>\n    isString(index) &&\n    checkIndexPath(indexPath) &&\n    isObject(item) &&\n    (isUndefined(routerResult) || routerResult instanceof Promise),\n}\nexport type MenuEmits = typeof menuEmits\n\nexport default defineComponent({\n  name: 'ElMenu',\n\n  props: menuProps,\n  emits: menuEmits,\n\n  setup(props, { emit, slots, expose }) {\n    const instance = getCurrentInstance()!\n    const router = instance.appContext.config.globalProperties.$router as Router\n    const menu = ref<HTMLUListElement>()\n    const nsMenu = useNamespace('menu')\n    const nsSubMenu = useNamespace('sub-menu')\n\n    // data\n    const sliceIndex = ref(-1)\n\n    const openedMenus = ref<MenuProvider['openedMenus']>(\n      props.defaultOpeneds && !props.collapse\n        ? props.defaultOpeneds.slice(0)\n        : []\n    )\n    const activeIndex = ref<MenuProvider['activeIndex']>(props.defaultActive)\n    const items = ref<MenuProvider['items']>({})\n    const subMenus = ref<MenuProvider['subMenus']>({})\n\n    // computed\n    const isMenuPopup = computed<MenuProvider['isMenuPopup']>(\n      () =>\n        props.mode === 'horizontal' ||\n        (props.mode === 'vertical' && props.collapse)\n    )\n\n    // methods\n    const initMenu = () => {\n      const activeItem = activeIndex.value && items.value[activeIndex.value]\n      if (!activeItem || props.mode === 'horizontal' || props.collapse) return\n\n      const indexPath = activeItem.indexPath\n\n      // 展开该菜单项的路径上所有子菜单\n      // expand all subMenus of the menu item\n      indexPath.forEach((index) => {\n        const subMenu = subMenus.value[index]\n        subMenu && openMenu(index, subMenu.indexPath)\n      })\n    }\n\n    const openMenu: MenuProvider['openMenu'] = (index, indexPath) => {\n      if (openedMenus.value.includes(index)) return\n      // 将不在该菜单路径下的其余菜单收起\n      // collapse all menu that are not under current menu item\n      if (props.uniqueOpened) {\n        openedMenus.value = openedMenus.value.filter((index: string) =>\n          indexPath.includes(index)\n        )\n      }\n      openedMenus.value.push(index)\n      emit('open', index, indexPath)\n    }\n\n    const close = (index: string) => {\n      const i = openedMenus.value.indexOf(index)\n      if (i !== -1) {\n        openedMenus.value.splice(i, 1)\n      }\n    }\n\n    const closeMenu: MenuProvider['closeMenu'] = (index, indexPath) => {\n      close(index)\n      emit('close', index, indexPath)\n    }\n\n    const handleSubMenuClick: MenuProvider['handleSubMenuClick'] = ({\n      index,\n      indexPath,\n    }) => {\n      const isOpened = openedMenus.value.includes(index)\n\n      isOpened ? closeMenu(index, indexPath) : openMenu(index, indexPath)\n    }\n\n    const handleMenuItemClick: MenuProvider['handleMenuItemClick'] = (\n      menuItem\n    ) => {\n      if (props.mode === 'horizontal' || props.collapse) {\n        openedMenus.value = []\n      }\n      const { index, indexPath } = menuItem\n      if (isNil(index) || isNil(indexPath)) return\n\n      if (props.router && router) {\n        const route = menuItem.route || index\n        const routerResult = router.push(route).then((res) => {\n          if (!res) activeIndex.value = index\n          return res\n        })\n        emit(\n          'select',\n          index,\n          indexPath,\n          { index, indexPath, route },\n          routerResult\n        )\n      } else {\n        activeIndex.value = index\n        emit('select', index, indexPath, { index, indexPath })\n      }\n    }\n\n    const updateActiveIndex = (val: string) => {\n      const itemsInData = items.value\n      const item =\n        itemsInData[val] ||\n        (activeIndex.value && itemsInData[activeIndex.value]) ||\n        itemsInData[props.defaultActive]\n\n      activeIndex.value = item?.index ?? val\n    }\n\n    const calcMenuItemWidth = (menuItem: HTMLElement) => {\n      const computedStyle = getComputedStyle(menuItem)\n      const marginLeft = Number.parseInt(computedStyle.marginLeft, 10)\n      const marginRight = Number.parseInt(computedStyle.marginRight, 10)\n      return menuItem.offsetWidth + marginLeft + marginRight || 0\n    }\n\n    const calcSliceIndex = () => {\n      if (!menu.value) return -1\n      const items = Array.from(menu.value?.childNodes ?? []).filter(\n        (item) => item.nodeName !== '#text' || item.nodeValue\n      ) as HTMLElement[]\n      const moreItemWidth = 64\n      const computedMenuStyle = getComputedStyle(menu.value!)\n      const paddingLeft = Number.parseInt(computedMenuStyle.paddingLeft, 10)\n      const paddingRight = Number.parseInt(computedMenuStyle.paddingRight, 10)\n      const menuWidth = menu.value!.clientWidth - paddingLeft - paddingRight\n      let calcWidth = 0\n      let sliceIndex = 0\n      items.forEach((item, index) => {\n        if (item.nodeName === '#comment') return\n        calcWidth += calcMenuItemWidth(item)\n        if (calcWidth <= menuWidth - moreItemWidth) {\n          sliceIndex = index + 1\n        }\n      })\n      return sliceIndex === items.length ? -1 : sliceIndex\n    }\n\n    const getIndexPath = (index: string) => subMenus.value[index].indexPath\n\n    // Common computer monitor FPS is 60Hz, which means 60 redraws per second. Calculation formula: 1000ms/60 ≈ 16.67ms, In order to avoid a certain chance of repeated triggering when `resize`, set wait to 16.67 * 2 = 33.34\n    const debounce = (fn: () => void, wait = 33.34) => {\n      let timmer: ReturnType<typeof setTimeout> | null\n      return () => {\n        timmer && clearTimeout(timmer)\n        timmer = setTimeout(() => {\n          fn()\n        }, wait)\n      }\n    }\n\n    let isFirstTimeRender = true\n    const handleResize = () => {\n      if (sliceIndex.value === calcSliceIndex()) return\n      const callback = () => {\n        sliceIndex.value = -1\n        nextTick(() => {\n          sliceIndex.value = calcSliceIndex()\n        })\n      }\n      // execute callback directly when first time resize to avoid shaking\n      isFirstTimeRender ? callback() : debounce(callback)()\n      isFirstTimeRender = false\n    }\n\n    watch(\n      () => props.defaultActive,\n      (currentActive) => {\n        if (!items.value[currentActive]) {\n          activeIndex.value = ''\n        }\n        updateActiveIndex(currentActive)\n      }\n    )\n\n    watch(\n      () => props.collapse,\n      (value) => {\n        if (value) openedMenus.value = []\n      }\n    )\n\n    watch(items.value, initMenu)\n\n    let resizeStopper: UseResizeObserverReturn['stop']\n    watchEffect(() => {\n      if (props.mode === 'horizontal' && props.ellipsis)\n        resizeStopper = useResizeObserver(menu, handleResize).stop\n      else resizeStopper?.()\n    })\n\n    const mouseInChild = ref(false)\n\n    // provide\n    {\n      const addSubMenu: MenuProvider['addSubMenu'] = (item) => {\n        subMenus.value[item.index] = item\n      }\n\n      const removeSubMenu: MenuProvider['removeSubMenu'] = (item) => {\n        delete subMenus.value[item.index]\n      }\n\n      const addMenuItem: MenuProvider['addMenuItem'] = (item) => {\n        items.value[item.index] = item\n      }\n\n      const removeMenuItem: MenuProvider['removeMenuItem'] = (item) => {\n        delete items.value[item.index]\n      }\n      provide<MenuProvider>(\n        'rootMenu',\n        reactive({\n          props,\n          openedMenus,\n          items,\n          subMenus,\n          activeIndex,\n          isMenuPopup,\n\n          addMenuItem,\n          removeMenuItem,\n          addSubMenu,\n          removeSubMenu,\n          openMenu,\n          closeMenu,\n          handleMenuItemClick,\n          handleSubMenuClick,\n        })\n      )\n      provide<SubMenuProvider>(`subMenu:${instance.uid}`, {\n        addSubMenu,\n        removeSubMenu,\n        mouseInChild,\n        level: 0,\n      })\n    }\n\n    // lifecycle\n    onMounted(() => {\n      if (props.mode === 'horizontal') {\n        new Menubar(instance.vnode.el!, nsMenu.namespace.value)\n      }\n    })\n\n    {\n      const open = (index: string) => {\n        const { indexPath } = subMenus.value[index]\n        indexPath.forEach((i) => openMenu(i, indexPath))\n      }\n\n      expose({\n        open,\n        close,\n        updateActiveIndex,\n        handleResize,\n      })\n    }\n\n    const ulStyle = useMenuCssVar(props, 0)\n\n    return () => {\n      let slot: VNodeArrayChildren = slots.default?.() ?? []\n      const vShowMore: VNode[] = []\n\n      if (props.mode === 'horizontal' && menu.value) {\n        const originalSlot = flattedChildren(slot) as VNodeArrayChildren\n        const slotDefault =\n          sliceIndex.value === -1\n            ? originalSlot\n            : originalSlot.slice(0, sliceIndex.value)\n\n        const slotMore =\n          sliceIndex.value === -1 ? [] : originalSlot.slice(sliceIndex.value)\n\n        if (slotMore?.length && props.ellipsis) {\n          slot = slotDefault\n          vShowMore.push(\n            h(\n              ElSubMenu,\n              {\n                index: 'sub-menu-more',\n                class: nsSubMenu.e('hide-arrow'),\n                popperOffset: props.popperOffset,\n              },\n              {\n                title: () =>\n                  h(\n                    ElIcon,\n                    {\n                      class: nsSubMenu.e('icon-more'),\n                    },\n                    {\n                      default: () => h(props.ellipsisIcon as Component),\n                    }\n                  ),\n                default: () => slotMore,\n              }\n            )\n          )\n        }\n      }\n\n      const directives: DirectiveArguments = props.closeOnClickOutside\n        ? [\n            [\n              vClickoutside,\n              () => {\n                if (!openedMenus.value.length) return\n\n                if (!mouseInChild.value) {\n                  openedMenus.value.forEach((openedMenu) =>\n                    emit('close', openedMenu, getIndexPath(openedMenu))\n                  )\n\n                  openedMenus.value = []\n                }\n              },\n            ],\n          ]\n        : []\n\n      const vMenu = withDirectives(\n        h(\n          'ul',\n          {\n            key: String(props.collapse),\n            role: 'menubar',\n            ref: menu,\n            style: ulStyle.value,\n            class: {\n              [nsMenu.b()]: true,\n              [nsMenu.m(props.mode)]: true,\n              [nsMenu.m('collapse')]: props.collapse,\n            },\n          },\n          [...slot, ...vShowMore]\n        ),\n        directives\n      )\n\n      if (props.collapseTransition && props.mode === 'vertical') {\n        return h(ElMenuCollapseTransition, () => vMenu)\n      }\n\n      return vMenu\n    }\n  },\n})\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}