{"ast":null,"code":"'use strict';\n\nrequire(\"core-js/modules/es.array.concat.js\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nvar basicDateTable = require('../props/basic-date-table.js');\nvar useBasicDateTable = require('../composables/use-basic-date-table.js');\nvar basicCellRender = require('./basic-cell-render.js');\nvar pluginVue_exportHelper = require('../../../../_virtual/plugin-vue_export-helper.js');\nvar _sfc_main = /* @__PURE__ */vue.defineComponent({\n  __name: \"basic-date-table\",\n  props: basicDateTable.basicDateTableProps,\n  emits: basicDateTable.basicDateTableEmits,\n  setup: function setup(__props, _ref) {\n    var expose = _ref.expose,\n      emit = _ref.emit;\n    var props = __props;\n    var _useBasicDateTable$us = useBasicDateTable.useBasicDateTable(props, emit),\n      WEEKS = _useBasicDateTable$us.WEEKS,\n      rows = _useBasicDateTable$us.rows,\n      tbodyRef = _useBasicDateTable$us.tbodyRef,\n      currentCellRef = _useBasicDateTable$us.currentCellRef,\n      focus = _useBasicDateTable$us.focus,\n      isCurrent = _useBasicDateTable$us.isCurrent,\n      isWeekActive = _useBasicDateTable$us.isWeekActive,\n      isSelectedCell = _useBasicDateTable$us.isSelectedCell,\n      handlePickDate = _useBasicDateTable$us.handlePickDate,\n      handleMouseUp = _useBasicDateTable$us.handleMouseUp,\n      handleMouseDown = _useBasicDateTable$us.handleMouseDown,\n      handleMouseMove = _useBasicDateTable$us.handleMouseMove,\n      handleFocus = _useBasicDateTable$us.handleFocus;\n    var _useBasicDateTable$us2 = useBasicDateTable.useBasicDateTableDOM(props, {\n        isCurrent: isCurrent,\n        isWeekActive: isWeekActive\n      }),\n      tableLabel = _useBasicDateTable$us2.tableLabel,\n      tableKls = _useBasicDateTable$us2.tableKls,\n      weekLabel = _useBasicDateTable$us2.weekLabel,\n      getCellClasses = _useBasicDateTable$us2.getCellClasses,\n      getRowKls = _useBasicDateTable$us2.getRowKls,\n      t = _useBasicDateTable$us2.t;\n    var isUnmounting = false;\n    vue.onBeforeUnmount(function () {\n      isUnmounting = true;\n    });\n    expose({\n      focus: focus\n    });\n    return function (_ctx, _cache) {\n      return vue.openBlock(), vue.createElementBlock(\"table\", {\n        \"aria-label\": vue.unref(tableLabel),\n        \"class\": vue.normalizeClass(vue.unref(tableKls)),\n        cellspacing: \"0\",\n        cellpadding: \"0\",\n        role: \"grid\",\n        onClick: vue.unref(handlePickDate),\n        onMousemove: vue.unref(handleMouseMove),\n        onMousedown: vue.withModifiers(vue.unref(handleMouseDown), [\"prevent\"]),\n        onMouseup: vue.unref(handleMouseUp)\n      }, [vue.createElementVNode(\"tbody\", {\n        ref_key: \"tbodyRef\",\n        ref: tbodyRef\n      }, [vue.createElementVNode(\"tr\", null, [_ctx.showWeekNumber ? (vue.openBlock(), vue.createElementBlock(\"th\", {\n        key: 0,\n        scope: \"col\"\n      }, vue.toDisplayString(vue.unref(weekLabel)), 1)) : vue.createCommentVNode(\"v-if\", true), (vue.openBlock(true), vue.createElementBlock(vue.Fragment, null, vue.renderList(vue.unref(WEEKS), function (week, key) {\n        return vue.openBlock(), vue.createElementBlock(\"th\", {\n          key: key,\n          \"aria-label\": vue.unref(t)(\"el.datepicker.weeksFull.\" + week),\n          scope: \"col\"\n        }, vue.toDisplayString(vue.unref(t)(\"el.datepicker.weeks.\" + week)), 9, [\"aria-label\"]);\n      }), 128))]), (vue.openBlock(true), vue.createElementBlock(vue.Fragment, null, vue.renderList(vue.unref(rows), function (row, rowKey) {\n        return vue.openBlock(), vue.createElementBlock(\"tr\", {\n          key: rowKey,\n          \"class\": vue.normalizeClass(vue.unref(getRowKls)(row[1]))\n        }, [(vue.openBlock(true), vue.createElementBlock(vue.Fragment, null, vue.renderList(row, function (cell, columnKey) {\n          return vue.openBlock(), vue.createElementBlock(\"td\", {\n            key: \"\".concat(rowKey, \".\").concat(columnKey),\n            ref_for: true,\n            ref: function ref(el) {\n              return !vue.unref(isUnmounting) && vue.unref(isSelectedCell)(cell) && (currentCellRef.value = el);\n            },\n            \"class\": vue.normalizeClass(vue.unref(getCellClasses)(cell)),\n            \"aria-current\": cell.isCurrent ? \"date\" : void 0,\n            \"aria-selected\": cell.isCurrent,\n            tabindex: vue.unref(isSelectedCell)(cell) ? 0 : -1,\n            onFocus: vue.unref(handleFocus)\n          }, [vue.createVNode(vue.unref(basicCellRender[\"default\"]), {\n            cell: cell\n          }, null, 8, [\"cell\"])], 42, [\"aria-current\", \"aria-selected\", \"tabindex\", \"onFocus\"]);\n        }), 128))], 2);\n      }), 128))], 512)], 42, [\"aria-label\", \"onClick\", \"onMousemove\", \"onMousedown\", \"onMouseup\"]);\n    };\n  }\n});\nvar DateTable = /* @__PURE__ */pluginVue_exportHelper[\"default\"](_sfc_main, [[\"__file\", \"basic-date-table.vue\"]]);\nexports[\"default\"] = DateTable;","map":{"version":3,"names":["_useBasicDateTable$us","useBasicDateTable","props","emit","WEEKS","rows","tbodyRef","currentCellRef","focus","isCurrent","isWeekActive","isSelectedCell","handlePickDate","handleMouseUp","handleMouseDown","handleMouseMove","handleFocus","_useBasicDateTable$us2","useBasicDateTableDOM","tableLabel","tableKls","weekLabel","getCellClasses","getRowKls","t","isUnmounting","vue","onBeforeUnmount","expose","_ctx","_cache","openBlock","createElementBlock","unref"],"sources":["../../../../../../../packages/components/date-picker/src/date-picker-com/basic-date-table.vue"],"sourcesContent":["<template>\n  <table\n    :aria-label=\"tableLabel\"\n    :class=\"tableKls\"\n    cellspacing=\"0\"\n    cellpadding=\"0\"\n    role=\"grid\"\n    @click=\"handlePickDate\"\n    @mousemove=\"handleMouseMove\"\n    @mousedown.prevent=\"handleMouseDown\"\n    @mouseup=\"handleMouseUp\"\n  >\n    <tbody ref=\"tbodyRef\">\n      <tr>\n        <th v-if=\"showWeekNumber\" scope=\"col\">{{ weekLabel }}</th>\n        <th\n          v-for=\"(week, key) in WEEKS\"\n          :key=\"key\"\n          :aria-label=\"t('el.datepicker.weeksFull.' + week)\"\n          scope=\"col\"\n        >\n          {{ t('el.datepicker.weeks.' + week) }}\n        </th>\n      </tr>\n      <tr\n        v-for=\"(row, rowKey) in rows\"\n        :key=\"rowKey\"\n        :class=\"getRowKls(row[1])\"\n      >\n        <td\n          v-for=\"(cell, columnKey) in row\"\n          :key=\"`${rowKey}.${columnKey}`\"\n          :ref=\"(el) => !isUnmounting && isSelectedCell(cell) && (currentCellRef = el as HTMLElement)\"\n          :class=\"getCellClasses(cell)\"\n          :aria-current=\"cell.isCurrent ? 'date' : undefined\"\n          :aria-selected=\"cell.isCurrent\"\n          :tabindex=\"isSelectedCell(cell) ? 0 : -1\"\n          @focus=\"handleFocus\"\n        >\n          <el-date-picker-cell :cell=\"cell\" />\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</template>\n\n<script lang=\"ts\" setup>\nimport { onBeforeUnmount } from 'vue'\nimport {\n  basicDateTableEmits,\n  basicDateTableProps,\n} from '../props/basic-date-table'\nimport {\n  useBasicDateTable,\n  useBasicDateTableDOM,\n} from '../composables/use-basic-date-table'\nimport ElDatePickerCell from './basic-cell-render'\n\nconst props = defineProps(basicDateTableProps)\nconst emit = defineEmits(basicDateTableEmits)\n\nconst {\n  WEEKS,\n  rows,\n  tbodyRef,\n  currentCellRef,\n\n  focus,\n  isCurrent,\n  isWeekActive,\n  isSelectedCell,\n\n  handlePickDate,\n  handleMouseUp,\n  handleMouseDown,\n  handleMouseMove,\n  handleFocus,\n} = useBasicDateTable(props, emit)\nconst { tableLabel, tableKls, weekLabel, getCellClasses, getRowKls, t } =\n  useBasicDateTableDOM(props, {\n    isCurrent,\n    isWeekActive,\n  })\nlet isUnmounting = false\n\nonBeforeUnmount(() => {\n  isUnmounting = true\n})\n\ndefineExpose({\n  /**\n   * @description focus on current cell\n   */\n  focus,\n})\n</script>\n"],"mappings":";;;;;;;;;;;;;;;;;;;;IA6DM,IAAAA,qBAAA,GAgBFC,iBAAA,CAAAA,iBAAkB,CAAAC,KAAA,EAAOC,IAAI;MAf/BC,KAAA,GAAAJ,qBAAA,CAAAI,KAAA;MACAC,IAAA,GAAAL,qBAAA,CAAAK,IAAA;MACAC,QAAA,GAAAN,qBAAA,CAAAM,QAAA;MACAC,cAAA,GAAAP,qBAAA,CAAAO,cAAA;MAEAC,KAAA,GAAAR,qBAAA,CAAAQ,KAAA;MACAC,SAAA,GAAAT,qBAAA,CAAAS,SAAA;MACAC,YAAA,GAAAV,qBAAA,CAAAU,YAAA;MACAC,cAAA,GAAAX,qBAAA,CAAAW,cAAA;MAEAC,cAAA,GAAAZ,qBAAA,CAAAY,cAAA;MACAC,aAAA,GAAAb,qBAAA,CAAAa,aAAA;MACAC,eAAA,GAAAd,qBAAA,CAAAc,eAAA;MACAC,eAAA,GAAAf,qBAAA,CAAAe,eAAA;MACAC,WAAA,GAAAhB,qBAAA,CAAAgB,WAAA;IAEI,IAAAC,sBAAA,GACJhB,iBAAA,CAAAiB,oBAAA,CAAqBhB,KAAO;QAC1BO,SAAA,EAAAA,SAAA;QACAC,YAAA,EAAAA;MAAA,CACD;MAJKS,UAAA,GAAAF,sBAAA,CAAAE,UAAA;MAAYC,QAAU,GAAAH,sBAAA,CAAVG,QAAU;MAAAC,SAAA,GAAAJ,sBAAA,CAAAI,SAAA;MAAWC,cAAA,GAAAL,sBAAA,CAAAK,cAAA;MAAgBC,SAAW,GAAAN,sBAAA,CAAXM,SAAW;MAAAC,CAAA,GAAAP,sBAAA,CAAAO,CAAA;IAKpE,IAAIC,YAAe;IAEnBC,GAAA,CAAAC,eAAA,CAAgB,YAAM;MACLF,YAAA;IAAA,CAChB;IAEYG,MAAA;MAAApB,KAAA,EAAAA;IAAA;IAAA,iBAAAqB,IAAA,EAAAC,MAAA;MAIX,OAAAJ,GAAA,CAAAK,SAAA,IAAAL,GAAA,CAAAM,kBAAA;QACD,cAAAN,GAAA,CAAAO,KAAA,CAAAd,UAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}