{"ast":null,"code":"'use strict';\n\nrequire(\"core-js/modules/es.array.for-each.js\");\nrequire(\"core-js/modules/es.array.from.js\");\nrequire(\"core-js/modules/es.array.includes.js\");\nrequire(\"core-js/modules/es.iterator.constructor.js\");\nrequire(\"core-js/modules/es.iterator.for-each.js\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/es.string.includes.js\");\nrequire(\"core-js/modules/es.string.iterator.js\");\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nvar token = require('../../select/src/token.js');\nvar core = require('@vueuse/core');\nvar CacheOptions = vue.defineComponent({\n  props: {\n    data: {\n      type: Array,\n      \"default\": function _default() {\n        return [];\n      }\n    }\n  },\n  setup: function setup(props) {\n    var select = vue.inject(token.selectKey);\n    vue.watch(function () {\n      return props.data;\n    }, function () {\n      var _a;\n      props.data.forEach(function (item) {\n        if (!select.states.cachedOptions.has(item.value)) {\n          select.states.cachedOptions.set(item.value, item);\n        }\n      });\n      var inputs = ((_a = select.selectRef) == null ? void 0 : _a.querySelectorAll(\"input\")) || [];\n      if (core.isClient && !Array.from(inputs).includes(document.activeElement)) {\n        select.setSelected();\n      }\n    }, {\n      flush: \"post\",\n      immediate: true\n    });\n    return function () {\n      return void 0;\n    };\n  }\n});\nexports[\"default\"] = CacheOptions;","map":{"version":3,"names":["CacheOptions","vue","defineComponent","props","data","type","Array","default","setup","select","inject","token","selectKey","watch","_a","forEach","item","states","cachedOptions","has","value","set","inputs","selectRef","querySelectorAll","core","isClient","from","includes","document","activeElement","setSelected","flush","immediate"],"sources":["../../../../../../packages/components/tree-select/src/cache-options.ts"],"sourcesContent":["import { defineComponent, inject, watch } from 'vue'\nimport { selectKey } from '@element-plus/components/select'\nimport { isClient } from '@element-plus/utils'\nimport type { SelectContext } from '@element-plus/components/select'\nimport type { PropType } from 'vue'\n\n// same as el-option instance,\n// these are required for `cachedOptions`\nexport type CacheOption = {\n  value: string | number | boolean | object\n  currentLabel: string | number\n  isDisabled: boolean\n}\n\nexport default defineComponent({\n  props: {\n    data: {\n      type: Array as PropType<CacheOption[]>,\n      default: () => [],\n    },\n  },\n  setup(props) {\n    const select = inject(selectKey) as NonNullable<SelectContext>\n\n    watch(\n      () => props.data,\n      () => {\n        props.data.forEach((item) => {\n          if (!select.states.cachedOptions.has(item.value)) {\n            // TODO: the type of 'item' is not compatible with the type of 'cachedOptions',\n            // which may indicate potential runtime issues.\n            // @ts-expect-error\n            select.states.cachedOptions.set(item.value, item)\n          }\n        })\n\n        // fork from packages/select/src/useSelect.ts#330\n        const inputs = select.selectRef?.querySelectorAll('input') || []\n        if (\n          isClient &&\n          !Array.from(inputs).includes(\n            document.activeElement as HTMLInputElement\n          )\n        ) {\n          select.setSelected()\n        }\n      },\n      { flush: 'post', immediate: true }\n    )\n\n    return () => undefined\n  },\n})\n"],"mappings":";;;;;;;;;;;;;;;;;;AAGA,IAAAA,YAAA,GAAeC,GAAA,CAAAC,eAAe,CAAC;EAC7BC,KAAK,EAAE;IACLC,IAAI,EAAE;MACJC,IAAI,EAAEC,KAAK;MACX,WAAS,SAATC,QAAOA,CAAA;QAAA,OAAQ,EAAE;MAAA;IACvB;EACA,CAAG;EACDC,KAAK,WAALA,KAAKA,CAACL,KAAK,EAAE;IACX,IAAMM,MAAM,GAAGR,GAAA,CAAAS,MAAM,CAACC,KAAA,CAAAC,SAAS,CAAC;IAChCX,GAAA,CAAAY,KAAK,CAAC;MAAA,OAAMV,KAAK,CAACC,IAAI;IAAA,GAAE,YAAM;MAC5B,IAAIU,EAAE;MACNX,KAAK,CAACC,IAAI,CAACW,OAAO,CAAC,UAACC,IAAI,EAAK;QAC3B,IAAI,CAACP,MAAM,CAACQ,MAAM,CAACC,aAAa,CAACC,GAAG,CAACH,IAAI,CAACI,KAAK,CAAC,EAAE;UAChDX,MAAM,CAACQ,MAAM,CAACC,aAAa,CAACG,GAAG,CAACL,IAAI,CAACI,KAAK,EAAEJ,IAAI,CAAC;QAC3D;MACA,CAAO,CAAC;MACF,IAAMM,MAAM,GAAG,CAAC,CAACR,EAAE,GAAGL,MAAM,CAACc,SAAS,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGT,EAAE,CAACU,gBAAgB,CAAC,OAAO,CAAC,KAAK,EAAE;MAC9F,IAAIC,IAAA,CAAAC,QAAQ,IAAI,CAACpB,KAAK,CAACqB,IAAI,CAACL,MAAM,CAAC,CAACM,QAAQ,CAACC,QAAQ,CAACC,aAAa,CAAC,EAAE;QACpErB,MAAM,CAACsB,WAAW,EAAE;MAC5B;IACA,CAAK,EAAE;MAAEC,KAAK,EAAE,MAAM;MAAEC,SAAS,EAAE;IAAI,CAAE,CAAC;IACtC,OAAO;MAAA,OAAM,KAAK,CAAC;IAAA;EACvB;AACA,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}