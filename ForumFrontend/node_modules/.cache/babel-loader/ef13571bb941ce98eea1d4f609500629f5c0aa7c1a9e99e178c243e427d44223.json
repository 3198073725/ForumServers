{"ast":null,"code":"'use strict';\n\nvar _slicedToArray = require(\"H:/ForumServers/ForumFrontend/node_modules/@babel/runtime/helpers/slicedToArray.js\")[\"default\"];\nrequire(\"core-js/modules/es.array.for-each.js\");\nrequire(\"core-js/modules/es.array.map.js\");\nrequire(\"core-js/modules/es.iterator.constructor.js\");\nrequire(\"core-js/modules/es.iterator.for-each.js\");\nrequire(\"core-js/modules/es.number.parse-float.js\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.object.entries.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar browser = require('../../../utils/browser.js');\nvar types = require('../../../utils/types.js');\nvar hiddenTextarea = void 0;\nvar HIDDEN_STYLE = {\n  height: \"0\",\n  visibility: \"hidden\",\n  overflow: browser.isFirefox() ? \"\" : \"hidden\",\n  position: \"absolute\",\n  \"z-index\": \"-1000\",\n  top: \"0\",\n  right: \"0\"\n};\nvar CONTEXT_STYLE = [\"letter-spacing\", \"line-height\", \"padding-top\", \"padding-bottom\", \"font-family\", \"font-weight\", \"font-size\", \"text-rendering\", \"text-transform\", \"width\", \"text-indent\", \"padding-left\", \"padding-right\", \"border-width\", \"box-sizing\"];\nfunction calculateNodeStyling(targetElement) {\n  var style = window.getComputedStyle(targetElement);\n  var boxSizing = style.getPropertyValue(\"box-sizing\");\n  var paddingSize = Number.parseFloat(style.getPropertyValue(\"padding-bottom\")) + Number.parseFloat(style.getPropertyValue(\"padding-top\"));\n  var borderSize = Number.parseFloat(style.getPropertyValue(\"border-bottom-width\")) + Number.parseFloat(style.getPropertyValue(\"border-top-width\"));\n  var contextStyle = CONTEXT_STYLE.map(function (name) {\n    return [name, style.getPropertyValue(name)];\n  });\n  return {\n    contextStyle: contextStyle,\n    paddingSize: paddingSize,\n    borderSize: borderSize,\n    boxSizing: boxSizing\n  };\n}\nfunction calcTextareaHeight(targetElement) {\n  var minRows = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  var maxRows = arguments.length > 2 ? arguments[2] : undefined;\n  var _a;\n  if (!hiddenTextarea) {\n    hiddenTextarea = document.createElement(\"textarea\");\n    document.body.appendChild(hiddenTextarea);\n  }\n  var _calculateNodeStyling = calculateNodeStyling(targetElement),\n    paddingSize = _calculateNodeStyling.paddingSize,\n    borderSize = _calculateNodeStyling.borderSize,\n    boxSizing = _calculateNodeStyling.boxSizing,\n    contextStyle = _calculateNodeStyling.contextStyle;\n  contextStyle.forEach(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n      key = _ref2[0],\n      value = _ref2[1];\n    return hiddenTextarea == null ? void 0 : hiddenTextarea.style.setProperty(key, value);\n  });\n  Object.entries(HIDDEN_STYLE).forEach(function (_ref3) {\n    var _ref4 = _slicedToArray(_ref3, 2),\n      key = _ref4[0],\n      value = _ref4[1];\n    return hiddenTextarea == null ? void 0 : hiddenTextarea.style.setProperty(key, value, \"important\");\n  });\n  hiddenTextarea.value = targetElement.value || targetElement.placeholder || \"\";\n  var height = hiddenTextarea.scrollHeight;\n  var result = {};\n  if (boxSizing === \"border-box\") {\n    height = height + borderSize;\n  } else if (boxSizing === \"content-box\") {\n    height = height - paddingSize;\n  }\n  hiddenTextarea.value = \"\";\n  var singleRowHeight = hiddenTextarea.scrollHeight - paddingSize;\n  if (types.isNumber(minRows)) {\n    var minHeight = singleRowHeight * minRows;\n    if (boxSizing === \"border-box\") {\n      minHeight = minHeight + paddingSize + borderSize;\n    }\n    height = Math.max(minHeight, height);\n    result.minHeight = \"\".concat(minHeight, \"px\");\n  }\n  if (types.isNumber(maxRows)) {\n    var maxHeight = singleRowHeight * maxRows;\n    if (boxSizing === \"border-box\") {\n      maxHeight = maxHeight + paddingSize + borderSize;\n    }\n    height = Math.min(maxHeight, height);\n  }\n  result.height = \"\".concat(height, \"px\");\n  (_a = hiddenTextarea.parentNode) == null ? void 0 : _a.removeChild(hiddenTextarea);\n  hiddenTextarea = void 0;\n  return result;\n}\nexports.calcTextareaHeight = calcTextareaHeight;","map":{"version":3,"names":["hiddenTextarea","HIDDEN_STYLE","height","visibility","overflow","browser","isFirefox","position","top","right","CONTEXT_STYLE","calculateNodeStyling","targetElement","style","window","getComputedStyle","boxSizing","getPropertyValue","paddingSize","Number","parseFloat","borderSize","contextStyle","map","name","calcTextareaHeight","minRows","arguments","length","undefined","maxRows","_a","document","createElement","body","appendChild","_calculateNodeStyling","forEach","_ref","_ref2","_slicedToArray","key","value","setProperty","Object","entries","_ref3","_ref4","placeholder","scrollHeight","result","singleRowHeight","types","isNumber","minHeight","Math","max","concat","maxHeight","min","parentNode","removeChild"],"sources":["../../../../../../packages/components/input/src/utils.ts"],"sourcesContent":["import { isFirefox, isNumber } from '@element-plus/utils'\n\nlet hiddenTextarea: HTMLTextAreaElement | undefined = undefined\n\nconst HIDDEN_STYLE = {\n  height: '0',\n  visibility: 'hidden',\n  overflow: isFirefox() ? '' : 'hidden',\n  position: 'absolute',\n  'z-index': '-1000',\n  top: '0',\n  right: '0',\n}\n\nconst CONTEXT_STYLE = [\n  'letter-spacing',\n  'line-height',\n  'padding-top',\n  'padding-bottom',\n  'font-family',\n  'font-weight',\n  'font-size',\n  'text-rendering',\n  'text-transform',\n  'width',\n  'text-indent',\n  'padding-left',\n  'padding-right',\n  'border-width',\n  'box-sizing',\n]\n\ntype NodeStyle = {\n  contextStyle: string[][]\n  boxSizing: string\n  paddingSize: number\n  borderSize: number\n}\n\ntype TextAreaHeight = {\n  height: string\n  minHeight?: string\n}\n\nfunction calculateNodeStyling(targetElement: Element): NodeStyle {\n  const style = window.getComputedStyle(targetElement)\n\n  const boxSizing = style.getPropertyValue('box-sizing')\n\n  const paddingSize =\n    Number.parseFloat(style.getPropertyValue('padding-bottom')) +\n    Number.parseFloat(style.getPropertyValue('padding-top'))\n\n  const borderSize =\n    Number.parseFloat(style.getPropertyValue('border-bottom-width')) +\n    Number.parseFloat(style.getPropertyValue('border-top-width'))\n\n  const contextStyle = CONTEXT_STYLE.map((name) => [\n    name,\n    style.getPropertyValue(name),\n  ])\n\n  return { contextStyle, paddingSize, borderSize, boxSizing }\n}\n\nexport function calcTextareaHeight(\n  targetElement: HTMLTextAreaElement,\n  minRows = 1,\n  maxRows?: number\n): TextAreaHeight {\n  if (!hiddenTextarea) {\n    hiddenTextarea = document.createElement('textarea')\n    document.body.appendChild(hiddenTextarea)\n  }\n\n  const { paddingSize, borderSize, boxSizing, contextStyle } =\n    calculateNodeStyling(targetElement)\n\n  contextStyle.forEach(([key, value]) =>\n    hiddenTextarea?.style.setProperty(key, value)\n  )\n\n  Object.entries(HIDDEN_STYLE).forEach(([key, value]) =>\n    hiddenTextarea?.style.setProperty(key, value, 'important')\n  )\n\n  hiddenTextarea.value = targetElement.value || targetElement.placeholder || ''\n\n  let height = hiddenTextarea.scrollHeight\n  const result = {} as TextAreaHeight\n\n  if (boxSizing === 'border-box') {\n    height = height + borderSize\n  } else if (boxSizing === 'content-box') {\n    height = height - paddingSize\n  }\n\n  hiddenTextarea.value = ''\n  const singleRowHeight = hiddenTextarea.scrollHeight - paddingSize\n\n  if (isNumber(minRows)) {\n    let minHeight = singleRowHeight * minRows\n    if (boxSizing === 'border-box') {\n      minHeight = minHeight + paddingSize + borderSize\n    }\n    height = Math.max(minHeight, height)\n    result.minHeight = `${minHeight}px`\n  }\n  if (isNumber(maxRows)) {\n    let maxHeight = singleRowHeight * maxRows\n    if (boxSizing === 'border-box') {\n      maxHeight = maxHeight + paddingSize + borderSize\n    }\n    height = Math.min(maxHeight, height)\n  }\n  result.height = `${height}px`\n  hiddenTextarea.parentNode?.removeChild(hiddenTextarea)\n  hiddenTextarea = undefined\n\n  return result\n}\n"],"mappings":";;;;;;;;;;;;;;;;;AACA,IAAIA,cAAc,GAAG,KAAK,CAAC;AAC3B,IAAMC,YAAY,GAAG;EACnBC,MAAM,EAAE,GAAG;EACXC,UAAU,EAAE,QAAQ;EACpBC,QAAQ,EAAEC,OAAA,CAAAC,SAAS,EAAE,GAAG,EAAE,GAAG,QAAQ;EACrCC,QAAQ,EAAE,UAAU;EACpB,SAAS,EAAE,OAAO;EAClBC,GAAG,EAAE,GAAG;EACRC,KAAK,EAAE;AACT,CAAC;AACD,IAAMC,aAAa,GAAG,CACpB,gBAAgB,EAChB,aAAa,EACb,aAAa,EACb,gBAAgB,EAChB,aAAa,EACb,aAAa,EACb,WAAW,EACX,gBAAgB,EAChB,gBAAgB,EAChB,OAAO,EACP,aAAa,EACb,cAAc,EACd,eAAe,EACf,cAAc,EACd,YAAY,CACb;AACD,SAASC,oBAAoBA,CAACC,aAAa,EAAE;EAC3C,IAAMC,KAAK,GAAGC,MAAM,CAACC,gBAAgB,CAACH,aAAa,CAAC;EACpD,IAAMI,SAAS,GAAGH,KAAK,CAACI,gBAAgB,CAAC,YAAY,CAAC;EACtD,IAAMC,WAAW,GAAGC,MAAM,CAACC,UAAU,CAACP,KAAK,CAACI,gBAAgB,CAAC,gBAAgB,CAAC,CAAC,GAAGE,MAAM,CAACC,UAAU,CAACP,KAAK,CAACI,gBAAgB,CAAC,aAAa,CAAC,CAAC;EAC1I,IAAMI,UAAU,GAAGF,MAAM,CAACC,UAAU,CAACP,KAAK,CAACI,gBAAgB,CAAC,qBAAqB,CAAC,CAAC,GAAGE,MAAM,CAACC,UAAU,CAACP,KAAK,CAACI,gBAAgB,CAAC,kBAAkB,CAAC,CAAC;EACnJ,IAAMK,YAAY,GAAGZ,aAAa,CAACa,GAAG,CAAC,UAACC,IAAI;IAAA,OAAK,CAC/CA,IAAI,EACJX,KAAK,CAACI,gBAAgB,CAACO,IAAI,CAAC,CAC7B;EAAA,EAAC;EACF,OAAO;IAAEF,YAAY,EAAZA,YAAY;IAAEJ,WAAW,EAAXA,WAAW;IAAEG,UAAU,EAAVA,UAAU;IAAEL,SAAS,EAATA;EAAS,CAAE;AAC7D;AACO,SAASS,kBAAkBA,CAACb,aAAa,EAAwB;EAAA,IAAtBc,OAAO,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC;EAAA,IAAEG,OAAO,GAAAH,SAAA,CAAAC,MAAA,OAAAD,SAAA,MAAAE,SAAA;EACpE,IAAIE,EAAE;EACN,IAAI,CAAC/B,cAAc,EAAE;IACnBA,cAAc,GAAGgC,QAAQ,CAACC,aAAa,CAAC,UAAU,CAAC;IACnDD,QAAQ,CAACE,IAAI,CAACC,WAAW,CAACnC,cAAc,CAAC;EAC7C;EACE,IAAAoC,qBAAA,GAA6DzB,oBAAoB,CAACC,aAAa,CAAC;IAAxFM,WAAW,GAAAkB,qBAAA,CAAXlB,WAAW;IAAEG,UAAU,GAAAe,qBAAA,CAAVf,UAAU;IAAEL,SAAS,GAAAoB,qBAAA,CAATpB,SAAS;IAAEM,YAAY,GAAAc,qBAAA,CAAZd,YAAY;EACxDA,YAAY,CAACe,OAAO,CAAC,UAAAC,IAAA;IAAA,IAAAC,KAAA,GAAAC,cAAA,CAAAF,IAAA;MAAEG,GAAG,GAAAF,KAAA;MAAEG,KAAK,GAAAH,KAAA;IAAA,OAAMvC,cAAc,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,cAAc,CAACa,KAAK,CAAC8B,WAAW,CAACF,GAAG,EAAEC,KAAK,CAAC;EAAA,EAAC;EACtHE,MAAM,CAACC,OAAO,CAAC5C,YAAY,CAAC,CAACoC,OAAO,CAAC,UAAAS,KAAA;IAAA,IAAAC,KAAA,GAAAP,cAAA,CAAAM,KAAA;MAAEL,GAAG,GAAAM,KAAA;MAAEL,KAAK,GAAAK,KAAA;IAAA,OAAM/C,cAAc,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,cAAc,CAACa,KAAK,CAAC8B,WAAW,CAACF,GAAG,EAAEC,KAAK,EAAE,WAAW,CAAC;EAAA,EAAC;EACnJ1C,cAAc,CAAC0C,KAAK,GAAG9B,aAAa,CAAC8B,KAAK,IAAI9B,aAAa,CAACoC,WAAW,IAAI,EAAE;EAC7E,IAAI9C,MAAM,GAAGF,cAAc,CAACiD,YAAY;EACxC,IAAMC,MAAM,GAAG,EAAE;EACjB,IAAIlC,SAAS,KAAK,YAAY,EAAE;IAC9Bd,MAAM,GAAGA,MAAM,GAAGmB,UAAU;EAChC,CAAG,MAAM,IAAIL,SAAS,KAAK,aAAa,EAAE;IACtCd,MAAM,GAAGA,MAAM,GAAGgB,WAAW;EACjC;EACElB,cAAc,CAAC0C,KAAK,GAAG,EAAE;EACzB,IAAMS,eAAe,GAAGnD,cAAc,CAACiD,YAAY,GAAG/B,WAAW;EACjE,IAAIkC,KAAA,CAAAC,QAAQ,CAAC3B,OAAO,CAAC,EAAE;IACrB,IAAI4B,SAAS,GAAGH,eAAe,GAAGzB,OAAO;IACzC,IAAIV,SAAS,KAAK,YAAY,EAAE;MAC9BsC,SAAS,GAAGA,SAAS,GAAGpC,WAAW,GAAGG,UAAU;IACtD;IACInB,MAAM,GAAGqD,IAAI,CAACC,GAAG,CAACF,SAAS,EAAEpD,MAAM,CAAC;IACpCgD,MAAM,CAACI,SAAS,MAAAG,MAAA,CAAMH,SAAS,OAAI;EACvC;EACE,IAAIF,KAAA,CAAAC,QAAQ,CAACvB,OAAO,CAAC,EAAE;IACrB,IAAI4B,SAAS,GAAGP,eAAe,GAAGrB,OAAO;IACzC,IAAId,SAAS,KAAK,YAAY,EAAE;MAC9B0C,SAAS,GAAGA,SAAS,GAAGxC,WAAW,GAAGG,UAAU;IACtD;IACInB,MAAM,GAAGqD,IAAI,CAACI,GAAG,CAACD,SAAS,EAAExD,MAAM,CAAC;EACxC;EACEgD,MAAM,CAAChD,MAAM,MAAAuD,MAAA,CAAMvD,MAAM,OAAI;EAC7B,CAAC6B,EAAE,GAAG/B,cAAc,CAAC4D,UAAU,KAAK,IAAI,GAAG,KAAK,CAAC,GAAG7B,EAAE,CAAC8B,WAAW,CAAC7D,cAAc,CAAC;EAClFA,cAAc,GAAG,KAAK,CAAC;EACvB,OAAOkD,MAAM;AACf","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}