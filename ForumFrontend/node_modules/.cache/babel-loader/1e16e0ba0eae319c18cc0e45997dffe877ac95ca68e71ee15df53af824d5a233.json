{"ast":null,"code":"'use strict';\n\nvar _regeneratorRuntime = require(\"H:/ForumServers/ForumFrontend/node_modules/@babel/runtime/helpers/regeneratorRuntime.js\")[\"default\"];\nvar _asyncToGenerator = require(\"H:/ForumServers/ForumFrontend/node_modules/@babel/runtime/helpers/asyncToGenerator.js\")[\"default\"];\nrequire(\"core-js/modules/es.array.includes.js\");\nrequire(\"core-js/modules/es.array.some.js\");\nrequire(\"core-js/modules/es.iterator.constructor.js\");\nrequire(\"core-js/modules/es.iterator.some.js\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nvar constants = require('../constants.js');\nvar useFormItem = require('../../../form/src/hooks/use-form-item.js');\nvar error = require('../../../../utils/error.js');\nvar event = require('../../../../constants/event.js');\nvar useCheckboxEvent = function useCheckboxEvent(props, _ref) {\n  var model = _ref.model,\n    isLimitExceeded = _ref.isLimitExceeded,\n    hasOwnLabel = _ref.hasOwnLabel,\n    isDisabled = _ref.isDisabled,\n    isLabeledByFormItem = _ref.isLabeledByFormItem;\n  var checkboxGroup = vue.inject(constants.checkboxGroupContextKey, void 0);\n  var _useFormItem$useFormI = useFormItem.useFormItem(),\n    formItem = _useFormItem$useFormI.formItem;\n  var _vue$getCurrentInstan = vue.getCurrentInstance(),\n    emit = _vue$getCurrentInstan.emit;\n  function getLabeledValue(value) {\n    var _a, _b, _c, _d;\n    return [true, props.trueValue, props.trueLabel].includes(value) ? (_b = (_a = props.trueValue) != null ? _a : props.trueLabel) != null ? _b : true : (_d = (_c = props.falseValue) != null ? _c : props.falseLabel) != null ? _d : false;\n  }\n  function emitChangeEvent(checked, e) {\n    emit(event.CHANGE_EVENT, getLabeledValue(checked), e);\n  }\n  function handleChange(e) {\n    if (isLimitExceeded.value) return;\n    var target = e.target;\n    emit(event.CHANGE_EVENT, getLabeledValue(target.checked), e);\n  }\n  function onClickRoot(_x) {\n    return _onClickRoot.apply(this, arguments);\n  }\n  function _onClickRoot() {\n    _onClickRoot = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e) {\n      var eventTargets, hasLabel;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            if (!isLimitExceeded.value) {\n              _context.next = 2;\n              break;\n            }\n            return _context.abrupt(\"return\");\n          case 2:\n            if (!(!hasOwnLabel.value && !isDisabled.value && isLabeledByFormItem.value)) {\n              _context.next = 10;\n              break;\n            }\n            eventTargets = e.composedPath();\n            hasLabel = eventTargets.some(function (item) {\n              return item.tagName === \"LABEL\";\n            });\n            if (hasLabel) {\n              _context.next = 10;\n              break;\n            }\n            model.value = getLabeledValue([false, props.falseValue, props.falseLabel].includes(model.value));\n            _context.next = 9;\n            return vue.nextTick();\n          case 9:\n            emitChangeEvent(model.value, e);\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n    return _onClickRoot.apply(this, arguments);\n  }\n  var validateEvent = vue.computed(function () {\n    return (checkboxGroup == null ? void 0 : checkboxGroup.validateEvent) || props.validateEvent;\n  });\n  vue.watch(function () {\n    return props.modelValue;\n  }, function () {\n    if (validateEvent.value) {\n      formItem == null ? void 0 : formItem.validate(\"change\")[\"catch\"](function (err) {\n        return error.debugWarn(err);\n      });\n    }\n  });\n  return {\n    handleChange: handleChange,\n    onClickRoot: onClickRoot\n  };\n};\nexports.useCheckboxEvent = useCheckboxEvent;","map":{"version":3,"names":["useCheckboxEvent","props","_ref","model","isLimitExceeded","hasOwnLabel","isDisabled","isLabeledByFormItem","checkboxGroup","vue","inject","constants","checkboxGroupContextKey","_useFormItem$useFormI","useFormItem","formItem","_vue$getCurrentInstan","getCurrentInstance","emit","getLabeledValue","value","_a","_b","_c","_d","trueValue","trueLabel","includes","falseValue","falseLabel","emitChangeEvent","checked","e","event","CHANGE_EVENT","handleChange","target","onClickRoot","_x","_onClickRoot","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","eventTargets","hasLabel","wrap","_callee$","_context","prev","next","abrupt","composedPath","some","item","tagName","nextTick","stop","validateEvent","computed","watch","modelValue","validate","err","error","debugWarn"],"sources":["../../../../../../../packages/components/checkbox/src/composables/use-checkbox-event.ts"],"sourcesContent":["import { computed, getCurrentInstance, inject, nextTick, watch } from 'vue'\nimport { useFormItem } from '@element-plus/components/form'\nimport { debugWarn } from '@element-plus/utils'\nimport { CHANGE_EVENT } from '@element-plus/constants'\nimport { checkboxGroupContextKey } from '../constants'\n\nimport type { useFormItemInputId } from '@element-plus/components/form'\nimport type { CheckboxProps } from '../checkbox'\nimport type {\n  CheckboxDisabled,\n  CheckboxModel,\n  CheckboxStatus,\n} from '../composables'\n\nexport const useCheckboxEvent = (\n  props: CheckboxProps,\n  {\n    model,\n    isLimitExceeded,\n    hasOwnLabel,\n    isDisabled,\n    isLabeledByFormItem,\n  }: Pick<CheckboxModel, 'model' | 'isLimitExceeded'> &\n    Pick<CheckboxStatus, 'hasOwnLabel'> &\n    Pick<CheckboxDisabled, 'isDisabled'> &\n    Pick<ReturnType<typeof useFormItemInputId>, 'isLabeledByFormItem'>\n) => {\n  const checkboxGroup = inject(checkboxGroupContextKey, undefined)\n  const { formItem } = useFormItem()\n  const { emit } = getCurrentInstance()!\n\n  function getLabeledValue(value: string | number | boolean) {\n    return [true, props.trueValue, props.trueLabel].includes(value)\n      ? props.trueValue ?? props.trueLabel ?? true\n      : props.falseValue ?? props.falseLabel ?? false\n  }\n\n  function emitChangeEvent(\n    checked: string | number | boolean,\n    e: InputEvent | MouseEvent\n  ) {\n    emit(CHANGE_EVENT, getLabeledValue(checked), e)\n  }\n\n  function handleChange(e: Event) {\n    if (isLimitExceeded.value) return\n\n    const target = e.target as HTMLInputElement\n    emit(CHANGE_EVENT, getLabeledValue(target.checked), e)\n  }\n\n  async function onClickRoot(e: MouseEvent) {\n    if (isLimitExceeded.value) return\n\n    if (!hasOwnLabel.value && !isDisabled.value && isLabeledByFormItem.value) {\n      // fix: https://github.com/element-plus/element-plus/issues/9981\n      const eventTargets: EventTarget[] = e.composedPath()\n      const hasLabel = eventTargets.some(\n        (item) => (item as HTMLElement).tagName === 'LABEL'\n      )\n      if (!hasLabel) {\n        model.value = getLabeledValue(\n          [false, props.falseValue, props.falseLabel].includes(model.value)\n        )\n        await nextTick()\n        emitChangeEvent(model.value, e)\n      }\n    }\n  }\n\n  const validateEvent = computed(\n    () => checkboxGroup?.validateEvent || props.validateEvent\n  )\n\n  watch(\n    () => props.modelValue,\n    () => {\n      if (validateEvent.value) {\n        formItem?.validate('change').catch((err) => debugWarn(err))\n      }\n    }\n  )\n\n  return {\n    handleChange,\n    onClickRoot,\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}