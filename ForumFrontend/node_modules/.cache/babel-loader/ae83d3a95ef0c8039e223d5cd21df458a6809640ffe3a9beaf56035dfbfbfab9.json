{"ast":null,"code":"'use strict';\n\nrequire(\"core-js/modules/es.object.define-property.js\");\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nvar i18n = require('../../utils/i18n.js');\nfunction useComposition(_ref) {\n  var afterComposition = _ref.afterComposition,\n    emit = _ref.emit;\n  var isComposing = vue.ref(false);\n  var handleCompositionStart = function handleCompositionStart(event) {\n    emit == null ? void 0 : emit(\"compositionstart\", event);\n    isComposing.value = true;\n  };\n  var handleCompositionUpdate = function handleCompositionUpdate(event) {\n    var _a;\n    emit == null ? void 0 : emit(\"compositionupdate\", event);\n    var text = (_a = event.target) == null ? void 0 : _a.value;\n    var lastCharacter = text[text.length - 1] || \"\";\n    isComposing.value = !i18n.isKorean(lastCharacter);\n  };\n  var handleCompositionEnd = function handleCompositionEnd(event) {\n    emit == null ? void 0 : emit(\"compositionend\", event);\n    if (isComposing.value) {\n      isComposing.value = false;\n      vue.nextTick(function () {\n        return afterComposition(event);\n      });\n    }\n  };\n  var handleComposition = function handleComposition(event) {\n    event.type === \"compositionend\" ? handleCompositionEnd(event) : handleCompositionUpdate(event);\n  };\n  return {\n    isComposing: isComposing,\n    handleComposition: handleComposition,\n    handleCompositionStart: handleCompositionStart,\n    handleCompositionUpdate: handleCompositionUpdate,\n    handleCompositionEnd: handleCompositionEnd\n  };\n}\nexports.useComposition = useComposition;","map":{"version":3,"names":["useComposition","_ref","afterComposition","emit","isComposing","vue","ref","handleCompositionStart","event","value","handleCompositionUpdate","_a","text","target","lastCharacter","length","i18n","isKorean","handleCompositionEnd","nextTick","handleComposition","type"],"sources":["../../../../../packages/hooks/use-composition/index.ts"],"sourcesContent":["import { nextTick, ref } from 'vue'\nimport { isKorean } from '@element-plus/utils'\n\ninterface UseCompositionOptions {\n  afterComposition: (event: CompositionEvent) => void\n  emit?: ((event: 'compositionstart', evt: CompositionEvent) => void) &\n    ((event: 'compositionupdate', evt: CompositionEvent) => void) &\n    ((event: 'compositionend', evt: CompositionEvent) => void)\n}\n\nexport function useComposition({\n  afterComposition,\n  emit,\n}: UseCompositionOptions) {\n  const isComposing = ref(false)\n\n  const handleCompositionStart = (event: CompositionEvent) => {\n    emit?.('compositionstart', event)\n    isComposing.value = true\n  }\n\n  const handleCompositionUpdate = (event: CompositionEvent) => {\n    emit?.('compositionupdate', event)\n    const text = (event.target as HTMLInputElement)?.value\n    const lastCharacter = text[text.length - 1] || ''\n    isComposing.value = !isKorean(lastCharacter)\n  }\n\n  const handleCompositionEnd = (event: CompositionEvent) => {\n    emit?.('compositionend', event)\n    if (isComposing.value) {\n      isComposing.value = false\n      nextTick(() => afterComposition(event))\n    }\n  }\n\n  const handleComposition = (event: CompositionEvent) => {\n    event.type === 'compositionend'\n      ? handleCompositionEnd(event)\n      : handleCompositionUpdate(event)\n  }\n\n  return {\n    isComposing,\n    handleComposition,\n    handleCompositionStart,\n    handleCompositionUpdate,\n    handleCompositionEnd,\n  }\n}\n"],"mappings":";;;;;;;;AAEO,SAASA,cAAcA,CAAAC,IAAA,EAG3B;EAAA,IAFDC,gBAAgB,GAAAD,IAAA,CAAhBC,gBAAgB;IAChBC,IAAI,GAAAF,IAAA,CAAJE,IAAI;EAEJ,IAAMC,WAAW,GAAGC,GAAA,CAAAC,GAAG,CAAC,KAAK,CAAC;EAC9B,IAAMC,sBAAsB,GAAG,SAAzBA,sBAAsBA,CAAIC,KAAK,EAAK;IACxCL,IAAI,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,IAAI,CAAC,kBAAkB,EAAEK,KAAK,CAAC;IACvDJ,WAAW,CAACK,KAAK,GAAG,IAAI;EAC5B,CAAG;EACD,IAAMC,uBAAuB,GAAG,SAA1BA,uBAAuBA,CAAIF,KAAK,EAAK;IACzC,IAAIG,EAAE;IACNR,IAAI,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,IAAI,CAAC,mBAAmB,EAAEK,KAAK,CAAC;IACxD,IAAMI,IAAI,GAAG,CAACD,EAAE,GAAGH,KAAK,CAACK,MAAM,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGF,EAAE,CAACF,KAAK;IAC5D,IAAMK,aAAa,GAAGF,IAAI,CAACA,IAAI,CAACG,MAAM,GAAG,CAAC,CAAC,IAAI,EAAE;IACjDX,WAAW,CAACK,KAAK,GAAG,CAACO,IAAA,CAAAC,QAAQ,CAACH,aAAa,CAAC;EAChD,CAAG;EACD,IAAMI,oBAAoB,GAAG,SAAvBA,oBAAoBA,CAAIV,KAAK,EAAK;IACtCL,IAAI,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,IAAI,CAAC,gBAAgB,EAAEK,KAAK,CAAC;IACrD,IAAIJ,WAAW,CAACK,KAAK,EAAE;MACrBL,WAAW,CAACK,KAAK,GAAG,KAAK;MACzBJ,GAAA,CAAAc,QAAQ,CAAC;QAAA,OAAMjB,gBAAgB,CAACM,KAAK,CAAC;MAAA,EAAC;IAC7C;EACA,CAAG;EACD,IAAMY,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAIZ,KAAK,EAAK;IACnCA,KAAK,CAACa,IAAI,KAAK,gBAAgB,GAAGH,oBAAoB,CAACV,KAAK,CAAC,GAAGE,uBAAuB,CAACF,KAAK,CAAC;EAClG,CAAG;EACD,OAAO;IACLJ,WAAW,EAAXA,WAAW;IACXgB,iBAAiB,EAAjBA,iBAAiB;IACjBb,sBAAsB,EAAtBA,sBAAsB;IACtBG,uBAAuB,EAAvBA,uBAAuB;IACvBQ,oBAAoB,EAApBA;EACJ,CAAG;AACH","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}