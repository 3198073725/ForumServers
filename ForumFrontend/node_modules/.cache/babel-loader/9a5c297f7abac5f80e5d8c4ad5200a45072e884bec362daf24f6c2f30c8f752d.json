{"ast":null,"code":"'use strict';\n\nvar _defineProperty = require(\"H:/ForumServers/ForumFrontend/node_modules/@babel/runtime/helpers/defineProperty.js\")[\"default\"];\nrequire(\"core-js/modules/es.array.includes.js\");\nrequire(\"core-js/modules/es.number.constructor.js\");\nrequire(\"core-js/modules/es.number.is-finite.js\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nvar defaults = require('../defaults.js');\nvar props = require('../props.js');\nvar utils = require('../utils.js');\nvar util = require('../../../scrollbar/src/util.js');\nvar index = require('../../../../hooks/use-namespace/index.js');\nvar raf = require('../../../../utils/raf.js');\nvar ScrollBar = vue.defineComponent({\n  name: \"ElVirtualScrollBar\",\n  props: props.virtualizedScrollbarProps,\n  emits: [\"scroll\", \"start-move\", \"stop-move\"],\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit;\n    var GAP = vue.computed(function () {\n      return props.startGap + props.endGap;\n    });\n    var nsVirtualScrollbar = index.useNamespace(\"virtual-scrollbar\");\n    var nsScrollbar = index.useNamespace(\"scrollbar\");\n    var trackRef = vue.ref();\n    var thumbRef = vue.ref();\n    var frameHandle = null;\n    var onselectstartStore = null;\n    var state = vue.reactive({\n      isDragging: false,\n      traveled: 0\n    });\n    var bar = vue.computed(function () {\n      return util.BAR_MAP[props.layout];\n    });\n    var trackSize = vue.computed(function () {\n      return props.clientSize - vue.unref(GAP);\n    });\n    var trackStyle = vue.computed(function () {\n      return _defineProperty(_defineProperty(_defineProperty(_defineProperty({\n        position: \"absolute\",\n        width: \"\".concat(defaults.HORIZONTAL === props.layout ? trackSize.value : props.scrollbarSize, \"px\"),\n        height: \"\".concat(defaults.HORIZONTAL === props.layout ? props.scrollbarSize : trackSize.value, \"px\")\n      }, defaults.ScrollbarDirKey[props.layout], \"2px\"), \"right\", \"2px\"), \"bottom\", \"2px\"), \"borderRadius\", \"4px\");\n    });\n    var thumbSize = vue.computed(function () {\n      var ratio = props.ratio;\n      var clientSize = props.clientSize;\n      if (ratio >= 100) {\n        return Number.POSITIVE_INFINITY;\n      }\n      if (ratio >= 50) {\n        return ratio * clientSize / 100;\n      }\n      var SCROLLBAR_MAX_SIZE = clientSize / 3;\n      return Math.floor(Math.min(Math.max(ratio * clientSize, defaults.SCROLLBAR_MIN_SIZE), SCROLLBAR_MAX_SIZE));\n    });\n    var thumbStyle = vue.computed(function () {\n      if (!Number.isFinite(thumbSize.value)) {\n        return {\n          display: \"none\"\n        };\n      }\n      var thumb = \"\".concat(thumbSize.value, \"px\");\n      var style = utils.renderThumbStyle({\n        bar: bar.value,\n        size: thumb,\n        move: state.traveled\n      }, props.layout);\n      return style;\n    });\n    var totalSteps = vue.computed(function () {\n      return Math.floor(props.clientSize - thumbSize.value - vue.unref(GAP));\n    });\n    var attachEvents = function attachEvents() {\n      window.addEventListener(\"mousemove\", onMouseMove);\n      window.addEventListener(\"mouseup\", onMouseUp);\n      var thumbEl = vue.unref(thumbRef);\n      if (!thumbEl) return;\n      onselectstartStore = document.onselectstart;\n      document.onselectstart = function () {\n        return false;\n      };\n      thumbEl.addEventListener(\"touchmove\", onMouseMove, {\n        passive: true\n      });\n      thumbEl.addEventListener(\"touchend\", onMouseUp);\n    };\n    var detachEvents = function detachEvents() {\n      window.removeEventListener(\"mousemove\", onMouseMove);\n      window.removeEventListener(\"mouseup\", onMouseUp);\n      document.onselectstart = onselectstartStore;\n      onselectstartStore = null;\n      var thumbEl = vue.unref(thumbRef);\n      if (!thumbEl) return;\n      thumbEl.removeEventListener(\"touchmove\", onMouseMove);\n      thumbEl.removeEventListener(\"touchend\", onMouseUp);\n    };\n    var onThumbMouseDown = function onThumbMouseDown(e) {\n      e.stopImmediatePropagation();\n      if (e.ctrlKey || [1, 2].includes(e.button)) {\n        return;\n      }\n      state.isDragging = true;\n      state[bar.value.axis] = e.currentTarget[bar.value.offset] - (e[bar.value.client] - e.currentTarget.getBoundingClientRect()[bar.value.direction]);\n      emit(\"start-move\");\n      attachEvents();\n    };\n    var onMouseUp = function onMouseUp() {\n      state.isDragging = false;\n      state[bar.value.axis] = 0;\n      emit(\"stop-move\");\n      detachEvents();\n    };\n    var onMouseMove = function onMouseMove(e) {\n      var isDragging = state.isDragging;\n      if (!isDragging) return;\n      if (!thumbRef.value || !trackRef.value) return;\n      var prevPage = state[bar.value.axis];\n      if (!prevPage) return;\n      raf.cAF(frameHandle);\n      var offset = (trackRef.value.getBoundingClientRect()[bar.value.direction] - e[bar.value.client]) * -1;\n      var thumbClickPosition = thumbRef.value[bar.value.offset] - prevPage;\n      var distance = offset - thumbClickPosition;\n      frameHandle = raf.rAF(function () {\n        state.traveled = Math.max(props.startGap, Math.min(distance, totalSteps.value));\n        emit(\"scroll\", distance, totalSteps.value);\n      });\n    };\n    var clickTrackHandler = function clickTrackHandler(e) {\n      var offset = Math.abs(e.target.getBoundingClientRect()[bar.value.direction] - e[bar.value.client]);\n      var thumbHalf = thumbRef.value[bar.value.offset] / 2;\n      var distance = offset - thumbHalf;\n      state.traveled = Math.max(0, Math.min(distance, totalSteps.value));\n      emit(\"scroll\", distance, totalSteps.value);\n    };\n    vue.watch(function () {\n      return props.scrollFrom;\n    }, function (v) {\n      if (state.isDragging) return;\n      state.traveled = Math.ceil(v * totalSteps.value);\n    });\n    vue.onBeforeUnmount(function () {\n      detachEvents();\n    });\n    return function () {\n      return vue.h(\"div\", {\n        role: \"presentation\",\n        ref: trackRef,\n        \"class\": [nsVirtualScrollbar.b(), props[\"class\"], (props.alwaysOn || state.isDragging) && \"always-on\"],\n        style: trackStyle.value,\n        onMousedown: vue.withModifiers(clickTrackHandler, [\"stop\", \"prevent\"]),\n        onTouchstartPrevent: onThumbMouseDown\n      }, vue.h(\"div\", {\n        ref: thumbRef,\n        \"class\": nsScrollbar.e(\"thumb\"),\n        style: thumbStyle.value,\n        onMousedown: onThumbMouseDown\n      }, []));\n    };\n  }\n});\nexports[\"default\"] = ScrollBar;","map":{"version":3,"names":["ScrollBar","vue","defineComponent","name","props","virtualizedScrollbarProps","emits","setup","_ref","emit","GAP","computed","startGap","endGap","nsVirtualScrollbar","index","useNamespace","nsScrollbar","trackRef","ref","thumbRef","frameHandle","onselectstartStore","state","reactive","isDragging","traveled","bar","util","BAR_MAP","layout","trackSize","clientSize","unref","trackStyle","_defineProperty","position","width","concat","defaults","HORIZONTAL","value","scrollbarSize","height","ScrollbarDirKey","thumbSize","ratio","Number","POSITIVE_INFINITY","SCROLLBAR_MAX_SIZE","Math","floor","min","max","SCROLLBAR_MIN_SIZE","thumbStyle","isFinite","display","thumb","style","utils","renderThumbStyle","size","move","totalSteps","attachEvents","window","addEventListener","onMouseMove","onMouseUp","thumbEl","document","onselectstart","passive","detachEvents","removeEventListener","onThumbMouseDown","e","stopImmediatePropagation","ctrlKey","includes","button","axis","currentTarget","offset","client","getBoundingClientRect","direction","prevPage","raf","cAF","thumbClickPosition","distance","rAF","clickTrackHandler","abs","target","thumbHalf","watch","scrollFrom","v","ceil","onBeforeUnmount","h","role","b","alwaysOn","onMousedown","withModifiers","onTouchstartPrevent"],"sources":["../../../../../../../packages/components/virtual-list/src/components/scrollbar.ts"],"sourcesContent":["import {\n  computed,\n  defineComponent,\n  h,\n  onBeforeUnmount,\n  reactive,\n  ref,\n  unref,\n  watch,\n  withModifiers,\n} from 'vue'\nimport { BAR_MAP } from '@element-plus/components/scrollbar'\nimport { cAF, rAF } from '@element-plus/utils'\n\nimport { useNamespace } from '@element-plus/hooks'\nimport { HORIZONTAL, SCROLLBAR_MIN_SIZE, ScrollbarDirKey } from '../defaults'\nimport { virtualizedScrollbarProps } from '../props'\nimport { renderThumbStyle } from '../utils'\n\nimport type { CSSProperties } from 'vue'\n\ninterface ScrollState {\n  isDragging: boolean\n  traveled: number\n  [key: string]: unknown\n}\n\nconst ScrollBar = defineComponent({\n  name: 'ElVirtualScrollBar',\n  props: virtualizedScrollbarProps,\n  emits: ['scroll', 'start-move', 'stop-move'],\n  setup(props, { emit }) {\n    const GAP = computed(() => props.startGap + props.endGap) // top 2 + bottom 2 | left 2 + right 2\n\n    const nsVirtualScrollbar = useNamespace('virtual-scrollbar')\n    const nsScrollbar = useNamespace('scrollbar')\n    // DOM refs\n    const trackRef = ref<HTMLElement>()\n    const thumbRef = ref<HTMLElement>()\n\n    // local variables\n    let frameHandle: null | number = null\n    let onselectstartStore: null | typeof document.onselectstart = null\n\n    // data\n    const state = reactive<ScrollState>({\n      isDragging: false,\n      traveled: 0,\n    })\n\n    const bar = computed(() => BAR_MAP[props.layout])\n\n    const trackSize = computed(() => props.clientSize! - unref(GAP))\n\n    const trackStyle = computed<CSSProperties>(() => ({\n      position: 'absolute',\n      width: `${\n        HORIZONTAL === props.layout ? trackSize.value : props.scrollbarSize\n      }px`,\n      height: `${\n        HORIZONTAL === props.layout ? props.scrollbarSize : trackSize.value\n      }px`,\n      [ScrollbarDirKey[props.layout]]: '2px',\n      right: '2px',\n      bottom: '2px',\n      borderRadius: '4px',\n    }))\n\n    const thumbSize = computed(() => {\n      const ratio = props.ratio!\n      const clientSize = props.clientSize!\n      if (ratio >= 100) {\n        return Number.POSITIVE_INFINITY\n      }\n\n      if (ratio >= 50) {\n        return (ratio * clientSize) / 100\n      }\n\n      const SCROLLBAR_MAX_SIZE = clientSize / 3\n      return Math.floor(\n        Math.min(\n          Math.max(ratio * clientSize, SCROLLBAR_MIN_SIZE),\n          SCROLLBAR_MAX_SIZE\n        )\n      )\n    })\n\n    const thumbStyle = computed<CSSProperties>(() => {\n      if (!Number.isFinite(thumbSize.value)) {\n        return {\n          display: 'none',\n        }\n      }\n\n      const thumb = `${thumbSize.value}px`\n\n      const style = renderThumbStyle(\n        {\n          bar: bar.value,\n          size: thumb,\n          move: state.traveled,\n        },\n        props.layout\n      )\n\n      return style\n    })\n\n    const totalSteps = computed(() =>\n      Math.floor(props.clientSize! - thumbSize.value - unref(GAP))\n    )\n\n    const attachEvents = () => {\n      window.addEventListener('mousemove', onMouseMove)\n      window.addEventListener('mouseup', onMouseUp)\n\n      const thumbEl = unref(thumbRef)\n\n      if (!thumbEl) return\n\n      onselectstartStore = document.onselectstart\n      document.onselectstart = () => false\n\n      thumbEl.addEventListener('touchmove', onMouseMove, { passive: true })\n      thumbEl.addEventListener('touchend', onMouseUp)\n    }\n\n    const detachEvents = () => {\n      window.removeEventListener('mousemove', onMouseMove)\n      window.removeEventListener('mouseup', onMouseUp)\n\n      document.onselectstart = onselectstartStore\n      onselectstartStore = null\n\n      const thumbEl = unref(thumbRef)\n      if (!thumbEl) return\n\n      thumbEl.removeEventListener('touchmove', onMouseMove)\n      thumbEl.removeEventListener('touchend', onMouseUp)\n    }\n\n    const onThumbMouseDown = (e: Event | KeyboardEvent | MouseEvent) => {\n      e.stopImmediatePropagation()\n      if (\n        (e as KeyboardEvent).ctrlKey ||\n        [1, 2].includes((e as MouseEvent).button)\n      ) {\n        return\n      }\n\n      state.isDragging = true\n      state[bar.value.axis] =\n        (e.currentTarget as HTMLElement)[bar.value.offset] -\n        ((e as MouseEvent)[bar.value.client] -\n          (e.currentTarget as HTMLElement).getBoundingClientRect()[\n            bar.value.direction\n          ])\n\n      emit('start-move')\n      attachEvents()\n    }\n\n    const onMouseUp = () => {\n      state.isDragging = false\n      state[bar.value.axis] = 0\n      emit('stop-move')\n      detachEvents()\n    }\n\n    const onMouseMove = (e: MouseEvent | TouchEvent) => {\n      const { isDragging } = state\n      if (!isDragging) return\n      if (!thumbRef.value || !trackRef.value) return\n\n      const prevPage = state[bar.value.axis]\n      if (!prevPage) return\n\n      cAF(frameHandle!)\n      // using the current track's offset top/left - the current pointer's clientY/clientX\n      // to get the relative position of the pointer to the track.\n      const offset =\n        (trackRef.value.getBoundingClientRect()[bar.value.direction] -\n          (e as MouseEvent)[bar.value.client]) *\n        -1\n\n      // find where the thumb was clicked on.\n      const thumbClickPosition =\n        thumbRef.value[bar.value.offset] - (prevPage as number)\n      /**\n       *  +--------------+                                   +--------------+\n       *  |              -  <--------- thumb.offsetTop       |              |\n       *  |             |+|             <--+                 |              |\n       *  |              -                 |                 |              |\n       *  |   Content    |                 |                 |              |\n       *  |              |                 |                 |              |\n       *  |              |                 |                 |              |\n       *  |              |                 |                 |              -\n       *  |              |                 +-->              |             |+|\n       *  |              |                                   |              -\n       *  +--------------+                                   +--------------+\n       */\n\n      // using the current position - prev position to\n\n      const distance = offset - thumbClickPosition\n      // get how many steps in total.\n      // gap of 2 on top, 2 on bottom, in total 4.\n      // using totalSteps ÷ totalSize getting each step's size * distance to get the new\n      // scroll offset to scrollTo\n      frameHandle = rAF(() => {\n        state.traveled = Math.max(\n          props.startGap,\n          Math.min(\n            distance,\n            totalSteps.value // 2 is the top value\n          )\n        )\n        emit('scroll', distance, totalSteps.value)\n      })\n    }\n\n    const clickTrackHandler = (e: MouseEvent) => {\n      const offset = Math.abs(\n        (e.target as HTMLElement).getBoundingClientRect()[bar.value.direction] -\n          e[bar.value.client]\n      )\n      const thumbHalf = thumbRef.value![bar.value.offset] / 2\n      const distance = offset - thumbHalf\n\n      state.traveled = Math.max(0, Math.min(distance, totalSteps.value))\n      emit('scroll', distance, totalSteps.value)\n    }\n\n    watch(\n      () => props.scrollFrom,\n      (v) => {\n        if (state.isDragging) return\n        /**\n         *  this is simply mapping the current scrollbar offset\n         *\n         *  formula 1:\n         *    v = scrollOffset / (estimatedTotalSize - clientSize)\n         *    traveled = v * (clientSize - thumbSize - GAP) --> v * totalSteps\n         *\n         *  formula 2:\n         *    traveled = (v * clientSize) / (clientSize / totalSteps) --> (v * clientSize) * (totalSteps / clientSize) --> v * totalSteps\n         */\n        state.traveled = Math.ceil(v! * totalSteps.value)\n      }\n    )\n\n    onBeforeUnmount(() => {\n      detachEvents()\n    })\n\n    return () => {\n      return h(\n        'div',\n        {\n          role: 'presentation',\n          ref: trackRef,\n          class: [\n            nsVirtualScrollbar.b(),\n            props.class,\n            (props.alwaysOn || state.isDragging) && 'always-on',\n          ],\n          style: trackStyle.value,\n          onMousedown: withModifiers(clickTrackHandler, ['stop', 'prevent']),\n          onTouchstartPrevent: onThumbMouseDown,\n        },\n        h(\n          'div',\n          {\n            ref: thumbRef,\n            class: nsScrollbar.e('thumb'),\n            style: thumbStyle.value,\n            onMousedown: onThumbMouseDown,\n          },\n          []\n        )\n      )\n    }\n  },\n})\n\nexport default ScrollBar\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}