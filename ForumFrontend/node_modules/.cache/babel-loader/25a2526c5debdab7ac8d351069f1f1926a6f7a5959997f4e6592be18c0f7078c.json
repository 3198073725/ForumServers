{"ast":null,"code":"'use strict';\n\nrequire(\"core-js/modules/es.array.filter.js\");\nrequire(\"core-js/modules/es.array.map.js\");\nrequire(\"core-js/modules/es.iterator.constructor.js\");\nrequire(\"core-js/modules/es.iterator.filter.js\");\nrequire(\"core-js/modules/es.iterator.map.js\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nvar utils = require('../utils.js');\nvar makeAvailableArr = function makeAvailableArr(disabledList) {\n  var trueOrNumber = function trueOrNumber(isDisabled, index) {\n    return isDisabled || index;\n  };\n  var getNumber = function getNumber(predicate) {\n    return predicate !== true;\n  };\n  return disabledList.map(trueOrNumber).filter(getNumber);\n};\nvar getTimeLists = function getTimeLists(disabledHours, disabledMinutes, disabledSeconds) {\n  var getHoursList = function getHoursList(role, compare) {\n    return utils.makeList(24, disabledHours && function () {\n      return disabledHours == null ? void 0 : disabledHours(role, compare);\n    });\n  };\n  var getMinutesList = function getMinutesList(hour, role, compare) {\n    return utils.makeList(60, disabledMinutes && function () {\n      return disabledMinutes == null ? void 0 : disabledMinutes(hour, role, compare);\n    });\n  };\n  var getSecondsList = function getSecondsList(hour, minute, role, compare) {\n    return utils.makeList(60, disabledSeconds && function () {\n      return disabledSeconds == null ? void 0 : disabledSeconds(hour, minute, role, compare);\n    });\n  };\n  return {\n    getHoursList: getHoursList,\n    getMinutesList: getMinutesList,\n    getSecondsList: getSecondsList\n  };\n};\nvar buildAvailableTimeSlotGetter = function buildAvailableTimeSlotGetter(disabledHours, disabledMinutes, disabledSeconds) {\n  var _getTimeLists = getTimeLists(disabledHours, disabledMinutes, disabledSeconds),\n    getHoursList = _getTimeLists.getHoursList,\n    getMinutesList = _getTimeLists.getMinutesList,\n    getSecondsList = _getTimeLists.getSecondsList;\n  var getAvailableHours = function getAvailableHours(role, compare) {\n    return makeAvailableArr(getHoursList(role, compare));\n  };\n  var getAvailableMinutes = function getAvailableMinutes(hour, role, compare) {\n    return makeAvailableArr(getMinutesList(hour, role, compare));\n  };\n  var getAvailableSeconds = function getAvailableSeconds(hour, minute, role, compare) {\n    return makeAvailableArr(getSecondsList(hour, minute, role, compare));\n  };\n  return {\n    getAvailableHours: getAvailableHours,\n    getAvailableMinutes: getAvailableMinutes,\n    getAvailableSeconds: getAvailableSeconds\n  };\n};\nvar useOldValue = function useOldValue(props) {\n  var oldValue = vue.ref(props.parsedValue);\n  vue.watch(function () {\n    return props.visible;\n  }, function (val) {\n    if (!val) {\n      oldValue.value = props.parsedValue;\n    }\n  });\n  return oldValue;\n};\nexports.buildAvailableTimeSlotGetter = buildAvailableTimeSlotGetter;\nexports.getTimeLists = getTimeLists;\nexports.useOldValue = useOldValue;","map":{"version":3,"names":["makeAvailableArr","disabledList","trueOrNumber","isDisabled","index","getNumber","predicate","map","filter","getTimeLists","disabledHours","disabledMinutes","disabledSeconds","getHoursList","role","compare","utils","makeList","getMinutesList","hour","getSecondsList","minute","buildAvailableTimeSlotGetter","_getTimeLists","getAvailableHours","getAvailableMinutes","getAvailableSeconds","useOldValue","props","oldValue","vue","ref","parsedValue","watch","visible","val","value"],"sources":["../../../../../../../packages/components/time-picker/src/composables/use-time-picker.ts"],"sourcesContent":["import { ref, watch } from 'vue'\nimport { makeList } from '../utils'\n\nimport type { Dayjs } from 'dayjs'\nimport type {\n  GetDisabledHours,\n  GetDisabledMinutes,\n  GetDisabledSeconds,\n} from '../common/props'\n\nconst makeAvailableArr = (disabledList: boolean[]): number[] => {\n  const trueOrNumber = (isDisabled: boolean, index: number) =>\n    isDisabled || index\n\n  const getNumber = (predicate: number | true): predicate is number =>\n    predicate !== true\n\n  return disabledList.map(trueOrNumber).filter(getNumber)\n}\n\nexport const getTimeLists = (\n  disabledHours?: GetDisabledHours,\n  disabledMinutes?: GetDisabledMinutes,\n  disabledSeconds?: GetDisabledSeconds\n) => {\n  const getHoursList = (role: string, compare?: Dayjs) => {\n    return makeList(24, disabledHours && (() => disabledHours?.(role, compare)))\n  }\n\n  const getMinutesList = (hour: number, role: string, compare?: Dayjs) => {\n    return makeList(\n      60,\n      disabledMinutes && (() => disabledMinutes?.(hour, role, compare))\n    )\n  }\n\n  const getSecondsList = (\n    hour: number,\n    minute: number,\n    role: string,\n    compare?: Dayjs\n  ) => {\n    return makeList(\n      60,\n      disabledSeconds && (() => disabledSeconds?.(hour, minute, role, compare))\n    )\n  }\n\n  return {\n    getHoursList,\n    getMinutesList,\n    getSecondsList,\n  }\n}\n\nexport const buildAvailableTimeSlotGetter = (\n  disabledHours: GetDisabledHours,\n  disabledMinutes: GetDisabledMinutes,\n  disabledSeconds: GetDisabledSeconds\n) => {\n  const { getHoursList, getMinutesList, getSecondsList } = getTimeLists(\n    disabledHours,\n    disabledMinutes,\n    disabledSeconds\n  )\n\n  const getAvailableHours: GetDisabledHours = (role, compare?) => {\n    return makeAvailableArr(getHoursList(role, compare))\n  }\n\n  const getAvailableMinutes: GetDisabledMinutes = (hour, role, compare?) => {\n    return makeAvailableArr(getMinutesList(hour, role, compare))\n  }\n\n  const getAvailableSeconds: GetDisabledSeconds = (\n    hour,\n    minute,\n    role,\n    compare?\n  ) => {\n    return makeAvailableArr(getSecondsList(hour, minute, role, compare))\n  }\n\n  return {\n    getAvailableHours,\n    getAvailableMinutes,\n    getAvailableSeconds,\n  }\n}\n\nexport const useOldValue = (props: {\n  parsedValue?: string | Dayjs | Dayjs[]\n  visible: boolean\n}) => {\n  const oldValue = ref(props.parsedValue)\n\n  watch(\n    () => props.visible,\n    (val) => {\n      if (!val) {\n        oldValue.value = props.parsedValue\n      }\n    }\n  )\n\n  return oldValue\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}