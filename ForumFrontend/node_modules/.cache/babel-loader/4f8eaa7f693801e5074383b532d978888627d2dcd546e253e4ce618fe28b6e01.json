{"ast":null,"code":"'use strict';\n\nvar _objectSpread = require(\"H:/ForumServers/ForumFrontend/node_modules/@babel/runtime/helpers/objectSpread2.js\")[\"default\"];\nvar _createForOfIteratorHelper = require(\"H:/ForumServers/ForumFrontend/node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js\")[\"default\"];\nrequire(\"core-js/modules/es.error.cause.js\");\nrequire(\"core-js/modules/es.error.to-string.js\");\nrequire(\"core-js/modules/es.array.concat.js\");\nrequire(\"core-js/modules/es.array.filter.js\");\nrequire(\"core-js/modules/es.array.find.js\");\nrequire(\"core-js/modules/es.array.for-each.js\");\nrequire(\"core-js/modules/es.array.includes.js\");\nrequire(\"core-js/modules/es.array.index-of.js\");\nrequire(\"core-js/modules/es.array.map.js\");\nrequire(\"core-js/modules/es.array.push.js\");\nrequire(\"core-js/modules/es.array.slice.js\");\nrequire(\"core-js/modules/es.array.some.js\");\nrequire(\"core-js/modules/es.array.unshift.js\");\nrequire(\"core-js/modules/es.iterator.constructor.js\");\nrequire(\"core-js/modules/es.iterator.filter.js\");\nrequire(\"core-js/modules/es.iterator.find.js\");\nrequire(\"core-js/modules/es.iterator.for-each.js\");\nrequire(\"core-js/modules/es.iterator.map.js\");\nrequire(\"core-js/modules/es.iterator.some.js\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.object.keys.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/es.string.includes.js\");\nrequire(\"core-js/modules/es.string.fixed.js\");\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nvar util = require('../util.js');\nvar expand = require('./expand.js');\nvar current = require('./current.js');\nvar tree = require('./tree.js');\nvar shared = require('@vue/shared');\nvar sortData = function sortData(data, states) {\n  var sortingColumn = states.sortingColumn;\n  if (!sortingColumn || shared.isString(sortingColumn.sortable)) {\n    return data;\n  }\n  return util.orderBy(data, states.sortProp, states.sortOrder, sortingColumn.sortMethod, sortingColumn.sortBy);\n};\nvar _doFlattenColumns = function doFlattenColumns(columns) {\n  var result = [];\n  columns.forEach(function (column) {\n    if (column.children && column.children.length > 0) {\n      result.push.apply(result, _doFlattenColumns(column.children));\n    } else {\n      result.push(column);\n    }\n  });\n  return result;\n};\nfunction useWatcher() {\n  var _a;\n  var instance = vue.getCurrentInstance();\n  var _vue$toRefs = vue.toRefs((_a = instance.proxy) == null ? void 0 : _a.$props),\n    tableSize = _vue$toRefs.size;\n  var rowKey = vue.ref(null);\n  var data = vue.ref([]);\n  var _data = vue.ref([]);\n  var isComplex = vue.ref(false);\n  var _columns = vue.ref([]);\n  var originColumns = vue.ref([]);\n  var columns = vue.ref([]);\n  var fixedColumns = vue.ref([]);\n  var rightFixedColumns = vue.ref([]);\n  var leafColumns = vue.ref([]);\n  var fixedLeafColumns = vue.ref([]);\n  var rightFixedLeafColumns = vue.ref([]);\n  var updateOrderFns = [];\n  var leafColumnsLength = vue.ref(0);\n  var fixedLeafColumnsLength = vue.ref(0);\n  var rightFixedLeafColumnsLength = vue.ref(0);\n  var isAllSelected = vue.ref(false);\n  var selection = vue.ref([]);\n  var reserveSelection = vue.ref(false);\n  var selectOnIndeterminate = vue.ref(false);\n  var selectable = vue.ref(null);\n  var filters = vue.ref({});\n  var filteredData = vue.ref(null);\n  var sortingColumn = vue.ref(null);\n  var sortProp = vue.ref(null);\n  var sortOrder = vue.ref(null);\n  var hoverRow = vue.ref(null);\n  var selectedMap = vue.computed(function () {\n    return rowKey.value ? util.getKeysMap(selection.value, rowKey.value) : void 0;\n  });\n  vue.watch(data, function () {\n    var _a2;\n    if (instance.state) {\n      scheduleLayout(false);\n      var needUpdateFixed = instance.props.tableLayout === \"auto\";\n      if (needUpdateFixed) {\n        (_a2 = instance.refs.tableHeaderRef) == null ? void 0 : _a2.updateFixedColumnStyle();\n      }\n    }\n  }, {\n    deep: true\n  });\n  var assertRowKey = function assertRowKey() {\n    if (!rowKey.value) throw new Error(\"[ElTable] prop row-key is required\");\n  };\n  var _updateChildFixed = function updateChildFixed(column) {\n    var _a2;\n    (_a2 = column.children) == null ? void 0 : _a2.forEach(function (childColumn) {\n      childColumn.fixed = column.fixed;\n      _updateChildFixed(childColumn);\n    });\n  };\n  var updateColumns = function updateColumns() {\n    var _a2, _b;\n    _columns.value.forEach(function (column) {\n      _updateChildFixed(column);\n    });\n    fixedColumns.value = _columns.value.filter(function (column) {\n      return column.type !== \"selection\" && [true, \"left\"].includes(column.fixed);\n    });\n    var selectColFixLeft;\n    if (((_b = (_a2 = _columns.value) == null ? void 0 : _a2[0]) == null ? void 0 : _b.type) === \"selection\") {\n      var selectColumn = _columns.value[0];\n      selectColFixLeft = [true, \"left\"].includes(selectColumn.fixed) || fixedColumns.value.length && selectColumn.fixed !== \"right\";\n      if (selectColFixLeft) {\n        fixedColumns.value.unshift(selectColumn);\n      }\n    }\n    rightFixedColumns.value = _columns.value.filter(function (column) {\n      return column.fixed === \"right\";\n    });\n    var notFixedColumns = _columns.value.filter(function (column) {\n      return (selectColFixLeft ? column.type !== \"selection\" : true) && !column.fixed;\n    });\n    originColumns.value = [].concat(fixedColumns.value).concat(notFixedColumns).concat(rightFixedColumns.value);\n    var leafColumns2 = _doFlattenColumns(notFixedColumns);\n    var fixedLeafColumns2 = _doFlattenColumns(fixedColumns.value);\n    var rightFixedLeafColumns2 = _doFlattenColumns(rightFixedColumns.value);\n    leafColumnsLength.value = leafColumns2.length;\n    fixedLeafColumnsLength.value = fixedLeafColumns2.length;\n    rightFixedLeafColumnsLength.value = rightFixedLeafColumns2.length;\n    columns.value = [].concat(fixedLeafColumns2).concat(leafColumns2).concat(rightFixedLeafColumns2);\n    isComplex.value = fixedColumns.value.length > 0 || rightFixedColumns.value.length > 0;\n  };\n  var scheduleLayout = function scheduleLayout(needUpdateColumns) {\n    var immediate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    if (needUpdateColumns) {\n      updateColumns();\n    }\n    if (immediate) {\n      instance.state.doLayout();\n    } else {\n      instance.state.debouncedUpdateLayout();\n    }\n  };\n  var isSelected = function isSelected(row) {\n    if (selectedMap.value) {\n      return !!selectedMap.value[util.getRowIdentity(row, rowKey.value)];\n    } else {\n      return selection.value.includes(row);\n    }\n  };\n  var clearSelection = function clearSelection() {\n    isAllSelected.value = false;\n    var oldSelection = selection.value;\n    selection.value = [];\n    if (oldSelection.length) {\n      instance.emit(\"selection-change\", []);\n    }\n  };\n  var cleanSelection = function cleanSelection() {\n    var _a2, _b;\n    var deleted;\n    if (rowKey.value) {\n      deleted = [];\n      var childrenKey = (_b = (_a2 = instance == null ? void 0 : instance.store) == null ? void 0 : _a2.states) == null ? void 0 : _b.childrenColumnName.value;\n      var dataMap = util.getKeysMap(data.value, rowKey.value, true, childrenKey);\n      for (var key in selectedMap.value) {\n        if (shared.hasOwn(selectedMap.value, key) && !dataMap[key]) {\n          deleted.push(selectedMap.value[key].row);\n        }\n      }\n    } else {\n      deleted = selection.value.filter(function (item) {\n        return !data.value.includes(item);\n      });\n    }\n    if (deleted.length) {\n      var newSelection = selection.value.filter(function (item) {\n        return !deleted.includes(item);\n      });\n      selection.value = newSelection;\n      instance.emit(\"selection-change\", newSelection.slice());\n    }\n  };\n  var getSelectionRows = function getSelectionRows() {\n    return (selection.value || []).slice();\n  };\n  var toggleRowSelection = function toggleRowSelection(row, selected) {\n    var emitChange = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n    var ignoreSelectable = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n    var _a2, _b, _c, _d;\n    var treeProps = {\n      children: (_b = (_a2 = instance == null ? void 0 : instance.store) == null ? void 0 : _a2.states) == null ? void 0 : _b.childrenColumnName.value,\n      checkStrictly: (_d = (_c = instance == null ? void 0 : instance.store) == null ? void 0 : _c.states) == null ? void 0 : _d.checkStrictly.value\n    };\n    var changed = util.toggleRowStatus(selection.value, row, selected, treeProps, ignoreSelectable ? void 0 : selectable.value, data.value.indexOf(row));\n    if (changed) {\n      var newSelection = (selection.value || []).slice();\n      if (emitChange) {\n        instance.emit(\"select\", newSelection, row);\n      }\n      instance.emit(\"selection-change\", newSelection);\n    }\n  };\n  var _toggleAllSelection = function _toggleAllSelection() {\n    var _a2, _b;\n    var value = selectOnIndeterminate.value ? !isAllSelected.value : !(isAllSelected.value || selection.value.length);\n    isAllSelected.value = value;\n    var selectionChanged = false;\n    var childrenCount = 0;\n    var rowKey2 = (_b = (_a2 = instance == null ? void 0 : instance.store) == null ? void 0 : _a2.states) == null ? void 0 : _b.rowKey.value;\n    var childrenColumnName = instance.store.states.childrenColumnName;\n    var treeProps = {\n      children: childrenColumnName.value,\n      checkStrictly: false\n    };\n    data.value.forEach(function (row, index) {\n      var rowIndex = index + childrenCount;\n      if (util.toggleRowStatus(selection.value, row, value, treeProps, selectable.value, rowIndex)) {\n        selectionChanged = true;\n      }\n      childrenCount += _getChildrenCount(util.getRowIdentity(row, rowKey2));\n    });\n    if (selectionChanged) {\n      instance.emit(\"selection-change\", selection.value ? selection.value.slice() : []);\n    }\n    instance.emit(\"select-all\", (selection.value || []).slice());\n  };\n  var updateSelectionByRowKey = function updateSelectionByRowKey() {\n    data.value.forEach(function (row) {\n      var rowId = util.getRowIdentity(row, rowKey.value);\n      var rowInfo = selectedMap.value[rowId];\n      if (rowInfo) {\n        selection.value[rowInfo.index] = row;\n      }\n    });\n  };\n  var updateAllSelected = function updateAllSelected() {\n    var _a2;\n    if (((_a2 = data.value) == null ? void 0 : _a2.length) === 0) {\n      isAllSelected.value = false;\n      return;\n    }\n    var childrenColumnName = instance.store.states.childrenColumnName;\n    var rowIndex = 0;\n    var selectedCount = 0;\n    var _checkSelectedStatus = function checkSelectedStatus(data2) {\n      var _a3;\n      var _iterator = _createForOfIteratorHelper(data2),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var row = _step.value;\n          var isRowSelectable = selectable.value && selectable.value.call(null, row, rowIndex);\n          if (!isSelected(row)) {\n            if (!selectable.value || isRowSelectable) {\n              return false;\n            }\n          } else {\n            selectedCount++;\n          }\n          rowIndex++;\n          if (((_a3 = row[childrenColumnName.value]) == null ? void 0 : _a3.length) && !_checkSelectedStatus(row[childrenColumnName.value])) {\n            return false;\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      return true;\n    };\n    var isAllSelected_ = _checkSelectedStatus(data.value || []);\n    isAllSelected.value = selectedCount === 0 ? false : isAllSelected_;\n  };\n  var _getChildrenCount = function getChildrenCount(rowKey2) {\n    var _a2;\n    if (!instance || !instance.store) return 0;\n    var treeData = instance.store.states.treeData;\n    var count = 0;\n    var children = (_a2 = treeData.value[rowKey2]) == null ? void 0 : _a2.children;\n    if (children) {\n      count += children.length;\n      children.forEach(function (childKey) {\n        count += _getChildrenCount(childKey);\n      });\n    }\n    return count;\n  };\n  var updateFilters = function updateFilters(columns2, values) {\n    if (!shared.isArray(columns2)) {\n      columns2 = [columns2];\n    }\n    var filters_ = {};\n    columns2.forEach(function (col) {\n      filters.value[col.id] = values;\n      filters_[col.columnKey || col.id] = values;\n    });\n    return filters_;\n  };\n  var updateSort = function updateSort(column, prop, order) {\n    if (sortingColumn.value && sortingColumn.value !== column) {\n      sortingColumn.value.order = null;\n    }\n    sortingColumn.value = column;\n    sortProp.value = prop;\n    sortOrder.value = order;\n  };\n  var execFilter = function execFilter() {\n    var sourceData = vue.unref(_data);\n    Object.keys(filters.value).forEach(function (columnId) {\n      var values = filters.value[columnId];\n      if (!values || values.length === 0) return;\n      var column = util.getColumnById({\n        columns: columns.value\n      }, columnId);\n      if (column && column.filterMethod) {\n        sourceData = sourceData.filter(function (row) {\n          return values.some(function (value) {\n            return column.filterMethod.call(null, value, row, column);\n          });\n        });\n      }\n    });\n    filteredData.value = sourceData;\n  };\n  var execSort = function execSort() {\n    data.value = sortData(filteredData.value, {\n      sortingColumn: sortingColumn.value,\n      sortProp: sortProp.value,\n      sortOrder: sortOrder.value\n    });\n  };\n  var execQuery = function execQuery() {\n    var ignore = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : void 0;\n    if (!(ignore && ignore.filter)) {\n      execFilter();\n    }\n    execSort();\n  };\n  var clearFilter = function clearFilter(columnKeys) {\n    var tableHeaderRef = instance.refs.tableHeaderRef;\n    if (!tableHeaderRef) return;\n    var panels = Object.assign({}, tableHeaderRef.filterPanels);\n    var keys = Object.keys(panels);\n    if (!keys.length) return;\n    if (shared.isString(columnKeys)) {\n      columnKeys = [columnKeys];\n    }\n    if (shared.isArray(columnKeys)) {\n      var columns_ = columnKeys.map(function (key) {\n        return util.getColumnByKey({\n          columns: columns.value\n        }, key);\n      });\n      keys.forEach(function (key) {\n        var column = columns_.find(function (col) {\n          return col.id === key;\n        });\n        if (column) {\n          column.filteredValue = [];\n        }\n      });\n      instance.store.commit(\"filterChange\", {\n        column: columns_,\n        values: [],\n        silent: true,\n        multi: true\n      });\n    } else {\n      keys.forEach(function (key) {\n        var column = columns.value.find(function (col) {\n          return col.id === key;\n        });\n        if (column) {\n          column.filteredValue = [];\n        }\n      });\n      filters.value = {};\n      instance.store.commit(\"filterChange\", {\n        column: {},\n        values: [],\n        silent: true\n      });\n    }\n  };\n  var clearSort = function clearSort() {\n    if (!sortingColumn.value) return;\n    updateSort(null, null, null);\n    instance.store.commit(\"changeSortCondition\", {\n      silent: true\n    });\n  };\n  var _expand$default = expand[\"default\"]({\n      data: data,\n      rowKey: rowKey\n    }),\n    setExpandRowKeys = _expand$default.setExpandRowKeys,\n    toggleRowExpansion = _expand$default.toggleRowExpansion,\n    updateExpandRows = _expand$default.updateExpandRows,\n    expandStates = _expand$default.states,\n    isRowExpanded = _expand$default.isRowExpanded;\n  var _tree$default = tree[\"default\"]({\n      data: data,\n      rowKey: rowKey\n    }),\n    updateTreeExpandKeys = _tree$default.updateTreeExpandKeys,\n    toggleTreeExpansion = _tree$default.toggleTreeExpansion,\n    updateTreeData = _tree$default.updateTreeData,\n    updateKeyChildren = _tree$default.updateKeyChildren,\n    loadOrToggle = _tree$default.loadOrToggle,\n    treeStates = _tree$default.states;\n  var _current$default = current[\"default\"]({\n      data: data,\n      rowKey: rowKey\n    }),\n    updateCurrentRowData = _current$default.updateCurrentRowData,\n    updateCurrentRow = _current$default.updateCurrentRow,\n    setCurrentRowKey = _current$default.setCurrentRowKey,\n    currentData = _current$default.states;\n  var setExpandRowKeysAdapter = function setExpandRowKeysAdapter(val) {\n    setExpandRowKeys(val);\n    updateTreeExpandKeys(val);\n  };\n  var toggleRowExpansionAdapter = function toggleRowExpansionAdapter(row, expanded) {\n    var hasExpandColumn = columns.value.some(function (_ref) {\n      var type = _ref.type;\n      return type === \"expand\";\n    });\n    if (hasExpandColumn) {\n      toggleRowExpansion(row, expanded);\n    } else {\n      toggleTreeExpansion(row, expanded);\n    }\n  };\n  return {\n    assertRowKey: assertRowKey,\n    updateColumns: updateColumns,\n    scheduleLayout: scheduleLayout,\n    isSelected: isSelected,\n    clearSelection: clearSelection,\n    cleanSelection: cleanSelection,\n    getSelectionRows: getSelectionRows,\n    toggleRowSelection: toggleRowSelection,\n    _toggleAllSelection: _toggleAllSelection,\n    toggleAllSelection: null,\n    updateSelectionByRowKey: updateSelectionByRowKey,\n    updateAllSelected: updateAllSelected,\n    updateFilters: updateFilters,\n    updateCurrentRow: updateCurrentRow,\n    updateSort: updateSort,\n    execFilter: execFilter,\n    execSort: execSort,\n    execQuery: execQuery,\n    clearFilter: clearFilter,\n    clearSort: clearSort,\n    toggleRowExpansion: toggleRowExpansion,\n    setExpandRowKeysAdapter: setExpandRowKeysAdapter,\n    setCurrentRowKey: setCurrentRowKey,\n    toggleRowExpansionAdapter: toggleRowExpansionAdapter,\n    isRowExpanded: isRowExpanded,\n    updateExpandRows: updateExpandRows,\n    updateCurrentRowData: updateCurrentRowData,\n    loadOrToggle: loadOrToggle,\n    updateTreeData: updateTreeData,\n    updateKeyChildren: updateKeyChildren,\n    states: _objectSpread(_objectSpread(_objectSpread({\n      tableSize: tableSize,\n      rowKey: rowKey,\n      data: data,\n      _data: _data,\n      isComplex: isComplex,\n      _columns: _columns,\n      originColumns: originColumns,\n      columns: columns,\n      fixedColumns: fixedColumns,\n      rightFixedColumns: rightFixedColumns,\n      leafColumns: leafColumns,\n      fixedLeafColumns: fixedLeafColumns,\n      rightFixedLeafColumns: rightFixedLeafColumns,\n      updateOrderFns: updateOrderFns,\n      leafColumnsLength: leafColumnsLength,\n      fixedLeafColumnsLength: fixedLeafColumnsLength,\n      rightFixedLeafColumnsLength: rightFixedLeafColumnsLength,\n      isAllSelected: isAllSelected,\n      selection: selection,\n      reserveSelection: reserveSelection,\n      selectOnIndeterminate: selectOnIndeterminate,\n      selectable: selectable,\n      filters: filters,\n      filteredData: filteredData,\n      sortingColumn: sortingColumn,\n      sortProp: sortProp,\n      sortOrder: sortOrder,\n      hoverRow: hoverRow\n    }, expandStates), treeStates), currentData)\n  };\n}\nexports[\"default\"] = useWatcher;","map":{"version":3,"names":["sortData","data","states","sortingColumn","shared","isString","sortable","util","orderBy","sortProp","sortOrder","sortMethod","sortBy","doFlattenColumns","columns","result","forEach","column","children","length","push","apply","useWatcher","_a","instance","vue","getCurrentInstance","_vue$toRefs","toRefs","proxy","$props","tableSize","size","rowKey","ref","_data","isComplex","_columns","originColumns","fixedColumns","rightFixedColumns","leafColumns","fixedLeafColumns","rightFixedLeafColumns","updateOrderFns","leafColumnsLength","fixedLeafColumnsLength","rightFixedLeafColumnsLength","isAllSelected","selection","reserveSelection","selectOnIndeterminate","selectable","filters","filteredData","hoverRow","selectedMap","computed","value","getKeysMap","watch","_a2","state","scheduleLayout","needUpdateFixed","props","tableLayout","refs","tableHeaderRef","updateFixedColumnStyle","deep","assertRowKey","Error","updateChildFixed","childColumn","fixed","updateColumns","_b","filter","type","includes","selectColFixLeft","selectColumn","unshift","notFixedColumns","concat","leafColumns2","fixedLeafColumns2","rightFixedLeafColumns2","needUpdateColumns","immediate","arguments","undefined","doLayout","debouncedUpdateLayout","isSelected","row","getRowIdentity","clearSelection","oldSelection","emit","cleanSelection","deleted","childrenKey","store","childrenColumnName","dataMap","key","hasOwn","item","newSelection","slice","getSelectionRows","toggleRowSelection","selected","emitChange","ignoreSelectable","_c","_d","treeProps","checkStrictly","changed","toggleRowStatus","indexOf","_toggleAllSelection","selectionChanged","childrenCount","rowKey2","index","rowIndex","getChildrenCount","updateSelectionByRowKey","rowId","rowInfo","updateAllSelected","selectedCount","checkSelectedStatus","data2","_a3","_iterator","_createForOfIteratorHelper","_step","s","n","done","isRowSelectable","call","err","e","f","isAllSelected_","treeData","count","childKey","updateFilters","columns2","values","isArray","filters_","col","id","columnKey","updateSort","prop","order","execFilter","sourceData","unref","Object","keys","columnId","getColumnById","filterMethod","some","execSort","execQuery","ignore","clearFilter","columnKeys","panels","assign","filterPanels","columns_","map","getColumnByKey","find","filteredValue","commit","silent","multi","clearSort","_expand$default","expand","setExpandRowKeys","toggleRowExpansion","updateExpandRows","expandStates","isRowExpanded","_tree$default","tree","updateTreeExpandKeys","toggleTreeExpansion","updateTreeData","updateKeyChildren","loadOrToggle","treeStates","_current$default","current","updateCurrentRowData","updateCurrentRow","setCurrentRowKey","currentData","setExpandRowKeysAdapter","val","toggleRowExpansionAdapter","expanded","hasExpandColumn","_ref","toggleAllSelection","_objectSpread"],"sources":["../../../../../../../packages/components/table/src/store/watcher.ts"],"sourcesContent":["// @ts-nocheck\nimport { computed, getCurrentInstance, ref, toRefs, unref, watch } from 'vue'\nimport { hasOwn, isArray, isString } from '@element-plus/utils'\nimport {\n  getColumnById,\n  getColumnByKey,\n  getKeysMap,\n  getRowIdentity,\n  orderBy,\n  toggleRowStatus,\n} from '../util'\nimport useExpand from './expand'\nimport useCurrent from './current'\nimport useTree from './tree'\n\nimport type { Ref } from 'vue'\nimport type { TableColumnCtx } from '../table-column/defaults'\nimport type { DefaultRow, Table, TableRefs } from '../table/defaults'\nimport type { StoreFilter } from '.'\n\nconst sortData = (data, states) => {\n  const sortingColumn = states.sortingColumn\n  if (!sortingColumn || isString(sortingColumn.sortable)) {\n    return data\n  }\n  return orderBy(\n    data,\n    states.sortProp,\n    states.sortOrder,\n    sortingColumn.sortMethod,\n    sortingColumn.sortBy\n  )\n}\n\nconst doFlattenColumns = (columns) => {\n  const result = []\n  columns.forEach((column) => {\n    if (column.children && column.children.length > 0) {\n      // eslint-disable-next-line prefer-spread\n      result.push.apply(result, doFlattenColumns(column.children))\n    } else {\n      result.push(column)\n    }\n  })\n  return result\n}\n\nfunction useWatcher<T>() {\n  const instance = getCurrentInstance() as Table<T>\n  const { size: tableSize } = toRefs(instance.proxy?.$props as any)\n  const rowKey: Ref<string> = ref(null)\n  const data: Ref<T[]> = ref([])\n  const _data: Ref<T[]> = ref([])\n  const isComplex = ref(false)\n  const _columns: Ref<TableColumnCtx<T>[]> = ref([])\n  const originColumns: Ref<TableColumnCtx<T>[]> = ref([])\n  const columns: Ref<TableColumnCtx<T>[]> = ref([])\n  const fixedColumns: Ref<TableColumnCtx<T>[]> = ref([])\n  const rightFixedColumns: Ref<TableColumnCtx<T>[]> = ref([])\n  const leafColumns: Ref<TableColumnCtx<T>[]> = ref([])\n  const fixedLeafColumns: Ref<TableColumnCtx<T>[]> = ref([])\n  const rightFixedLeafColumns: Ref<TableColumnCtx<T>[]> = ref([])\n  const updateOrderFns: (() => void)[] = []\n  const leafColumnsLength = ref(0)\n  const fixedLeafColumnsLength = ref(0)\n  const rightFixedLeafColumnsLength = ref(0)\n  const isAllSelected = ref(false)\n  const selection: Ref<T[]> = ref([])\n  const reserveSelection = ref(false)\n  const selectOnIndeterminate = ref(false)\n  const selectable: Ref<(row: T, index: number) => boolean> = ref(null)\n  const filters: Ref<StoreFilter> = ref({})\n  const filteredData = ref(null)\n  const sortingColumn = ref(null)\n  const sortProp = ref(null)\n  const sortOrder = ref(null)\n  const hoverRow = ref(null)\n\n  const selectedMap = computed(() => {\n    return rowKey.value ? getKeysMap(selection.value, rowKey.value) : undefined\n  })\n\n  watch(\n    data,\n    () => {\n      if (instance.state) {\n        scheduleLayout(false)\n        const needUpdateFixed = instance.props.tableLayout === 'auto'\n        if (needUpdateFixed) {\n          instance.refs.tableHeaderRef?.updateFixedColumnStyle()\n        }\n      }\n    },\n    {\n      deep: true,\n    }\n  )\n\n  // 检查 rowKey 是否存在\n  const assertRowKey = () => {\n    if (!rowKey.value) throw new Error('[ElTable] prop row-key is required')\n  }\n\n  // 更新 fixed\n  const updateChildFixed = (column: TableColumnCtx<T>) => {\n    column.children?.forEach((childColumn) => {\n      childColumn.fixed = column.fixed\n      updateChildFixed(childColumn)\n    })\n  }\n\n  // 更新列\n  const updateColumns = () => {\n    _columns.value.forEach((column) => {\n      updateChildFixed(column)\n    })\n    fixedColumns.value = _columns.value.filter(\n      (column) =>\n        column.type !== 'selection' && [true, 'left'].includes(column.fixed)\n    )\n\n    let selectColFixLeft\n    if (_columns.value?.[0]?.type === 'selection') {\n      const selectColumn = _columns.value[0]\n      selectColFixLeft =\n        [true, 'left'].includes(selectColumn.fixed) ||\n        (fixedColumns.value.length && selectColumn.fixed !== 'right')\n      if (selectColFixLeft) {\n        fixedColumns.value.unshift(selectColumn)\n      }\n    }\n\n    rightFixedColumns.value = _columns.value.filter(\n      (column) => column.fixed === 'right'\n    )\n\n    const notFixedColumns = _columns.value.filter(\n      (column) =>\n        (selectColFixLeft ? column.type !== 'selection' : true) && !column.fixed\n    )\n\n    originColumns.value = []\n      .concat(fixedColumns.value)\n      .concat(notFixedColumns)\n      .concat(rightFixedColumns.value)\n    const leafColumns = doFlattenColumns(notFixedColumns)\n    const fixedLeafColumns = doFlattenColumns(fixedColumns.value)\n    const rightFixedLeafColumns = doFlattenColumns(rightFixedColumns.value)\n\n    leafColumnsLength.value = leafColumns.length\n    fixedLeafColumnsLength.value = fixedLeafColumns.length\n    rightFixedLeafColumnsLength.value = rightFixedLeafColumns.length\n\n    columns.value = []\n      .concat(fixedLeafColumns)\n      .concat(leafColumns)\n      .concat(rightFixedLeafColumns)\n    isComplex.value =\n      fixedColumns.value.length > 0 || rightFixedColumns.value.length > 0\n  }\n\n  // 更新 DOM\n  const scheduleLayout = (needUpdateColumns?: boolean, immediate = false) => {\n    if (needUpdateColumns) {\n      updateColumns()\n    }\n    if (immediate) {\n      instance.state.doLayout()\n    } else {\n      instance.state.debouncedUpdateLayout()\n    }\n  }\n\n  // 选择\n  const isSelected = (row: DefaultRow) => {\n    if (selectedMap.value) {\n      return !!selectedMap.value[getRowIdentity(row, rowKey.value)]\n    } else {\n      return selection.value.includes(row)\n    }\n  }\n\n  const clearSelection = () => {\n    isAllSelected.value = false\n    const oldSelection = selection.value\n    selection.value = []\n    if (oldSelection.length) {\n      instance.emit('selection-change', [])\n    }\n  }\n\n  const cleanSelection = () => {\n    let deleted\n    if (rowKey.value) {\n      deleted = []\n      const childrenKey = instance?.store?.states?.childrenColumnName.value\n      const dataMap = getKeysMap(data.value, rowKey.value, true, childrenKey)\n      for (const key in selectedMap.value) {\n        if (hasOwn(selectedMap.value, key) && !dataMap[key]) {\n          deleted.push(selectedMap.value[key].row)\n        }\n      }\n    } else {\n      deleted = selection.value.filter((item) => !data.value.includes(item))\n    }\n    if (deleted.length) {\n      const newSelection = selection.value.filter(\n        (item) => !deleted.includes(item)\n      )\n      selection.value = newSelection\n      instance.emit('selection-change', newSelection.slice())\n    }\n  }\n\n  const getSelectionRows = () => {\n    return (selection.value || []).slice()\n  }\n\n  const toggleRowSelection = (\n    row: T,\n    selected?: boolean,\n    emitChange = true,\n    ignoreSelectable = false\n  ) => {\n    const treeProps = {\n      children: instance?.store?.states?.childrenColumnName.value,\n      checkStrictly: instance?.store?.states?.checkStrictly.value,\n    }\n    const changed = toggleRowStatus(\n      selection.value,\n      row,\n      selected,\n      treeProps,\n      ignoreSelectable ? undefined : selectable.value,\n      data.value.indexOf(row)\n    )\n    if (changed) {\n      const newSelection = (selection.value || []).slice()\n      // 调用 API 修改选中值，不触发 select 事件\n      if (emitChange) {\n        instance.emit('select', newSelection, row)\n      }\n      instance.emit('selection-change', newSelection)\n    }\n  }\n\n  const _toggleAllSelection = () => {\n    // when only some rows are selected (but not all), select or deselect all of them\n    // depending on the value of selectOnIndeterminate\n    const value = selectOnIndeterminate.value\n      ? !isAllSelected.value\n      : !(isAllSelected.value || selection.value.length)\n    isAllSelected.value = value\n\n    let selectionChanged = false\n    let childrenCount = 0\n    const rowKey = instance?.store?.states?.rowKey.value\n    const { childrenColumnName } = instance.store.states\n    const treeProps = {\n      children: childrenColumnName.value,\n      checkStrictly: false, // Disable checkStrictly when selecting all\n    }\n\n    data.value.forEach((row, index) => {\n      const rowIndex = index + childrenCount\n      if (\n        toggleRowStatus(\n          selection.value,\n          row,\n          value,\n          treeProps,\n          selectable.value,\n          rowIndex\n        )\n      ) {\n        selectionChanged = true\n      }\n      childrenCount += getChildrenCount(getRowIdentity(row, rowKey))\n    })\n\n    if (selectionChanged) {\n      instance.emit(\n        'selection-change',\n        selection.value ? selection.value.slice() : []\n      )\n    }\n    instance.emit('select-all', (selection.value || []).slice())\n  }\n\n  const updateSelectionByRowKey = () => {\n    data.value.forEach((row) => {\n      const rowId = getRowIdentity(row, rowKey.value)\n      const rowInfo = selectedMap.value![rowId]\n      if (rowInfo) {\n        selection.value[rowInfo.index] = row\n      }\n    })\n  }\n\n  const updateAllSelected = () => {\n    // data 为 null 时，解构时的默认值会被忽略\n    if (data.value?.length === 0) {\n      isAllSelected.value = false\n      return\n    }\n\n    const { childrenColumnName } = instance.store.states\n    let rowIndex = 0\n    let selectedCount = 0\n\n    const checkSelectedStatus = (data: DefaultRow[]) => {\n      for (const row of data) {\n        const isRowSelectable =\n          selectable.value && selectable.value.call(null, row, rowIndex)\n\n        if (!isSelected(row)) {\n          if (!selectable.value || isRowSelectable) {\n            return false\n          }\n        } else {\n          selectedCount++\n        }\n        rowIndex++\n\n        if (\n          row[childrenColumnName.value]?.length &&\n          !checkSelectedStatus(row[childrenColumnName.value])\n        ) {\n          return false\n        }\n      }\n      return true\n    }\n\n    const isAllSelected_ = checkSelectedStatus(data.value || [])\n    isAllSelected.value = selectedCount === 0 ? false : isAllSelected_\n  }\n\n  const getChildrenCount = (rowKey: string) => {\n    if (!instance || !instance.store) return 0\n    const { treeData } = instance.store.states\n    let count = 0\n    const children = treeData.value[rowKey]?.children\n    if (children) {\n      count += children.length\n      children.forEach((childKey) => {\n        count += getChildrenCount(childKey)\n      })\n    }\n    return count\n  }\n\n  // 过滤与排序\n  const updateFilters = (columns, values) => {\n    if (!isArray(columns)) {\n      columns = [columns]\n    }\n    const filters_ = {}\n    columns.forEach((col) => {\n      filters.value[col.id] = values\n      filters_[col.columnKey || col.id] = values\n    })\n    return filters_\n  }\n\n  const updateSort = (column, prop, order) => {\n    if (sortingColumn.value && sortingColumn.value !== column) {\n      sortingColumn.value.order = null\n    }\n    sortingColumn.value = column\n    sortProp.value = prop\n    sortOrder.value = order\n  }\n\n  const execFilter = () => {\n    let sourceData = unref(_data)\n    Object.keys(filters.value).forEach((columnId) => {\n      const values = filters.value[columnId]\n      if (!values || values.length === 0) return\n      const column = getColumnById(\n        {\n          columns: columns.value,\n        },\n        columnId\n      )\n      if (column && column.filterMethod) {\n        sourceData = sourceData.filter((row) => {\n          return values.some((value) =>\n            column.filterMethod.call(null, value, row, column)\n          )\n        })\n      }\n    })\n\n    filteredData.value = sourceData\n  }\n\n  const execSort = () => {\n    data.value = sortData(filteredData.value, {\n      sortingColumn: sortingColumn.value,\n      sortProp: sortProp.value,\n      sortOrder: sortOrder.value,\n    })\n  }\n\n  // 根据 filters 与 sort 去过滤 data\n  const execQuery = (ignore = undefined) => {\n    if (!(ignore && ignore.filter)) {\n      execFilter()\n    }\n    execSort()\n  }\n\n  const clearFilter = (columnKeys) => {\n    const { tableHeaderRef } = instance.refs as TableRefs\n    if (!tableHeaderRef) return\n    const panels = Object.assign({}, tableHeaderRef.filterPanels)\n\n    const keys = Object.keys(panels)\n    if (!keys.length) return\n\n    if (isString(columnKeys)) {\n      columnKeys = [columnKeys]\n    }\n\n    if (isArray(columnKeys)) {\n      const columns_ = columnKeys.map((key) =>\n        getColumnByKey(\n          {\n            columns: columns.value,\n          },\n          key\n        )\n      )\n      keys.forEach((key) => {\n        const column = columns_.find((col) => col.id === key)\n        if (column) {\n          column.filteredValue = []\n        }\n      })\n      instance.store.commit('filterChange', {\n        column: columns_,\n        values: [],\n        silent: true,\n        multi: true,\n      })\n    } else {\n      keys.forEach((key) => {\n        const column = columns.value.find((col) => col.id === key)\n        if (column) {\n          column.filteredValue = []\n        }\n      })\n\n      filters.value = {}\n      instance.store.commit('filterChange', {\n        column: {},\n        values: [],\n        silent: true,\n      })\n    }\n  }\n\n  const clearSort = () => {\n    if (!sortingColumn.value) return\n\n    updateSort(null, null, null)\n    instance.store.commit('changeSortCondition', {\n      silent: true,\n    })\n  }\n  const {\n    setExpandRowKeys,\n    toggleRowExpansion,\n    updateExpandRows,\n    states: expandStates,\n    isRowExpanded,\n  } = useExpand({\n    data,\n    rowKey,\n  })\n  const {\n    updateTreeExpandKeys,\n    toggleTreeExpansion,\n    updateTreeData,\n    updateKeyChildren,\n    loadOrToggle,\n    states: treeStates,\n  } = useTree({\n    data,\n    rowKey,\n  })\n  const {\n    updateCurrentRowData,\n    updateCurrentRow,\n    setCurrentRowKey,\n    states: currentData,\n  } = useCurrent({\n    data,\n    rowKey,\n  })\n  // 适配层，expand-row-keys 在 Expand 与 TreeTable 中都有使用\n  const setExpandRowKeysAdapter = (val: string[]) => {\n    // 这里会触发额外的计算，但为了兼容性，暂时这么做\n    setExpandRowKeys(val)\n    updateTreeExpandKeys(val)\n  }\n\n  // 展开行与 TreeTable 都要使用\n  const toggleRowExpansionAdapter = (row: T, expanded?: boolean) => {\n    const hasExpandColumn = columns.value.some(({ type }) => type === 'expand')\n    if (hasExpandColumn) {\n      toggleRowExpansion(row, expanded)\n    } else {\n      toggleTreeExpansion(row, expanded)\n    }\n  }\n\n  return {\n    assertRowKey,\n    updateColumns,\n    scheduleLayout,\n    isSelected,\n    clearSelection,\n    cleanSelection,\n    getSelectionRows,\n    toggleRowSelection,\n    _toggleAllSelection,\n    toggleAllSelection: null,\n    updateSelectionByRowKey,\n    updateAllSelected,\n    updateFilters,\n    updateCurrentRow,\n    updateSort,\n    execFilter,\n    execSort,\n    execQuery,\n    clearFilter,\n    clearSort,\n    toggleRowExpansion,\n    setExpandRowKeysAdapter,\n    setCurrentRowKey,\n    toggleRowExpansionAdapter,\n    isRowExpanded,\n    updateExpandRows,\n    updateCurrentRowData,\n    loadOrToggle,\n    updateTreeData,\n    updateKeyChildren,\n    states: {\n      tableSize,\n      rowKey,\n      data,\n      _data,\n      isComplex,\n      _columns,\n      originColumns,\n      columns,\n      fixedColumns,\n      rightFixedColumns,\n      leafColumns,\n      fixedLeafColumns,\n      rightFixedLeafColumns,\n      updateOrderFns,\n      leafColumnsLength,\n      fixedLeafColumnsLength,\n      rightFixedLeafColumnsLength,\n      isAllSelected,\n      selection,\n      reserveSelection,\n      selectOnIndeterminate,\n      selectable,\n      filters,\n      filteredData,\n      sortingColumn,\n      sortProp,\n      sortOrder,\n      hoverRow,\n      ...expandStates,\n      ...treeStates,\n      ...currentData,\n    },\n  }\n}\n\nexport default useWatcher\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}