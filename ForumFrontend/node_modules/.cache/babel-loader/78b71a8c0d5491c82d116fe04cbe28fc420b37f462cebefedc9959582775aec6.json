{"ast":null,"code":"'use strict';\n\nvar _objectSpread = require(\"H:/ForumServers/ForumFrontend/node_modules/@babel/runtime/helpers/objectSpread2.js\")[\"default\"];\nrequire(\"core-js/modules/es.object.define-property.js\");\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nvar core = require('@vueuse/core');\nvar constants = require('./constants.js');\nvar root = require('./root2.js');\nvar pluginVue_exportHelper = require('../../../_virtual/plugin-vue_export-helper.js');\nvar types = require('../../../utils/types.js');\nvar index = require('../../../hooks/use-namespace/index.js');\nvar index$1 = require('../../../hooks/use-id/index.js');\nvar __default__ = vue.defineComponent({\n  name: \"ElTooltipV2Root\"\n});\nvar _sfc_main = /* @__PURE__ */vue.defineComponent(_objectSpread(_objectSpread({}, __default__), {}, {\n  props: root.tooltipV2RootProps,\n  setup: function setup(__props, _ref) {\n    var expose = _ref.expose;\n    var props = __props;\n    var _open = vue.ref(props.defaultOpen);\n    var triggerRef = vue.ref(null);\n    var open = vue.computed({\n      get: function get() {\n        return types.isPropAbsent(props.open) ? _open.value : props.open;\n      },\n      set: function set(open2) {\n        var _a;\n        _open.value = open2;\n        (_a = props[\"onUpdate:open\"]) == null ? void 0 : _a.call(props, open2);\n      }\n    });\n    var isOpenDelayed = vue.computed(function () {\n      return types.isNumber(props.delayDuration) && props.delayDuration > 0;\n    });\n    var _core$useTimeoutFn = core.useTimeoutFn(function () {\n        open.value = true;\n      }, vue.computed(function () {\n        return props.delayDuration;\n      }), {\n        immediate: false\n      }),\n      onDelayedOpen = _core$useTimeoutFn.start,\n      clearTimer = _core$useTimeoutFn.stop;\n    var ns = index.useNamespace(\"tooltip-v2\");\n    var contentId = index$1.useId();\n    var onNormalOpen = function onNormalOpen() {\n      clearTimer();\n      open.value = true;\n    };\n    var onDelayOpen = function onDelayOpen() {\n      vue.unref(isOpenDelayed) ? onDelayedOpen() : onNormalOpen();\n    };\n    var onOpen = onNormalOpen;\n    var onClose = function onClose() {\n      clearTimer();\n      open.value = false;\n    };\n    var onChange = function onChange(open2) {\n      var _a;\n      if (open2) {\n        document.dispatchEvent(new CustomEvent(constants.TOOLTIP_V2_OPEN));\n        onOpen();\n      }\n      (_a = props.onOpenChange) == null ? void 0 : _a.call(props, open2);\n    };\n    vue.watch(open, onChange);\n    vue.onMounted(function () {\n      document.addEventListener(constants.TOOLTIP_V2_OPEN, onClose);\n    });\n    vue.onBeforeUnmount(function () {\n      clearTimer();\n      document.removeEventListener(constants.TOOLTIP_V2_OPEN, onClose);\n    });\n    vue.provide(constants.tooltipV2RootKey, {\n      contentId: contentId,\n      triggerRef: triggerRef,\n      ns: ns,\n      onClose: onClose,\n      onDelayOpen: onDelayOpen,\n      onOpen: onOpen\n    });\n    expose({\n      onOpen: onOpen,\n      onClose: onClose\n    });\n    return function (_ctx, _cache) {\n      return vue.renderSlot(_ctx.$slots, \"default\", {\n        open: vue.unref(open)\n      });\n    };\n  }\n}));\nvar TooltipV2Root = /* @__PURE__ */pluginVue_exportHelper[\"default\"](_sfc_main, [[\"__file\", \"root.vue\"]]);\nexports[\"default\"] = TooltipV2Root;","map":{"version":3,"names":["name","_open","vue","ref","props","defaultOpen","triggerRef","open","computed","get","types","isPropAbsent","value","set","open2","_a","call","isOpenDelayed","isNumber","delayDuration","_core$useTimeoutFn","core","useTimeoutFn","immediate","onDelayedOpen","start","clearTimer","stop","ns","index","useNamespace","contentId","index$1","useId","onNormalOpen","onDelayOpen","unref","onOpen","onClose","onChange","document","dispatchEvent","CustomEvent","constants","TOOLTIP_V2_OPEN","onOpenChange","watch","onMounted","addEventListener","onBeforeUnmount","removeEventListener","provide","tooltipV2RootKey","expose","_ctx","_cache","renderSlot","$slots","TooltipV2Root","pluginVue_exportHelper","_sfc_main"],"sources":["../../../../../../packages/components/tooltip-v2/src/root.vue"],"sourcesContent":["<template>\n  <slot :open=\"open\" />\n</template>\n\n<script setup lang=\"ts\">\nimport {\n  computed,\n  onBeforeUnmount,\n  onMounted,\n  provide,\n  ref,\n  unref,\n  watch,\n} from 'vue'\nimport { useTimeoutFn } from '@vueuse/core'\nimport { useId, useNamespace } from '@element-plus/hooks'\nimport { isNumber, isPropAbsent } from '@element-plus/utils'\nimport { TOOLTIP_V2_OPEN, tooltipV2RootKey } from './constants'\nimport { tooltipV2RootProps } from './root'\n\ndefineOptions({\n  name: 'ElTooltipV2Root',\n})\n\nconst props = defineProps(tooltipV2RootProps)\n\n/**\n * internal open state, when no model value was provided, use this as indicator instead\n */\nconst _open = ref(props.defaultOpen)\nconst triggerRef = ref<HTMLElement | null>(null)\n\nconst open = computed<boolean>({\n  get: () => (isPropAbsent(props.open) ? _open.value : props.open),\n  set: (open) => {\n    _open.value = open\n    props['onUpdate:open']?.(open)\n  },\n})\n\nconst isOpenDelayed = computed(\n  () => isNumber(props.delayDuration) && props.delayDuration > 0\n)\n\nconst { start: onDelayedOpen, stop: clearTimer } = useTimeoutFn(\n  () => {\n    open.value = true\n  },\n  computed(() => props.delayDuration),\n  {\n    immediate: false,\n  }\n)\n\nconst ns = useNamespace('tooltip-v2')\n\nconst contentId = useId()\n\nconst onNormalOpen = () => {\n  clearTimer()\n  open.value = true\n}\n\nconst onDelayOpen = () => {\n  unref(isOpenDelayed) ? onDelayedOpen() : onNormalOpen()\n}\n\nconst onOpen = onNormalOpen\n\nconst onClose = () => {\n  clearTimer()\n  open.value = false\n}\n\nconst onChange = (open: boolean) => {\n  if (open) {\n    document.dispatchEvent(new CustomEvent(TOOLTIP_V2_OPEN))\n    onOpen()\n  }\n\n  props.onOpenChange?.(open)\n}\n\nwatch(open, onChange)\n\nonMounted(() => {\n  // Keeps only 1 tooltip open at a time\n  document.addEventListener(TOOLTIP_V2_OPEN, onClose)\n})\n\nonBeforeUnmount(() => {\n  clearTimer()\n  document.removeEventListener(TOOLTIP_V2_OPEN, onClose)\n})\n\nprovide(tooltipV2RootKey, {\n  contentId,\n  triggerRef,\n  ns,\n\n  onClose,\n  onDelayOpen,\n  onOpen,\n})\n\ndefineExpose({\n  /**\n   * @description open tooltip programmatically\n   */\n  onOpen,\n\n  /**\n   * @description close tooltip programmatically\n   */\n  onClose,\n})\n</script>\n"],"mappings":";;;;;;;;;;;;;;;qCAoBc;EACZA,IAAM;AACR;;;;;;IAOM,IAAAC,KAAA,GAAQC,GAAA,CAAAC,GAAI,CAAAC,KAAA,CAAMC,WAAW;IAC7B,IAAAC,UAAA,GAAaJ,GAAA,CAAAC,GAAA,CAAwB,IAAI;IAE/C,IAAMI,IAAA,GAAOL,GAAA,CAAAM,QAAkB;MAC7BC,GAAA,EAAK,SAALA,IAAA;QAAA,OAAYC,KAAA,CAAAC,YAAa,CAAAP,KAAA,CAAMG,IAAI,CAAI,GAAAN,KAAA,CAAMW,KAAA,GAAQR,KAAM,CAAAG,IAAA;MAAA;MAC3DM,GAAA,EAAK,SAALA,IAAMC,KAAS;QACb,IAAAC,EAAM;QACAd,KAAA,CAAAW,KAAA,GAAAE,KAAA;QACR,CAAAC,EAAA,GAAAX,KAAA,sCAAAW,EAAA,CAAAC,IAAA,CAAAZ,KAAA,EAAAU,KAAA;MAAA;IAGF;IAAsB,IAAAG,aACL,GAAAf,GAAA,CAAAM,QAAmB;MAAA,OAAAE,KAAA,CAAAQ,QAAA,CAAAd,KAA2B,CAAAe,aAAA,KAAAf,KAAA,CAAAe,aAAA;IAAA;IAC/D,IAAAC,kBAAA,GAAAC,IAAA,CAAAC,YAAA;QAEAf,IAAM,CAAEK,KAAA,GAAO,IAAe;MAAqB,GAC3CV,GAAA,CAAAM,QAAA;QAAA,OAAAJ,KAAA,CAAAe,aAAA;MAAA;QACJI,SAAa;MAAA,CACf;MALFC,aAAA,GAAAJ,kBAAA,CAAAK,KAAA;MAAAC,UAAA,GAAAN,kBAAA,CAAAO,IAAA;IAME,IAAAC,EAAA,GAASC,KAAA,CAAAC,YAAY,CAAa;IAClC,IAAAC,SAAA,GAAAC,OAAA,CAAAC,KAAA;IAAA,IACaC,YAAA,YAAAA,aAAA;MACbR,UAAA;MACFnB,IAAA,CAAAK,KAAA;IAEA,CAAM;IAEN,IAAMuB,WAAA,GAAkB,SAAlBA,YAAA,EAAkB;MAExBjC,GAAA,CAAAkC,KAAA,CAAAnB,aAAqB,CAAM,GAAAO,aAAA,KAAAU,YAAA;IACzB,CAAW;IACX,IAAAG,MAAa,GAAAH,YAAA;IACf,IAAAI,OAAA,YAAAA,QAAA;MAEAZ,UAAA;MACEnB,IAAA,CAAAK,KAAmB;IAAmC,CACxD;IAEA,IAAM2B,QAAS,YAATA,QAASA,CAAAzB,KAAA;MAEf,IAAMC,EAAA;MACO,IAAAD,KAAA;QACX0B,QAAa,CAAAC,aAAA,KAAAC,WAAA,CAAAC,SAAA,CAAAC,eAAA;QACfP,MAAA;MAEA;MACE,CAAAtB,EAAA,GAAUX,KAAA,CAAAyC,YAAA,qBAAA9B,EAAA,CAAAC,IAAA,CAAAZ,KAAA,EAAAU,KAAA;IACR;IACOZ,GAAA,CAAA4C,KAAA,CAAAvC,IAAA,EAAAgC,QAAA;IACTrC,GAAA,CAAA6C,SAAA;MAEAP,QAAA,CAAAQ,gBAAyB,CAAAL,SAAA,CAAAC,eAAA,EAAAN,OAAA;IAAA,CAC3B;IAEApC,GAAA,CAAA+C,eAAoB;MAEpBvB,UAAgB;MAELc,QAAA,CAAAU,mBAAA,CAAAP,SAAA,CAAAC,eAAyC,EAAAN,OAAA;IAAA,CACnD;IAEDpC,GAAA,CAAAiD,OAAA,CAAAR,SAAA,CAAAS,gBAAsB;MACTrB,SAAA,EAAAA,SAAA;MACFzB,UAAA,EAAAA,UAAA;MACVsB,EAAA,EAAAA,EAAA;MAEDU,OAA0B,EAA1BA,OAA0B;MACxBH,WAAA,EAAAA,WAAA;MACAE,MAAA,EAAAA;IAAA,CACA;IAEAgB,MAAA;MACAhB,MAAA,EAAAA,MAAA;MACAC,OAAA,EAAAA;IAAA,CACD;IAEY,iBAAAgB,IAAA,EAAAC,MAAA;MAAA,OAAArD,GAAA,CAAAsD,UAAA,CAAAF,IAAA,CAAAG,MAAA;QAAAlD,IAAA,EAAAL,GAAA,CAAAkC,KAAA,CAAA7B,IAAA;MAAA;IAAA;EAAA;AAAA,EAIX;AAAA,IAAAmD,aAAA,kBAAAC,sBAAA,YAAAC,SAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}