{"ast":null,"code":"'use strict';\n\nrequire(\"core-js/modules/es.object.define-property.js\");\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nvar draggable = require('../utils/draggable.js');\nvar pluginVue_exportHelper = require('../../../../_virtual/plugin-vue_export-helper.js');\nvar index = require('../../../../hooks/use-namespace/index.js');\nvar position = require('../../../../utils/dom/position.js');\nvar _sfc_main = vue.defineComponent({\n  name: \"ElSlPanel\",\n  props: {\n    color: {\n      type: Object,\n      required: true\n    }\n  },\n  setup: function setup(props) {\n    var ns = index.useNamespace(\"color-svpanel\");\n    var instance = vue.getCurrentInstance();\n    var cursorTop = vue.ref(0);\n    var cursorLeft = vue.ref(0);\n    var background = vue.ref(\"hsl(0, 100%, 50%)\");\n    var colorValue = vue.computed(function () {\n      var hue = props.color.get(\"hue\");\n      var value = props.color.get(\"value\");\n      return {\n        hue: hue,\n        value: value\n      };\n    });\n    function update() {\n      var saturation = props.color.get(\"saturation\");\n      var value = props.color.get(\"value\");\n      var el = instance.vnode.el;\n      var width = el.clientWidth,\n        height = el.clientHeight;\n      cursorLeft.value = saturation * width / 100;\n      cursorTop.value = (100 - value) * height / 100;\n      background.value = \"hsl(\".concat(props.color.get(\"hue\"), \", 100%, 50%)\");\n    }\n    function handleDrag(event) {\n      var el = instance.vnode.el;\n      var rect = el.getBoundingClientRect();\n      var _position$getClientXY = position.getClientXY(event),\n        clientX = _position$getClientXY.clientX,\n        clientY = _position$getClientXY.clientY;\n      var left = clientX - rect.left;\n      var top = clientY - rect.top;\n      left = Math.max(0, left);\n      left = Math.min(left, rect.width);\n      top = Math.max(0, top);\n      top = Math.min(top, rect.height);\n      cursorLeft.value = left;\n      cursorTop.value = top;\n      props.color.set({\n        saturation: left / rect.width * 100,\n        value: 100 - top / rect.height * 100\n      });\n    }\n    vue.watch(function () {\n      return colorValue.value;\n    }, function () {\n      update();\n    });\n    vue.onMounted(function () {\n      draggable.draggable(instance.vnode.el, {\n        drag: function drag(event) {\n          handleDrag(event);\n        },\n        end: function end(event) {\n          handleDrag(event);\n        }\n      });\n      update();\n    });\n    return {\n      cursorTop: cursorTop,\n      cursorLeft: cursorLeft,\n      background: background,\n      colorValue: colorValue,\n      handleDrag: handleDrag,\n      update: update,\n      ns: ns\n    };\n  }\n});\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return vue.openBlock(), vue.createElementBlock(\"div\", {\n    \"class\": vue.normalizeClass(_ctx.ns.b()),\n    style: vue.normalizeStyle({\n      backgroundColor: _ctx.background\n    })\n  }, [vue.createElementVNode(\"div\", {\n    \"class\": vue.normalizeClass(_ctx.ns.e(\"white\"))\n  }, null, 2), vue.createElementVNode(\"div\", {\n    \"class\": vue.normalizeClass(_ctx.ns.e(\"black\"))\n  }, null, 2), vue.createElementVNode(\"div\", {\n    \"class\": vue.normalizeClass(_ctx.ns.e(\"cursor\")),\n    style: vue.normalizeStyle({\n      top: _ctx.cursorTop + \"px\",\n      left: _ctx.cursorLeft + \"px\"\n    })\n  }, [vue.createElementVNode(\"div\")], 6)], 6);\n}\nvar SvPanel = /* @__PURE__ */pluginVue_exportHelper[\"default\"](_sfc_main, [[\"render\", _sfc_render], [\"__file\", \"sv-panel.vue\"]]);\nexports[\"default\"] = SvPanel;","map":{"version":3,"names":["_sfc_main","vue","defineComponent","name","props","color","type","Object","required","setup","ns","index","useNamespace","instance","getCurrentInstance","cursorTop","ref","cursorLeft","background","colorValue","computed","hue","get","value","update","saturation","el","vnode","width","clientWidth","height","clientHeight","concat","handleDrag","event","rect","getBoundingClientRect","_position$getClientXY","position","getClientXY","clientX","clientY","left","top","Math","max","min","set","watch","onMounted","draggable","drag","end","_sfc_render","_ctx","_cache","$props","$setup","$data","$options","openBlock","createElementBlock","backgroundColor","createElementVNode","normalizeClass","e","style","normalizeStyle","SvPanel","pluginVue_exportHelper"],"sources":["../../../../../../../packages/components/color-picker/src/components/sv-panel.vue"],"sourcesContent":["<template>\n  <div\n    :class=\"ns.b()\"\n    :style=\"{\n      backgroundColor: background,\n    }\"\n  >\n    <div :class=\"ns.e('white')\" />\n    <div :class=\"ns.e('black')\" />\n    <div\n      :class=\"ns.e('cursor')\"\n      :style=\"{\n        top: cursorTop + 'px',\n        left: cursorLeft + 'px',\n      }\"\n    >\n      <div />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport {\n  computed,\n  defineComponent,\n  getCurrentInstance,\n  onMounted,\n  ref,\n  watch,\n} from 'vue'\nimport { getClientXY } from '@element-plus/utils'\nimport { useNamespace } from '@element-plus/hooks'\nimport { draggable } from '../utils/draggable'\n\nimport type { PropType } from 'vue'\nimport type Color from '../utils/color'\n\nexport default defineComponent({\n  name: 'ElSlPanel',\n\n  props: {\n    color: {\n      type: Object as PropType<Color>,\n      required: true,\n    },\n  },\n\n  setup(props) {\n    const ns = useNamespace('color-svpanel')\n\n    // instance\n    const instance = getCurrentInstance()!\n\n    // data\n    const cursorTop = ref(0)\n    const cursorLeft = ref(0)\n    const background = ref('hsl(0, 100%, 50%)')\n    const colorValue = computed(() => {\n      const hue = props.color.get('hue')\n      const value = props.color.get('value')\n      return { hue, value }\n    })\n\n    // methods\n    function update() {\n      const saturation = props.color.get('saturation')\n      const value = props.color.get('value')\n\n      const el = instance.vnode.el!\n      const { clientWidth: width, clientHeight: height } = el\n\n      cursorLeft.value = (saturation * width) / 100\n      cursorTop.value = ((100 - value) * height) / 100\n\n      background.value = `hsl(${props.color.get('hue')}, 100%, 50%)`\n    }\n\n    function handleDrag(event: MouseEvent | TouchEvent) {\n      const el = instance.vnode.el!\n      const rect = el.getBoundingClientRect()\n      const { clientX, clientY } = getClientXY(event)\n\n      let left = clientX - rect.left\n      let top = clientY - rect.top\n      left = Math.max(0, left)\n      left = Math.min(left, rect.width)\n\n      top = Math.max(0, top)\n      top = Math.min(top, rect.height)\n\n      cursorLeft.value = left\n      cursorTop.value = top\n      props.color.set({\n        saturation: (left / rect.width) * 100,\n        value: 100 - (top / rect.height) * 100,\n      })\n    }\n\n    // watch\n    watch(\n      () => colorValue.value,\n      () => {\n        update()\n      }\n    )\n    // mounted\n    onMounted(() => {\n      draggable(instance.vnode.el as HTMLElement, {\n        drag: (event) => {\n          handleDrag(event)\n        },\n        end: (event) => {\n          handleDrag(event)\n        },\n      })\n\n      update()\n    })\n    return {\n      cursorTop,\n      cursorLeft,\n      background,\n      colorValue,\n      handleDrag,\n      update,\n      ns,\n    }\n  },\n})\n</script>\n"],"mappings":";;;;;;;;;;;AAqCA,IAAKA,SAAA,GAAaC,GAAA,CAAAC,eAAa;EAC7BC,IAAM;EAENC,KAAO;IACLC,KAAO;MACLC,IAAM,EAAAC,MAAA;MACNC,QAAU;IAAA;EACZ,CACF;EAEAC,KAAA,WAAAA,MAAML,KAAO;IACL,IAAAM,EAAA,GAAKC,KAAA,CAAAC,YAAA,CAAa,eAAe;IAGvC,IAAMC,QAAA,GAAWZ,GAAA,CAAAa,kBAAmB;IAG9B,IAAAC,SAAA,GAAYd,GAAA,CAAAe,GAAA,CAAI,CAAC;IACjB,IAAAC,UAAA,GAAahB,GAAA,CAAAe,GAAA,CAAI,CAAC;IAClB,IAAAE,UAAA,GAAajB,GAAA,CAAAe,GAAA,CAAI,mBAAmB;IACpC,IAAAG,UAAA,GAAalB,GAAA,CAAAmB,QAAA,CAAS,YAAM;MAChC,IAAMC,GAAM,GAAAjB,KAAA,CAAMC,KAAM,CAAAiB,GAAA,CAAI,KAAK;MACjC,IAAMC,KAAQ,GAAAnB,KAAA,CAAMC,KAAM,CAAAiB,GAAA,CAAI,OAAO;MAC9B;QAAED,GAAA,EAAAA,GAAA;QAAKE,KAAM,EAANA;MAAM;IAAA,CACrB;IAGD,SAASC,MAASA,CAAA;MAChB,IAAMC,UAAa,GAAArB,KAAA,CAAMC,KAAM,CAAAiB,GAAA,CAAI,YAAY;MAC/C,IAAMC,KAAQ,GAAAnB,KAAA,CAAMC,KAAM,CAAAiB,GAAA,CAAI,OAAO;MAE/B,IAAAI,EAAA,GAAKb,QAAA,CAASc,KAAM,CAAAD,EAAA;MAC1B,IAAqBE,KAAO,GAAyBF,EAAA,CAA7CG,WAAA;QAAkCC,MAAA,GAAWJ,EAAA,CAAzBK,YAAA;MAEjBd,UAAA,CAAAM,KAAA,GAASE,UAAA,GAAaG,KAAS;MAChCb,SAAA,CAAAQ,KAAA,IAAU,GAAM,GAAAA,KAAA,IAASO,MAAU;MAE7CZ,UAAA,CAAWK,KAAA,UAAAS,MAAA,CAAe5B,KAAA,CAAMC,KAAM,CAAAiB,GAAA,CAAI,KAAK,CAAC;IAAA;IAGlD,SAASW,WAAWC,KAAgC;MAC5C,IAAAR,EAAA,GAAKb,QAAA,CAASc,KAAM,CAAAD,EAAA;MACpB,IAAAS,IAAA,GAAOT,EAAA,CAAGU,qBAAsB;MACtC,IAAAC,qBAAA,GAA6BC,QAAA,CAAAC,WAAA,CAAYL,KAAK;QAAtCM,OAAA,GAAAH,qBAAA,CAAAG,OAAA;QAASC,OAAQ,GAAAJ,qBAAA,CAARI,OAAQ;MAErB,IAAAC,IAAA,GAAOF,OAAA,GAAUL,IAAK,CAAAO,IAAA;MACtB,IAAAC,GAAA,GAAMF,OAAA,GAAUN,IAAK,CAAAQ,GAAA;MAClBD,IAAA,GAAAE,IAAA,CAAKC,GAAI,IAAGH,IAAI;MACvBA,IAAA,GAAOE,IAAK,CAAAE,GAAA,CAAIJ,IAAM,EAAAP,IAAA,CAAKP,KAAK;MAE1Be,GAAA,GAAAC,IAAA,CAAKC,GAAI,IAAGF,GAAG;MACrBA,GAAA,GAAMC,IAAK,CAAAE,GAAA,CAAIH,GAAK,EAAAR,IAAA,CAAKL,MAAM;MAE/Bb,UAAA,CAAWM,KAAQ,GAAAmB,IAAA;MACnB3B,SAAA,CAAUQ,KAAQ,GAAAoB,GAAA;MAClBvC,KAAA,CAAMC,KAAA,CAAM0C,GAAI;QACdtB,UAAA,EAAaiB,IAAO,GAAAP,IAAA,CAAKP,KAAS;QAClCL,KAAO,QAAOoB,GAAM,GAAAR,IAAA,CAAKL,MAAU;MAAA,CACpC;IAAA;IAIH7B,GAAA,CAAA+C,KAAA;MAAA,OAAA7B,UAAA,CAAAI,KAAA;IAAA;MACEC,MAAM,EAAW;IAAA,EACjB;IACSvB,GAAA,CAAAgD,SAAA;MACTC,SAAA,CAAAA,SAAA,CAAArC,QAAA,CAAAc,KAAA,CAAAD,EAAA;QACFyB,IAAA,WAAAA,KAAAjB,KAAA;UAEAD,UAAgB,CAAAC,KAAA;QACd,CAAU;QACRkB,GAAA,WAAAA,IAAMlB,KAAW;UACfD,UAAA,CAAWC,KAAK;QAAA;MAClB,CACA;MACEV,MAAA;IAAgB,CAClB;IAAA,OACD;MAEMT,SAAA,EAAAA,SAAA;MACRE,UAAA,EAAAA,UAAA;MACMC,UAAA,EAAAA,UAAA;MACLC,UAAA,EAAAA,UAAA;MACAc,UAAA,EAAAA,UAAA;MACAT,MAAA,EAAAA,MAAA;MACAd,EAAA,EAAAA;IAAA,CACA;EAAA;AACA,CACA;AACF,SACF2C,YAAAC,IAAA,EAAAC,MAAA,EAAAC,MAAA,EAAAC,MAAA,EAAAC,KAAA,EAAAC,QAAA;EACD,OAAA1D,GAAA,CAAA2D,SAAA,IAAA3D,GAAA,CAAA4D,kBAAA;;;MA/HCC,eAAA,EAAAR,IAAA,CAAApC;IAAA,CAiBM;EAAA,IAhBHjB,GAAA,CAAA8D,kBAAO;IACP,SAAK9D,GAAA,CAAA+D,cAAA,CAAAV,IAAA,CAAA5C,EAAA,CAAAuD,CAAA;EAAA,CAA2B,YAAAhE,GAAA,CAAA8D,kBAAA;;eAIjC9D,GAAA,CAAA8D,kBAAA;IAA8B,SAAA9D,GAAA,CAAA+D,cAAA,CAAAV,IAAA,CAAA5C,EAAA,CAAAuD,CAAA;IAAAC,KAAA,EAAAjE,GAAA,CAAAkE,cAAA;MAAxBxB,GAAA,EAAAW,IAAK,CAAEvC,SAAA;MAAI2B,IAAA,EAAAY,IAAA,CAAArC,UAAA;;yCACjB;AAAA;AAA8B,IAAAmD,OAAA,GAAxB,eAAOC,sBAAA,WAAI,CAAArE,SAAA,cAAAqD,WAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}