{"ast":null,"code":"import { ref, watch, onMounted } from 'vue';\nimport { QuillEditor } from '@vueup/vue-quill';\nimport '@vueup/vue-quill/dist/vue-quill.snow.css';\nexport default {\n  name: 'RichTextEditor',\n  components: {\n    QuillEditor: QuillEditor\n  },\n  props: {\n    modelValue: {\n      type: String,\n      \"default\": ''\n    },\n    disabled: {\n      type: Boolean,\n      \"default\": false\n    }\n  },\n  emits: ['update:modelValue', 'change'],\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit;\n    var content = ref(props.modelValue);\n    var quillEditor = ref(null);\n    watch(function () {\n      return props.modelValue;\n    }, function (newValue) {\n      if (newValue !== content.value) {\n        content.value = newValue;\n      }\n    });\n    var handleChange = function handleChange(delta, oldDelta, source) {\n      if (source === 'user') {\n        emit('update:modelValue', content.value);\n        emit('change', content.value);\n      }\n    };\n    var editorOption = {\n      theme: 'snow',\n      modules: {\n        toolbar: [['bold', 'italic', 'underline', 'strike'], ['blockquote', 'code-block'], [{\n          'header': 1\n        }, {\n          'header': 2\n        }], [{\n          'list': 'ordered'\n        }, {\n          'list': 'bullet'\n        }], [{\n          'script': 'sub'\n        }, {\n          'script': 'super'\n        }], [{\n          'indent': '-1'\n        }, {\n          'indent': '+1'\n        }], [{\n          'direction': 'rtl'\n        }], [{\n          'size': ['small', false, 'large', 'huge']\n        }], [{\n          'header': [1, 2, 3, 4, 5, 6, false]\n        }], [{\n          'color': []\n        }, {\n          'background': []\n        }], [{\n          'font': []\n        }], [{\n          'align': []\n        }], ['clean'], ['link', 'image']]\n      },\n      placeholder: '请输入内容...',\n      scrollingContainer: 'html',\n      bounds: document.body,\n      readOnly: props.disabled\n    };\n    onMounted(function () {\n      // 初始化时设置内容\n      if (props.modelValue && quillEditor.value) {\n        quillEditor.value.setContents(props.modelValue);\n      }\n    });\n    return {\n      content: content,\n      editorOption: editorOption,\n      handleChange: handleChange,\n      quillEditor: quillEditor\n    };\n  }\n};","map":{"version":3,"names":["ref","watch","onMounted","QuillEditor","name","components","props","modelValue","type","String","disabled","Boolean","emits","setup","_ref","emit","content","quillEditor","newValue","value","handleChange","delta","oldDelta","source","editorOption","theme","modules","toolbar","placeholder","scrollingContainer","bounds","document","body","readOnly","setContents"],"sources":["H:\\ForumServers\\ForumFrontend\\src\\components\\RichTextEditor.vue"],"sourcesContent":["<template>\n  <div class=\"rich-text-editor\">\n    <quill-editor\n      :content=\"content\"\n      @update:content=\"val => content = val\"\n      :options=\"editorOption\"\n      @textChange=\"handleChange\"\n      :disabled=\"disabled\"\n      ref=\"quillEditor\"\n    />\n  </div>\n</template>\n\n<script>\nimport { ref, watch, onMounted } from 'vue'\nimport { QuillEditor } from '@vueup/vue-quill'\nimport '@vueup/vue-quill/dist/vue-quill.snow.css'\n\nexport default {\n  name: 'RichTextEditor',\n  components: {\n    QuillEditor\n  },\n  props: {\n    modelValue: {\n      type: String,\n      default: ''\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['update:modelValue', 'change'],\n  setup(props, { emit }) {\n    const content = ref(props.modelValue)\n    const quillEditor = ref(null)\n\n    watch(() => props.modelValue, (newValue) => {\n      if (newValue !== content.value) {\n        content.value = newValue\n      }\n    })\n\n    const handleChange = (delta, oldDelta, source) => {\n      if (source === 'user') {\n        emit('update:modelValue', content.value)\n        emit('change', content.value)\n      }\n    }\n\n    const editorOption = {\n      theme: 'snow',\n      modules: {\n        toolbar: [\n          ['bold', 'italic', 'underline', 'strike'],\n          ['blockquote', 'code-block'],\n          [{ 'header': 1 }, { 'header': 2 }],\n          [{ 'list': 'ordered' }, { 'list': 'bullet' }],\n          [{ 'script': 'sub' }, { 'script': 'super' }],\n          [{ 'indent': '-1' }, { 'indent': '+1' }],\n          [{ 'direction': 'rtl' }],\n          [{ 'size': ['small', false, 'large', 'huge'] }],\n          [{ 'header': [1, 2, 3, 4, 5, 6, false] }],\n          [{ 'color': [] }, { 'background': [] }],\n          [{ 'font': [] }],\n          [{ 'align': [] }],\n          ['clean'],\n          ['link', 'image']\n        ]\n      },\n      placeholder: '请输入内容...',\n      scrollingContainer: 'html',\n      bounds: document.body,\n      readOnly: props.disabled\n    }\n\n    onMounted(() => {\n      // 初始化时设置内容\n      if (props.modelValue && quillEditor.value) {\n        quillEditor.value.setContents(props.modelValue)\n      }\n    })\n\n    return {\n      content,\n      editorOption,\n      handleChange,\n      quillEditor\n    }\n  }\n}\n</script>\n\n<style scoped>\n.rich-text-editor {\n  width: 100%;\n}\n\n:deep(.ql-container) {\n  min-height: 300px;\n  font-size: 16px;\n  line-height: 1.5;\n}\n\n:deep(.ql-editor) {\n  min-height: 300px;\n  padding: 12px 15px;\n}\n\n:deep(.ql-toolbar) {\n  border-top-left-radius: 4px;\n  border-top-right-radius: 4px;\n  background-color: #f8f9fa;\n}\n\n:deep(.ql-container) {\n  border-bottom-left-radius: 4px;\n  border-bottom-right-radius: 4px;\n}\n\n:deep(.ql-editor p) {\n  margin-bottom: 1em;\n}\n\n:deep(.ql-editor img) {\n  max-width: 100%;\n  height: auto;\n}\n\n:deep(.ql-editor blockquote) {\n  border-left: 4px solid #ccc;\n  margin: 0;\n  padding-left: 16px;\n}\n\n:deep(.ql-editor pre.ql-syntax) {\n  background-color: #f8f9fa;\n  border-radius: 4px;\n  padding: 12px;\n  margin: 8px 0;\n}\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}