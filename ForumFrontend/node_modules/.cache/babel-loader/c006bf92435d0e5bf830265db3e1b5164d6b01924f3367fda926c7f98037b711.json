{"ast":null,"code":"'use strict';\n\nrequire(\"core-js/modules/es.error.to-string.js\");\nrequire(\"core-js/modules/es.array.filter.js\");\nrequire(\"core-js/modules/es.array.for-each.js\");\nrequire(\"core-js/modules/es.array.index-of.js\");\nrequire(\"core-js/modules/es.array.some.js\");\nrequire(\"core-js/modules/es.date.to-string.js\");\nrequire(\"core-js/modules/es.function.name.js\");\nrequire(\"core-js/modules/es.iterator.constructor.js\");\nrequire(\"core-js/modules/es.iterator.filter.js\");\nrequire(\"core-js/modules/es.iterator.for-each.js\");\nrequire(\"core-js/modules/es.iterator.some.js\");\nrequire(\"core-js/modules/es.number.constructor.js\");\nrequire(\"core-js/modules/es.number.is-nan.js\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/es.regexp.to-string.js\");\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\nrequire(\"core-js/modules/web.timers.js\");\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nvar lodashUnified = require('lodash-unified');\nvar core = require('@vueuse/core');\nvar constants = require('./constants.js');\nvar index = require('../../../hooks/use-ordered-children/index.js');\nvar shared = require('@vue/shared');\nvar error = require('../../../utils/error.js');\nvar vnode = require('../../../utils/vue/vnode.js');\nvar event = require('../../../constants/event.js');\nvar THROTTLE_TIME = 300;\nvar useCarousel = function useCarousel(props, emit, componentName) {\n  var _index$useOrderedChil = index.useOrderedChildren(vue.getCurrentInstance(), constants.CAROUSEL_ITEM_NAME),\n    items = _index$useOrderedChil.children,\n    addItem = _index$useOrderedChil.addChild,\n    removeItem = _index$useOrderedChil.removeChild;\n  var slots = vue.useSlots();\n  var activeIndex = vue.ref(-1);\n  var timer = vue.ref(null);\n  var hover = vue.ref(false);\n  var root = vue.ref();\n  var containerHeight = vue.ref(0);\n  var isItemsTwoLength = vue.ref(true);\n  var isFirstCall = vue.ref(true);\n  var isTransitioning = vue.ref(false);\n  var arrowDisplay = vue.computed(function () {\n    return props.arrow !== \"never\" && !vue.unref(isVertical);\n  });\n  var hasLabel = vue.computed(function () {\n    return items.value.some(function (item) {\n      return item.props.label.toString().length > 0;\n    });\n  });\n  var isCardType = vue.computed(function () {\n    return props.type === \"card\";\n  });\n  var isVertical = vue.computed(function () {\n    return props.direction === \"vertical\";\n  });\n  var containerStyle = vue.computed(function () {\n    if (props.height !== \"auto\") {\n      return {\n        height: props.height\n      };\n    }\n    return {\n      height: \"\".concat(containerHeight.value, \"px\"),\n      overflow: \"hidden\"\n    };\n  });\n  var throttledArrowClick = lodashUnified.throttle(function (index) {\n    setActiveItem(index);\n  }, THROTTLE_TIME, {\n    trailing: true\n  });\n  var throttledIndicatorHover = lodashUnified.throttle(function (index) {\n    handleIndicatorHover(index);\n  }, THROTTLE_TIME);\n  var isTwoLengthShow = function isTwoLengthShow(index) {\n    if (!isItemsTwoLength.value) return true;\n    return activeIndex.value <= 1 ? index <= 1 : index > 1;\n  };\n  function pauseTimer() {\n    if (timer.value) {\n      clearInterval(timer.value);\n      timer.value = null;\n    }\n  }\n  function startTimer() {\n    if (props.interval <= 0 || !props.autoplay || timer.value) return;\n    timer.value = setInterval(function () {\n      return playSlides();\n    }, props.interval);\n  }\n  var playSlides = function playSlides() {\n    if (!isFirstCall.value) {\n      isTransitioning.value = true;\n    }\n    isFirstCall.value = false;\n    if (activeIndex.value < items.value.length - 1) {\n      activeIndex.value = activeIndex.value + 1;\n    } else if (props.loop) {\n      activeIndex.value = 0;\n    } else {\n      isTransitioning.value = false;\n    }\n  };\n  function setActiveItem(index) {\n    if (!isFirstCall.value) {\n      isTransitioning.value = true;\n    }\n    isFirstCall.value = false;\n    if (shared.isString(index)) {\n      var filteredItems = items.value.filter(function (item) {\n        return item.props.name === index;\n      });\n      if (filteredItems.length > 0) {\n        index = items.value.indexOf(filteredItems[0]);\n      }\n    }\n    index = Number(index);\n    if (Number.isNaN(index) || index !== Math.floor(index)) {\n      error.debugWarn(componentName, \"index must be integer.\");\n      return;\n    }\n    var itemCount = items.value.length;\n    var oldIndex = activeIndex.value;\n    if (index < 0) {\n      activeIndex.value = props.loop ? itemCount - 1 : 0;\n    } else if (index >= itemCount) {\n      activeIndex.value = props.loop ? 0 : itemCount - 1;\n    } else {\n      activeIndex.value = index;\n    }\n    if (oldIndex === activeIndex.value) {\n      resetItemPosition(oldIndex);\n    }\n    resetTimer();\n  }\n  function resetItemPosition(oldIndex) {\n    items.value.forEach(function (item, index) {\n      item.translateItem(index, activeIndex.value, oldIndex);\n    });\n  }\n  function itemInStage(item, index) {\n    var _a, _b, _c, _d;\n    var _items = vue.unref(items);\n    var itemCount = _items.length;\n    if (itemCount === 0 || !item.states.inStage) return false;\n    var nextItemIndex = index + 1;\n    var prevItemIndex = index - 1;\n    var lastItemIndex = itemCount - 1;\n    var isLastItemActive = _items[lastItemIndex].states.active;\n    var isFirstItemActive = _items[0].states.active;\n    var isNextItemActive = (_b = (_a = _items[nextItemIndex]) == null ? void 0 : _a.states) == null ? void 0 : _b.active;\n    var isPrevItemActive = (_d = (_c = _items[prevItemIndex]) == null ? void 0 : _c.states) == null ? void 0 : _d.active;\n    if (index === lastItemIndex && isFirstItemActive || isNextItemActive) {\n      return \"left\";\n    } else if (index === 0 && isLastItemActive || isPrevItemActive) {\n      return \"right\";\n    }\n    return false;\n  }\n  function handleMouseEnter() {\n    hover.value = true;\n    if (props.pauseOnHover) {\n      pauseTimer();\n    }\n  }\n  function handleMouseLeave() {\n    hover.value = false;\n    startTimer();\n  }\n  function handleTransitionEnd() {\n    isTransitioning.value = false;\n  }\n  function handleButtonEnter(arrow) {\n    if (vue.unref(isVertical)) return;\n    items.value.forEach(function (item, index) {\n      if (arrow === itemInStage(item, index)) {\n        item.states.hover = true;\n      }\n    });\n  }\n  function handleButtonLeave() {\n    if (vue.unref(isVertical)) return;\n    items.value.forEach(function (item) {\n      item.states.hover = false;\n    });\n  }\n  function handleIndicatorClick(index) {\n    if (index !== activeIndex.value) {\n      if (!isFirstCall.value) {\n        isTransitioning.value = true;\n      }\n    }\n    activeIndex.value = index;\n  }\n  function handleIndicatorHover(index) {\n    if (props.trigger === \"hover\" && index !== activeIndex.value) {\n      activeIndex.value = index;\n      if (!isFirstCall.value) {\n        isTransitioning.value = true;\n      }\n    }\n  }\n  function prev() {\n    setActiveItem(activeIndex.value - 1);\n  }\n  function next() {\n    setActiveItem(activeIndex.value + 1);\n  }\n  function resetTimer() {\n    pauseTimer();\n    if (!props.pauseOnHover) startTimer();\n  }\n  function setContainerHeight(height) {\n    if (props.height !== \"auto\") return;\n    containerHeight.value = height;\n  }\n  function PlaceholderItem() {\n    var _a;\n    var defaultSlots = (_a = slots[\"default\"]) == null ? void 0 : _a.call(slots);\n    if (!defaultSlots) return null;\n    var flatSlots = vnode.flattedChildren(defaultSlots);\n    var normalizeSlots = flatSlots.filter(function (slot) {\n      return vue.isVNode(slot) && slot.type.name === constants.CAROUSEL_ITEM_NAME;\n    });\n    if ((normalizeSlots == null ? void 0 : normalizeSlots.length) === 2 && props.loop && !isCardType.value) {\n      isItemsTwoLength.value = true;\n      return normalizeSlots;\n    }\n    isItemsTwoLength.value = false;\n    return null;\n  }\n  vue.watch(function () {\n    return activeIndex.value;\n  }, function (current, prev2) {\n    resetItemPosition(prev2);\n    if (isItemsTwoLength.value) {\n      current = current % 2;\n      prev2 = prev2 % 2;\n    }\n    if (prev2 > -1) {\n      emit(event.CHANGE_EVENT, current, prev2);\n    }\n  });\n  vue.watch(function () {\n    return props.autoplay;\n  }, function (autoplay) {\n    autoplay ? startTimer() : pauseTimer();\n  });\n  vue.watch(function () {\n    return props.loop;\n  }, function () {\n    setActiveItem(activeIndex.value);\n  });\n  vue.watch(function () {\n    return props.interval;\n  }, function () {\n    resetTimer();\n  });\n  var resizeObserver = vue.shallowRef();\n  vue.onMounted(function () {\n    vue.watch(function () {\n      return items.value;\n    }, function () {\n      if (items.value.length > 0) setActiveItem(props.initialIndex);\n    }, {\n      immediate: true\n    });\n    resizeObserver.value = core.useResizeObserver(root.value, function () {\n      resetItemPosition();\n    });\n    startTimer();\n  });\n  vue.onBeforeUnmount(function () {\n    pauseTimer();\n    if (root.value && resizeObserver.value) resizeObserver.value.stop();\n  });\n  vue.provide(constants.carouselContextKey, {\n    root: root,\n    isCardType: isCardType,\n    isVertical: isVertical,\n    items: items,\n    loop: props.loop,\n    cardScale: props.cardScale,\n    addItem: addItem,\n    removeItem: removeItem,\n    setActiveItem: setActiveItem,\n    setContainerHeight: setContainerHeight\n  });\n  return {\n    root: root,\n    activeIndex: activeIndex,\n    arrowDisplay: arrowDisplay,\n    hasLabel: hasLabel,\n    hover: hover,\n    isCardType: isCardType,\n    isTransitioning: isTransitioning,\n    items: items,\n    isVertical: isVertical,\n    containerStyle: containerStyle,\n    isItemsTwoLength: isItemsTwoLength,\n    handleButtonEnter: handleButtonEnter,\n    handleTransitionEnd: handleTransitionEnd,\n    handleButtonLeave: handleButtonLeave,\n    handleIndicatorClick: handleIndicatorClick,\n    handleMouseEnter: handleMouseEnter,\n    handleMouseLeave: handleMouseLeave,\n    setActiveItem: setActiveItem,\n    prev: prev,\n    next: next,\n    PlaceholderItem: PlaceholderItem,\n    isTwoLengthShow: isTwoLengthShow,\n    throttledArrowClick: throttledArrowClick,\n    throttledIndicatorHover: throttledIndicatorHover\n  };\n};\nexports.useCarousel = useCarousel;","map":{"version":3,"names":["THROTTLE_TIME","useCarousel","props","emit","componentName","_index$useOrderedChil","index","useOrderedChildren","vue","getCurrentInstance","constants","CAROUSEL_ITEM_NAME","items","children","addItem","addChild","removeItem","removeChild","slots","useSlots","activeIndex","ref","timer","hover","root","containerHeight","isItemsTwoLength","isFirstCall","isTransitioning","arrowDisplay","computed","arrow","unref","isVertical","hasLabel","value","some","item","label","toString","length","isCardType","type","direction","containerStyle","height","concat","overflow","throttledArrowClick","lodashUnified","throttle","setActiveItem","trailing","throttledIndicatorHover","handleIndicatorHover","isTwoLengthShow","pauseTimer","clearInterval","startTimer","interval","autoplay","setInterval","playSlides","loop","shared","isString","filteredItems","filter","name","indexOf","Number","isNaN","Math","floor","error","debugWarn","itemCount","oldIndex","resetItemPosition","resetTimer","forEach","translateItem","itemInStage","_a","_b","_c","_d","_items","states","inStage","nextItemIndex","prevItemIndex","lastItemIndex","isLastItemActive","active","isFirstItemActive","isNextItemActive","isPrevItemActive","handleMouseEnter","pauseOnHover","handleMouseLeave","handleTransitionEnd","handleButtonEnter","handleButtonLeave","handleIndicatorClick","trigger","prev","next","setContainerHeight","PlaceholderItem","defaultSlots","call","flatSlots","vnode","flattedChildren","normalizeSlots","slot","isVNode","watch","current","prev2","event","CHANGE_EVENT","resizeObserver","shallowRef","onMounted","initialIndex","immediate","core","useResizeObserver","onBeforeUnmount","stop","provide","carouselContextKey","cardScale"],"sources":["../../../../../../packages/components/carousel/src/use-carousel.ts"],"sourcesContent":["import {\n  computed,\n  getCurrentInstance,\n  isVNode,\n  onBeforeUnmount,\n  onMounted,\n  provide,\n  ref,\n  shallowRef,\n  unref,\n  useSlots,\n  watch,\n} from 'vue'\nimport { throttle } from 'lodash-unified'\nimport { useResizeObserver } from '@vueuse/core'\nimport { debugWarn, flattedChildren, isString } from '@element-plus/utils'\nimport { useOrderedChildren } from '@element-plus/hooks'\nimport { CHANGE_EVENT } from '@element-plus/constants'\nimport { CAROUSEL_ITEM_NAME, carouselContextKey } from './constants'\n\nimport type { SetupContext } from 'vue'\nimport type { CarouselItemContext } from './constants'\nimport type { CarouselEmits, CarouselProps } from './carousel'\n\nconst THROTTLE_TIME = 300\n\nexport const useCarousel = (\n  props: CarouselProps,\n  emit: SetupContext<CarouselEmits>['emit'],\n  componentName: string\n) => {\n  const {\n    children: items,\n    addChild: addItem,\n    removeChild: removeItem,\n  } = useOrderedChildren<CarouselItemContext>(\n    getCurrentInstance()!,\n    CAROUSEL_ITEM_NAME\n  )\n\n  const slots = useSlots()\n\n  // refs\n  const activeIndex = ref(-1)\n  const timer = ref<ReturnType<typeof setInterval> | null>(null)\n  const hover = ref(false)\n  const root = ref<HTMLDivElement>()\n  const containerHeight = ref<number>(0)\n  const isItemsTwoLength = ref(true)\n  const isFirstCall = ref(true)\n  const isTransitioning = ref(false)\n\n  // computed\n  const arrowDisplay = computed(\n    () => props.arrow !== 'never' && !unref(isVertical)\n  )\n\n  const hasLabel = computed(() => {\n    return items.value.some((item) => item.props.label.toString().length > 0)\n  })\n\n  const isCardType = computed(() => props.type === 'card')\n  const isVertical = computed(() => props.direction === 'vertical')\n\n  const containerStyle = computed(() => {\n    if (props.height !== 'auto') {\n      return {\n        height: props.height,\n      }\n    }\n    return {\n      height: `${containerHeight.value}px`,\n      overflow: 'hidden',\n    }\n  })\n\n  // methods\n  const throttledArrowClick = throttle(\n    (index: number) => {\n      setActiveItem(index)\n    },\n    THROTTLE_TIME,\n    { trailing: true }\n  )\n\n  const throttledIndicatorHover = throttle((index: number) => {\n    handleIndicatorHover(index)\n  }, THROTTLE_TIME)\n\n  const isTwoLengthShow = (index: number) => {\n    if (!isItemsTwoLength.value) return true\n    return activeIndex.value <= 1 ? index <= 1 : index > 1\n  }\n\n  function pauseTimer() {\n    if (timer.value) {\n      clearInterval(timer.value)\n      timer.value = null\n    }\n  }\n\n  function startTimer() {\n    if (props.interval <= 0 || !props.autoplay || timer.value) return\n    timer.value = setInterval(() => playSlides(), props.interval)\n  }\n\n  const playSlides = () => {\n    if (!isFirstCall.value) {\n      isTransitioning.value = true\n    }\n    isFirstCall.value = false\n\n    if (activeIndex.value < items.value.length - 1) {\n      activeIndex.value = activeIndex.value + 1\n    } else if (props.loop) {\n      activeIndex.value = 0\n    } else {\n      isTransitioning.value = false\n    }\n  }\n\n  function setActiveItem(index: number | string) {\n    if (!isFirstCall.value) {\n      isTransitioning.value = true\n    }\n    isFirstCall.value = false\n\n    if (isString(index)) {\n      const filteredItems = items.value.filter(\n        (item) => item.props.name === index\n      )\n      if (filteredItems.length > 0) {\n        index = items.value.indexOf(filteredItems[0])\n      }\n    }\n    index = Number(index)\n    if (Number.isNaN(index) || index !== Math.floor(index)) {\n      debugWarn(componentName, 'index must be integer.')\n      return\n    }\n    const itemCount = items.value.length\n    const oldIndex = activeIndex.value\n    if (index < 0) {\n      activeIndex.value = props.loop ? itemCount - 1 : 0\n    } else if (index >= itemCount) {\n      activeIndex.value = props.loop ? 0 : itemCount - 1\n    } else {\n      activeIndex.value = index\n    }\n    if (oldIndex === activeIndex.value) {\n      resetItemPosition(oldIndex)\n    }\n    resetTimer()\n  }\n\n  function resetItemPosition(oldIndex?: number) {\n    items.value.forEach((item, index) => {\n      item.translateItem(index, activeIndex.value, oldIndex)\n    })\n  }\n\n  function itemInStage(item: CarouselItemContext, index: number) {\n    const _items = unref(items)\n    const itemCount = _items.length\n    if (itemCount === 0 || !item.states.inStage) return false\n    const nextItemIndex = index + 1\n    const prevItemIndex = index - 1\n    const lastItemIndex = itemCount - 1\n    const isLastItemActive = _items[lastItemIndex].states.active\n    const isFirstItemActive = _items[0].states.active\n    const isNextItemActive = _items[nextItemIndex]?.states?.active\n    const isPrevItemActive = _items[prevItemIndex]?.states?.active\n\n    if ((index === lastItemIndex && isFirstItemActive) || isNextItemActive) {\n      return 'left'\n    } else if ((index === 0 && isLastItemActive) || isPrevItemActive) {\n      return 'right'\n    }\n    return false\n  }\n\n  function handleMouseEnter() {\n    hover.value = true\n    if (props.pauseOnHover) {\n      pauseTimer()\n    }\n  }\n\n  function handleMouseLeave() {\n    hover.value = false\n    startTimer()\n  }\n\n  function handleTransitionEnd() {\n    isTransitioning.value = false\n  }\n\n  function handleButtonEnter(arrow: 'left' | 'right') {\n    if (unref(isVertical)) return\n    items.value.forEach((item, index) => {\n      if (arrow === itemInStage(item, index)) {\n        item.states.hover = true\n      }\n    })\n  }\n\n  function handleButtonLeave() {\n    if (unref(isVertical)) return\n    items.value.forEach((item) => {\n      item.states.hover = false\n    })\n  }\n\n  function handleIndicatorClick(index: number) {\n    if (index !== activeIndex.value) {\n      if (!isFirstCall.value) {\n        isTransitioning.value = true\n      }\n    }\n    activeIndex.value = index\n  }\n\n  function handleIndicatorHover(index: number) {\n    if (props.trigger === 'hover' && index !== activeIndex.value) {\n      activeIndex.value = index\n      if (!isFirstCall.value) {\n        isTransitioning.value = true\n      }\n    }\n  }\n\n  function prev() {\n    setActiveItem(activeIndex.value - 1)\n  }\n\n  function next() {\n    setActiveItem(activeIndex.value + 1)\n  }\n\n  function resetTimer() {\n    pauseTimer()\n    if (!props.pauseOnHover) startTimer()\n  }\n\n  function setContainerHeight(height: number) {\n    if (props.height !== 'auto') return\n    containerHeight.value = height\n  }\n\n  function PlaceholderItem() {\n    // fix: https://github.com/element-plus/element-plus/issues/12139\n    const defaultSlots = slots.default?.()\n    if (!defaultSlots) return null\n\n    const flatSlots = flattedChildren(defaultSlots)\n\n    const normalizeSlots = flatSlots.filter((slot) => {\n      return isVNode(slot) && (slot.type as any).name === CAROUSEL_ITEM_NAME\n    })\n\n    if (normalizeSlots?.length === 2 && props.loop && !isCardType.value) {\n      isItemsTwoLength.value = true\n      return normalizeSlots\n    }\n    isItemsTwoLength.value = false\n    return null\n  }\n\n  // watch\n  watch(\n    () => activeIndex.value,\n    (current, prev) => {\n      resetItemPosition(prev)\n      if (isItemsTwoLength.value) {\n        current = current % 2\n        prev = prev % 2\n      }\n      if (prev > -1) {\n        emit(CHANGE_EVENT, current, prev)\n      }\n    }\n  )\n  watch(\n    () => props.autoplay,\n    (autoplay) => {\n      autoplay ? startTimer() : pauseTimer()\n    }\n  )\n  watch(\n    () => props.loop,\n    () => {\n      setActiveItem(activeIndex.value)\n    }\n  )\n\n  watch(\n    () => props.interval,\n    () => {\n      resetTimer()\n    }\n  )\n\n  const resizeObserver = shallowRef<ReturnType<typeof useResizeObserver>>()\n  // lifecycle\n  onMounted(() => {\n    watch(\n      () => items.value,\n      () => {\n        if (items.value.length > 0) setActiveItem(props.initialIndex)\n      },\n      {\n        immediate: true,\n      }\n    )\n\n    resizeObserver.value = useResizeObserver(root.value, () => {\n      resetItemPosition()\n    })\n    startTimer()\n  })\n\n  onBeforeUnmount(() => {\n    pauseTimer()\n    if (root.value && resizeObserver.value) resizeObserver.value.stop()\n  })\n\n  // provide\n  provide(carouselContextKey, {\n    root,\n    isCardType,\n    isVertical,\n    items,\n    loop: props.loop,\n    cardScale: props.cardScale,\n    addItem,\n    removeItem,\n    setActiveItem,\n    setContainerHeight,\n  })\n\n  return {\n    root,\n    activeIndex,\n    arrowDisplay,\n    hasLabel,\n    hover,\n    isCardType,\n    isTransitioning,\n    items,\n    isVertical,\n    containerStyle,\n    isItemsTwoLength,\n    handleButtonEnter,\n    handleTransitionEnd,\n    handleButtonLeave,\n    handleIndicatorClick,\n    handleMouseEnter,\n    handleMouseLeave,\n    setActiveItem,\n    prev,\n    next,\n    PlaceholderItem,\n    isTwoLengthShow,\n    throttledArrowClick,\n    throttledIndicatorHover,\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}