{"ast":null,"code":"'use strict';\n\nvar _objectSpread = require(\"H:/ForumServers/ForumFrontend/node_modules/@babel/runtime/helpers/objectSpread2.js\")[\"default\"];\nrequire(\"core-js/modules/es.object.define-property.js\");\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nvar anchorLink = require('./anchor-link.js');\nvar constants = require('./constants.js');\nvar pluginVue_exportHelper = require('../../../_virtual/plugin-vue_export-helper.js');\nvar __default__ = vue.defineComponent({\n  name: \"ElAnchorLink\"\n});\nvar _sfc_main = /* @__PURE__ */vue.defineComponent(_objectSpread(_objectSpread({}, __default__), {}, {\n  props: anchorLink.anchorLinkProps,\n  setup: function setup(__props) {\n    var props = __props;\n    var linkRef = vue.ref(null);\n    var _vue$inject = vue.inject(constants.anchorKey),\n      ns = _vue$inject.ns,\n      direction = _vue$inject.direction,\n      currentAnchor = _vue$inject.currentAnchor,\n      addLink = _vue$inject.addLink,\n      removeLink = _vue$inject.removeLink,\n      contextHandleClick = _vue$inject.handleClick;\n    var cls = vue.computed(function () {\n      return [ns.e(\"link\"), ns.is(\"active\", currentAnchor.value === props.href)];\n    });\n    var handleClick = function handleClick(e) {\n      contextHandleClick(e, props.href);\n    };\n    vue.watch(function () {\n      return props.href;\n    }, function (val, oldVal) {\n      vue.nextTick(function () {\n        if (oldVal) removeLink(oldVal);\n        if (val) {\n          addLink({\n            href: val,\n            el: linkRef.value\n          });\n        }\n      });\n    });\n    vue.onMounted(function () {\n      var href = props.href;\n      if (href) {\n        addLink({\n          href: href,\n          el: linkRef.value\n        });\n      }\n    });\n    vue.onBeforeUnmount(function () {\n      var href = props.href;\n      if (href) {\n        removeLink(href);\n      }\n    });\n    return function (_ctx, _cache) {\n      return vue.openBlock(), vue.createElementBlock(\"div\", {\n        \"class\": vue.normalizeClass(vue.unref(ns).e(\"item\"))\n      }, [vue.createElementVNode(\"a\", {\n        ref_key: \"linkRef\",\n        ref: linkRef,\n        \"class\": vue.normalizeClass(vue.unref(cls)),\n        href: _ctx.href,\n        onClick: handleClick\n      }, [vue.renderSlot(_ctx.$slots, \"default\", {}, function () {\n        return [vue.createTextVNode(vue.toDisplayString(_ctx.title), 1)];\n      })], 10, [\"href\"]), _ctx.$slots[\"sub-link\"] && vue.unref(direction) === \"vertical\" ? (vue.openBlock(), vue.createElementBlock(\"div\", {\n        key: 0,\n        \"class\": vue.normalizeClass(vue.unref(ns).e(\"list\"))\n      }, [vue.renderSlot(_ctx.$slots, \"sub-link\")], 2)) : vue.createCommentVNode(\"v-if\", true)], 2);\n    };\n  }\n}));\nvar AnchorLink = /* @__PURE__ */pluginVue_exportHelper[\"default\"](_sfc_main, [[\"__file\", \"anchor-link.vue\"]]);\nexports[\"default\"] = AnchorLink;","map":{"version":3,"names":["name","linkRef","vue","ref","_vue$inject","inject","constants","anchorKey","ns","direction","currentAnchor","addLink","removeLink","contextHandleClick","handleClick","cls","computed","e","is","value","props","href","watch","val","oldVal","nextTick","el","onMounted","onBeforeUnmount","_ctx","_cache","openBlock","createElementBlock"],"sources":["../../../../../../packages/components/anchor/src/anchor-link.vue"],"sourcesContent":["<template>\n  <div :class=\"ns.e('item')\">\n    <a ref=\"linkRef\" :class=\"cls\" :href=\"href\" @click=\"handleClick\">\n      <slot>{{ title }}</slot>\n    </a>\n    <div\n      v-if=\"$slots['sub-link'] && direction === 'vertical'\"\n      :class=\"ns.e('list')\"\n    >\n      <slot name=\"sub-link\" />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport {\n  computed,\n  inject,\n  nextTick,\n  onBeforeUnmount,\n  onMounted,\n  ref,\n  watch,\n} from 'vue'\nimport { anchorLinkProps } from './anchor-link'\nimport { anchorKey } from './constants'\n\ndefineOptions({\n  name: 'ElAnchorLink',\n})\n\nconst props = defineProps(anchorLinkProps)\n\nconst linkRef = ref<HTMLElement | null>(null)\n\nconst {\n  ns,\n  direction,\n  currentAnchor,\n  addLink,\n  removeLink,\n  handleClick: contextHandleClick,\n} = inject(anchorKey)!\n\nconst cls = computed(() => [\n  ns.e('link'),\n  ns.is('active', currentAnchor.value === props.href),\n])\n\nconst handleClick = (e: MouseEvent) => {\n  contextHandleClick(e, props.href)\n}\n\nwatch(\n  () => props.href,\n  (val, oldVal) => {\n    nextTick(() => {\n      if (oldVal) removeLink(oldVal)\n      if (val) {\n        addLink({\n          href: val,\n          el: linkRef.value!,\n        })\n      }\n    })\n  }\n)\n\nonMounted(() => {\n  const { href } = props\n  if (href) {\n    addLink({\n      href,\n      el: linkRef.value!,\n    })\n  }\n})\n\nonBeforeUnmount(() => {\n  const { href } = props\n  if (href) {\n    removeLink(href)\n  }\n})\n</script>\n"],"mappings":";;;;;;;;;;;qCA2Bc;EACZA,IAAM;AACR;;;;;IAIM,IAAAC,OAAA,GAAUC,GAAA,CAAAC,GAAA,CAAwB,IAAI;IAEtC,IAAAC,WAAA,GAOFF,GAAA,CAAAG,MAAA,CAAOC,SAAA,CAAAC,SAAS;MANlBC,EAAA,GAAAJ,WAAA,CAAAI,EAAA;MACAC,SAAA,GAAAL,WAAA,CAAAK,SAAA;MACAC,aAAA,GAAAN,WAAA,CAAAM,aAAA;MACAC,OAAA,GAAAP,WAAA,CAAAO,OAAA;MACAC,UAAA,GAAAR,WAAA,CAAAQ,UAAA;MACaC,kBAAA,GAAAT,WAAA,CAAbU,WAAa;IAGT,IAAAC,GAAA,GAAMb,GAAA,CAAAc,QAAA,CAAS;MAAA,OAAM,CACzBR,EAAA,CAAGS,CAAA,CAAE,MAAM,GACXT,EAAA,CAAGU,EAAG,WAAUR,aAAc,CAAAS,KAAA,KAAUC,KAAA,CAAMC,IAAI,EACnD;IAAA;IAEK,IAAAP,WAAA,GAAc,SAAdA,YAAeG,CAAkB;MAClBJ,kBAAA,CAAAI,CAAA,EAAGG,KAAA,CAAMC,IAAI;IAAA,CAClC;IAEAnB,GAAA,CAAAoB,KAAA;MAAA,OAAAF,KAAA,CAAAC,IAAA;IAAA,aAAAE,GAAA,EAAAC,MAAA;MACEtB,GAAA,CAAAuB,QAAY;QAAA,IACND,MAAW,EACfZ,UAAe,CAAAY,MAAA;QACT,IAAAD,GAAA;UACJZ,OAAS;YACCU,IAAA,EAAAE,GAAA;YAAAG,EACN,EAAMzB,OAAA,CAAAkB;UAAA;QACM;MACb,CACH;IAAA;IAEJjB,GAAA,CAAAyB,SAAA;MACF,IAAAN,IAAA,GAAAD,KAAA,CAAAC,IAAA;MAEA,IAAAA,IAAU,EAAM;QACRV,OAAA;UACFU,IAAM,EAANA,IAAM;UACAK,EAAA,EAAAzB,OAAA,CAAAkB;QAAA,CACN;MAAA;IACY;IAEhBjB,GAAA,CAAA0B,eAAA;MACD,IAAAP,IAAA,GAAAD,KAAA,CAAAC,IAAA;MAED,IAAAA,IAAA;QACQT,UAAA,CAAOS,IAAI;MACjB;IACE;IACF,iBAAAQ,IAAA,EAAAC,MAAA;MACD,OAAA5B,GAAA,CAAA6B,SAAA,IAAA7B,GAAA,CAAA8B,kBAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}