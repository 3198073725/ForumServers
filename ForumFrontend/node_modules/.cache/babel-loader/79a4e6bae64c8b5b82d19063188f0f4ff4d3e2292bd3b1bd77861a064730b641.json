{"ast":null,"code":"'use strict';\n\nvar _slicedToArray = require(\"H:/ForumServers/ForumFrontend/node_modules/@babel/runtime/helpers/slicedToArray.js\")[\"default\"];\nvar _typeof = require(\"H:/ForumServers/ForumFrontend/node_modules/@babel/runtime/helpers/typeof.js\")[\"default\"];\nrequire(\"core-js/modules/es.array.concat.js\");\nrequire(\"core-js/modules/es.array.includes.js\");\nrequire(\"core-js/modules/es.array.index-of.js\");\nrequire(\"core-js/modules/es.array.map.js\");\nrequire(\"core-js/modules/es.array.push.js\");\nrequire(\"core-js/modules/es.iterator.constructor.js\");\nrequire(\"core-js/modules/es.iterator.map.js\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/es.string.includes.js\");\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nvar dayjs = require('dayjs');\nvar lodashUnified = require('lodash-unified');\nvar panelTimeRange = require('../props/panel-time-range.js');\nvar useTimePanel = require('../composables/use-time-panel.js');\nvar useTimePicker = require('../composables/use-time-picker.js');\nvar basicTimeSpinner = require('./basic-time-spinner.js');\nvar pluginVue_exportHelper = require('../../../../_virtual/plugin-vue_export-helper.js');\nvar index = require('../../../../hooks/use-locale/index.js');\nvar index$1 = require('../../../../hooks/use-namespace/index.js');\nvar shared = require('@vue/shared');\nvar aria = require('../../../../constants/aria.js');\nfunction _interopDefaultLegacy(e) {\n  return e && _typeof(e) === 'object' && 'default' in e ? e : {\n    'default': e\n  };\n}\nvar dayjs__default = /*#__PURE__*/_interopDefaultLegacy(dayjs);\nvar _sfc_main = /* @__PURE__ */vue.defineComponent({\n  __name: \"panel-time-range\",\n  props: panelTimeRange.panelTimeRangeProps,\n  emits: [\"pick\", \"select-range\", \"set-picker-option\"],\n  setup: function setup(__props, _ref) {\n    var emit = _ref.emit;\n    var props = __props;\n    var makeSelectRange = function makeSelectRange(start, end) {\n      var result = [];\n      for (var i = start; i <= end; i++) {\n        result.push(i);\n      }\n      return result;\n    };\n    var _index$useLocale = index.useLocale(),\n      t = _index$useLocale.t,\n      lang = _index$useLocale.lang;\n    var nsTime = index$1.useNamespace(\"time\");\n    var nsPicker = index$1.useNamespace(\"picker\");\n    var pickerBase = vue.inject(\"EP_PICKER_BASE\");\n    var _pickerBase$props = pickerBase.props,\n      arrowControl = _pickerBase$props.arrowControl,\n      disabledHours = _pickerBase$props.disabledHours,\n      disabledMinutes = _pickerBase$props.disabledMinutes,\n      disabledSeconds = _pickerBase$props.disabledSeconds,\n      defaultValue = _pickerBase$props.defaultValue;\n    var startContainerKls = vue.computed(function () {\n      return [nsTime.be(\"range-picker\", \"body\"), nsTime.be(\"panel\", \"content\"), nsTime.is(\"arrow\", arrowControl), showSeconds.value ? \"has-seconds\" : \"\"];\n    });\n    var endContainerKls = vue.computed(function () {\n      return [nsTime.be(\"range-picker\", \"body\"), nsTime.be(\"panel\", \"content\"), nsTime.is(\"arrow\", arrowControl), showSeconds.value ? \"has-seconds\" : \"\"];\n    });\n    var startTime = vue.computed(function () {\n      return props.parsedValue[0];\n    });\n    var endTime = vue.computed(function () {\n      return props.parsedValue[1];\n    });\n    var oldValue = useTimePicker.useOldValue(props);\n    var handleCancel = function handleCancel() {\n      emit(\"pick\", oldValue.value, false);\n    };\n    var showSeconds = vue.computed(function () {\n      return props.format.includes(\"ss\");\n    });\n    var amPmMode = vue.computed(function () {\n      if (props.format.includes(\"A\")) return \"A\";\n      if (props.format.includes(\"a\")) return \"a\";\n      return \"\";\n    });\n    var handleConfirm = function handleConfirm() {\n      var visible = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      emit(\"pick\", [startTime.value, endTime.value], visible);\n    };\n    var handleMinChange = function handleMinChange(date) {\n      handleChange(date.millisecond(0), endTime.value);\n    };\n    var handleMaxChange = function handleMaxChange(date) {\n      handleChange(startTime.value, date.millisecond(0));\n    };\n    var isValidValue = function isValidValue(_date) {\n      var parsedDate = _date.map(function (_) {\n        return dayjs__default[\"default\"](_).locale(lang.value);\n      });\n      var result = getRangeAvailableTime(parsedDate);\n      return parsedDate[0].isSame(result[0]) && parsedDate[1].isSame(result[1]);\n    };\n    var handleChange = function handleChange(start, end) {\n      if (!props.visible) {\n        return;\n      }\n      emit(\"pick\", [start, end], true);\n    };\n    var btnConfirmDisabled = vue.computed(function () {\n      return startTime.value > endTime.value;\n    });\n    var selectionRange = vue.ref([0, 2]);\n    var setMinSelectionRange = function setMinSelectionRange(start, end) {\n      emit(\"select-range\", start, end, \"min\");\n      selectionRange.value = [start, end];\n    };\n    var offset = vue.computed(function () {\n      return showSeconds.value ? 11 : 8;\n    });\n    var setMaxSelectionRange = function setMaxSelectionRange(start, end) {\n      emit(\"select-range\", start, end, \"max\");\n      var _offset = vue.unref(offset);\n      selectionRange.value = [start + _offset, end + _offset];\n    };\n    var changeSelectionRange = function changeSelectionRange(step) {\n      var list = showSeconds.value ? [0, 3, 6, 11, 14, 17] : [0, 3, 8, 11];\n      var mapping = [\"hours\", \"minutes\"].concat(showSeconds.value ? [\"seconds\"] : []);\n      var index = list.indexOf(selectionRange.value[0]);\n      var next = (index + step + list.length) % list.length;\n      var half = list.length / 2;\n      if (next < half) {\n        timePickerOptions[\"start_emitSelectRange\"](mapping[next]);\n      } else {\n        timePickerOptions[\"end_emitSelectRange\"](mapping[next - half]);\n      }\n    };\n    var handleKeydown = function handleKeydown(event) {\n      var code = event.code;\n      var _aria$EVENT_CODE = aria.EVENT_CODE,\n        left = _aria$EVENT_CODE.left,\n        right = _aria$EVENT_CODE.right,\n        up = _aria$EVENT_CODE.up,\n        down = _aria$EVENT_CODE.down;\n      if ([left, right].includes(code)) {\n        var step = code === left ? -1 : 1;\n        changeSelectionRange(step);\n        event.preventDefault();\n        return;\n      }\n      if ([up, down].includes(code)) {\n        var _step = code === up ? -1 : 1;\n        var role = selectionRange.value[0] < offset.value ? \"start\" : \"end\";\n        timePickerOptions[\"\".concat(role, \"_scrollDown\")](_step);\n        event.preventDefault();\n        return;\n      }\n    };\n    var disabledHours_ = function disabledHours_(role, compare) {\n      var defaultDisable = disabledHours ? disabledHours(role) : [];\n      var isStart = role === \"start\";\n      var compareDate = compare || (isStart ? endTime.value : startTime.value);\n      var compareHour = compareDate.hour();\n      var nextDisable = isStart ? makeSelectRange(compareHour + 1, 23) : makeSelectRange(0, compareHour - 1);\n      return lodashUnified.union(defaultDisable, nextDisable);\n    };\n    var disabledMinutes_ = function disabledMinutes_(hour, role, compare) {\n      var defaultDisable = disabledMinutes ? disabledMinutes(hour, role) : [];\n      var isStart = role === \"start\";\n      var compareDate = compare || (isStart ? endTime.value : startTime.value);\n      var compareHour = compareDate.hour();\n      if (hour !== compareHour) {\n        return defaultDisable;\n      }\n      var compareMinute = compareDate.minute();\n      var nextDisable = isStart ? makeSelectRange(compareMinute + 1, 59) : makeSelectRange(0, compareMinute - 1);\n      return lodashUnified.union(defaultDisable, nextDisable);\n    };\n    var disabledSeconds_ = function disabledSeconds_(hour, minute, role, compare) {\n      var defaultDisable = disabledSeconds ? disabledSeconds(hour, minute, role) : [];\n      var isStart = role === \"start\";\n      var compareDate = compare || (isStart ? endTime.value : startTime.value);\n      var compareHour = compareDate.hour();\n      var compareMinute = compareDate.minute();\n      if (hour !== compareHour || minute !== compareMinute) {\n        return defaultDisable;\n      }\n      var compareSecond = compareDate.second();\n      var nextDisable = isStart ? makeSelectRange(compareSecond + 1, 59) : makeSelectRange(0, compareSecond - 1);\n      return lodashUnified.union(defaultDisable, nextDisable);\n    };\n    var getRangeAvailableTime = function getRangeAvailableTime(_ref2) {\n      var _ref3 = _slicedToArray(_ref2, 2),\n        start = _ref3[0],\n        end = _ref3[1];\n      return [getAvailableTime(start, \"start\", true, end), getAvailableTime(end, \"end\", false, start)];\n    };\n    var _useTimePicker$buildA = useTimePicker.buildAvailableTimeSlotGetter(disabledHours_, disabledMinutes_, disabledSeconds_),\n      getAvailableHours = _useTimePicker$buildA.getAvailableHours,\n      getAvailableMinutes = _useTimePicker$buildA.getAvailableMinutes,\n      getAvailableSeconds = _useTimePicker$buildA.getAvailableSeconds;\n    var _useTimePanel$useTime = useTimePanel.useTimePanel({\n        getAvailableHours: getAvailableHours,\n        getAvailableMinutes: getAvailableMinutes,\n        getAvailableSeconds: getAvailableSeconds\n      }),\n      timePickerOptions = _useTimePanel$useTime.timePickerOptions,\n      getAvailableTime = _useTimePanel$useTime.getAvailableTime,\n      onSetOption = _useTimePanel$useTime.onSetOption;\n    var parseUserInput = function parseUserInput(days) {\n      if (!days) return null;\n      if (shared.isArray(days)) {\n        return days.map(function (d) {\n          return dayjs__default[\"default\"](d, props.format).locale(lang.value);\n        });\n      }\n      return dayjs__default[\"default\"](days, props.format).locale(lang.value);\n    };\n    var formatToString = function formatToString(days) {\n      if (!days) return null;\n      if (shared.isArray(days)) {\n        return days.map(function (d) {\n          return d.format(props.format);\n        });\n      }\n      return days.format(props.format);\n    };\n    var getDefaultValue = function getDefaultValue() {\n      if (shared.isArray(defaultValue)) {\n        return defaultValue.map(function (d) {\n          return dayjs__default[\"default\"](d).locale(lang.value);\n        });\n      }\n      var defaultDay = dayjs__default[\"default\"](defaultValue).locale(lang.value);\n      return [defaultDay, defaultDay.add(60, \"m\")];\n    };\n    emit(\"set-picker-option\", [\"formatToString\", formatToString]);\n    emit(\"set-picker-option\", [\"parseUserInput\", parseUserInput]);\n    emit(\"set-picker-option\", [\"isValidValue\", isValidValue]);\n    emit(\"set-picker-option\", [\"handleKeydownInput\", handleKeydown]);\n    emit(\"set-picker-option\", [\"getDefaultValue\", getDefaultValue]);\n    emit(\"set-picker-option\", [\"getRangeAvailableTime\", getRangeAvailableTime]);\n    return function (_ctx, _cache) {\n      return _ctx.actualVisible ? (vue.openBlock(), vue.createElementBlock(\"div\", {\n        key: 0,\n        \"class\": vue.normalizeClass([vue.unref(nsTime).b(\"range-picker\"), vue.unref(nsPicker).b(\"panel\")])\n      }, [vue.createElementVNode(\"div\", {\n        \"class\": vue.normalizeClass(vue.unref(nsTime).be(\"range-picker\", \"content\"))\n      }, [vue.createElementVNode(\"div\", {\n        \"class\": vue.normalizeClass(vue.unref(nsTime).be(\"range-picker\", \"cell\"))\n      }, [vue.createElementVNode(\"div\", {\n        \"class\": vue.normalizeClass(vue.unref(nsTime).be(\"range-picker\", \"header\"))\n      }, vue.toDisplayString(vue.unref(t)(\"el.datepicker.startTime\")), 3), vue.createElementVNode(\"div\", {\n        \"class\": vue.normalizeClass(vue.unref(startContainerKls))\n      }, [vue.createVNode(basicTimeSpinner[\"default\"], {\n        ref: \"minSpinner\",\n        role: \"start\",\n        \"show-seconds\": vue.unref(showSeconds),\n        \"am-pm-mode\": vue.unref(amPmMode),\n        \"arrow-control\": vue.unref(arrowControl),\n        \"spinner-date\": vue.unref(startTime),\n        \"disabled-hours\": disabledHours_,\n        \"disabled-minutes\": disabledMinutes_,\n        \"disabled-seconds\": disabledSeconds_,\n        onChange: handleMinChange,\n        onSetOption: vue.unref(onSetOption),\n        onSelectRange: setMinSelectionRange\n      }, null, 8, [\"show-seconds\", \"am-pm-mode\", \"arrow-control\", \"spinner-date\", \"onSetOption\"])], 2)], 2), vue.createElementVNode(\"div\", {\n        \"class\": vue.normalizeClass(vue.unref(nsTime).be(\"range-picker\", \"cell\"))\n      }, [vue.createElementVNode(\"div\", {\n        \"class\": vue.normalizeClass(vue.unref(nsTime).be(\"range-picker\", \"header\"))\n      }, vue.toDisplayString(vue.unref(t)(\"el.datepicker.endTime\")), 3), vue.createElementVNode(\"div\", {\n        \"class\": vue.normalizeClass(vue.unref(endContainerKls))\n      }, [vue.createVNode(basicTimeSpinner[\"default\"], {\n        ref: \"maxSpinner\",\n        role: \"end\",\n        \"show-seconds\": vue.unref(showSeconds),\n        \"am-pm-mode\": vue.unref(amPmMode),\n        \"arrow-control\": vue.unref(arrowControl),\n        \"spinner-date\": vue.unref(endTime),\n        \"disabled-hours\": disabledHours_,\n        \"disabled-minutes\": disabledMinutes_,\n        \"disabled-seconds\": disabledSeconds_,\n        onChange: handleMaxChange,\n        onSetOption: vue.unref(onSetOption),\n        onSelectRange: setMaxSelectionRange\n      }, null, 8, [\"show-seconds\", \"am-pm-mode\", \"arrow-control\", \"spinner-date\", \"onSetOption\"])], 2)], 2)], 2), vue.createElementVNode(\"div\", {\n        \"class\": vue.normalizeClass(vue.unref(nsTime).be(\"panel\", \"footer\"))\n      }, [vue.createElementVNode(\"button\", {\n        type: \"button\",\n        \"class\": vue.normalizeClass([vue.unref(nsTime).be(\"panel\", \"btn\"), \"cancel\"]),\n        onClick: function onClick($event) {\n          return handleCancel();\n        }\n      }, vue.toDisplayString(vue.unref(t)(\"el.datepicker.cancel\")), 11, [\"onClick\"]), vue.createElementVNode(\"button\", {\n        type: \"button\",\n        \"class\": vue.normalizeClass([vue.unref(nsTime).be(\"panel\", \"btn\"), \"confirm\"]),\n        disabled: vue.unref(btnConfirmDisabled),\n        onClick: function onClick($event) {\n          return handleConfirm();\n        }\n      }, vue.toDisplayString(vue.unref(t)(\"el.datepicker.confirm\")), 11, [\"disabled\", \"onClick\"])], 2)], 2)) : vue.createCommentVNode(\"v-if\", true);\n    };\n  }\n});\nvar TimeRangePanel = /* @__PURE__ */pluginVue_exportHelper[\"default\"](_sfc_main, [[\"__file\", \"panel-time-range.vue\"]]);\nexports[\"default\"] = TimeRangePanel;","map":{"version":3,"names":["makeSelectRange","start","end","result","i","push","_index$useLocale","index","useLocale","t","lang","nsTime","index$1","useNamespace","nsPicker","pickerBase","vue","inject","_pickerBase$props","props","arrowControl","disabledHours","disabledMinutes","disabledSeconds","defaultValue","startContainerKls","computed","be","is","showSeconds","value","endContainerKls","startTime","parsedValue","endTime","oldValue","useTimePicker","useOldValue","handleCancel","emit","format","includes","amPmMode","handleConfirm","visible","arguments","length","undefined","handleMinChange","date","handleChange","millisecond","handleMaxChange","isValidValue","_date","parsedDate","map","_","dayjs__default","locale","getRangeAvailableTime","isSame","btnConfirmDisabled","selectionRange","ref","setMinSelectionRange","offset","setMaxSelectionRange","_offset","unref","changeSelectionRange","step","list","mapping","concat","indexOf","next","half","timePickerOptions","handleKeydown","event","code","_aria$EVENT_CODE","aria","EVENT_CODE","left","right","up","down","preventDefault","role","disabledHours_","compare","defaultDisable","isStart","compareDate","compareHour","hour","nextDisable","lodashUnified","union","disabledMinutes_","compareMinute","minute","disabledSeconds_","compareSecond","second","_ref2","_ref3","_slicedToArray","getAvailableTime","_useTimePicker$buildA","buildAvailableTimeSlotGetter","getAvailableHours","getAvailableMinutes","getAvailableSeconds","_useTimePanel$useTime","useTimePanel","onSetOption","parseUserInput","days","shared","isArray","d","formatToString","getDefaultValue","defaultDay","add","_ctx","_cache","actualVisible","openBlock","createElementBlock"],"sources":["../../../../../../../packages/components/time-picker/src/time-picker-com/panel-time-range.vue"],"sourcesContent":["<template>\n  <div\n    v-if=\"actualVisible\"\n    :class=\"[nsTime.b('range-picker'), nsPicker.b('panel')]\"\n  >\n    <div :class=\"nsTime.be('range-picker', 'content')\">\n      <div :class=\"nsTime.be('range-picker', 'cell')\">\n        <div :class=\"nsTime.be('range-picker', 'header')\">\n          {{ t('el.datepicker.startTime') }}\n        </div>\n        <div :class=\"startContainerKls\">\n          <time-spinner\n            ref=\"minSpinner\"\n            role=\"start\"\n            :show-seconds=\"showSeconds\"\n            :am-pm-mode=\"amPmMode\"\n            :arrow-control=\"arrowControl\"\n            :spinner-date=\"startTime\"\n            :disabled-hours=\"disabledHours_\"\n            :disabled-minutes=\"disabledMinutes_\"\n            :disabled-seconds=\"disabledSeconds_\"\n            @change=\"handleMinChange\"\n            @set-option=\"onSetOption\"\n            @select-range=\"setMinSelectionRange\"\n          />\n        </div>\n      </div>\n      <div :class=\"nsTime.be('range-picker', 'cell')\">\n        <div :class=\"nsTime.be('range-picker', 'header')\">\n          {{ t('el.datepicker.endTime') }}\n        </div>\n        <div :class=\"endContainerKls\">\n          <time-spinner\n            ref=\"maxSpinner\"\n            role=\"end\"\n            :show-seconds=\"showSeconds\"\n            :am-pm-mode=\"amPmMode\"\n            :arrow-control=\"arrowControl\"\n            :spinner-date=\"endTime\"\n            :disabled-hours=\"disabledHours_\"\n            :disabled-minutes=\"disabledMinutes_\"\n            :disabled-seconds=\"disabledSeconds_\"\n            @change=\"handleMaxChange\"\n            @set-option=\"onSetOption\"\n            @select-range=\"setMaxSelectionRange\"\n          />\n        </div>\n      </div>\n    </div>\n    <div :class=\"nsTime.be('panel', 'footer')\">\n      <button\n        type=\"button\"\n        :class=\"[nsTime.be('panel', 'btn'), 'cancel']\"\n        @click=\"handleCancel()\"\n      >\n        {{ t('el.datepicker.cancel') }}\n      </button>\n      <button\n        type=\"button\"\n        :class=\"[nsTime.be('panel', 'btn'), 'confirm']\"\n        :disabled=\"btnConfirmDisabled\"\n        @click=\"handleConfirm()\"\n      >\n        {{ t('el.datepicker.confirm') }}\n      </button>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { computed, inject, ref, unref } from 'vue'\nimport dayjs from 'dayjs'\nimport { union } from 'lodash-unified'\nimport { useLocale, useNamespace } from '@element-plus/hooks'\nimport { isArray } from '@element-plus/utils'\nimport { EVENT_CODE } from '@element-plus/constants'\nimport { panelTimeRangeProps } from '../props/panel-time-range'\nimport { useTimePanel } from '../composables/use-time-panel'\nimport {\n  buildAvailableTimeSlotGetter,\n  useOldValue,\n} from '../composables/use-time-picker'\nimport TimeSpinner from './basic-time-spinner.vue'\n\nimport type { Dayjs } from 'dayjs'\n\nconst props = defineProps(panelTimeRangeProps)\nconst emit = defineEmits(['pick', 'select-range', 'set-picker-option'])\n\nconst makeSelectRange = (start: number, end: number) => {\n  const result: number[] = []\n  for (let i = start; i <= end; i++) {\n    result.push(i)\n  }\n  return result\n}\n\nconst { t, lang } = useLocale()\nconst nsTime = useNamespace('time')\nconst nsPicker = useNamespace('picker')\nconst pickerBase = inject('EP_PICKER_BASE') as any\nconst {\n  arrowControl,\n  disabledHours,\n  disabledMinutes,\n  disabledSeconds,\n  defaultValue,\n} = pickerBase.props\n\nconst startContainerKls = computed(() => [\n  nsTime.be('range-picker', 'body'),\n  nsTime.be('panel', 'content'),\n  nsTime.is('arrow', arrowControl),\n  showSeconds.value ? 'has-seconds' : '',\n])\nconst endContainerKls = computed(() => [\n  nsTime.be('range-picker', 'body'),\n  nsTime.be('panel', 'content'),\n  nsTime.is('arrow', arrowControl),\n  showSeconds.value ? 'has-seconds' : '',\n])\n\nconst startTime = computed(() => props.parsedValue![0])\nconst endTime = computed(() => props.parsedValue![1])\nconst oldValue = useOldValue(props)\nconst handleCancel = () => {\n  emit('pick', oldValue.value, false)\n}\nconst showSeconds = computed(() => {\n  return props.format.includes('ss')\n})\nconst amPmMode = computed(() => {\n  if (props.format.includes('A')) return 'A'\n  if (props.format.includes('a')) return 'a'\n  return ''\n})\n\nconst handleConfirm = (visible = false) => {\n  emit('pick', [startTime.value, endTime.value], visible)\n}\n\nconst handleMinChange = (date: Dayjs) => {\n  handleChange(date.millisecond(0), endTime.value)\n}\nconst handleMaxChange = (date: Dayjs) => {\n  handleChange(startTime.value, date.millisecond(0))\n}\n\nconst isValidValue = (_date: Dayjs[]) => {\n  const parsedDate = _date.map((_) => dayjs(_).locale(lang.value))\n  const result = getRangeAvailableTime(parsedDate)\n  return parsedDate[0].isSame(result[0]) && parsedDate[1].isSame(result[1])\n}\n\nconst handleChange = (start: Dayjs, end: Dayjs) => {\n  if (!props.visible) {\n    return\n  }\n  // todo getRangeAvailableTime(_date).millisecond(0)\n  emit('pick', [start, end], true)\n}\nconst btnConfirmDisabled = computed(() => {\n  return startTime.value > endTime.value\n})\n\nconst selectionRange = ref([0, 2])\nconst setMinSelectionRange = (start: number, end: number) => {\n  emit('select-range', start, end, 'min')\n  selectionRange.value = [start, end]\n}\n\nconst offset = computed(() => (showSeconds.value ? 11 : 8))\nconst setMaxSelectionRange = (start: number, end: number) => {\n  emit('select-range', start, end, 'max')\n  const _offset = unref(offset)\n  selectionRange.value = [start + _offset, end + _offset]\n}\n\nconst changeSelectionRange = (step: number) => {\n  const list = showSeconds.value ? [0, 3, 6, 11, 14, 17] : [0, 3, 8, 11]\n  const mapping = ['hours', 'minutes'].concat(\n    showSeconds.value ? ['seconds'] : []\n  )\n  const index = list.indexOf(selectionRange.value[0])\n  const next = (index + step + list.length) % list.length\n  const half = list.length / 2\n  if (next < half) {\n    timePickerOptions['start_emitSelectRange'](mapping[next])\n  } else {\n    timePickerOptions['end_emitSelectRange'](mapping[next - half])\n  }\n}\n\nconst handleKeydown = (event: KeyboardEvent) => {\n  const code = event.code\n\n  const { left, right, up, down } = EVENT_CODE\n\n  if ([left, right].includes(code)) {\n    const step = code === left ? -1 : 1\n    changeSelectionRange(step)\n    event.preventDefault()\n    return\n  }\n\n  if ([up, down].includes(code)) {\n    const step = code === up ? -1 : 1\n    const role = selectionRange.value[0] < offset.value ? 'start' : 'end'\n    timePickerOptions[`${role}_scrollDown`](step)\n    event.preventDefault()\n    return\n  }\n}\n\nconst disabledHours_ = (role: string, compare?: Dayjs) => {\n  const defaultDisable = disabledHours ? disabledHours(role) : []\n  const isStart = role === 'start'\n  const compareDate = compare || (isStart ? endTime.value : startTime.value)\n  const compareHour = compareDate.hour()\n  const nextDisable = isStart\n    ? makeSelectRange(compareHour + 1, 23)\n    : makeSelectRange(0, compareHour - 1)\n  return union(defaultDisable, nextDisable)\n}\nconst disabledMinutes_ = (hour: number, role: string, compare?: Dayjs) => {\n  const defaultDisable = disabledMinutes ? disabledMinutes(hour, role) : []\n  const isStart = role === 'start'\n  const compareDate = compare || (isStart ? endTime.value : startTime.value)\n  const compareHour = compareDate.hour()\n  if (hour !== compareHour) {\n    return defaultDisable\n  }\n  const compareMinute = compareDate.minute()\n  const nextDisable = isStart\n    ? makeSelectRange(compareMinute + 1, 59)\n    : makeSelectRange(0, compareMinute - 1)\n  return union(defaultDisable, nextDisable)\n}\nconst disabledSeconds_ = (\n  hour: number,\n  minute: number,\n  role: string,\n  compare?: Dayjs\n) => {\n  const defaultDisable = disabledSeconds\n    ? disabledSeconds(hour, minute, role)\n    : []\n  const isStart = role === 'start'\n  const compareDate = compare || (isStart ? endTime.value : startTime.value)\n  const compareHour = compareDate.hour()\n  const compareMinute = compareDate.minute()\n  if (hour !== compareHour || minute !== compareMinute) {\n    return defaultDisable\n  }\n  const compareSecond = compareDate.second()\n  const nextDisable = isStart\n    ? makeSelectRange(compareSecond + 1, 59)\n    : makeSelectRange(0, compareSecond - 1)\n  return union(defaultDisable, nextDisable)\n}\n\nconst getRangeAvailableTime = ([start, end]: Array<Dayjs>) => {\n  return [\n    getAvailableTime(start, 'start', true, end),\n    getAvailableTime(end, 'end', false, start),\n  ] as const\n}\n\nconst { getAvailableHours, getAvailableMinutes, getAvailableSeconds } =\n  buildAvailableTimeSlotGetter(\n    disabledHours_,\n    disabledMinutes_,\n    disabledSeconds_\n  )\n\nconst {\n  timePickerOptions,\n\n  getAvailableTime,\n  onSetOption,\n} = useTimePanel({\n  getAvailableHours,\n  getAvailableMinutes,\n  getAvailableSeconds,\n})\n\nconst parseUserInput = (days: Dayjs[] | Dayjs) => {\n  if (!days) return null\n  if (isArray(days)) {\n    return days.map((d) => dayjs(d, props.format).locale(lang.value))\n  }\n  return dayjs(days, props.format).locale(lang.value)\n}\n\nconst formatToString = (days: Dayjs[] | Dayjs) => {\n  if (!days) return null\n  if (isArray(days)) {\n    return days.map((d) => d.format(props.format))\n  }\n  return days.format(props.format)\n}\n\nconst getDefaultValue = () => {\n  if (isArray(defaultValue)) {\n    return defaultValue.map((d: Date) => dayjs(d).locale(lang.value))\n  }\n  const defaultDay = dayjs(defaultValue).locale(lang.value)\n  return [defaultDay, defaultDay.add(60, 'm')]\n}\n\nemit('set-picker-option', ['formatToString', formatToString])\nemit('set-picker-option', ['parseUserInput', parseUserInput])\nemit('set-picker-option', ['isValidValue', isValidValue])\nemit('set-picker-option', ['handleKeydownInput', handleKeydown])\nemit('set-picker-option', ['getDefaultValue', getDefaultValue])\nemit('set-picker-option', ['getRangeAvailableTime', getRangeAvailableTime])\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}