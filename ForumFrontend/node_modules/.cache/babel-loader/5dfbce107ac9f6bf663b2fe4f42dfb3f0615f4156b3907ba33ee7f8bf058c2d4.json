{"ast":null,"code":"'use strict';\n\nvar _createForOfIteratorHelper = require(\"H:/ForumServers/ForumFrontend/node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js\")[\"default\"];\nrequire(\"core-js/modules/es.array.for-each.js\");\nrequire(\"core-js/modules/es.array.index-of.js\");\nrequire(\"core-js/modules/es.array.push.js\");\nrequire(\"core-js/modules/es.iterator.constructor.js\");\nrequire(\"core-js/modules/es.iterator.for-each.js\");\nrequire(\"core-js/modules/es.map.js\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/es.set.js\");\nrequire(\"core-js/modules/es.set.difference.v2.js\");\nrequire(\"core-js/modules/es.set.intersection.v2.js\");\nrequire(\"core-js/modules/es.set.is-disjoint-from.v2.js\");\nrequire(\"core-js/modules/es.set.is-subset-of.v2.js\");\nrequire(\"core-js/modules/es.set.is-superset-of.v2.js\");\nrequire(\"core-js/modules/es.set.symmetric-difference.v2.js\");\nrequire(\"core-js/modules/es.set.union.v2.js\");\nrequire(\"core-js/modules/es.string.iterator.js\");\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nvar virtualTree = require('../virtual-tree.js');\nvar useCheck = require('./useCheck.js');\nvar useFilter = require('./useFilter.js');\nvar shared = require('@vue/shared');\nfunction useTree(props, emit) {\n  var expandedKeySet = vue.ref(new Set(props.defaultExpandedKeys));\n  var currentKey = vue.ref();\n  var tree = vue.shallowRef();\n  var listRef = vue.ref();\n  vue.watch(function () {\n    return props.currentNodeKey;\n  }, function (key) {\n    currentKey.value = key;\n  }, {\n    immediate: true\n  });\n  vue.watch(function () {\n    return props.data;\n  }, function (data) {\n    setData(data);\n  }, {\n    immediate: true\n  });\n  var _useCheck$useCheck = useCheck.useCheck(props, tree),\n    isIndeterminate = _useCheck$useCheck.isIndeterminate,\n    isChecked = _useCheck$useCheck.isChecked,\n    toggleCheckbox = _useCheck$useCheck.toggleCheckbox,\n    getCheckedKeys = _useCheck$useCheck.getCheckedKeys,\n    getCheckedNodes = _useCheck$useCheck.getCheckedNodes,\n    getHalfCheckedKeys = _useCheck$useCheck.getHalfCheckedKeys,\n    getHalfCheckedNodes = _useCheck$useCheck.getHalfCheckedNodes,\n    setChecked = _useCheck$useCheck.setChecked,\n    setCheckedKeys = _useCheck$useCheck.setCheckedKeys;\n  var _useFilter$useFilter = useFilter.useFilter(props, tree),\n    doFilter = _useFilter$useFilter.doFilter,\n    hiddenNodeKeySet = _useFilter$useFilter.hiddenNodeKeySet,\n    isForceHiddenExpandIcon = _useFilter$useFilter.isForceHiddenExpandIcon;\n  var valueKey = vue.computed(function () {\n    var _a;\n    return ((_a = props.props) == null ? void 0 : _a.value) || virtualTree.TreeOptionsEnum.KEY;\n  });\n  var childrenKey = vue.computed(function () {\n    var _a;\n    return ((_a = props.props) == null ? void 0 : _a.children) || virtualTree.TreeOptionsEnum.CHILDREN;\n  });\n  var disabledKey = vue.computed(function () {\n    var _a;\n    return ((_a = props.props) == null ? void 0 : _a.disabled) || virtualTree.TreeOptionsEnum.DISABLED;\n  });\n  var labelKey = vue.computed(function () {\n    var _a;\n    return ((_a = props.props) == null ? void 0 : _a.label) || virtualTree.TreeOptionsEnum.LABEL;\n  });\n  var flattenTree = vue.computed(function () {\n    var _a;\n    var expandedKeys = expandedKeySet.value;\n    var hiddenKeys = hiddenNodeKeySet.value;\n    var flattenNodes = [];\n    var nodes = ((_a = tree.value) == null ? void 0 : _a.treeNodes) || [];\n    var stack = [];\n    for (var i = nodes.length - 1; i >= 0; --i) {\n      stack.push(nodes[i]);\n    }\n    while (stack.length) {\n      var node = stack.pop();\n      if (hiddenKeys.has(node.key)) continue;\n      flattenNodes.push(node);\n      if (node.children && expandedKeys.has(node.key)) {\n        for (var _i = node.children.length - 1; _i >= 0; --_i) {\n          stack.push(node.children[_i]);\n        }\n      }\n    }\n    return flattenNodes;\n  });\n  var isNotEmpty = vue.computed(function () {\n    return flattenTree.value.length > 0;\n  });\n  function createTree(data) {\n    var treeNodeMap = /* @__PURE__ */new Map();\n    var levelTreeNodeMap = /* @__PURE__ */new Map();\n    var maxLevel = 1;\n    function traverse(nodes) {\n      var level = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var parent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : void 0;\n      var _a;\n      var siblings = [];\n      var _iterator = _createForOfIteratorHelper(nodes),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var rawNode = _step.value;\n          var value = getKey(rawNode);\n          var node = {\n            level: level,\n            key: value,\n            data: rawNode\n          };\n          node.label = getLabel(rawNode);\n          node.parent = parent;\n          var children = getChildren(rawNode);\n          node.disabled = getDisabled(rawNode);\n          node.isLeaf = !children || children.length === 0;\n          if (children && children.length) {\n            node.children = traverse(children, level + 1, node);\n          }\n          siblings.push(node);\n          treeNodeMap.set(value, node);\n          if (!levelTreeNodeMap.has(level)) {\n            levelTreeNodeMap.set(level, []);\n          }\n          (_a = levelTreeNodeMap.get(level)) == null ? void 0 : _a.push(node);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      if (level > maxLevel) {\n        maxLevel = level;\n      }\n      return siblings;\n    }\n    var treeNodes = traverse(data);\n    return {\n      treeNodeMap: treeNodeMap,\n      levelTreeNodeMap: levelTreeNodeMap,\n      maxLevel: maxLevel,\n      treeNodes: treeNodes\n    };\n  }\n  function filter(query) {\n    var keys = doFilter(query);\n    if (keys) {\n      expandedKeySet.value = keys;\n    }\n  }\n  function getChildren(node) {\n    return node[childrenKey.value];\n  }\n  function getKey(node) {\n    if (!node) {\n      return \"\";\n    }\n    return node[valueKey.value];\n  }\n  function getDisabled(node) {\n    return node[disabledKey.value];\n  }\n  function getLabel(node) {\n    return node[labelKey.value];\n  }\n  function toggleExpand(node) {\n    var expandedKeys = expandedKeySet.value;\n    if (expandedKeys.has(node.key)) {\n      collapseNode(node);\n    } else {\n      expandNode(node);\n    }\n  }\n  function setExpandedKeys(keys) {\n    var expandedKeys = /* @__PURE__ */new Set();\n    var nodeMap = tree.value.treeNodeMap;\n    keys.forEach(function (k) {\n      var node = nodeMap.get(k);\n      while (node && !expandedKeys.has(node.key)) {\n        expandedKeys.add(node.key);\n        node = node.parent;\n      }\n    });\n    expandedKeySet.value = expandedKeys;\n  }\n  function handleNodeClick(node, e) {\n    emit(virtualTree.NODE_CLICK, node.data, node, e);\n    handleCurrentChange(node);\n    if (props.expandOnClickNode) {\n      toggleExpand(node);\n    }\n    if (props.showCheckbox && (props.checkOnClickNode || node.isLeaf && props.checkOnClickLeaf) && !node.disabled) {\n      toggleCheckbox(node, !isChecked(node), true);\n    }\n  }\n  function handleNodeDrop(node, e) {\n    emit(virtualTree.NODE_DROP, node.data, node, e);\n  }\n  function handleCurrentChange(node) {\n    if (!isCurrent(node)) {\n      currentKey.value = node.key;\n      emit(virtualTree.CURRENT_CHANGE, node.data, node);\n    }\n  }\n  function handleNodeCheck(node, checked) {\n    toggleCheckbox(node, checked);\n  }\n  function expandNode(node) {\n    var keySet = expandedKeySet.value;\n    if (tree.value && props.accordion) {\n      var treeNodeMap = tree.value.treeNodeMap;\n      keySet.forEach(function (key) {\n        var treeNode = treeNodeMap.get(key);\n        if (node && node.level === (treeNode == null ? void 0 : treeNode.level)) {\n          keySet[\"delete\"](key);\n        }\n      });\n    }\n    keySet.add(node.key);\n    emit(virtualTree.NODE_EXPAND, node.data, node);\n  }\n  function collapseNode(node) {\n    expandedKeySet.value[\"delete\"](node.key);\n    emit(virtualTree.NODE_COLLAPSE, node.data, node);\n  }\n  function isExpanded(node) {\n    return expandedKeySet.value.has(node.key);\n  }\n  function isDisabled(node) {\n    return !!node.disabled;\n  }\n  function isCurrent(node) {\n    var current = currentKey.value;\n    return current !== void 0 && current === node.key;\n  }\n  function getCurrentNode() {\n    var _a, _b;\n    if (!currentKey.value) return void 0;\n    return (_b = (_a = tree.value) == null ? void 0 : _a.treeNodeMap.get(currentKey.value)) == null ? void 0 : _b.data;\n  }\n  function getCurrentKey() {\n    return currentKey.value;\n  }\n  function setCurrentKey(key) {\n    currentKey.value = key;\n  }\n  function setData(data) {\n    vue.nextTick(function () {\n      return tree.value = createTree(data);\n    });\n  }\n  function getNode(data) {\n    var _a;\n    var key = shared.isObject(data) ? getKey(data) : data;\n    return (_a = tree.value) == null ? void 0 : _a.treeNodeMap.get(key);\n  }\n  function scrollToNode(key) {\n    var strategy = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"auto\";\n    var node = getNode(key);\n    if (node && listRef.value) {\n      listRef.value.scrollToItem(flattenTree.value.indexOf(node), strategy);\n    }\n  }\n  function scrollTo(offset) {\n    var _a;\n    (_a = listRef.value) == null ? void 0 : _a.scrollTo(offset);\n  }\n  return {\n    tree: tree,\n    flattenTree: flattenTree,\n    isNotEmpty: isNotEmpty,\n    listRef: listRef,\n    getKey: getKey,\n    getChildren: getChildren,\n    toggleExpand: toggleExpand,\n    toggleCheckbox: toggleCheckbox,\n    isExpanded: isExpanded,\n    isChecked: isChecked,\n    isIndeterminate: isIndeterminate,\n    isDisabled: isDisabled,\n    isCurrent: isCurrent,\n    isForceHiddenExpandIcon: isForceHiddenExpandIcon,\n    handleNodeClick: handleNodeClick,\n    handleNodeDrop: handleNodeDrop,\n    handleNodeCheck: handleNodeCheck,\n    getCurrentNode: getCurrentNode,\n    getCurrentKey: getCurrentKey,\n    setCurrentKey: setCurrentKey,\n    getCheckedKeys: getCheckedKeys,\n    getCheckedNodes: getCheckedNodes,\n    getHalfCheckedKeys: getHalfCheckedKeys,\n    getHalfCheckedNodes: getHalfCheckedNodes,\n    setChecked: setChecked,\n    setCheckedKeys: setCheckedKeys,\n    filter: filter,\n    setData: setData,\n    getNode: getNode,\n    expandNode: expandNode,\n    collapseNode: collapseNode,\n    setExpandedKeys: setExpandedKeys,\n    scrollToNode: scrollToNode,\n    scrollTo: scrollTo\n  };\n}\nexports.useTree = useTree;","map":{"version":3,"names":["useTree","props","emit","expandedKeySet","vue","ref","Set","defaultExpandedKeys","currentKey","tree","shallowRef","listRef","watch","currentNodeKey","key","value","immediate","data","setData","_useCheck$useCheck","useCheck","isIndeterminate","isChecked","toggleCheckbox","getCheckedKeys","getCheckedNodes","getHalfCheckedKeys","getHalfCheckedNodes","setChecked","setCheckedKeys","_useFilter$useFilter","useFilter","doFilter","hiddenNodeKeySet","isForceHiddenExpandIcon","valueKey","computed","_a","virtualTree","TreeOptionsEnum","KEY","childrenKey","children","CHILDREN","disabledKey","disabled","DISABLED","labelKey","label","LABEL","flattenTree","expandedKeys","hiddenKeys","flattenNodes","nodes","treeNodes","stack","i","length","push","node","pop","has","isNotEmpty","createTree","treeNodeMap","Map","levelTreeNodeMap","maxLevel","traverse","level","arguments","undefined","parent","siblings","_iterator","_createForOfIteratorHelper","_step","s","n","done","rawNode","getKey","getLabel","getChildren","getDisabled","isLeaf","set","get","err","e","f","filter","query","keys","toggleExpand","collapseNode","expandNode","setExpandedKeys","nodeMap","forEach","k","add","handleNodeClick","NODE_CLICK","handleCurrentChange","expandOnClickNode","showCheckbox","checkOnClickNode","checkOnClickLeaf","handleNodeDrop","NODE_DROP","isCurrent","CURRENT_CHANGE","handleNodeCheck","checked","keySet","accordion","treeNode","NODE_EXPAND","NODE_COLLAPSE","isExpanded","isDisabled","current","getCurrentNode","_b","getCurrentKey","setCurrentKey","nextTick","getNode","shared","isObject","scrollToNode","strategy","scrollToItem","indexOf","scrollTo","offset"],"sources":["../../../../../../../packages/components/tree-v2/src/composables/useTree.ts"],"sourcesContent":["import { computed, nextTick, ref, shallowRef, watch } from 'vue'\nimport { isObject } from '@element-plus/utils'\nimport {\n  CURRENT_CHANGE,\n  NODE_CLICK,\n  NODE_COLLAPSE,\n  NODE_DROP,\n  NODE_EXPAND,\n  TreeOptionsEnum,\n} from '../virtual-tree'\nimport { useCheck } from './useCheck'\nimport { useFilter } from './useFilter'\nimport type {\n  FixedSizeList,\n  Alignment as ScrollStrategy,\n} from '@element-plus/components/virtual-list'\nimport type { SetupContext } from 'vue'\nimport type { treeEmits } from '../virtual-tree'\nimport type { CheckboxValueType } from '@element-plus/components/checkbox'\nimport type {\n  Tree,\n  TreeData,\n  TreeKey,\n  TreeNode,\n  TreeNodeData,\n  TreeProps,\n} from '../types'\n\nexport function useTree(\n  props: TreeProps,\n  emit: SetupContext<typeof treeEmits>['emit']\n) {\n  const expandedKeySet = ref<Set<TreeKey>>(new Set(props.defaultExpandedKeys))\n  const currentKey = ref<TreeKey | undefined>()\n  const tree = shallowRef<Tree | undefined>()\n  const listRef = ref<typeof FixedSizeList | undefined>()\n\n  watch(\n    () => props.currentNodeKey,\n    (key) => {\n      currentKey.value = key\n    },\n    {\n      immediate: true,\n    }\n  )\n\n  watch(\n    () => props.data,\n    (data: TreeData) => {\n      setData(data)\n    },\n    {\n      immediate: true,\n    }\n  )\n\n  const {\n    isIndeterminate,\n    isChecked,\n    toggleCheckbox,\n    getCheckedKeys,\n    getCheckedNodes,\n    getHalfCheckedKeys,\n    getHalfCheckedNodes,\n    setChecked,\n    setCheckedKeys,\n  } = useCheck(props, tree)\n\n  const { doFilter, hiddenNodeKeySet, isForceHiddenExpandIcon } = useFilter(\n    props,\n    tree\n  )\n\n  const valueKey = computed(() => {\n    return props.props?.value || TreeOptionsEnum.KEY\n  })\n  const childrenKey = computed(() => {\n    return props.props?.children || TreeOptionsEnum.CHILDREN\n  })\n  const disabledKey = computed(() => {\n    return props.props?.disabled || TreeOptionsEnum.DISABLED\n  })\n  const labelKey = computed(() => {\n    return props.props?.label || TreeOptionsEnum.LABEL\n  })\n\n  const flattenTree = computed(() => {\n    const expandedKeys = expandedKeySet.value\n    const hiddenKeys = hiddenNodeKeySet.value\n    const flattenNodes: TreeNode[] = []\n    const nodes = tree.value?.treeNodes || []\n\n    const stack: TreeNode[] = []\n    for (let i = nodes.length - 1; i >= 0; --i) {\n      stack.push(nodes[i])\n    }\n    while (stack.length) {\n      const node = stack.pop()!\n      if (hiddenKeys.has(node.key)) continue\n\n      flattenNodes.push(node)\n      if (node.children && expandedKeys.has(node.key)) {\n        for (let i = node.children.length - 1; i >= 0; --i) {\n          stack.push(node.children[i])\n        }\n      }\n    }\n\n    return flattenNodes\n  })\n\n  const isNotEmpty = computed(() => {\n    return flattenTree.value.length > 0\n  })\n\n  function createTree(data: TreeData): Tree {\n    const treeNodeMap: Map<TreeKey, TreeNode> = new Map()\n    const levelTreeNodeMap: Map<number, TreeNode[]> = new Map()\n    let maxLevel = 1\n    function traverse(\n      nodes: TreeData,\n      level = 1,\n      parent: TreeNode | undefined = undefined\n    ) {\n      const siblings: TreeNode[] = []\n      for (const rawNode of nodes) {\n        const value = getKey(rawNode)\n        const node: TreeNode = {\n          level,\n          key: value,\n          data: rawNode,\n        }\n        node.label = getLabel(rawNode)\n        node.parent = parent\n        const children = getChildren(rawNode)\n        node.disabled = getDisabled(rawNode)\n        node.isLeaf = !children || children.length === 0\n        if (children && children.length) {\n          node.children = traverse(children, level + 1, node)\n        }\n        siblings.push(node)\n        treeNodeMap.set(value, node)\n        if (!levelTreeNodeMap.has(level)) {\n          levelTreeNodeMap.set(level, [])\n        }\n        levelTreeNodeMap.get(level)?.push(node)\n      }\n      if (level > maxLevel) {\n        maxLevel = level\n      }\n      return siblings\n    }\n    const treeNodes: TreeNode[] = traverse(data)\n    return {\n      treeNodeMap,\n      levelTreeNodeMap,\n      maxLevel,\n      treeNodes,\n    }\n  }\n\n  function filter(query: string) {\n    const keys = doFilter(query)\n    if (keys) {\n      expandedKeySet.value = keys\n    }\n  }\n\n  function getChildren(node: TreeNodeData): TreeNodeData[] {\n    return node[childrenKey.value]\n  }\n\n  function getKey(node: TreeNodeData): TreeKey {\n    if (!node) {\n      return ''\n    }\n    return node[valueKey.value]\n  }\n\n  function getDisabled(node: TreeNodeData): boolean {\n    return node[disabledKey.value]\n  }\n\n  function getLabel(node: TreeNodeData): string {\n    return node[labelKey.value]\n  }\n\n  function toggleExpand(node: TreeNode) {\n    const expandedKeys = expandedKeySet.value\n    if (expandedKeys.has(node.key)) {\n      collapseNode(node)\n    } else {\n      expandNode(node)\n    }\n  }\n\n  function setExpandedKeys(keys: TreeKey[]) {\n    const expandedKeys = new Set<TreeKey>()\n    const nodeMap = tree.value!.treeNodeMap\n\n    keys.forEach((k) => {\n      let node = nodeMap.get(k)\n      while (node && !expandedKeys.has(node.key)) {\n        expandedKeys.add(node.key)\n        node = node.parent\n      }\n    })\n\n    expandedKeySet.value = expandedKeys\n  }\n\n  function handleNodeClick(node: TreeNode, e: MouseEvent) {\n    emit(NODE_CLICK, node.data, node, e)\n    handleCurrentChange(node)\n    if (props.expandOnClickNode) {\n      toggleExpand(node)\n    }\n    if (\n      props.showCheckbox &&\n      (props.checkOnClickNode || (node.isLeaf && props.checkOnClickLeaf)) &&\n      !node.disabled\n    ) {\n      toggleCheckbox(node, !isChecked(node), true)\n    }\n  }\n\n  function handleNodeDrop(node: TreeNode, e: DragEvent) {\n    emit(NODE_DROP, node.data, node, e)\n  }\n\n  function handleCurrentChange(node: TreeNode) {\n    if (!isCurrent(node)) {\n      currentKey.value = node.key\n      emit(CURRENT_CHANGE, node.data, node)\n    }\n  }\n\n  function handleNodeCheck(node: TreeNode, checked: CheckboxValueType) {\n    toggleCheckbox(node, checked)\n  }\n\n  function expandNode(node: TreeNode) {\n    const keySet = expandedKeySet.value\n    if (tree.value && props.accordion) {\n      // whether only one node among the same level can be expanded at one time\n      const { treeNodeMap } = tree.value\n      keySet.forEach((key) => {\n        const treeNode = treeNodeMap.get(key)\n        if (node && node.level === treeNode?.level) {\n          keySet.delete(key)\n        }\n      })\n    }\n    keySet.add(node.key)\n    emit(NODE_EXPAND, node.data, node)\n  }\n\n  function collapseNode(node: TreeNode) {\n    expandedKeySet.value.delete(node.key)\n    emit(NODE_COLLAPSE, node.data, node)\n  }\n\n  function isExpanded(node: TreeNode): boolean {\n    return expandedKeySet.value.has(node.key)\n  }\n\n  function isDisabled(node: TreeNode): boolean {\n    return !!node.disabled\n  }\n\n  function isCurrent(node: TreeNode): boolean {\n    const current = currentKey.value\n    return current !== undefined && current === node.key\n  }\n\n  function getCurrentNode(): TreeNodeData | undefined {\n    if (!currentKey.value) return undefined\n    return tree.value?.treeNodeMap.get(currentKey.value)?.data\n  }\n\n  function getCurrentKey(): TreeKey | undefined {\n    return currentKey.value\n  }\n\n  function setCurrentKey(key: TreeKey): void {\n    currentKey.value = key\n  }\n\n  function setData(data: TreeData) {\n    nextTick(() => (tree.value = createTree(data)))\n  }\n\n  function getNode(data: TreeKey | TreeNodeData) {\n    const key = isObject(data) ? getKey(data) : data\n    return tree.value?.treeNodeMap.get(key)\n  }\n\n  function scrollToNode(key: TreeKey, strategy: ScrollStrategy = 'auto') {\n    const node = getNode(key)\n    if (node && listRef.value) {\n      listRef.value.scrollToItem(flattenTree.value.indexOf(node), strategy)\n    }\n  }\n\n  function scrollTo(offset: number) {\n    listRef.value?.scrollTo(offset)\n  }\n\n  return {\n    tree,\n    flattenTree,\n    isNotEmpty,\n    listRef,\n    getKey,\n    getChildren,\n    toggleExpand,\n    toggleCheckbox,\n    isExpanded,\n    isChecked,\n    isIndeterminate,\n    isDisabled,\n    isCurrent,\n    isForceHiddenExpandIcon,\n    handleNodeClick,\n    handleNodeDrop,\n    handleNodeCheck,\n    // expose\n    getCurrentNode,\n    getCurrentKey,\n    setCurrentKey,\n    getCheckedKeys,\n    getCheckedNodes,\n    getHalfCheckedKeys,\n    getHalfCheckedNodes,\n    setChecked,\n    setCheckedKeys,\n    filter,\n    setData,\n    getNode,\n    expandNode,\n    collapseNode,\n    setExpandedKeys,\n    scrollToNode,\n    scrollTo,\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}