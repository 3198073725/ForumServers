{"ast":null,"code":"import _regeneratorRuntime from \"H:/ForumServers/ForumFrontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"H:/ForumServers/ForumFrontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _toConsumableArray from \"H:/ForumServers/ForumFrontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport \"core-js/modules/es.error.to-string.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.sort.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/es.string.pad-start.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport { ref, computed, watch, nextTick, onMounted, onUnmounted } from 'vue';\nimport { useStore } from 'vuex';\nimport { ElMessage } from 'element-plus';\nimport { Close, Minus, ArrowUp, Position, Loading } from '@element-plus/icons-vue';\nimport wsManager from '@/utils/websocket';\nimport { sendMessage as sendMessageApi } from '@/api/messages';\nexport default {\n  name: 'ChatWindow',\n  components: {\n    Loading: Loading\n  },\n  props: {\n    userId: {\n      type: [Number, String],\n      required: true\n    }\n  },\n  emits: ['close'],\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit;\n    var store = useStore();\n    var messageContainer = ref(null);\n    var messageText = ref('');\n    var minimized = ref(false);\n    var loading = ref(true);\n    var loadingMore = ref(false);\n\n    // 计算属性\n    var currentUser = computed(function () {\n      return store.state.user;\n    });\n    var currentUserId = computed(function () {\n      return store.getters.userId;\n    });\n    var messages = computed(function () {\n      return store.getters['chat/messagesByUserId'](props.userId) || [];\n    });\n    var hasMoreMessages = computed(function () {\n      return store.getters['chat/hasMoreMessages'](props.userId);\n    });\n    var chatUser = computed(function () {\n      // 从store中获取用户信息\n      var userInfo = store.getters['users/getUserById'](props.userId);\n      return {\n        id: props.userId,\n        username: (userInfo === null || userInfo === void 0 ? void 0 : userInfo.username) || \"\\u7528\\u6237\".concat(props.userId),\n        nickname: userInfo === null || userInfo === void 0 ? void 0 : userInfo.nickname,\n        avatar_url: (userInfo === null || userInfo === void 0 ? void 0 : userInfo.avatar_url) || '/assets/default-avatar.png' // 添加默认头像\n      };\n    });\n\n    // 按时间排序的消息列表\n    var sortedMessages = computed(function () {\n      return _toConsumableArray(messages.value).sort(function (a, b) {\n        return new Date(a.timestamp) - new Date(b.timestamp);\n      });\n    });\n\n    // 监听消息列表变化，自动滚动到底部\n    watch(sortedMessages, function () {\n      nextTick(function () {\n        scrollToBottom();\n      });\n    });\n\n    // 初始化\n    onMounted(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            // 连接WebSocket\n            wsManager.connectChat(props.userId);\n\n            // 加载消息历史\n            _context.next = 3;\n            return loadMessages();\n          case 3:\n            // 标记消息为已读\n            store.dispatch('chat/markMessagesAsRead', props.userId);\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    })));\n\n    // 组件销毁时断开WebSocket连接\n    onUnmounted(function () {\n      wsManager.disconnectChat(props.userId);\n    });\n\n    // 加载消息\n    var loadMessages = /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              loading.value = true;\n              _context2.prev = 1;\n              _context2.next = 4;\n              return store.dispatch('chat/fetchMessagesWithUser', {\n                userId: props.userId,\n                page: 1\n              });\n            case 4:\n              // 滚动到底部\n              nextTick(function () {\n                scrollToBottom();\n              });\n              _context2.next = 11;\n              break;\n            case 7:\n              _context2.prev = 7;\n              _context2.t0 = _context2[\"catch\"](1);\n              console.error('加载消息失败:', _context2.t0);\n              ElMessage.error('加载消息失败');\n            case 11:\n              _context2.prev = 11;\n              loading.value = false;\n              return _context2.finish(11);\n            case 14:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[1, 7, 11, 14]]);\n      }));\n      return function loadMessages() {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    // 加载更多消息\n    var loadMoreMessages = /*#__PURE__*/function () {\n      var _ref4 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              if (!(loadingMore.value || !hasMoreMessages.value)) {\n                _context3.next = 2;\n                break;\n              }\n              return _context3.abrupt(\"return\");\n            case 2:\n              loadingMore.value = true;\n              _context3.prev = 3;\n              _context3.next = 6;\n              return store.dispatch('chat/loadMoreMessages', props.userId);\n            case 6:\n              _context3.next = 12;\n              break;\n            case 8:\n              _context3.prev = 8;\n              _context3.t0 = _context3[\"catch\"](3);\n              console.error('加载更多消息失败:', _context3.t0);\n              ElMessage.error('加载更多消息失败');\n            case 12:\n              _context3.prev = 12;\n              loadingMore.value = false;\n              return _context3.finish(12);\n            case 15:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, null, [[3, 8, 12, 15]]);\n      }));\n      return function loadMoreMessages() {\n        return _ref4.apply(this, arguments);\n      };\n    }();\n\n    // 发送消息\n    var sendMessage = /*#__PURE__*/function () {\n      var _ref5 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var content;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              content = messageText.value.trim();\n              if (content) {\n                _context4.next = 3;\n                break;\n              }\n              return _context4.abrupt(\"return\");\n            case 3:\n              _context4.prev = 3;\n              // 通过WebSocket发送消息\n              wsManager.sendChatMessage(props.userId, content);\n\n              // 备用方案：通过API发送消息\n              _context4.next = 7;\n              return sendMessageApi(props.userId, content);\n            case 7:\n              // 清空输入框\n              messageText.value = '';\n              _context4.next = 14;\n              break;\n            case 10:\n              _context4.prev = 10;\n              _context4.t0 = _context4[\"catch\"](3);\n              console.error('发送消息失败:', _context4.t0);\n              ElMessage.error('发送消息失败');\n            case 14:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4, null, [[3, 10]]);\n      }));\n      return function sendMessage() {\n        return _ref5.apply(this, arguments);\n      };\n    }();\n\n    // 滚动到底部\n    var scrollToBottom = function scrollToBottom() {\n      if (messageContainer.value) {\n        messageContainer.value.scrollTop = messageContainer.value.scrollHeight;\n      }\n    };\n\n    // 最小化聊天窗口\n    var minimize = function minimize() {\n      minimized.value = true;\n    };\n\n    // 最大化聊天窗口\n    var maximize = function maximize() {\n      minimized.value = false;\n      // 恢复窗口后滚动到底部\n      nextTick(function () {\n        scrollToBottom();\n      });\n    };\n\n    // 切换最小化/最大化\n    var toggleMinimize = function toggleMinimize() {\n      minimized.value = !minimized.value;\n      if (!minimized.value) {\n        nextTick(function () {\n          scrollToBottom();\n        });\n      }\n    };\n\n    // 关闭聊天窗口\n    var closeChat = function closeChat() {\n      emit('close', props.userId);\n    };\n\n    // 格式化时间\n    var formatTime = function formatTime(timestamp) {\n      var date = new Date(timestamp);\n      var now = new Date();\n      var isToday = date.toDateString() === now.toDateString();\n      var isYesterday = new Date(now - 86400000).toDateString() === date.toDateString();\n\n      // 格式化时间部分\n      var hours = date.getHours().toString().padStart(2, '0');\n      var minutes = date.getMinutes().toString().padStart(2, '0');\n      var timeStr = \"\".concat(hours, \":\").concat(minutes);\n\n      // 今天的消息只显示时间\n      if (isToday) {\n        return timeStr;\n      }\n\n      // 昨天的消息显示\"昨天 HH:MM\"\n      if (isYesterday) {\n        return \"\\u6628\\u5929 \".concat(timeStr);\n      }\n\n      // 今年的消息显示\"MM-DD HH:MM\"\n      if (date.getFullYear() === now.getFullYear()) {\n        var month = (date.getMonth() + 1).toString().padStart(2, '0');\n        var day = date.getDate().toString().padStart(2, '0');\n        return \"\".concat(month, \"-\").concat(day, \" \").concat(timeStr);\n      }\n\n      // 其他情况显示完整日期\"YYYY-MM-DD HH:MM\"\n      return \"\".concat(date.getFullYear(), \"-\").concat((date.getMonth() + 1).toString().padStart(2, '0'), \"-\").concat(date.getDate().toString().padStart(2, '0'), \" \").concat(timeStr);\n    };\n    return {\n      messageContainer: messageContainer,\n      messageText: messageText,\n      minimized: minimized,\n      loading: loading,\n      loadingMore: loadingMore,\n      currentUser: currentUser,\n      currentUserId: currentUserId,\n      messages: messages,\n      sortedMessages: sortedMessages,\n      hasMoreMessages: hasMoreMessages,\n      chatUser: chatUser,\n      loadMessages: loadMessages,\n      loadMoreMessages: loadMoreMessages,\n      sendMessage: sendMessage,\n      minimize: minimize,\n      maximize: maximize,\n      toggleMinimize: toggleMinimize,\n      closeChat: closeChat,\n      formatTime: formatTime,\n      // 图标\n      Close: Close,\n      Minus: Minus,\n      ArrowUp: ArrowUp,\n      Position: Position,\n      Loading: Loading\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","watch","nextTick","onMounted","onUnmounted","useStore","ElMessage","Close","Minus","ArrowUp","Position","Loading","wsManager","sendMessage","sendMessageApi","name","components","props","userId","type","Number","String","required","emits","setup","_ref","emit","store","messageContainer","messageText","minimized","loading","loadingMore","currentUser","state","user","currentUserId","getters","messages","hasMoreMessages","chatUser","userInfo","id","username","concat","nickname","avatar_url","sortedMessages","_toConsumableArray","value","sort","a","b","Date","timestamp","scrollToBottom","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","connectChat","loadMessages","dispatch","stop","disconnectChat","_ref3","_callee2","_callee2$","_context2","page","t0","console","error","finish","apply","arguments","loadMoreMessages","_ref4","_callee3","_callee3$","_context3","abrupt","_ref5","_callee4","content","_callee4$","_context4","trim","sendChatMessage","scrollTop","scrollHeight","minimize","maximize","toggleMinimize","closeChat","formatTime","date","now","isToday","toDateString","isYesterday","hours","getHours","toString","padStart","minutes","getMinutes","timeStr","getFullYear","month","getMonth","day","getDate"],"sources":["H:\\ForumServers\\ForumFrontend\\src\\components\\ChatWindow.vue"],"sourcesContent":["<template>\n  <div class=\"chat-window\" :class=\"{ 'is-minimized': minimized }\">\n    <!-- 聊天窗口标题栏 -->\n    <div class=\"chat-header\" @click=\"toggleMinimize\">\n      <div class=\"user-info\">\n        <el-avatar :size=\"24\" :src=\"chatUser.avatar_url\" />\n        <span class=\"username\">{{ chatUser.nickname || chatUser.username }}</span>\n      </div>\n      <div class=\"header-actions\">\n        <el-button v-if=\"!minimized\" class=\"action-button\" :icon=\"Minus\" circle @click.stop=\"minimize\" />\n        <el-button v-else class=\"action-button\" :icon=\"ArrowUp\" circle @click.stop=\"maximize\" />\n        <el-button class=\"action-button\" :icon=\"Close\" circle @click.stop=\"closeChat\" />\n      </div>\n    </div>\n    \n    <!-- 聊天消息区域 -->\n    <div v-if=\"!minimized\" class=\"chat-body\">\n      <div class=\"message-container\" ref=\"messageContainer\">\n        <div v-if=\"loading\" class=\"loading-messages\">\n          <el-icon class=\"is-loading\"><Loading /></el-icon>\n          <span>加载中...</span>\n        </div>\n        \n        <div v-else-if=\"messages.length === 0\" class=\"no-messages\">\n          <p>暂无消息记录，发送一条消息开始聊天吧！</p>\n        </div>\n        \n        <template v-else>\n          <div v-if=\"hasMoreMessages\" class=\"load-more\">\n            <el-button type=\"text\" @click=\"loadMoreMessages\" :loading=\"loadingMore\">\n              加载更多消息\n            </el-button>\n          </div>\n          \n          <div \n            v-for=\"message in sortedMessages\" \n            :key=\"message.id\" \n            class=\"message\" \n            :class=\"{ 'outgoing': message.senderId === currentUserId }\"\n          >\n            <el-avatar \n              v-if=\"message.senderId !== currentUserId\" \n              :size=\"32\" \n              :src=\"chatUser.avatar_url\" \n            />\n            \n            <div class=\"message-content\">\n              <div class=\"message-text\">{{ message.content }}</div>\n              <div class=\"message-time\">{{ formatTime(message.timestamp) }}</div>\n            </div>\n            \n            <el-avatar \n              v-if=\"message.senderId === currentUserId\" \n              :size=\"32\" \n              :src=\"currentUser.avatar_url\" \n            />\n          </div>\n        </template>\n      </div>\n      \n      <!-- 消息输入区域 -->\n      <div class=\"message-input\">\n        <el-input\n          v-model=\"messageText\"\n          type=\"textarea\"\n          :rows=\"2\"\n          placeholder=\"输入消息...\"\n          resize=\"none\"\n          @keydown.enter.prevent=\"sendMessage\"\n        />\n        <el-button type=\"primary\" :icon=\"Position\" @click=\"sendMessage\" :disabled=\"!messageText.trim()\">\n          发送\n        </el-button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, computed, watch, nextTick, onMounted, onUnmounted } from 'vue';\nimport { useStore } from 'vuex';\nimport { ElMessage } from 'element-plus';\nimport { Close, Minus, ArrowUp, Position, Loading } from '@element-plus/icons-vue';\nimport wsManager from '@/utils/websocket';\nimport { sendMessage as sendMessageApi } from '@/api/messages';\n\nexport default {\n  name: 'ChatWindow',\n  components: {\n    Loading\n  },\n  props: {\n    userId: {\n      type: [Number, String],\n      required: true\n    }\n  },\n  emits: ['close'],\n  setup(props, { emit }) {\n    const store = useStore();\n    const messageContainer = ref(null);\n    const messageText = ref('');\n    const minimized = ref(false);\n    const loading = ref(true);\n    const loadingMore = ref(false);\n    \n    // 计算属性\n    const currentUser = computed(() => store.state.user);\n    const currentUserId = computed(() => store.getters.userId);\n    const messages = computed(() => store.getters['chat/messagesByUserId'](props.userId) || []);\n    const hasMoreMessages = computed(() => store.getters['chat/hasMoreMessages'](props.userId));\n    const chatUser = computed(() => {\n      // 从store中获取用户信息\n      const userInfo = store.getters['users/getUserById'](props.userId);\n      return {\n        id: props.userId,\n        username: userInfo?.username || `用户${props.userId}`,\n        nickname: userInfo?.nickname,\n        avatar_url: userInfo?.avatar_url || '/assets/default-avatar.png'  // 添加默认头像\n      };\n    });\n    \n    // 按时间排序的消息列表\n    const sortedMessages = computed(() => {\n      return [...messages.value].sort((a, b) => {\n        return new Date(a.timestamp) - new Date(b.timestamp);\n      });\n    });\n    \n    // 监听消息列表变化，自动滚动到底部\n    watch(sortedMessages, () => {\n      nextTick(() => {\n        scrollToBottom();\n      });\n    });\n    \n    // 初始化\n    onMounted(async () => {\n      // 连接WebSocket\n      wsManager.connectChat(props.userId);\n      \n      // 加载消息历史\n      await loadMessages();\n      \n      // 标记消息为已读\n      store.dispatch('chat/markMessagesAsRead', props.userId);\n    });\n    \n    // 组件销毁时断开WebSocket连接\n    onUnmounted(() => {\n      wsManager.disconnectChat(props.userId);\n    });\n    \n    // 加载消息\n    const loadMessages = async () => {\n      loading.value = true;\n      try {\n        await store.dispatch('chat/fetchMessagesWithUser', {\n          userId: props.userId,\n          page: 1\n        });\n        \n        // 滚动到底部\n        nextTick(() => {\n          scrollToBottom();\n        });\n      } catch (error) {\n        console.error('加载消息失败:', error);\n        ElMessage.error('加载消息失败');\n      } finally {\n        loading.value = false;\n      }\n    };\n    \n    // 加载更多消息\n    const loadMoreMessages = async () => {\n      if (loadingMore.value || !hasMoreMessages.value) return;\n      \n      loadingMore.value = true;\n      try {\n        await store.dispatch('chat/loadMoreMessages', props.userId);\n      } catch (error) {\n        console.error('加载更多消息失败:', error);\n        ElMessage.error('加载更多消息失败');\n      } finally {\n        loadingMore.value = false;\n      }\n    };\n    \n    // 发送消息\n    const sendMessage = async () => {\n      const content = messageText.value.trim();\n      if (!content) return;\n      \n      try {\n        // 通过WebSocket发送消息\n        wsManager.sendChatMessage(props.userId, content);\n        \n        // 备用方案：通过API发送消息\n        await sendMessageApi(props.userId, content);\n        \n        // 清空输入框\n        messageText.value = '';\n      } catch (error) {\n        console.error('发送消息失败:', error);\n        ElMessage.error('发送消息失败');\n      }\n    };\n    \n    // 滚动到底部\n    const scrollToBottom = () => {\n      if (messageContainer.value) {\n        messageContainer.value.scrollTop = messageContainer.value.scrollHeight;\n      }\n    };\n    \n    // 最小化聊天窗口\n    const minimize = () => {\n      minimized.value = true;\n    };\n    \n    // 最大化聊天窗口\n    const maximize = () => {\n      minimized.value = false;\n      // 恢复窗口后滚动到底部\n      nextTick(() => {\n        scrollToBottom();\n      });\n    };\n    \n    // 切换最小化/最大化\n    const toggleMinimize = () => {\n      minimized.value = !minimized.value;\n      if (!minimized.value) {\n        nextTick(() => {\n          scrollToBottom();\n        });\n      }\n    };\n    \n    // 关闭聊天窗口\n    const closeChat = () => {\n      emit('close', props.userId);\n    };\n    \n    // 格式化时间\n    const formatTime = (timestamp) => {\n      const date = new Date(timestamp);\n      const now = new Date();\n      const isToday = date.toDateString() === now.toDateString();\n      const isYesterday = new Date(now - 86400000).toDateString() === date.toDateString();\n      \n      // 格式化时间部分\n      const hours = date.getHours().toString().padStart(2, '0');\n      const minutes = date.getMinutes().toString().padStart(2, '0');\n      const timeStr = `${hours}:${minutes}`;\n      \n      // 今天的消息只显示时间\n      if (isToday) {\n        return timeStr;\n      }\n      \n      // 昨天的消息显示\"昨天 HH:MM\"\n      if (isYesterday) {\n        return `昨天 ${timeStr}`;\n      }\n      \n      // 今年的消息显示\"MM-DD HH:MM\"\n      if (date.getFullYear() === now.getFullYear()) {\n        const month = (date.getMonth() + 1).toString().padStart(2, '0');\n        const day = date.getDate().toString().padStart(2, '0');\n        return `${month}-${day} ${timeStr}`;\n      }\n      \n      // 其他情况显示完整日期\"YYYY-MM-DD HH:MM\"\n      return `${date.getFullYear()}-${(date.getMonth() + 1).toString().padStart(2, '0')}-${date.getDate().toString().padStart(2, '0')} ${timeStr}`;\n    };\n    \n    return {\n      messageContainer,\n      messageText,\n      minimized,\n      loading,\n      loadingMore,\n      currentUser,\n      currentUserId,\n      messages,\n      sortedMessages,\n      hasMoreMessages,\n      chatUser,\n      loadMessages,\n      loadMoreMessages,\n      sendMessage,\n      minimize,\n      maximize,\n      toggleMinimize,\n      closeChat,\n      formatTime,\n      // 图标\n      Close,\n      Minus,\n      ArrowUp,\n      Position,\n      Loading\n    };\n  }\n};\n</script>\n\n<style scoped>\n.chat-window {\n  width: 320px;\n  height: 400px;\n  border: 1px solid #dcdfe6;\n  border-radius: 4px;\n  background-color: #fff;\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n  display: flex;\n  flex-direction: column;\n  position: fixed;\n  bottom: 0;\n  right: 20px;\n  z-index: 1000;\n  transition: height 0.3s;\n}\n\n.chat-window.is-minimized {\n  height: 40px;\n}\n\n.chat-header {\n  height: 40px;\n  padding: 0 10px;\n  background-color: #409eff;\n  color: white;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  cursor: pointer;\n  user-select: none;\n}\n\n.user-info {\n  display: flex;\n  align-items: center;\n}\n\n.username {\n  margin-left: 8px;\n  font-weight: bold;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.header-actions {\n  display: flex;\n  gap: 5px;\n}\n\n.action-button {\n  padding: 2px;\n  color: white;\n  background: transparent;\n  border: none;\n}\n\n.action-button:hover {\n  background-color: rgba(255, 255, 255, 0.2);\n}\n\n.chat-body {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n\n.message-container {\n  flex: 1;\n  padding: 10px;\n  overflow-y: auto;\n  display: flex;\n  flex-direction: column;\n}\n\n.loading-messages {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  color: #909399;\n}\n\n.no-messages {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  color: #909399;\n  text-align: center;\n}\n\n.load-more {\n  text-align: center;\n  margin-bottom: 10px;\n}\n\n.message {\n  display: flex;\n  margin-bottom: 10px;\n  align-items: flex-start;\n}\n\n.message.outgoing {\n  flex-direction: row-reverse;\n}\n\n.message-content {\n  max-width: 70%;\n  margin: 0 8px;\n}\n\n.message-text {\n  padding: 8px 12px;\n  border-radius: 4px;\n  background-color: #f4f4f5;\n  word-break: break-word;\n  line-height: 1.4;\n}\n\n.message.outgoing .message-text {\n  background-color: #ecf5ff;\n  color: #409eff;\n}\n\n.message-time {\n  font-size: 12px;\n  color: #909399;\n  margin-top: 4px;\n  text-align: right;\n}\n\n.message.outgoing .message-time {\n  text-align: left;\n}\n\n.message-input {\n  padding: 10px;\n  border-top: 1px solid #ebeef5;\n  display: flex;\n  align-items: flex-end;\n}\n\n.message-input .el-input {\n  margin-right: 10px;\n}\n\n.message-input .el-button {\n  height: 40px;\n}\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}