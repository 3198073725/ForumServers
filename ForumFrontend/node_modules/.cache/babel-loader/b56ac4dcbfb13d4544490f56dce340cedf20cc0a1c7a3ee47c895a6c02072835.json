{"ast":null,"code":"'use strict';\n\nvar _objectSpread = require(\"H:/ForumServers/ForumFrontend/node_modules/@babel/runtime/helpers/objectSpread2.js\")[\"default\"];\nrequire(\"core-js/modules/es.array.concat.js\");\nrequire(\"core-js/modules/es.array.find-index.js\");\nrequire(\"core-js/modules/es.function.name.js\");\nrequire(\"core-js/modules/es.number.parse-float.js\");\nrequire(\"core-js/modules/es.number.to-fixed.js\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.object.values.js\");\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nvar core = require('@vueuse/core');\nvar lodashUnified = require('lodash-unified');\nvar focusTrap = require('../../focus-trap/src/focus-trap.js');\nvar index$3 = require('../../teleport/index.js');\nvar index$4 = require('../../icon/index.js');\nvar iconsVue = require('@element-plus/icons-vue');\nvar imageViewer = require('./image-viewer2.js');\nvar pluginVue_exportHelper = require('../../../_virtual/plugin-vue_export-helper.js');\nvar index = require('../../../hooks/use-locale/index.js');\nvar index$1 = require('../../../hooks/use-namespace/index.js');\nvar index$2 = require('../../../hooks/use-z-index/index.js');\nvar aria = require('../../../constants/aria.js');\nvar objects = require('../../../utils/objects.js');\nvar __default__ = vue.defineComponent({\n  name: \"ElImageViewer\"\n});\nvar _sfc_main = /* @__PURE__ */vue.defineComponent(_objectSpread(_objectSpread({}, __default__), {}, {\n  props: imageViewer.imageViewerProps,\n  emits: imageViewer.imageViewerEmits,\n  setup: function setup(__props, _ref) {\n    var expose = _ref.expose,\n      emit = _ref.emit;\n    var _a;\n    var props = __props;\n    var modes = {\n      CONTAIN: {\n        name: \"contain\",\n        icon: vue.markRaw(iconsVue.FullScreen)\n      },\n      ORIGINAL: {\n        name: \"original\",\n        icon: vue.markRaw(iconsVue.ScaleToOriginal)\n      }\n    };\n    var stopWheelListener;\n    var prevOverflow = \"\";\n    var _index$useLocale = index.useLocale(),\n      t = _index$useLocale.t;\n    var ns = index$1.useNamespace(\"image-viewer\");\n    var _index$2$useZIndex = index$2.useZIndex(),\n      nextZIndex = _index$2$useZIndex.nextZIndex;\n    var wrapper = vue.ref();\n    var imgRefs = vue.ref([]);\n    var scopeEventListener = vue.effectScope();\n    var loading = vue.ref(true);\n    var activeIndex = vue.ref(props.initialIndex);\n    var mode = vue.shallowRef(modes.CONTAIN);\n    var transform = vue.ref({\n      scale: 1,\n      deg: 0,\n      offsetX: 0,\n      offsetY: 0,\n      enableTransition: false\n    });\n    var zIndex = vue.ref((_a = props.zIndex) != null ? _a : nextZIndex());\n    var isSingle = vue.computed(function () {\n      var urlList = props.urlList;\n      return urlList.length <= 1;\n    });\n    var isFirst = vue.computed(function () {\n      return activeIndex.value === 0;\n    });\n    var isLast = vue.computed(function () {\n      return activeIndex.value === props.urlList.length - 1;\n    });\n    var currentImg = vue.computed(function () {\n      return props.urlList[activeIndex.value];\n    });\n    var arrowPrevKls = vue.computed(function () {\n      return [ns.e(\"btn\"), ns.e(\"prev\"), ns.is(\"disabled\", !props.infinite && isFirst.value)];\n    });\n    var arrowNextKls = vue.computed(function () {\n      return [ns.e(\"btn\"), ns.e(\"next\"), ns.is(\"disabled\", !props.infinite && isLast.value)];\n    });\n    var imgStyle = vue.computed(function () {\n      var _transform$value = transform.value,\n        scale = _transform$value.scale,\n        deg = _transform$value.deg,\n        offsetX = _transform$value.offsetX,\n        offsetY = _transform$value.offsetY,\n        enableTransition = _transform$value.enableTransition;\n      var translateX = offsetX / scale;\n      var translateY = offsetY / scale;\n      var radian = deg * Math.PI / 180;\n      var cosRadian = Math.cos(radian);\n      var sinRadian = Math.sin(radian);\n      translateX = translateX * cosRadian + translateY * sinRadian;\n      translateY = translateY * cosRadian - offsetX / scale * sinRadian;\n      var style = {\n        transform: \"scale(\".concat(scale, \") rotate(\").concat(deg, \"deg) translate(\").concat(translateX, \"px, \").concat(translateY, \"px)\"),\n        transition: enableTransition ? \"transform .3s\" : \"\"\n      };\n      if (mode.value.name === modes.CONTAIN.name) {\n        style.maxWidth = style.maxHeight = \"100%\";\n      }\n      return style;\n    });\n    var progress = vue.computed(function () {\n      return \"\".concat(activeIndex.value + 1, \" / \").concat(props.urlList.length);\n    });\n    function hide() {\n      unregisterEventListener();\n      stopWheelListener == null ? void 0 : stopWheelListener();\n      document.body.style.overflow = prevOverflow;\n      emit(\"close\");\n    }\n    function registerEventListener() {\n      var keydownHandler = lodashUnified.throttle(function (e) {\n        switch (e.code) {\n          case aria.EVENT_CODE.esc:\n            props.closeOnPressEscape && hide();\n            break;\n          case aria.EVENT_CODE.space:\n            toggleMode();\n            break;\n          case aria.EVENT_CODE.left:\n            prev();\n            break;\n          case aria.EVENT_CODE.up:\n            handleActions(\"zoomIn\");\n            break;\n          case aria.EVENT_CODE.right:\n            next();\n            break;\n          case aria.EVENT_CODE.down:\n            handleActions(\"zoomOut\");\n            break;\n        }\n      });\n      var mousewheelHandler = lodashUnified.throttle(function (e) {\n        var delta = e.deltaY || e.deltaX;\n        handleActions(delta < 0 ? \"zoomIn\" : \"zoomOut\", {\n          zoomRate: props.zoomRate,\n          enableTransition: false\n        });\n      });\n      scopeEventListener.run(function () {\n        core.useEventListener(document, \"keydown\", keydownHandler);\n        core.useEventListener(document, \"wheel\", mousewheelHandler);\n      });\n    }\n    function unregisterEventListener() {\n      scopeEventListener.stop();\n    }\n    function handleImgLoad() {\n      loading.value = false;\n    }\n    function handleImgError(e) {\n      loading.value = false;\n      e.target.alt = t(\"el.image.error\");\n    }\n    function handleMouseDown(e) {\n      if (loading.value || e.button !== 0 || !wrapper.value) return;\n      transform.value.enableTransition = false;\n      var _transform$value2 = transform.value,\n        offsetX = _transform$value2.offsetX,\n        offsetY = _transform$value2.offsetY;\n      var startX = e.pageX;\n      var startY = e.pageY;\n      var dragHandler = lodashUnified.throttle(function (ev) {\n        transform.value = _objectSpread(_objectSpread({}, transform.value), {}, {\n          offsetX: offsetX + ev.pageX - startX,\n          offsetY: offsetY + ev.pageY - startY\n        });\n      });\n      var removeMousemove = core.useEventListener(document, \"mousemove\", dragHandler);\n      core.useEventListener(document, \"mouseup\", function () {\n        removeMousemove();\n      });\n      e.preventDefault();\n    }\n    function reset() {\n      transform.value = {\n        scale: 1,\n        deg: 0,\n        offsetX: 0,\n        offsetY: 0,\n        enableTransition: false\n      };\n    }\n    function toggleMode() {\n      if (loading.value) return;\n      var modeNames = objects.keysOf(modes);\n      var modeValues = Object.values(modes);\n      var currentMode = mode.value.name;\n      var index = modeValues.findIndex(function (i) {\n        return i.name === currentMode;\n      });\n      var nextIndex = (index + 1) % modeNames.length;\n      mode.value = modes[modeNames[nextIndex]];\n      reset();\n    }\n    function setActiveItem(index) {\n      var len = props.urlList.length;\n      activeIndex.value = (index + len) % len;\n    }\n    function prev() {\n      if (isFirst.value && !props.infinite) return;\n      setActiveItem(activeIndex.value - 1);\n    }\n    function next() {\n      if (isLast.value && !props.infinite) return;\n      setActiveItem(activeIndex.value + 1);\n    }\n    function handleActions(action) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      if (loading.value) return;\n      var minScale = props.minScale,\n        maxScale = props.maxScale;\n      var _zoomRate$rotateDeg$e = _objectSpread({\n          zoomRate: props.zoomRate,\n          rotateDeg: 90,\n          enableTransition: true\n        }, options),\n        zoomRate = _zoomRate$rotateDeg$e.zoomRate,\n        rotateDeg = _zoomRate$rotateDeg$e.rotateDeg,\n        enableTransition = _zoomRate$rotateDeg$e.enableTransition;\n      switch (action) {\n        case \"zoomOut\":\n          if (transform.value.scale > minScale) {\n            transform.value.scale = Number.parseFloat((transform.value.scale / zoomRate).toFixed(3));\n          }\n          break;\n        case \"zoomIn\":\n          if (transform.value.scale < maxScale) {\n            transform.value.scale = Number.parseFloat((transform.value.scale * zoomRate).toFixed(3));\n          }\n          break;\n        case \"clockwise\":\n          transform.value.deg += rotateDeg;\n          emit(\"rotate\", transform.value.deg);\n          break;\n        case \"anticlockwise\":\n          transform.value.deg -= rotateDeg;\n          emit(\"rotate\", transform.value.deg);\n          break;\n      }\n      transform.value.enableTransition = enableTransition;\n    }\n    function onFocusoutPrevented(event) {\n      var _a2;\n      if (((_a2 = event.detail) == null ? void 0 : _a2.focusReason) === \"pointer\") {\n        event.preventDefault();\n      }\n    }\n    function onCloseRequested() {\n      if (props.closeOnPressEscape) {\n        hide();\n      }\n    }\n    function wheelHandler(e) {\n      if (!e.ctrlKey) return;\n      if (e.deltaY < 0) {\n        e.preventDefault();\n        return false;\n      } else if (e.deltaY > 0) {\n        e.preventDefault();\n        return false;\n      }\n    }\n    vue.watch(currentImg, function () {\n      vue.nextTick(function () {\n        var $img = imgRefs.value[0];\n        if (!($img == null ? void 0 : $img.complete)) {\n          loading.value = true;\n        }\n      });\n    });\n    vue.watch(activeIndex, function (val) {\n      reset();\n      emit(\"switch\", val);\n    });\n    vue.onMounted(function () {\n      registerEventListener();\n      stopWheelListener = core.useEventListener(\"wheel\", wheelHandler, {\n        passive: false\n      });\n      prevOverflow = document.body.style.overflow;\n      document.body.style.overflow = \"hidden\";\n    });\n    expose({\n      setActiveItem: setActiveItem\n    });\n    return function (_ctx, _cache) {\n      return vue.openBlock(), vue.createBlock(vue.unref(index$3.ElTeleport), {\n        to: \"body\",\n        disabled: !_ctx.teleported\n      }, {\n        \"default\": vue.withCtx(function () {\n          return [vue.createVNode(vue.Transition, {\n            name: \"viewer-fade\",\n            appear: \"\"\n          }, {\n            \"default\": vue.withCtx(function () {\n              return [vue.createElementVNode(\"div\", {\n                ref_key: \"wrapper\",\n                ref: wrapper,\n                tabindex: -1,\n                \"class\": vue.normalizeClass(vue.unref(ns).e(\"wrapper\")),\n                style: vue.normalizeStyle({\n                  zIndex: zIndex.value\n                })\n              }, [vue.createVNode(vue.unref(focusTrap[\"default\"]), {\n                loop: \"\",\n                trapped: \"\",\n                \"focus-trap-el\": wrapper.value,\n                \"focus-start-el\": \"container\",\n                onFocusoutPrevented: onFocusoutPrevented,\n                onReleaseRequested: onCloseRequested\n              }, {\n                \"default\": vue.withCtx(function () {\n                  return [vue.createElementVNode(\"div\", {\n                    \"class\": vue.normalizeClass(vue.unref(ns).e(\"mask\")),\n                    onClick: vue.withModifiers(function ($event) {\n                      return _ctx.hideOnClickModal && hide();\n                    }, [\"self\"])\n                  }, null, 10, [\"onClick\"]), vue.createCommentVNode(\" CLOSE \"), vue.createElementVNode(\"span\", {\n                    \"class\": vue.normalizeClass([vue.unref(ns).e(\"btn\"), vue.unref(ns).e(\"close\")]),\n                    onClick: hide\n                  }, [vue.createVNode(vue.unref(index$4.ElIcon), null, {\n                    \"default\": vue.withCtx(function () {\n                      return [vue.createVNode(vue.unref(iconsVue.Close))];\n                    }),\n                    _: 1\n                  })], 2), vue.createCommentVNode(\" ARROW \"), !vue.unref(isSingle) ? (vue.openBlock(), vue.createElementBlock(vue.Fragment, {\n                    key: 0\n                  }, [vue.createElementVNode(\"span\", {\n                    \"class\": vue.normalizeClass(vue.unref(arrowPrevKls)),\n                    onClick: prev\n                  }, [vue.createVNode(vue.unref(index$4.ElIcon), null, {\n                    \"default\": vue.withCtx(function () {\n                      return [vue.createVNode(vue.unref(iconsVue.ArrowLeft))];\n                    }),\n                    _: 1\n                  })], 2), vue.createElementVNode(\"span\", {\n                    \"class\": vue.normalizeClass(vue.unref(arrowNextKls)),\n                    onClick: next\n                  }, [vue.createVNode(vue.unref(index$4.ElIcon), null, {\n                    \"default\": vue.withCtx(function () {\n                      return [vue.createVNode(vue.unref(iconsVue.ArrowRight))];\n                    }),\n                    _: 1\n                  })], 2)], 64)) : vue.createCommentVNode(\"v-if\", true), _ctx.$slots.progress || _ctx.showProgress ? (vue.openBlock(), vue.createElementBlock(\"div\", {\n                    key: 1,\n                    \"class\": vue.normalizeClass([vue.unref(ns).e(\"btn\"), vue.unref(ns).e(\"progress\")])\n                  }, [vue.renderSlot(_ctx.$slots, \"progress\", {\n                    activeIndex: activeIndex.value,\n                    total: _ctx.urlList.length\n                  }, function () {\n                    return [vue.createTextVNode(vue.toDisplayString(vue.unref(progress)), 1)];\n                  })], 2)) : vue.createCommentVNode(\"v-if\", true), vue.createCommentVNode(\" ACTIONS \"), vue.createElementVNode(\"div\", {\n                    \"class\": vue.normalizeClass([vue.unref(ns).e(\"btn\"), vue.unref(ns).e(\"actions\")])\n                  }, [vue.createElementVNode(\"div\", {\n                    \"class\": vue.normalizeClass(vue.unref(ns).e(\"actions__inner\"))\n                  }, [vue.renderSlot(_ctx.$slots, \"toolbar\", {\n                    actions: handleActions,\n                    prev: prev,\n                    next: next,\n                    reset: toggleMode,\n                    activeIndex: activeIndex.value,\n                    setActiveItem: setActiveItem\n                  }, function () {\n                    return [vue.createVNode(vue.unref(index$4.ElIcon), {\n                      onClick: function onClick($event) {\n                        return handleActions(\"zoomOut\");\n                      }\n                    }, {\n                      \"default\": vue.withCtx(function () {\n                        return [vue.createVNode(vue.unref(iconsVue.ZoomOut))];\n                      }),\n                      _: 1\n                    }, 8, [\"onClick\"]), vue.createVNode(vue.unref(index$4.ElIcon), {\n                      onClick: function onClick($event) {\n                        return handleActions(\"zoomIn\");\n                      }\n                    }, {\n                      \"default\": vue.withCtx(function () {\n                        return [vue.createVNode(vue.unref(iconsVue.ZoomIn))];\n                      }),\n                      _: 1\n                    }, 8, [\"onClick\"]), vue.createElementVNode(\"i\", {\n                      \"class\": vue.normalizeClass(vue.unref(ns).e(\"actions__divider\"))\n                    }, null, 2), vue.createVNode(vue.unref(index$4.ElIcon), {\n                      onClick: toggleMode\n                    }, {\n                      \"default\": vue.withCtx(function () {\n                        return [(vue.openBlock(), vue.createBlock(vue.resolveDynamicComponent(vue.unref(mode).icon)))];\n                      }),\n                      _: 1\n                    }), vue.createElementVNode(\"i\", {\n                      \"class\": vue.normalizeClass(vue.unref(ns).e(\"actions__divider\"))\n                    }, null, 2), vue.createVNode(vue.unref(index$4.ElIcon), {\n                      onClick: function onClick($event) {\n                        return handleActions(\"anticlockwise\");\n                      }\n                    }, {\n                      \"default\": vue.withCtx(function () {\n                        return [vue.createVNode(vue.unref(iconsVue.RefreshLeft))];\n                      }),\n                      _: 1\n                    }, 8, [\"onClick\"]), vue.createVNode(vue.unref(index$4.ElIcon), {\n                      onClick: function onClick($event) {\n                        return handleActions(\"clockwise\");\n                      }\n                    }, {\n                      \"default\": vue.withCtx(function () {\n                        return [vue.createVNode(vue.unref(iconsVue.RefreshRight))];\n                      }),\n                      _: 1\n                    }, 8, [\"onClick\"])];\n                  })], 2)], 2), vue.createCommentVNode(\" CANVAS \"), vue.createElementVNode(\"div\", {\n                    \"class\": vue.normalizeClass(vue.unref(ns).e(\"canvas\"))\n                  }, [(vue.openBlock(true), vue.createElementBlock(vue.Fragment, null, vue.renderList(_ctx.urlList, function (url, i) {\n                    return vue.withDirectives((vue.openBlock(), vue.createElementBlock(\"img\", {\n                      ref_for: true,\n                      ref: function ref(el) {\n                        return imgRefs.value[i] = el;\n                      },\n                      key: url,\n                      src: url,\n                      style: vue.normalizeStyle(vue.unref(imgStyle)),\n                      \"class\": vue.normalizeClass(vue.unref(ns).e(\"img\")),\n                      crossorigin: _ctx.crossorigin,\n                      onLoad: handleImgLoad,\n                      onError: handleImgError,\n                      onMousedown: handleMouseDown\n                    }, null, 46, [\"src\", \"crossorigin\"])), [[vue.vShow, i === activeIndex.value]]);\n                  }), 128))], 2), vue.renderSlot(_ctx.$slots, \"default\")];\n                }),\n                _: 3\n              }, 8, [\"focus-trap-el\"])], 6)];\n            }),\n            _: 3\n          })];\n        }),\n        _: 3\n      }, 8, [\"disabled\"]);\n    };\n  }\n}));\nvar ImageViewer = /* @__PURE__ */pluginVue_exportHelper[\"default\"](_sfc_main, [[\"__file\", \"image-viewer.vue\"]]);\nexports[\"default\"] = ImageViewer;","map":{"version":3,"names":["name","props","__props","modes","CONTAIN","icon","vue","markRaw","iconsVue","FullScreen","ORIGINAL","ScaleToOriginal","stopWheelListener","prevOverflow","_index$useLocale","index","useLocale","t","ns","index$1","useNamespace","_index$2$useZIndex","index$2","useZIndex","nextZIndex","wrapper","ref","imgRefs","scopeEventListener","effectScope","loading","activeIndex","initialIndex","mode","shallowRef","transform","scale","deg","offsetX","offsetY","enableTransition","zIndex","_a","isSingle","computed","urlList","length","isFirst","value","isLast","currentImg","arrowPrevKls","e","is","infinite","arrowNextKls","imgStyle","_transform$value","translateX","translateY","radian","Math","PI","cosRadian","cos","sinRadian","sin","style","concat","transition","maxWidth","maxHeight","progress","hide","unregisterEventListener","document","body","overflow","emit","registerEventListener","keydownHandler","lodashUnified","throttle","code","aria","EVENT_CODE","esc","closeOnPressEscape","space","toggleMode","left","prev","up","handleActions","right","next","down","mousewheelHandler","delta","deltaY","deltaX","zoomRate","run","core","useEventListener","stop","handleImgLoad","handleImgError","target","alt","handleMouseDown","button","_transform$value2","startX","pageX","startY","pageY","dragHandler","ev","_objectSpread","removeMousemove","preventDefault","reset","modeNames","objects","keysOf","modeValues","Object","values","currentMode","findIndex","i","nextIndex","setActiveItem","len","action","options","arguments","undefined","minScale","maxScale","_zoomRate$rotateDeg$e","rotateDeg","Number","parseFloat","toFixed","onFocusoutPrevented","event","_a2","detail","focusReason","onCloseRequested","wheelHandler","ctrlKey","watch","nextTick","$img","complete","val","onMounted","passive","expose","_ctx","_cache"],"sources":["../../../../../../packages/components/image-viewer/src/image-viewer.vue"],"sourcesContent":["<template>\n  <el-teleport to=\"body\" :disabled=\"!teleported\">\n    <transition name=\"viewer-fade\" appear>\n      <div\n        ref=\"wrapper\"\n        :tabindex=\"-1\"\n        :class=\"ns.e('wrapper')\"\n        :style=\"{ zIndex }\"\n      >\n        <el-focus-trap\n          loop\n          trapped\n          :focus-trap-el=\"wrapper\"\n          focus-start-el=\"container\"\n          @focusout-prevented=\"onFocusoutPrevented\"\n          @release-requested=\"onCloseRequested\"\n        >\n          <div :class=\"ns.e('mask')\" @click.self=\"hideOnClickModal && hide()\" />\n\n          <!-- CLOSE -->\n          <span :class=\"[ns.e('btn'), ns.e('close')]\" @click=\"hide\">\n            <el-icon>\n              <Close />\n            </el-icon>\n          </span>\n\n          <!-- ARROW -->\n          <template v-if=\"!isSingle\">\n            <span :class=\"arrowPrevKls\" @click=\"prev\">\n              <el-icon>\n                <ArrowLeft />\n              </el-icon>\n            </span>\n            <span :class=\"arrowNextKls\" @click=\"next\">\n              <el-icon>\n                <ArrowRight />\n              </el-icon>\n            </span>\n          </template>\n          <div\n            v-if=\"$slots.progress || showProgress\"\n            :class=\"[ns.e('btn'), ns.e('progress')]\"\n          >\n            <slot\n              name=\"progress\"\n              :active-index=\"activeIndex\"\n              :total=\"urlList.length\"\n            >\n              {{ progress }}\n            </slot>\n          </div>\n          <!-- ACTIONS -->\n          <div :class=\"[ns.e('btn'), ns.e('actions')]\">\n            <div :class=\"ns.e('actions__inner')\">\n              <slot\n                name=\"toolbar\"\n                :actions=\"handleActions\"\n                :prev=\"prev\"\n                :next=\"next\"\n                :reset=\"toggleMode\"\n                :active-index=\"activeIndex\"\n                :set-active-item=\"setActiveItem\"\n              >\n                <el-icon @click=\"handleActions('zoomOut')\">\n                  <ZoomOut />\n                </el-icon>\n                <el-icon @click=\"handleActions('zoomIn')\">\n                  <ZoomIn />\n                </el-icon>\n                <i :class=\"ns.e('actions__divider')\" />\n                <el-icon @click=\"toggleMode\">\n                  <component :is=\"mode.icon\" />\n                </el-icon>\n                <i :class=\"ns.e('actions__divider')\" />\n                <el-icon @click=\"handleActions('anticlockwise')\">\n                  <RefreshLeft />\n                </el-icon>\n                <el-icon @click=\"handleActions('clockwise')\">\n                  <RefreshRight />\n                </el-icon>\n              </slot>\n            </div>\n          </div>\n          <!-- CANVAS -->\n          <div :class=\"ns.e('canvas')\">\n            <img\n              v-for=\"(url, i) in urlList\"\n              v-show=\"i === activeIndex\"\n              :ref=\"(el) => (imgRefs[i] = el as HTMLImageElement)\"\n              :key=\"url\"\n              :src=\"url\"\n              :style=\"imgStyle\"\n              :class=\"ns.e('img')\"\n              :crossorigin=\"crossorigin\"\n              @load=\"handleImgLoad\"\n              @error=\"handleImgError\"\n              @mousedown=\"handleMouseDown\"\n            />\n          </div>\n          <slot />\n        </el-focus-trap>\n      </div>\n    </transition>\n  </el-teleport>\n</template>\n\n<script lang=\"ts\" setup>\nimport {\n  computed,\n  effectScope,\n  markRaw,\n  nextTick,\n  onMounted,\n  ref,\n  shallowRef,\n  watch,\n} from 'vue'\nimport { useEventListener } from '@vueuse/core'\nimport { throttle } from 'lodash-unified'\nimport { useLocale, useNamespace, useZIndex } from '@element-plus/hooks'\nimport { EVENT_CODE } from '@element-plus/constants'\nimport { keysOf } from '@element-plus/utils'\nimport ElFocusTrap from '@element-plus/components/focus-trap'\nimport ElTeleport from '@element-plus/components/teleport'\nimport ElIcon from '@element-plus/components/icon'\nimport {\n  ArrowLeft,\n  ArrowRight,\n  Close,\n  FullScreen,\n  RefreshLeft,\n  RefreshRight,\n  ScaleToOriginal,\n  ZoomIn,\n  ZoomOut,\n} from '@element-plus/icons-vue'\nimport { imageViewerEmits, imageViewerProps } from './image-viewer'\n\nimport type { CSSProperties } from 'vue'\nimport type { ImageViewerAction, ImageViewerMode } from './image-viewer'\n\nconst modes: Record<'CONTAIN' | 'ORIGINAL', ImageViewerMode> = {\n  CONTAIN: {\n    name: 'contain',\n    icon: markRaw(FullScreen),\n  },\n  ORIGINAL: {\n    name: 'original',\n    icon: markRaw(ScaleToOriginal),\n  },\n}\n\ndefineOptions({\n  name: 'ElImageViewer',\n})\n\nconst props = defineProps(imageViewerProps)\nconst emit = defineEmits(imageViewerEmits)\n\nlet stopWheelListener: (() => void) | undefined\nlet prevOverflow = ''\n\nconst { t } = useLocale()\nconst ns = useNamespace('image-viewer')\nconst { nextZIndex } = useZIndex()\nconst wrapper = ref<HTMLDivElement>()\nconst imgRefs = ref<HTMLImageElement[]>([])\n\nconst scopeEventListener = effectScope()\n\nconst loading = ref(true)\nconst activeIndex = ref(props.initialIndex)\nconst mode = shallowRef<ImageViewerMode>(modes.CONTAIN)\nconst transform = ref({\n  scale: 1,\n  deg: 0,\n  offsetX: 0,\n  offsetY: 0,\n  enableTransition: false,\n})\nconst zIndex = ref(props.zIndex ?? nextZIndex())\n\nconst isSingle = computed(() => {\n  const { urlList } = props\n  return urlList.length <= 1\n})\n\nconst isFirst = computed(() => activeIndex.value === 0)\n\nconst isLast = computed(() => activeIndex.value === props.urlList.length - 1)\n\nconst currentImg = computed(() => props.urlList[activeIndex.value])\n\nconst arrowPrevKls = computed(() => [\n  ns.e('btn'),\n  ns.e('prev'),\n  ns.is('disabled', !props.infinite && isFirst.value),\n])\n\nconst arrowNextKls = computed(() => [\n  ns.e('btn'),\n  ns.e('next'),\n  ns.is('disabled', !props.infinite && isLast.value),\n])\n\nconst imgStyle = computed(() => {\n  const { scale, deg, offsetX, offsetY, enableTransition } = transform.value\n  let translateX = offsetX / scale\n  let translateY = offsetY / scale\n\n  const radian = (deg * Math.PI) / 180\n  const cosRadian = Math.cos(radian)\n  const sinRadian = Math.sin(radian)\n  translateX = translateX * cosRadian + translateY * sinRadian\n  translateY = translateY * cosRadian - (offsetX / scale) * sinRadian\n\n  const style: CSSProperties = {\n    transform: `scale(${scale}) rotate(${deg}deg) translate(${translateX}px, ${translateY}px)`,\n    transition: enableTransition ? 'transform .3s' : '',\n  }\n  if (mode.value.name === modes.CONTAIN.name) {\n    style.maxWidth = style.maxHeight = '100%'\n  }\n  return style\n})\n\nconst progress = computed(\n  () => `${activeIndex.value + 1} / ${props.urlList.length}`\n)\n\nfunction hide() {\n  unregisterEventListener()\n  stopWheelListener?.()\n  document.body.style.overflow = prevOverflow\n  emit('close')\n}\n\nfunction registerEventListener() {\n  const keydownHandler = throttle((e: KeyboardEvent) => {\n    switch (e.code) {\n      // ESC\n      case EVENT_CODE.esc:\n        props.closeOnPressEscape && hide()\n        break\n      // SPACE\n      case EVENT_CODE.space:\n        toggleMode()\n        break\n      // LEFT_ARROW\n      case EVENT_CODE.left:\n        prev()\n        break\n      // UP_ARROW\n      case EVENT_CODE.up:\n        handleActions('zoomIn')\n        break\n      // RIGHT_ARROW\n      case EVENT_CODE.right:\n        next()\n        break\n      // DOWN_ARROW\n      case EVENT_CODE.down:\n        handleActions('zoomOut')\n        break\n    }\n  })\n  const mousewheelHandler = throttle((e: WheelEvent) => {\n    const delta = e.deltaY || e.deltaX\n    handleActions(delta < 0 ? 'zoomIn' : 'zoomOut', {\n      zoomRate: props.zoomRate,\n      enableTransition: false,\n    })\n  })\n\n  scopeEventListener.run(() => {\n    useEventListener(document, 'keydown', keydownHandler)\n    useEventListener(document, 'wheel', mousewheelHandler)\n  })\n}\n\nfunction unregisterEventListener() {\n  scopeEventListener.stop()\n}\n\nfunction handleImgLoad() {\n  loading.value = false\n}\n\nfunction handleImgError(e: Event) {\n  loading.value = false\n  ;(e.target as HTMLImageElement).alt = t('el.image.error')\n}\n\nfunction handleMouseDown(e: MouseEvent) {\n  if (loading.value || e.button !== 0 || !wrapper.value) return\n  transform.value.enableTransition = false\n\n  const { offsetX, offsetY } = transform.value\n  const startX = e.pageX\n  const startY = e.pageY\n\n  const dragHandler = throttle((ev: MouseEvent) => {\n    transform.value = {\n      ...transform.value,\n      offsetX: offsetX + ev.pageX - startX,\n      offsetY: offsetY + ev.pageY - startY,\n    }\n  })\n  const removeMousemove = useEventListener(document, 'mousemove', dragHandler)\n  useEventListener(document, 'mouseup', () => {\n    removeMousemove()\n  })\n\n  e.preventDefault()\n}\n\nfunction reset() {\n  transform.value = {\n    scale: 1,\n    deg: 0,\n    offsetX: 0,\n    offsetY: 0,\n    enableTransition: false,\n  }\n}\n\nfunction toggleMode() {\n  if (loading.value) return\n\n  const modeNames = keysOf(modes)\n  const modeValues = Object.values(modes)\n  const currentMode = mode.value.name\n  const index = modeValues.findIndex((i) => i.name === currentMode)\n  const nextIndex = (index + 1) % modeNames.length\n  mode.value = modes[modeNames[nextIndex]]\n  reset()\n}\n\nfunction setActiveItem(index: number) {\n  const len = props.urlList.length\n  activeIndex.value = (index + len) % len\n}\n\nfunction prev() {\n  if (isFirst.value && !props.infinite) return\n  setActiveItem(activeIndex.value - 1)\n}\n\nfunction next() {\n  if (isLast.value && !props.infinite) return\n  setActiveItem(activeIndex.value + 1)\n}\n\nfunction handleActions(action: ImageViewerAction, options = {}) {\n  if (loading.value) return\n  const { minScale, maxScale } = props\n  const { zoomRate, rotateDeg, enableTransition } = {\n    zoomRate: props.zoomRate,\n    rotateDeg: 90,\n    enableTransition: true,\n    ...options,\n  }\n  switch (action) {\n    case 'zoomOut':\n      if (transform.value.scale > minScale) {\n        transform.value.scale = Number.parseFloat(\n          (transform.value.scale / zoomRate).toFixed(3)\n        )\n      }\n      break\n    case 'zoomIn':\n      if (transform.value.scale < maxScale) {\n        transform.value.scale = Number.parseFloat(\n          (transform.value.scale * zoomRate).toFixed(3)\n        )\n      }\n      break\n    case 'clockwise':\n      transform.value.deg += rotateDeg\n      emit('rotate', transform.value.deg)\n      break\n    case 'anticlockwise':\n      transform.value.deg -= rotateDeg\n      emit('rotate', transform.value.deg)\n      break\n  }\n  transform.value.enableTransition = enableTransition\n}\n\nfunction onFocusoutPrevented(event: CustomEvent) {\n  if (event.detail?.focusReason === 'pointer') {\n    event.preventDefault()\n  }\n}\n\nfunction onCloseRequested() {\n  if (props.closeOnPressEscape) {\n    hide()\n  }\n}\n\nfunction wheelHandler(e: WheelEvent) {\n  if (!e.ctrlKey) return\n\n  if (e.deltaY < 0) {\n    e.preventDefault()\n    return false\n  } else if (e.deltaY > 0) {\n    e.preventDefault()\n    return false\n  }\n}\n\nwatch(currentImg, () => {\n  nextTick(() => {\n    const $img = imgRefs.value[0]\n    if (!$img?.complete) {\n      loading.value = true\n    }\n  })\n})\n\nwatch(activeIndex, (val) => {\n  reset()\n  emit('switch', val)\n})\n\nonMounted(() => {\n  registerEventListener()\n\n  stopWheelListener = useEventListener('wheel', wheelHandler, {\n    passive: false,\n  })\n\n  // prevent body scroll\n  prevOverflow = document.body.style.overflow\n  document.body.style.overflow = 'hidden'\n})\n\ndefineExpose({\n  /**\n   * @description manually switch image\n   */\n  setActiveItem,\n})\n</script>\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;qCAwJc;EACZA,IAAM;AACR;;;;;;;;IAbA,IAAMC,KAAyD,GAAAC,OAAA;IAAA,IACpDC,KAAA;MAAAC,OACD;QACNJ,IAAA,EAAM,SAAkB;QAC1BK,IAAA,EAAAC,GAAA,CAAAC,OAAA,CAAAC,QAAA,CAAAC,UAAA;MAAA,CACU;MAAAC,QACF;QACNV,IAAA,EAAM,UAAuB;QAC/BK,IAAA,EAAAC,GAAA,CAAAC,OAAA,CAAAC,QAAA,CAAAG,eAAA;MAAA;IAUF,CAAI;IACJ,IAAIC,iBAAe;IAEb,IAAAC,YAAkB;IAClB,IAAAC,gBAAA,GAAKC,KAAA,CAAAC,SAAA,EAA2B;MAAhCC,CAAA,GAAAH,gBAAA,CAAAG,CAAA;IACA,IAAAC,EAAE,GAAWC,OAAA,CAAAC,YAAI,CAAU;IACjC,IAAAC,kBAAA,GAAoCC,OAAA,CAAAC,SAAA;MAA9BC,UAA8B,GAAAH,kBAAA,CAA9BG,UAA8B;IAC9B,IAAAC,OAAA,GAAUnB,GAAA,CAAAoB,GAAwB,EAAC;IAEzC,IAAMC,OAAA,GAAArB,GAAA,CAAAoB,GAAA;IAEA,IAAAE,kBAAkB,GAAAtB,GAAA,CAAAuB,WAAA;IAClB,IAAAC,OAAA,GAAAxB,GAAA,CAAAoB,GAAA,CAAc,IAAI;IAClB,IAAAK,WAAmC,GAAAzB,GAAA,CAAAoB,GAAA,CAAAzB,KAAA,CAAM+B,YAAO;IACtD,IAAMC,IAAA,GAAA3B,GAAA,CAAA4B,UAAgB,CAAA/B,KAAA,CAAAC,OAAA;IAAA,IACb+B,SAAA,GAAA7B,GAAA,CAAAoB,GAAA;MACPU,KAAK;MACLC,GAAS;MACTC,OAAS;MACTC,OAAkB;MACnBC,gBAAA;IACD;IAEM,IAAAC,MAAA,GAAAnC,GAAA,CAAAoB,GAAA,EAAAgB,EAAA,GAAAzC,KAA0B,CAAAwC,MAAA,YAAAC,EAAA,GAAAlB,UAAA;IACxB,IAAAmB,QAAA,GAAArC,GAAA,CAAAsC,QAAc;MACpB,IAAAC,OAAe,GAAU5C,KAAA,CAAzB4C,OAAe;MAChB,OAAAA,OAAA,CAAAC,MAAA;IAED;IAEM,IAAAC,OAAA,GAAAzC,GAAA,CAAAsC,QAAkB,CAAM;MAAA,OAAAb,WAAY,CAAAiB,KAAA,KAAgB;IAAA;IAE1D,IAAMC,MAAA,GAAA3C,GAAA,CAAAsC,QAAsB;MAAA,OAAAb,WAAoB,CAAAiB,KAAA,KAAA/C,KAAA,CAAA4C,OAAiB,CAACC,MAAA;IAAA;IAE5D,IAAAI,UAAA,GAAA5C,GAAA,CAAAsC,QAAA;MAAA,OAA8B3C,KAAA,CAAA4C,OAAA,CAAAd,WAAA,CAAAiB,KAAA;IAAA;IAClC,IAAAG,YAAU,GAAA7C,GAAA,CAAAsC,QAAA;MAAA,QACV1B,EAAA,CAAGkC,CAAA,CAAE,KAAM,GACXlC,EAAA,CAAGkC,CAAG,UACPlC,EAAA,CAAAmC,EAAA,cAAApD,KAAA,CAAAqD,QAAA,IAAAP,OAAA,CAAAC,KAAA,EAEK;IAAA;IACJ,IAAAO,YAAU,GAAAjD,GAAA,CAAAsC,QAAA;MAAA,QACV1B,EAAA,CAAGkC,CAAA,CAAE,KAAM,GACXlC,EAAA,CAAGkC,CAAG,UACPlC,EAAA,CAAAmC,EAAA,cAAApD,KAAA,CAAAqD,QAAA,IAAAL,MAAA,CAAAD,KAAA,EAEK;IAAA;IACJ,IAAAQ,QAAe,GAAAlD,GAAA,CAAAsC,QAAA,aAAuB;MACtC,IAAAa,gBAAA,GAA2BtB,SAAA,CAAAa,KAAA;QAA3BZ,KAAA,GAAAqB,gBAAA,CAAArB,KAAA;QAAAC,GAA2B,GAAAoB,gBAAA,CAA3BpB,GAA2B;QAAAC,OAAA,GAAAmB,gBAAA,CAAAnB,OAAA;QAAAC,OAAA,GAAAkB,gBAAA,CAAAlB,OAAA;QAAAC,gBAAA,GAAAiB,gBAAA,CAAAjB,gBAAA;MAC3B,IAAIkB,UAAA,GAAapB,OAAU,GAAAF,KAAA;MAErB,IAAAuB,UAAA,GAAgBpB,OAAA,GAAWH,KAAA;MAC3B,IAAAwB,MAAA,GAAAvB,GAAY,GAAKwB,IAAA,CAAAC,EAAU;MAC3B,IAAAC,SAAA,GAAYF,IAAK,CAAAG,GAAA,CAAIJ,MAAM;MACpB,IAAAK,SAAA,GAAAJ,IAAA,CAAAK,GAAa,CAAAN,MAAA;MACbF,UAAA,GAAAA,UAAA,GAAaK,SAAa,GAAAJ,UAAU,GAASM,SAAA;MAE1DN,UAA6B,GAAAA,UAAA,GAAAI,SAAA,GAAAzB,OAAA,GAAAF,KAAA,GAAA6B,SAAA;MAC3B,IAAAE,KAAA;QACAhC,SAAA,WAAAiC,MAAA,CAAYhC,KAAA,eAAAgC,MAAA,CAAqC/B,GAAA,qBAAA+B,MAAA,CAAAV,UAAA,UAAAU,MAAA,CAAAT,UAAA;QACnDU,UAAA,EAAA7B,gBAAA;MACA;MACQ,IAAAP,IAAA,CAAAe,KAAA,CAAAhD,IAAW,KAAAG,KAAkB,CAAAC,OAAA,CAAAJ,IAAA;QACrCmE,KAAA,CAAAG,QAAA,GAAAH,KAAA,CAAAI,SAAA;MACA;MACD,OAAAJ,KAAA;IAED;IACE,IAAAK,QAAqB,GAAAlE,GAAA,CAAAsC,QAAA;MAAA,UAAAwB,MAAA,CAAerC,WAAA,CAAAiB,KAAc,GAAM,UAAAoB,MAAA,CAAAnE,KAAA,CAAA4C,OAAA,CAAAC,MAAA;IAAA;IAC1D,SAAA2B,KAAA;MAEAC,uBAAgB;MACU9D,iBAAA,oBAAAA,iBAAA;MACJ+D,QAAA,CAAAC,IAAA,CAAAT,KAAA,CAAAU,QAAA,GAAAhE,YAAA;MACXiE,IAAA;IACT;IACF,SAAAC,sBAAA;MAEA,IAAAC,cAAiC,GAAAC,aAAA,CAAAC,QAAA,WAAA9B,CAAA;QACzB,QAAAA,CAAA,CAAA+B,IAAA;UACJ,KAAAC,IAAA,CAAAC,UAAgB,CAAAC,GAAA;YAAArF,KAEE,CAAAsF,kBAAA,IAAAd,IAAA;YACd;UACA,KAAAW,IAAA,CAAAC,UAAA,CAAAG,KAAA;YAAAC,UAEc;YACH;UACX,KAAAL,IAAA,CAAAC,UAAA,CAAAK,IAAA;YAAAC,IAEc;YACT;UACL,KAAAP,IAAA,CAAAC,UAAA,CAAAO,EAAA;YAAAC,aAEc;YACd;UACA,KAAAT,IAAA,CAAAC,UAAA,CAAAS,KAAA;YAAAC,IAEc;YACT;UACL,KAAAX,IAAA,CAAAC,UAAA,CAAAW,IAAA;YAAAH,aAEc;YACd;QACA;MAAA,CACJ;MACF,IAACI,iBAAA,GAAAhB,aAAA,CAAAC,QAAA,WAAA9B,CAAA;QACK,IAAA8C,KAAA,GAAA9C,CAAA,CAAA+C,MAAA,IAA6B/C,CAAA,CAAAgD,MAAC;QAC5BP,aAAA,CAAQK,KAAE,OAAU,QAAE;UACdG,QAAA,EAAApG,KAAA,CAAAoG,QAAY;UACxB7D,gBAAgB;QAAA,EAChB;MAAkB,EACpB;MACFZ,kBAAC,CAAA0E,GAAA;QAEDC,IAAA,CAAAC,gBAAA,CAAmB7B,QAAU,aAAAK,cAAA;QACVuB,IAAA,CAAAC,gBAAA,CAAA7B,QAAA,EAAU,SAAAsB,iBAAyB;MACpD,CAAiB;IAAoC;IAEzD,SAAAvB,wBAAA;MAEA9C,kBAAmC,CAAA6E,IAAA;IACjC;IACF,SAAAC,cAAA;MAEA5E,OAAS,CAAgBkB,KAAA;IACvB;IACF,SAAA2D,eAAAvD,CAAA;MAEAtB,OAAS,CAAAkB,KAAA;MACPI,CAAA,CAAAwD,MAAQ,CAAQC,GAAA,GAAA5F,CAAA;IACf;IACH,SAAA6F,gBAAA1D,CAAA;MAEA,IAAAtB,OAAA,CAAAkB,KAAA,IAAAI,CAAA,CAAyB2D,MAAe,WAAAtF,OAAA,CAAAuB,KAAA,EACtC;MACAb,SAAA,CAAUa,KAAA,CAAMR,gBAAmB;MAEnC,IAAAwE,iBAAA,GAA6B7E,SAAU,CAAAa,KAAA;QAA/BV,OAAA,GAAA0E,iBAAA,CAAA1E,OAAA;QAASC,OAAQ,GAAAyE,iBAAA,CAARzE,OAAQ;MACzB,IAAM0E,MAAA,GAAS7D,CAAE,CAAA8D,KAAA;MACjB,IAAMC,MAAA,GAAS/D,CAAE,CAAAgE,KAAA;MAEX,IAAAC,WAAA,GAAcpC,aAAA,CAAAC,QAAS,WAACoC,EAAmB;QAC/CnF,SAAA,CAAUa,KAAQ,GAAAuE,aAAA,CAAAA,aAAA,KACbpF,SAAU,CAAAa,KAAA;UACbV,OAAA,EAASA,OAAU,GAAAgF,EAAA,CAAGJ,KAAQ,GAAAD,MAAA;UAC9B1E,OAAA,EAASA,OAAU,GAAA+E,EAAA,CAAGF,KAAQ,GAAAD;QAAA,EAChC;MAAA,CACD;MACD,IAAMK,eAAkB,GAAAjB,IAAA,CAAAC,gBAAA,CAAiB7B,QAAU,eAAa0C,WAAW;MAC1Dd,IAAA,CAAAC,gBAAA,CAAA7B,QAAA,EAAU,WAAW,YAAM;QAC1B6C,eAAA;MAAA,CACjB;MAEDpE,CAAA,CAAEqE,cAAe;IAAA;IAGnB,SAASC,KAAQA,CAAA;MACfvF,SAAA,CAAUa,KAAQ;QAChBZ,KAAO;QACPC,GAAK;QACLC,OAAS;QACTC,OAAS;QACTC,gBAAkB;MAAA,CACpB;IAAA;IAGF,SAASiD,UAAaA,CAAA;MACpB,IAAI3D,OAAA,CAAQkB,KAAO,EAEb;MACA,IAAA2E,SAAA,GAAAC,OAAA,CAAAC,MAAoB,CAAA1H,KAAA;MACpB,IAAA2H,UAAA,GAAAC,MAAmB,CAAMC,MAAA,CAAA7H,KAAA;MAC/B,IAAM8H,WAAmB,GAAAhG,IAAA,CAAAe,KAAA,CAAAhD,IAAU;MAC7B,IAAAe,KAAA,GAAA+G,UAAqB,CAAAI,SAAe,WAAAC,CAAA;QAAA,OAAAA,CAAA,CAAAnI,IAAA,KAAAiI,WAAA;MAAA;MAC1C,IAAaG,SAAA,IAAMrH,KAAU,QAAA4G,SAAU,CAAA7E,MAAA;MACjCb,IAAA,CAAAe,KAAA,GAAA7C,KAAA,CAAAwH,SAAA,CAAAS,SAAA;MACRV,KAAA;IAEA;IACQ,SAAAW,aAAoBA,CAAAtH,KAAA;MACd,IAAAuH,GAAA,GAAArI,KAAA,CAAA4C,OAAA,CAAAC,MAAwB;MACtCf,WAAA,CAAAiB,KAAA,IAAAjC,KAAA,GAAAuH,GAAA,IAAAA,GAAA;IAEA;IACE,SAAY3C,KAAA;MACE,IAAA5C,OAAA,CAAAC,KAAA,KAAA/C,KAAA,CAAAqD,QAAqB,EACrC;MAEA+E,aAAgB,CAAAtG,WAAA,CAAAiB,KAAA;IACd;IACc,SAAA+C,KAAA;MAChB,IAAA9C,MAAA,CAAAD,KAAA,KAAA/C,KAAA,CAAAqD,QAAA,EAEA;MACE+E,aAAmB,CAAAtG,WAAA,CAAAiB,KAAA;IACnB;IACA,SAAQ6C,aAAqBA,CAAA0C,MAAA;MAAA,IAAAC,OAAA,GAAAC,SAAA,CAAA3F,MAAA,QAAA2F,SAAA,QAAAC,SAAA,GAAAD,SAAA;MAAqB,IAAA3G,OAAA,CACtCkB,KAAM,EAChB;MAAW,IACO2F,QAAA,GAAA1I,KAAA,CAAA0I,QAAA;QAAAC,QAAA,GAAA3I,KAAA,CAAA2I,QAAA;MAAA,IAAAC,qBAAA,GAAAtB,aAAA;UAEpBlB,QAAA,EAAApG,KAAA,CAAAoG,QAAA;UACAyC,SAAgB;UACdtG,gBAAK;QAAA,GACCgG,OAAA;QAJHnC,QAAA,GAAAwC,qBAAA,CAAAxC,QAAA;QAAAyC,SAAA,GAAAD,qBAAA,CAAAC,SAAA;QAAAtG,gBAAA,GAAAqG,qBAAA,CAAArG,gBAAA;MAKgC,QAAA+F,MAClB;QACb;UACF,IAAApG,SAAA,CAAAa,KAAA,CAAAZ,KAAA,GAAAuG,QAAA;YACAxG,SAAA,CAAAa,KAAA,CAAAZ,KAAA,GAAA2G,MAAA,CAAAC,UAAA,EAAA7G,SAAA,CAAAa,KAAA,CAAAZ,KAAA,GAAAiE,QAAA,EAAA4C,OAAA;UAAA;UAEI;QACQ;UAAqB,IAAA9G,SAClB,CAAAa,KAAA,CAAAZ,KAAc,GAAAwG,QAAA;YAC3BzG,SAAA,CAAAa,KAAA,CAAAZ,KAAA,GAAA2G,MAAA,CAAAC,UAAA,EAAA7G,SAAA,CAAAa,KAAA,CAAAZ,KAAA,GAAAiE,QAAA,EAAA4C,OAAA;UAAA;UAEF;QACF,KAAK;UACH9G,SAAA,CAAUa,KAAA,CAAMX,GAAO,IAAAyG,SAAA;UAClBhE,IAAA,WAAU3C,SAAU,CAAAa,KAAA,CAAMX,GAAG;UAClC;QACF,KAAK;UACHF,SAAA,CAAUa,KAAA,CAAMX,GAAO,IAAAyG,SAAA;UAClBhE,IAAA,WAAU3C,SAAU,CAAAa,KAAA,CAAMX,GAAG;UAClC;MAAA;MAEJF,SAAA,CAAUa,KAAA,CAAMR,gBAAmB,GAAAA,gBAAA;IAAA;IAGrC,SAAS0G,oBAAoBC,KAAoB;MAC3C,IAAAC,GAAA;MACF,MAAAA,GAAqB,GAAAD,KAAA,CAAAE,MAAA,qBAAAD,GAAA,CAAAE,WAAA;QACvBH,KAAA,CAAA1B,cAAA;MAAA;IAGF;IACE,SAAA8B,gBAA8BA,CAAA;MACvB,IAAAtJ,KAAA,CAAAsF,kBAAA;QACPd,IAAA;MAAA;IAGF;IACM,SAAG+E,YAASA,CAAApG,CAAA;MAEZ,KAAAA,CAAE,CAAAqG,OAAA,EACJ;MACO,IAAArG,CAAA,CAAA+C,MAAA;QACT/C,CAAA,CAAAqE,cAAa;QACX,OAAiB;MACjB,CAAO,UAAArE,CAAA,CAAA+C,MAAA;QACT/C,CAAA,CAAAqE,cAAA;QACF;MAEA;IACE;IACQnH,GAAA,CAAAoJ,KAAA,CAAAxG,UAAA,EAAe;MACjB5C,GAAA,CAAAqJ,QAAA,aAAiB;QACnB,IAAAC,IAAQ,GAAQjI,OAAA,CAAAqB,KAAA;QAClB,MAAA4G,IAAA,oBAAAA,IAAA,CAAAC,QAAA;UACD/H,OAAA,CAAAkB,KAAA;QAAA;MAGH,CAAM;IACJ,CAAM;IACN1C,GAAA,CAAAoJ,KAAA,CAAA3H,WAAe,EAAG,UAAA+H,GAAA;MACnBpC,KAAA;MAED5C,IAAA,SAAgB,EAAAgF,GAAA;IACd,CAAsB;IAEFxJ,GAAA,CAAAyJ,SAAA;MAAwChF,qBACjD;MACXnE,iBAAC,GAAA2F,IAAA,CAAAC,gBAAA,UAAAgD,YAAA;QAGcQ,OAAA;MACf,CAAS;MACVnJ,YAAA,GAAA8D,QAAA,CAAAC,IAAA,CAAAT,KAAA,CAAAU,QAAA;MAEYF,QAAA,CAAAC,IAAA,CAAAT,KAAA,CAAAU,QAAA;IAAA;IAAAoF,MAAA;MAAA5B,aAAA,EAAAA;IAAA,CAIX;IACF,OAAC,UAAA6B,IAAA,EAAAC,MAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}