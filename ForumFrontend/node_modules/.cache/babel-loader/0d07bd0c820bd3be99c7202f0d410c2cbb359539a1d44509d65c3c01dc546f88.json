{"ast":null,"code":"'use strict';\n\nvar _toConsumableArray = require(\"H:/ForumServers/ForumFrontend/node_modules/@babel/runtime/helpers/toConsumableArray.js\")[\"default\"];\nrequire(\"core-js/modules/es.array.index-of.js\");\nrequire(\"core-js/modules/es.array.push.js\");\nrequire(\"core-js/modules/es.array.splice.js\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nvar constants = require('./constants.js');\nvar lodashUnified = require('lodash-unified');\nvar event = require('../../../constants/event.js');\nvar index = require('../../../hooks/use-namespace/index.js');\nvar useCollapse = function useCollapse(props, emit) {\n  var activeNames = vue.ref([]);\n  var computedActiveNames = vue.computed(function () {\n    var _a;\n    var activeKeys = (_a = props.modelValue) != null ? _a : activeNames.value;\n    return lodashUnified.castArray(activeKeys);\n  });\n  var setActiveNames = function setActiveNames(_activeNames) {\n    activeNames.value = _activeNames;\n    var value = props.accordion ? activeNames.value[0] : activeNames.value;\n    emit(event.UPDATE_MODEL_EVENT, value);\n    emit(event.CHANGE_EVENT, value);\n  };\n  var handleItemClick = function handleItemClick(name) {\n    if (props.accordion) {\n      setActiveNames([computedActiveNames.value[0] === name ? \"\" : name]);\n    } else {\n      var _activeNames = _toConsumableArray(computedActiveNames.value);\n      var _index = _activeNames.indexOf(name);\n      if (_index > -1) {\n        _activeNames.splice(_index, 1);\n      } else {\n        _activeNames.push(name);\n      }\n      setActiveNames(_activeNames);\n    }\n  };\n  vue.provide(constants.collapseContextKey, {\n    activeNames: computedActiveNames,\n    handleItemClick: handleItemClick\n  });\n  return {\n    activeNames: computedActiveNames,\n    setActiveNames: setActiveNames\n  };\n};\nvar useCollapseDOM = function useCollapseDOM(props) {\n  var ns = index.useNamespace(\"collapse\");\n  var rootKls = vue.computed(function () {\n    return [ns.b(), ns.b(\"icon-position-\".concat(props.expandIconPosition))];\n  });\n  return {\n    rootKls: rootKls\n  };\n};\nexports.useCollapse = useCollapse;\nexports.useCollapseDOM = useCollapseDOM;","map":{"version":3,"names":["useCollapse","props","emit","activeNames","vue","ref","computedActiveNames","computed","_a","activeKeys","modelValue","value","lodashUnified","castArray","setActiveNames","_activeNames","accordion","event","UPDATE_MODEL_EVENT","CHANGE_EVENT","handleItemClick","name","_toConsumableArray","index","indexOf","splice","push","provide","constants","collapseContextKey","useCollapseDOM","ns","useNamespace","rootKls","b","concat","expandIconPosition"],"sources":["../../../../../../packages/components/collapse/src/use-collapse.ts"],"sourcesContent":["import { computed, provide, ref } from 'vue'\nimport { ensureArray } from '@element-plus/utils'\nimport { useNamespace } from '@element-plus/hooks'\nimport { CHANGE_EVENT, UPDATE_MODEL_EVENT } from '@element-plus/constants'\nimport { collapseContextKey } from './constants'\n\nimport type { SetupContext } from 'vue'\nimport type {\n  CollapseActiveName,\n  CollapseEmits,\n  CollapseProps,\n} from './collapse'\n\nexport const useCollapse = (\n  props: CollapseProps,\n  emit: SetupContext<CollapseEmits>['emit']\n) => {\n  const activeNames = ref<CollapseActiveName[]>([])\n\n  const computedActiveNames = computed(() => {\n    const activeKeys = props.modelValue ?? activeNames.value\n    return ensureArray(activeKeys)\n  })\n\n  const setActiveNames = (_activeNames: CollapseActiveName[]) => {\n    activeNames.value = _activeNames\n    const value = props.accordion ? activeNames.value[0] : activeNames.value\n    emit(UPDATE_MODEL_EVENT, value)\n    emit(CHANGE_EVENT, value)\n  }\n\n  const handleItemClick = (name: CollapseActiveName) => {\n    if (props.accordion) {\n      setActiveNames([computedActiveNames.value[0] === name ? '' : name])\n    } else {\n      const _activeNames = [...computedActiveNames.value]\n      const index = _activeNames.indexOf(name)\n\n      if (index > -1) {\n        _activeNames.splice(index, 1)\n      } else {\n        _activeNames.push(name)\n      }\n      setActiveNames(_activeNames)\n    }\n  }\n\n  provide(collapseContextKey, {\n    activeNames: computedActiveNames,\n    handleItemClick,\n  })\n  return {\n    activeNames: computedActiveNames,\n    setActiveNames,\n  }\n}\n\nexport const useCollapseDOM = (props: CollapseProps) => {\n  const ns = useNamespace('collapse')\n\n  const rootKls = computed(() => [\n    ns.b(),\n    ns.b(`icon-position-${props.expandIconPosition}`),\n  ])\n\n  return {\n    rootKls,\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;AAKY,IAACA,WAAW,GAAG,SAAdA,WAAWA,CAAIC,KAAK,EAAEC,IAAI,EAAK;EAC1C,IAAMC,WAAW,GAAGC,GAAA,CAAAC,GAAG,CAAC,EAAE,CAAC;EAC3B,IAAMC,mBAAmB,GAAGF,GAAA,CAAAG,QAAQ,CAAC,YAAM;IACzC,IAAIC,EAAE;IACN,IAAMC,UAAU,GAAG,CAACD,EAAE,GAAGP,KAAK,CAACS,UAAU,KAAK,IAAI,GAAGF,EAAE,GAAGL,WAAW,CAACQ,KAAK;IAC3E,OAAOC,aAAA,CAAAC,SAAW,CAACJ,UAAU,CAAC;EAClC,CAAG,CAAC;EACF,IAAMK,cAAc,GAAG,SAAjBA,cAAcA,CAAIC,YAAY,EAAK;IACvCZ,WAAW,CAACQ,KAAK,GAAGI,YAAY;IAChC,IAAMJ,KAAK,GAAGV,KAAK,CAACe,SAAS,GAAGb,WAAW,CAACQ,KAAK,CAAC,CAAC,CAAC,GAAGR,WAAW,CAACQ,KAAK;IACxET,IAAI,CAACe,KAAA,CAAAC,kBAAkB,EAAEP,KAAK,CAAC;IAC/BT,IAAI,CAACe,KAAA,CAAAE,YAAY,EAAER,KAAK,CAAC;EAC7B,CAAG;EACD,IAAMS,eAAe,GAAG,SAAlBA,eAAeA,CAAIC,IAAI,EAAK;IAChC,IAAIpB,KAAK,CAACe,SAAS,EAAE;MACnBF,cAAc,CAAC,CAACR,mBAAmB,CAACK,KAAK,CAAC,CAAC,CAAC,KAAKU,IAAI,GAAG,EAAE,GAAGA,IAAI,CAAC,CAAC;IACzE,CAAK,MAAM;MACL,IAAMN,YAAY,GAAAO,kBAAA,CAAOhB,mBAAmB,CAACK,KAAK,CAAC;MACnD,IAAMY,MAAK,GAAGR,YAAY,CAACS,OAAO,CAACH,IAAI,CAAC;MACxC,IAAIE,MAAK,GAAG,CAAC,CAAC,EAAE;QACdR,YAAY,CAACU,MAAM,CAACF,MAAK,EAAE,CAAC,CAAC;MACrC,CAAO,MAAM;QACLR,YAAY,CAACW,IAAI,CAACL,IAAI,CAAC;MAC/B;MACMP,cAAc,CAACC,YAAY,CAAC;IAClC;EACA,CAAG;EACDX,GAAA,CAAAuB,OAAO,CAACC,SAAA,CAAAC,kBAAkB,EAAE;IAC1B1B,WAAW,EAAEG,mBAAmB;IAChCc,eAAe,EAAfA;EACJ,CAAG,CAAC;EACF,OAAO;IACLjB,WAAW,EAAEG,mBAAmB;IAChCQ,cAAc,EAAdA;EACJ,CAAG;AACH;AACY,IAACgB,cAAc,GAAG,SAAjBA,cAAcA,CAAI7B,KAAK,EAAK;EACvC,IAAM8B,EAAE,GAAGR,KAAA,CAAAS,YAAY,CAAC,UAAU,CAAC;EACnC,IAAMC,OAAO,GAAG7B,GAAA,CAAAG,QAAQ,CAAC;IAAA,OAAM,CAC7BwB,EAAE,CAACG,CAAC,EAAE,EACNH,EAAE,CAACG,CAAC,kBAAAC,MAAA,CAAkBlC,KAAK,CAACmC,kBAAkB,CAAE,CAAC,CAClD;EAAA,EAAC;EACF,OAAO;IACLH,OAAO,EAAPA;EACJ,CAAG;AACH","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}