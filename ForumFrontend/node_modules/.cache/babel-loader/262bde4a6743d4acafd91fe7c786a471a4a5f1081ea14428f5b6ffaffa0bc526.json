{"ast":null,"code":"import \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport request from '@/utils/request';\n\n// 获取评论列表\nexport function getCommentList(params) {\n  return request({\n    url: '/api/v1/comments/',\n    method: 'get',\n    params: params\n  });\n}\n\n// 获取帖子的评论列表\nexport function getPostComments(postId) {\n  var forceRefresh = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  // 添加时间戳参数，避免浏览器缓存\n  var timestamp = forceRefresh ? \"&_t=\".concat(new Date().getTime()) : '';\n  return request({\n    url: \"/api/v1/comments/?post=\".concat(postId).concat(timestamp),\n    method: 'get'\n  }).then(function (response) {\n    // 如果响应成功，直接返回\n    return response;\n  })[\"catch\"](function (error) {\n    console.error(\"\\u83B7\\u53D6\\u5E16\\u5B50\\u8BC4\\u8BBA\\u5217\\u8868(ID: \".concat(postId, \")\\u5931\\u8D25\"), error);\n    // 返回空数据\n    return {\n      code: 0,\n      status: 0,\n      msg: '',\n      data: {\n        results: [],\n        count: 0\n      }\n    };\n  });\n}\n\n// 获取评论详情\nexport function getCommentDetail(id) {\n  return request({\n    url: \"/api/v1/comments/\".concat(id, \"/\"),\n    method: 'get'\n  });\n}\n\n// 创建评论\nexport function createComment(data) {\n  return request({\n    url: '/api/v1/comments/',\n    method: 'post',\n    data: data\n  });\n}\n\n// 回复评论\nexport function replyComment(postId, parentId, content) {\n  return request({\n    url: '/api/v1/comments/',\n    method: 'post',\n    data: {\n      post: postId,\n      parent: parentId,\n      content: content\n    }\n  });\n}\n\n// 更新评论\nexport function updateComment(id, data) {\n  return request({\n    url: \"/api/v1/comments/\".concat(id, \"/\"),\n    method: 'put',\n    data: data\n  });\n}\n\n// 删除评论\nexport function deleteComment(id) {\n  console.log(\"\\u51C6\\u5907\\u5220\\u9664\\u8BC4\\u8BBA\\uFF0CID: \".concat(id));\n  return request({\n    url: \"/api/v1/comments/\".concat(id, \"/\"),\n    method: 'delete'\n  }).then(function (response) {\n    console.log(\"\\u5220\\u9664\\u8BC4\\u8BBAAPI\\u54CD\\u5E94:\", response);\n    return response;\n  })[\"catch\"](function (error) {\n    console.error(\"\\u5220\\u9664\\u8BC4\\u8BBAAPI\\u9519\\u8BEF:\", error);\n    throw error;\n  });\n}","map":{"version":3,"names":["request","getCommentList","params","url","method","getPostComments","postId","forceRefresh","arguments","length","undefined","timestamp","concat","Date","getTime","then","response","error","console","code","status","msg","data","results","count","getCommentDetail","id","createComment","replyComment","parentId","content","post","parent","updateComment","deleteComment","log"],"sources":["H:/ForumServers/ForumFrontend/src/api/comment.js"],"sourcesContent":["import request from '@/utils/request'\n\n// 获取评论列表\nexport function getCommentList(params) {\n  return request({\n    url: '/api/v1/comments/',\n    method: 'get',\n    params\n  })\n}\n\n// 获取帖子的评论列表\nexport function getPostComments(postId, forceRefresh = false) {\n  // 添加时间戳参数，避免浏览器缓存\n  const timestamp = forceRefresh ? `&_t=${new Date().getTime()}` : ''\n  return request({\n    url: `/api/v1/comments/?post=${postId}${timestamp}`,\n    method: 'get'\n  }).then(response => {\n    // 如果响应成功，直接返回\n    return response;\n  }).catch(error => {\n    console.error(`获取帖子评论列表(ID: ${postId})失败`, error)\n    // 返回空数据\n    return {\n      code: 0,\n      status: 0,\n      msg: '',\n      data: {\n        results: [],\n        count: 0\n      }\n    }\n  })\n}\n\n// 获取评论详情\nexport function getCommentDetail(id) {\n  return request({\n    url: `/api/v1/comments/${id}/`,\n    method: 'get'\n  })\n}\n\n// 创建评论\nexport function createComment(data) {\n  return request({\n    url: '/api/v1/comments/',\n    method: 'post',\n    data\n  })\n}\n\n// 回复评论\nexport function replyComment(postId, parentId, content) {\n  return request({\n    url: '/api/v1/comments/',\n    method: 'post',\n    data: {\n      post: postId,\n      parent: parentId,\n      content\n    }\n  })\n}\n\n// 更新评论\nexport function updateComment(id, data) {\n  return request({\n    url: `/api/v1/comments/${id}/`,\n    method: 'put',\n    data\n  })\n}\n\n// 删除评论\nexport function deleteComment(id) {\n  console.log(`准备删除评论，ID: ${id}`)\n  return request({\n    url: `/api/v1/comments/${id}/`,\n    method: 'delete'\n  }).then(response => {\n    console.log(`删除评论API响应:`, response)\n    return response\n  }).catch(error => {\n    console.error(`删除评论API错误:`, error)\n    throw error\n  })\n}\n"],"mappings":";;AAAA,OAAOA,OAAO,MAAM,iBAAiB;;AAErC;AACA,OAAO,SAASC,cAAcA,CAACC,MAAM,EAAE;EACrC,OAAOF,OAAO,CAAC;IACbG,GAAG,EAAE,mBAAmB;IACxBC,MAAM,EAAE,KAAK;IACbF,MAAM,EAANA;EACF,CAAC,CAAC;AACJ;;AAEA;AACA,OAAO,SAASG,eAAeA,CAACC,MAAM,EAAwB;EAAA,IAAtBC,YAAY,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,KAAK;EAC1D;EACA,IAAMG,SAAS,GAAGJ,YAAY,UAAAK,MAAA,CAAU,IAAIC,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,IAAK,EAAE;EACnE,OAAOd,OAAO,CAAC;IACbG,GAAG,4BAAAS,MAAA,CAA4BN,MAAM,EAAAM,MAAA,CAAGD,SAAS,CAAE;IACnDP,MAAM,EAAE;EACV,CAAC,CAAC,CAACW,IAAI,CAAC,UAAAC,QAAQ,EAAI;IAClB;IACA,OAAOA,QAAQ;EACjB,CAAC,CAAC,SAAM,CAAC,UAAAC,KAAK,EAAI;IAChBC,OAAO,CAACD,KAAK,yDAAAL,MAAA,CAAiBN,MAAM,oBAAOW,KAAK,CAAC;IACjD;IACA,OAAO;MACLE,IAAI,EAAE,CAAC;MACPC,MAAM,EAAE,CAAC;MACTC,GAAG,EAAE,EAAE;MACPC,IAAI,EAAE;QACJC,OAAO,EAAE,EAAE;QACXC,KAAK,EAAE;MACT;IACF,CAAC;EACH,CAAC,CAAC;AACJ;;AAEA;AACA,OAAO,SAASC,gBAAgBA,CAACC,EAAE,EAAE;EACnC,OAAO1B,OAAO,CAAC;IACbG,GAAG,sBAAAS,MAAA,CAAsBc,EAAE,MAAG;IAC9BtB,MAAM,EAAE;EACV,CAAC,CAAC;AACJ;;AAEA;AACA,OAAO,SAASuB,aAAaA,CAACL,IAAI,EAAE;EAClC,OAAOtB,OAAO,CAAC;IACbG,GAAG,EAAE,mBAAmB;IACxBC,MAAM,EAAE,MAAM;IACdkB,IAAI,EAAJA;EACF,CAAC,CAAC;AACJ;;AAEA;AACA,OAAO,SAASM,YAAYA,CAACtB,MAAM,EAAEuB,QAAQ,EAAEC,OAAO,EAAE;EACtD,OAAO9B,OAAO,CAAC;IACbG,GAAG,EAAE,mBAAmB;IACxBC,MAAM,EAAE,MAAM;IACdkB,IAAI,EAAE;MACJS,IAAI,EAAEzB,MAAM;MACZ0B,MAAM,EAAEH,QAAQ;MAChBC,OAAO,EAAPA;IACF;EACF,CAAC,CAAC;AACJ;;AAEA;AACA,OAAO,SAASG,aAAaA,CAACP,EAAE,EAAEJ,IAAI,EAAE;EACtC,OAAOtB,OAAO,CAAC;IACbG,GAAG,sBAAAS,MAAA,CAAsBc,EAAE,MAAG;IAC9BtB,MAAM,EAAE,KAAK;IACbkB,IAAI,EAAJA;EACF,CAAC,CAAC;AACJ;;AAEA;AACA,OAAO,SAASY,aAAaA,CAACR,EAAE,EAAE;EAChCR,OAAO,CAACiB,GAAG,kDAAAvB,MAAA,CAAec,EAAE,CAAE,CAAC;EAC/B,OAAO1B,OAAO,CAAC;IACbG,GAAG,sBAAAS,MAAA,CAAsBc,EAAE,MAAG;IAC9BtB,MAAM,EAAE;EACV,CAAC,CAAC,CAACW,IAAI,CAAC,UAAAC,QAAQ,EAAI;IAClBE,OAAO,CAACiB,GAAG,6CAAenB,QAAQ,CAAC;IACnC,OAAOA,QAAQ;EACjB,CAAC,CAAC,SAAM,CAAC,UAAAC,KAAK,EAAI;IAChBC,OAAO,CAACD,KAAK,6CAAeA,KAAK,CAAC;IAClC,MAAMA,KAAK;EACb,CAAC,CAAC;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}