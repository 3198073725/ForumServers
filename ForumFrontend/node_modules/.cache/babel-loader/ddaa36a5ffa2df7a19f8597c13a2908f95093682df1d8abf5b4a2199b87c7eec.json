{"ast":null,"code":"'use strict';\n\nvar _objectSpread = require(\"H:/ForumServers/ForumFrontend/node_modules/@babel/runtime/helpers/objectSpread2.js\")[\"default\"];\nrequire(\"core-js/modules/es.object.define-property.js\");\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nvar rovingFocusItem = require('../../roving-focus-group/src/roving-focus-item.js');\nvar dropdownItemImpl = require('./dropdown-item-impl.js');\nvar useDropdown = require('./useDropdown.js');\nvar dropdown = require('./dropdown.js');\nvar tokens = require('./tokens.js');\nvar pluginVue_exportHelper = require('../../../_virtual/plugin-vue_export-helper.js');\nvar event = require('../../../utils/dom/event.js');\nvar _sfc_main = vue.defineComponent({\n  name: \"ElDropdownItem\",\n  components: {\n    ElDropdownCollectionItem: dropdown.ElCollectionItem,\n    ElRovingFocusItem: rovingFocusItem[\"default\"],\n    ElDropdownItemImpl: dropdownItemImpl[\"default\"]\n  },\n  inheritAttrs: false,\n  props: dropdown.dropdownItemProps,\n  emits: [\"pointermove\", \"pointerleave\", \"click\"],\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit,\n      attrs = _ref.attrs;\n    var _useDropdown$useDropd = useDropdown.useDropdown(),\n      elDropdown = _useDropdown$useDropd.elDropdown;\n    var _instance = vue.getCurrentInstance();\n    var itemRef = vue.ref(null);\n    var textContent = vue.computed(function () {\n      var _a, _b;\n      return (_b = (_a = vue.unref(itemRef)) == null ? void 0 : _a.textContent) != null ? _b : \"\";\n    });\n    var _vue$inject = vue.inject(tokens.DROPDOWN_INJECTION_KEY, void 0),\n      onItemEnter = _vue$inject.onItemEnter,\n      onItemLeave = _vue$inject.onItemLeave;\n    var handlePointerMove = event.composeEventHandlers(function (e) {\n      emit(\"pointermove\", e);\n      return e.defaultPrevented;\n    }, event.whenMouse(function (e) {\n      if (props.disabled) {\n        onItemLeave(e);\n        return;\n      }\n      var target = e.currentTarget;\n      if (target === document.activeElement || target.contains(document.activeElement)) {\n        return;\n      }\n      onItemEnter(e);\n      if (!e.defaultPrevented) {\n        target == null ? void 0 : target.focus();\n      }\n    }));\n    var handlePointerLeave = event.composeEventHandlers(function (e) {\n      emit(\"pointerleave\", e);\n      return e.defaultPrevented;\n    }, event.whenMouse(onItemLeave));\n    var handleClick = event.composeEventHandlers(function (e) {\n      if (props.disabled) {\n        return;\n      }\n      emit(\"click\", e);\n      return e.type !== \"keydown\" && e.defaultPrevented;\n    }, function (e) {\n      var _a, _b, _c;\n      if (props.disabled) {\n        e.stopImmediatePropagation();\n        return;\n      }\n      if ((_a = elDropdown == null ? void 0 : elDropdown.hideOnClick) == null ? void 0 : _a.value) {\n        (_b = elDropdown.handleClick) == null ? void 0 : _b.call(elDropdown);\n      }\n      (_c = elDropdown.commandHandler) == null ? void 0 : _c.call(elDropdown, props.command, _instance, e);\n    });\n    var propsAndAttrs = vue.computed(function () {\n      return _objectSpread(_objectSpread({}, props), attrs);\n    });\n    return {\n      handleClick: handleClick,\n      handlePointerMove: handlePointerMove,\n      handlePointerLeave: handlePointerLeave,\n      textContent: textContent,\n      propsAndAttrs: propsAndAttrs\n    };\n  }\n});\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _a;\n  var _component_el_dropdown_item_impl = vue.resolveComponent(\"el-dropdown-item-impl\");\n  var _component_el_roving_focus_item = vue.resolveComponent(\"el-roving-focus-item\");\n  var _component_el_dropdown_collection_item = vue.resolveComponent(\"el-dropdown-collection-item\");\n  return vue.openBlock(), vue.createBlock(_component_el_dropdown_collection_item, {\n    disabled: _ctx.disabled,\n    \"text-value\": (_a = _ctx.textValue) != null ? _a : _ctx.textContent\n  }, {\n    \"default\": vue.withCtx(function () {\n      return [vue.createVNode(_component_el_roving_focus_item, {\n        focusable: !_ctx.disabled\n      }, {\n        \"default\": vue.withCtx(function () {\n          return [vue.createVNode(_component_el_dropdown_item_impl, vue.mergeProps(_ctx.propsAndAttrs, {\n            onPointerleave: _ctx.handlePointerLeave,\n            onPointermove: _ctx.handlePointerMove,\n            onClickimpl: _ctx.handleClick\n          }), {\n            \"default\": vue.withCtx(function () {\n              return [vue.renderSlot(_ctx.$slots, \"default\")];\n            }),\n            _: 3\n          }, 16, [\"onPointerleave\", \"onPointermove\", \"onClickimpl\"])];\n        }),\n        _: 3\n      }, 8, [\"focusable\"])];\n    }),\n    _: 3\n  }, 8, [\"disabled\", \"text-value\"]);\n}\nvar DropdownItem = /* @__PURE__ */pluginVue_exportHelper[\"default\"](_sfc_main, [[\"render\", _sfc_render], [\"__file\", \"dropdown-item.vue\"]]);\nexports[\"default\"] = DropdownItem;","map":{"version":3,"names":["_sfc_main","vue","defineComponent","name","components","ElDropdownCollectionItem","dropdown","ElCollectionItem","ElRovingFocusItem","rovingFocusItem","ElDropdownItemImpl","dropdownItemImpl","inheritAttrs","props","dropdownItemProps","emits","setup","_ref","emit","attrs","_useDropdown$useDropd","useDropdown","elDropdown","_instance","getCurrentInstance","itemRef","ref","textContent","computed","_a","_b","unref","_vue$inject","inject","tokens","DROPDOWN_INJECTION_KEY","onItemEnter","onItemLeave","handlePointerMove","event","composeEventHandlers","e","defaultPrevented","whenMouse","disabled","target","currentTarget","document","activeElement","contains","focus","handlePointerLeave","handleClick","type","_c","stopImmediatePropagation","hideOnClick","value","call","commandHandler","command","propsAndAttrs","_objectSpread","_sfc_render","_ctx","_cache","$props","$setup","$data","$options","_component_el_dropdown_item_impl","resolveComponent","_component_el_roving_focus_item","createVNode","focusable","mergeProps","onPointerleave","onPointermove","withCtx","renderSlot","$slots","_"],"sources":["../../../../../../packages/components/dropdown/src/dropdown-item.vue"],"sourcesContent":["<template>\n  <el-dropdown-collection-item\n    :disabled=\"disabled\"\n    :text-value=\"textValue ?? textContent\"\n  >\n    <el-roving-focus-item :focusable=\"!disabled\">\n      <el-dropdown-item-impl\n        v-bind=\"propsAndAttrs\"\n        @pointerleave=\"handlePointerLeave\"\n        @pointermove=\"handlePointerMove\"\n        @clickimpl=\"handleClick\"\n      >\n        <slot />\n      </el-dropdown-item-impl>\n    </el-roving-focus-item>\n  </el-dropdown-collection-item>\n</template>\n\n<script lang=\"ts\">\nimport {\n  computed,\n  defineComponent,\n  getCurrentInstance,\n  inject,\n  ref,\n  unref,\n} from 'vue'\nimport { ElRovingFocusItem } from '@element-plus/components/roving-focus-group'\nimport { composeEventHandlers, whenMouse } from '@element-plus/utils'\nimport ElDropdownItemImpl from './dropdown-item-impl.vue'\nimport { useDropdown } from './useDropdown'\nimport {\n  ElCollectionItem as ElDropdownCollectionItem,\n  dropdownItemProps,\n} from './dropdown'\nimport { DROPDOWN_INJECTION_KEY } from './tokens'\n\nexport default defineComponent({\n  name: 'ElDropdownItem',\n  components: {\n    ElDropdownCollectionItem,\n    ElRovingFocusItem,\n    ElDropdownItemImpl,\n  },\n  inheritAttrs: false,\n  props: dropdownItemProps,\n  emits: ['pointermove', 'pointerleave', 'click'],\n  setup(props, { emit, attrs }) {\n    const { elDropdown } = useDropdown()\n    const _instance = getCurrentInstance()\n    const itemRef = ref<HTMLElement | null>(null)\n    const textContent = computed(() => unref(itemRef)?.textContent ?? '')\n    const { onItemEnter, onItemLeave } = inject(\n      DROPDOWN_INJECTION_KEY,\n      undefined\n    )!\n\n    const handlePointerMove = composeEventHandlers(\n      (e: PointerEvent) => {\n        emit('pointermove', e)\n        return e.defaultPrevented\n      },\n      whenMouse((e) => {\n        if (props.disabled) {\n          onItemLeave(e)\n          return\n        }\n\n        const target = e.currentTarget as HTMLElement\n        /**\n         * This handles the following scenario:\n         *   when the item contains a form element such as input element\n         *   when the mouse is moving over the element itself which is contained by\n         *   the item, the default focusing logic should be prevented so that\n         *   it won't cause weird action.\n         */\n        if (\n          target === document.activeElement ||\n          target.contains(document.activeElement)\n        ) {\n          return\n        }\n\n        onItemEnter(e)\n        if (!e.defaultPrevented) {\n          target?.focus()\n        }\n      })\n    )\n\n    const handlePointerLeave = composeEventHandlers((e: PointerEvent) => {\n      emit('pointerleave', e)\n      return e.defaultPrevented\n    }, whenMouse(onItemLeave))\n\n    const handleClick = composeEventHandlers(\n      (e: PointerEvent) => {\n        if (props.disabled) {\n          return\n        }\n        emit('click', e)\n        return e.type !== 'keydown' && e.defaultPrevented\n      },\n      (e) => {\n        if (props.disabled) {\n          e.stopImmediatePropagation()\n          return\n        }\n        if (elDropdown?.hideOnClick?.value) {\n          elDropdown.handleClick?.()\n        }\n        elDropdown.commandHandler?.(props.command, _instance, e)\n      }\n    )\n\n    // direct usage of v-bind={ ...$props, ...$attrs } causes type errors\n    const propsAndAttrs = computed(() => ({ ...props, ...attrs }))\n\n    return {\n      handleClick,\n      handlePointerMove,\n      handlePointerLeave,\n      textContent,\n      propsAndAttrs,\n    }\n  },\n})\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}