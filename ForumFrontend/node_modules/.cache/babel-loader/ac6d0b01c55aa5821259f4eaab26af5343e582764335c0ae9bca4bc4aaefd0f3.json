{"ast":null,"code":"'use strict';\n\nrequire(\"core-js/modules/es.array.some.js\");\nrequire(\"core-js/modules/es.iterator.constructor.js\");\nrequire(\"core-js/modules/es.iterator.some.js\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nvar useOption = require('./useOption.js');\nvar option = require('./option.js');\nvar pluginVue_exportHelper = require('../../../_virtual/plugin-vue_export-helper.js');\nvar index = require('../../../hooks/use-namespace/index.js');\nvar index$1 = require('../../../hooks/use-id/index.js');\nvar _sfc_main = vue.defineComponent({\n  name: option.COMPONENT_NAME,\n  componentName: option.COMPONENT_NAME,\n  props: option.optionProps,\n  setup: function setup(props) {\n    var ns = index.useNamespace(\"select\");\n    var id = index$1.useId();\n    var containerKls = vue.computed(function () {\n      return [ns.be(\"dropdown\", \"item\"), ns.is(\"disabled\", vue.unref(isDisabled)), ns.is(\"selected\", vue.unref(itemSelected)), ns.is(\"hovering\", vue.unref(hover))];\n    });\n    var states = vue.reactive({\n      index: -1,\n      groupDisabled: false,\n      visible: true,\n      hover: false\n    });\n    var _useOption$useOption = useOption.useOption(props, states),\n      currentLabel = _useOption$useOption.currentLabel,\n      itemSelected = _useOption$useOption.itemSelected,\n      isDisabled = _useOption$useOption.isDisabled,\n      select = _useOption$useOption.select,\n      hoverItem = _useOption$useOption.hoverItem,\n      updateOption = _useOption$useOption.updateOption;\n    var _vue$toRefs = vue.toRefs(states),\n      visible = _vue$toRefs.visible,\n      hover = _vue$toRefs.hover;\n    var vm = vue.getCurrentInstance().proxy;\n    select.onOptionCreate(vm);\n    vue.onBeforeUnmount(function () {\n      var key = vm.value;\n      var selectedOptions = select.states.selected;\n      var doesSelected = selectedOptions.some(function (item) {\n        return item.value === vm.value;\n      });\n      vue.nextTick(function () {\n        if (select.states.cachedOptions.get(key) === vm && !doesSelected) {\n          select.states.cachedOptions[\"delete\"](key);\n        }\n      });\n      select.onOptionDestroy(key, vm);\n    });\n    function selectOptionClick() {\n      if (!isDisabled.value) {\n        select.handleOptionSelect(vm);\n      }\n    }\n    return {\n      ns: ns,\n      id: id,\n      containerKls: containerKls,\n      currentLabel: currentLabel,\n      itemSelected: itemSelected,\n      isDisabled: isDisabled,\n      select: select,\n      visible: visible,\n      hover: hover,\n      states: states,\n      hoverItem: hoverItem,\n      updateOption: updateOption,\n      selectOptionClick: selectOptionClick\n    };\n  }\n});\nfunction _sfc_render(_ctx, _cache) {\n  return vue.withDirectives((vue.openBlock(), vue.createElementBlock(\"li\", {\n    id: _ctx.id,\n    \"class\": vue.normalizeClass(_ctx.containerKls),\n    role: \"option\",\n    \"aria-disabled\": _ctx.isDisabled || void 0,\n    \"aria-selected\": _ctx.itemSelected,\n    onMousemove: _ctx.hoverItem,\n    onClick: vue.withModifiers(_ctx.selectOptionClick, [\"stop\"])\n  }, [vue.renderSlot(_ctx.$slots, \"default\", {}, function () {\n    return [vue.createElementVNode(\"span\", null, vue.toDisplayString(_ctx.currentLabel), 1)];\n  })], 42, [\"id\", \"aria-disabled\", \"aria-selected\", \"onMousemove\", \"onClick\"])), [[vue.vShow, _ctx.visible]]);\n}\nvar Option = /* @__PURE__ */pluginVue_exportHelper[\"default\"](_sfc_main, [[\"render\", _sfc_render], [\"__file\", \"option.vue\"]]);\nexports[\"default\"] = Option;","map":{"version":3,"names":["_sfc_main","vue","defineComponent","name","option","COMPONENT_NAME","componentName","props","optionProps","setup","ns","index","useNamespace","id","index$1","useId","containerKls","computed","be","is","unref","isDisabled","itemSelected","hover","states","reactive","groupDisabled","visible","_useOption$useOption","useOption","currentLabel","select","hoverItem","updateOption","_vue$toRefs","toRefs","vm","getCurrentInstance","proxy","onOptionCreate","onBeforeUnmount","key","value","selectedOptions","selected","doesSelected","some","item","nextTick","cachedOptions","get","onOptionDestroy","selectOptionClick","handleOptionSelect","createElementBlock","_ctx","normalizeClass","role","onMousemove","onClick","withModifiers","renderSlot","$slots","createElementVNode","toDisplayString","vShow","Option","pluginVue_exportHelper","_sfc_render"],"sources":["../../../../../../packages/components/select/src/option.vue"],"sourcesContent":["<template>\n  <li\n    v-show=\"visible\"\n    :id=\"id\"\n    :class=\"containerKls\"\n    role=\"option\"\n    :aria-disabled=\"isDisabled || undefined\"\n    :aria-selected=\"itemSelected\"\n    @mousemove=\"hoverItem\"\n    @click.stop=\"selectOptionClick\"\n  >\n    <slot>\n      <span>{{ currentLabel }}</span>\n    </slot>\n  </li>\n</template>\n\n<script lang=\"ts\">\nimport {\n  computed,\n  defineComponent,\n  getCurrentInstance,\n  nextTick,\n  onBeforeUnmount,\n  reactive,\n  toRefs,\n  unref,\n} from 'vue'\nimport { useId, useNamespace } from '@element-plus/hooks'\nimport { useOption } from './useOption'\nimport { COMPONENT_NAME, optionProps } from './option'\n\nimport type { OptionExposed, OptionInternalInstance, OptionStates } from './type'\n\nexport default defineComponent({\n  name: COMPONENT_NAME,\n  componentName: COMPONENT_NAME,\n\n  props: optionProps,\n\n  setup(props) {\n    const ns = useNamespace('select')\n    const id = useId()\n\n    const containerKls = computed(() => [\n      ns.be('dropdown', 'item'),\n      ns.is('disabled', unref(isDisabled)),\n      ns.is('selected', unref(itemSelected)),\n      ns.is('hovering', unref(hover)),\n    ])\n\n    const states = reactive<OptionStates>({\n      index: -1,\n      groupDisabled: false,\n      visible: true,\n      hover: false,\n    })\n\n    const {\n      currentLabel,\n      itemSelected,\n      isDisabled,\n      select,\n      hoverItem,\n      updateOption,\n    } = useOption(props, states)\n\n    const { visible, hover } = toRefs(states)\n\n    const vm = (getCurrentInstance()! as OptionInternalInstance).proxy\n\n    select.onOptionCreate(vm)\n\n    onBeforeUnmount(() => {\n      const key = vm.value\n      const { selected: selectedOptions } = select.states\n      const doesSelected = selectedOptions.some((item) => {\n        return item.value === vm.value\n      })\n      // if option is not selected, remove it from cache\n      nextTick(() => {\n        if (select.states.cachedOptions.get(key) === vm && !doesSelected) {\n          select.states.cachedOptions.delete(key)\n        }\n      })\n      select.onOptionDestroy(key, vm)\n    })\n\n    function selectOptionClick() {\n      if (!isDisabled.value) {\n        select.handleOptionSelect(vm)\n      }\n    }\n\n    return {\n      ns,\n      id,\n      containerKls,\n      currentLabel,\n      itemSelected,\n      isDisabled,\n      select,\n      visible,\n      hover,\n      states,\n\n      hoverItem,\n      updateOption,\n      selectOptionClick,\n    } satisfies OptionExposed\n  },\n})\n</script>\n"],"mappings":";;;;;;;;;;;;;;;;AAkCA,IAAKA,SAAA,GAAaC,GAAA,CAAAC,eAAa;EAC7BC,IAAM,EAAAC,MAAA,CAAAC,cAAA;EACNC,aAAe,EAAAF,MAAA,CAAAC,cAAA;EAEfE,KAAO,EAAAH,MAAA,CAAAI,WAAA;EAEPC,KAAA,WAAAA,MAAMF,KAAO;IACL,IAAAG,EAAA,GAAKC,KAAA,CAAAC,YAAA,CAAa,QAAQ;IAChC,IAAMC,EAAA,GAAKC,OAAA,CAAAC,KAAM;IAEX,IAAAC,YAAA,GAAef,GAAA,CAAAgB,QAAA,CAAS;MAAA,OAAM,CAClCP,EAAA,CAAGQ,EAAG,aAAY,MAAM,GACxBR,EAAG,CAAAS,EAAA,CAAG,UAAY,EAAAlB,GAAA,CAAAmB,KAAA,CAAMC,UAAU,CAAC,GACnCX,EAAG,CAAAS,EAAA,CAAG,UAAY,EAAAlB,GAAA,CAAAmB,KAAA,CAAME,YAAY,CAAC,GACrCZ,EAAG,CAAAS,EAAA,CAAG,UAAY,EAAAlB,GAAA,CAAAmB,KAAA,CAAMG,KAAK,CAAC,EAC/B;IAAA;IAED,IAAMC,MAAA,GAASvB,GAAA,CAAAwB,QAAuB;MACpCd,KAAO;MACPe,aAAe;MACfC,OAAS;MACTJ,KAAO;IAAA,CACR;IAEK,IAAAK,oBAAA,GAOFC,SAAA,CAAAA,SAAU,CAAAtB,KAAA,EAAOiB,MAAM;MANzBM,YAAA,GAAAF,oBAAA,CAAAE,YAAA;MACAR,YAAA,GAAAM,oBAAA,CAAAN,YAAA;MACAD,UAAA,GAAAO,oBAAA,CAAAP,UAAA;MACAU,MAAA,GAAAH,oBAAA,CAAAG,MAAA;MACAC,SAAA,GAAAJ,oBAAA,CAAAI,SAAA;MACAC,YAAA,GAAAL,oBAAA,CAAAK,YAAA;IAGF,IAAAC,WAAA,GAA2BjC,GAAA,CAAAkC,MAAA,CAAOX,MAAM;MAAhCG,OAAA,GAAAO,WAAA,CAAAP,OAAA;MAASJ,KAAM,GAAAW,WAAA,CAANX,KAAM;IAEjB,IAAAa,EAAA,GAAMnC,GAAA,CAAAoC,kBAAA,EAAiD,CAAAC,KAAA;IAE7DP,MAAA,CAAOQ,cAAA,CAAeH,EAAE;IAExBnC,GAAA,CAAAuC,eAAA,CAAgB,YAAM;MACpB,IAAMC,GAAA,GAAML,EAAG,CAAAM,KAAA;MACf,IAAkBC,eAAgB,GAAIZ,MAAO,CAAAP,MAAA,CAArCoB,QAAA;MACR,IAAMC,YAAe,GAAAF,eAAA,CAAgBG,IAAK,WAACC,IAAS;QAC3C,OAAAA,IAAA,CAAKL,KAAA,KAAUN,EAAG,CAAAM,KAAA;MAAA,CAC1B;MAEDzC,GAAA,CAAA+C,QAAA,CAAS,YAAM;QACT,IAAAjB,MAAA,CAAOP,MAAA,CAAOyB,aAAc,CAAAC,GAAA,CAAIT,GAAG,CAAM,KAAAL,EAAA,IAAM,CAACS,YAAc;UACzDd,MAAA,CAAAP,MAAA,CAAOyB,aAAc,WAAOR,GAAG;QAAA;MACxC,CACD;MACMV,MAAA,CAAAoB,eAAA,CAAgBV,GAAA,EAAKL,EAAE;IAAA,CAC/B;IAED,SAASgB,iBAAoBA,CAAA;MACvB,KAAC/B,UAAA,CAAWqB,KAAO;QACrBX,MAAA,CAAOsB,kBAAA,CAAmBjB,EAAE;MAAA;IAC9B;IAGK;MACL1B,EAAA,EAAAA,EAAA;MACAG,EAAA,EAAAA,EAAA;MACAG,YAAA,EAAAA,YAAA;MACAc,YAAA,EAAAA,YAAA;MACAR,YAAA,EAAAA,YAAA;MACAD,UAAA,EAAAA,UAAA;MACAU,MAAA,EAAAA,MAAA;MACAJ,OAAA,EAAAA,OAAA;MACAJ,KAAA,EAAAA,KAAA;MACAC,MAAA,EAAAA,MAAA;MAEAQ,SAAA,EAAAA,SAAA;MACAC,YAAA,EAAAA,YAAA;MACAmB,iBAAA,EAAAA;IAAA,CACF;EAAA;AAEJ,CAAC;;8CA9GCnD,GAAA,CAAAqD,kBAaK;IAXFzC,EAAI,EAAA0C,IAAA,CAAA1C,EAAA;IACJ,SAAKZ,GAAA,CAAAuD,cAAA,CAAED,IAAY,CAAAvC,YAAA;IACpByC,IAAK;IACJ,iBAAeF,IAAc,CAAAlC,UAAA;IAC7B,eAAe,EAAAkC,IAAA,CAAAjC,YAAA;IACfoC,WAAW,EAAAH,IAAA,CAAAvB,SAAA;IACX2B,OAAA,EAAK1D,GAAA,CAAA2D,aAAA,CAAOL,IAAiB,CAAAH,iBAAA;EAAA,IAE9BnD,GAAA,CAAA4D,UAAA,CAEON,IAAA,CAAAO,MAAA,iBAFP;IAAA,OAEO,CADL7D,GAAA,CAAA8D,kBAAA,eAAA9D,GAAA,CAAA+D,eAAA,CAAAT,IAAA,CAAAzB,YAAA,MAA+B;EAAA,iFAAA7B,GAAA,CAAAgE,KAAA,EAAAV,IAAA,CAAA5B,OAAtB,CAAY;AAAA;AAAA,IAAAuC,MAAA,kBAAAC,sBAAA,YAAAnE,SAAA,cAAAoE,WAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}