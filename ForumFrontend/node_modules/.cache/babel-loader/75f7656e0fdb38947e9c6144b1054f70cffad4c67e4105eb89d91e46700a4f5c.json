{"ast":null,"code":"'use strict';\n\nrequire(\"core-js/modules/es.object.define-property.js\");\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nvar util = require('./util.js');\nvar thumb = require('./thumb2.js');\nvar bar = require('./bar.js');\nvar constants = require('./constants.js');\nvar pluginVue_exportHelper = require('../../../_virtual/plugin-vue_export-helper.js');\nvar _sfc_main = /* @__PURE__ */vue.defineComponent({\n  __name: \"bar\",\n  props: bar.barProps,\n  setup: function setup(__props, _ref) {\n    var expose = _ref.expose;\n    var props = __props;\n    var scrollbar = vue.inject(constants.scrollbarContextKey);\n    var moveX = vue.ref(0);\n    var moveY = vue.ref(0);\n    var sizeWidth = vue.ref(\"\");\n    var sizeHeight = vue.ref(\"\");\n    var ratioY = vue.ref(1);\n    var ratioX = vue.ref(1);\n    var handleScroll = function handleScroll(wrap) {\n      if (wrap) {\n        var offsetHeight = wrap.offsetHeight - util.GAP;\n        var offsetWidth = wrap.offsetWidth - util.GAP;\n        moveY.value = wrap.scrollTop * 100 / offsetHeight * ratioY.value;\n        moveX.value = wrap.scrollLeft * 100 / offsetWidth * ratioX.value;\n      }\n    };\n    var update = function update() {\n      var wrap = scrollbar == null ? void 0 : scrollbar.wrapElement;\n      if (!wrap) return;\n      var offsetHeight = wrap.offsetHeight - util.GAP;\n      var offsetWidth = wrap.offsetWidth - util.GAP;\n      var originalHeight = Math.pow(offsetHeight, 2) / wrap.scrollHeight;\n      var originalWidth = Math.pow(offsetWidth, 2) / wrap.scrollWidth;\n      var height = Math.max(originalHeight, props.minSize);\n      var width = Math.max(originalWidth, props.minSize);\n      ratioY.value = originalHeight / (offsetHeight - originalHeight) / (height / (offsetHeight - height));\n      ratioX.value = originalWidth / (offsetWidth - originalWidth) / (width / (offsetWidth - width));\n      sizeHeight.value = height + util.GAP < offsetHeight ? \"\".concat(height, \"px\") : \"\";\n      sizeWidth.value = width + util.GAP < offsetWidth ? \"\".concat(width, \"px\") : \"\";\n    };\n    expose({\n      handleScroll: handleScroll,\n      update: update\n    });\n    return function (_ctx, _cache) {\n      return vue.openBlock(), vue.createElementBlock(vue.Fragment, null, [vue.createVNode(thumb[\"default\"], {\n        move: moveX.value,\n        ratio: ratioX.value,\n        size: sizeWidth.value,\n        always: _ctx.always\n      }, null, 8, [\"move\", \"ratio\", \"size\", \"always\"]), vue.createVNode(thumb[\"default\"], {\n        move: moveY.value,\n        ratio: ratioY.value,\n        size: sizeHeight.value,\n        vertical: \"\",\n        always: _ctx.always\n      }, null, 8, [\"move\", \"ratio\", \"size\", \"always\"])], 64);\n    };\n  }\n});\nvar Bar = /* @__PURE__ */pluginVue_exportHelper[\"default\"](_sfc_main, [[\"__file\", \"bar.vue\"]]);\nexports[\"default\"] = Bar;","map":{"version":3,"names":["scrollbar","vue","inject","constants","scrollbarContextKey","moveX","ref","moveY","sizeWidth","sizeHeight","ratioY","ratioX","handleScroll","wrap","offsetHeight","util","GAP","offsetWidth","value","scrollTop","scrollLeft","update","wrapElement","originalHeight","Math","pow","scrollHeight","originalWidth","scrollWidth","height","max","props","minSize","width","concat","expose"],"sources":["../../../../../../packages/components/scrollbar/src/bar.vue"],"sourcesContent":["<template>\n  <thumb :move=\"moveX\" :ratio=\"ratioX\" :size=\"sizeWidth\" :always=\"always\" />\n  <thumb\n    :move=\"moveY\"\n    :ratio=\"ratioY\"\n    :size=\"sizeHeight\"\n    vertical\n    :always=\"always\"\n  />\n</template>\n\n<script lang=\"ts\" setup>\nimport { inject, ref } from 'vue'\nimport { GAP } from './util'\nimport Thumb from './thumb.vue'\nimport { barProps } from './bar'\nimport { scrollbarContextKey } from './constants'\n\nconst props = defineProps(barProps)\n\nconst scrollbar = inject(scrollbarContextKey)\n\nconst moveX = ref(0)\nconst moveY = ref(0)\nconst sizeWidth = ref('')\nconst sizeHeight = ref('')\nconst ratioY = ref(1)\nconst ratioX = ref(1)\n\nconst handleScroll = (wrap: HTMLDivElement) => {\n  if (wrap) {\n    const offsetHeight = wrap.offsetHeight - GAP\n    const offsetWidth = wrap.offsetWidth - GAP\n\n    moveY.value = ((wrap.scrollTop * 100) / offsetHeight) * ratioY.value\n    moveX.value = ((wrap.scrollLeft * 100) / offsetWidth) * ratioX.value\n  }\n}\n\nconst update = () => {\n  const wrap = scrollbar?.wrapElement\n  if (!wrap) return\n  const offsetHeight = wrap.offsetHeight - GAP\n  const offsetWidth = wrap.offsetWidth - GAP\n\n  const originalHeight = offsetHeight ** 2 / wrap.scrollHeight\n  const originalWidth = offsetWidth ** 2 / wrap.scrollWidth\n  const height = Math.max(originalHeight, props.minSize)\n  const width = Math.max(originalWidth, props.minSize)\n\n  ratioY.value =\n    originalHeight /\n    (offsetHeight - originalHeight) /\n    (height / (offsetHeight - height))\n  ratioX.value =\n    originalWidth /\n    (offsetWidth - originalWidth) /\n    (width / (offsetWidth - width))\n\n  sizeHeight.value = height + GAP < offsetHeight ? `${height}px` : ''\n  sizeWidth.value = width + GAP < offsetWidth ? `${width}px` : ''\n}\n\ndefineExpose({\n  handleScroll,\n  update,\n})\n</script>\n"],"mappings":";;;;;;;;;;;;;;;;;;IAoBM,IAAAA,SAAA,GAAYC,GAAA,CAAAC,MAAA,CAAOC,SAAA,CAAAC,mBAAmB;IAEtC,IAAAC,KAAA,GAAQJ,GAAA,CAAAK,GAAA,CAAI,CAAC;IACb,IAAAC,KAAA,GAAQN,GAAA,CAAAK,GAAA,CAAI,CAAC;IACb,IAAAE,SAAA,GAAYP,GAAA,CAAAK,GAAA,CAAI,EAAE;IAClB,IAAAG,UAAA,GAAaR,GAAA,CAAAK,GAAA,CAAI,EAAE;IACnB,IAAAI,MAAA,GAAST,GAAA,CAAAK,GAAA,CAAI,CAAC;IACd,IAAAK,MAAA,GAASV,GAAA,CAAAK,GAAA,CAAI,CAAC;IAEd,IAAAM,YAAA,GAAe,SAAfA,aAAgBC,IAAyB;MAC7C,IAAIA,IAAM;QACF,IAAAC,YAAA,GAAeD,IAAA,CAAKC,YAAe,GAAAC,IAAA,CAAAC,GAAA;QACnC,IAAAC,WAAA,GAAcJ,IAAA,CAAKI,WAAc,GAAAF,IAAA,CAAAC,GAAA;QAEvCT,KAAA,CAAMW,KAAU,GAAAL,IAAA,CAAKM,SAAY,SAAOL,YAAA,GAAgBJ,MAAO,CAAAQ,KAAA;QAC/Db,KAAA,CAAMa,KAAU,GAAAL,IAAA,CAAKO,UAAa,SAAOH,WAAA,GAAeN,MAAO,CAAAO,KAAA;MAAA;IACjE,CACF;IAEA,IAAMG,MAAA,GAAS,SAATA,OAAA,EAAe;MACnB,IAAMR,IAAA,GAAOb,SAAW,oBAAAA,SAAA,CAAAsB,WAAA;MACxB,IAAI,CAACT,IAAM,EACL;MACA,IAAAC,YAAA,GAAAD,IAAmB,CAAcC,YAAA,GAAAC,IAAA,CAAAC,GAAA;MAEjC,IAAAC,WAAA,GAAAJ,IAAiC,CAAAI,WAAA,GAAAF,IAAA,CAAAC,GAAA;MACjC,IAAAO,cAAA,GAA+BC,IAAA,CAAAC,GAAA,CAAAX,YAAA,OAASD,IAAA,CAAAa,YAAA;MAC9C,IAAMC,aAAS,GAASH,IAAA,CAAAC,GAAA,CAAAR,WAAA,OAAAJ,IAAA,CAAsBe,WAAO;MACrD,IAAMC,MAAQ,GAAAL,IAAK,CAAIM,GAAA,CAAAP,cAAe,EAAAQ,KAAa,CAAAC,OAAA;MAEnD,IAAAC,KACE,GAAAT,IAAA,CAAAM,GAAA,CAAAH,aACgB,EAAAI,KAAA,CAAAC,OAAA;MAElBtB,MAAA,CAAOQ,KACL,GAAAK,cAAA,IACeT,YAAA,GAAAS,cAAA,KAAAM,MACL,IAAcf,YAAA,GAAAe,MAAA;MAE1BlB,MAAA,CAAAO,KAAA,GAAAS,aAA4B,IAAAV,WAAqB,GAAAU,aAAgB,KAAAM,KAAA,IAAAhB,WAAA,GAAAgB,KAAA;MACjExB,UAAU,CAAAS,KAAA,GAAgBW,MAAA,GAAAd,IAAA,CAAAC,GAAA,GAAoBF,YAAA,MAAAoB,MAAA,CAAGL,MAAY;MAC/DrB,SAAA,CAAAU,KAAA,GAAAe,KAAA,GAAAlB,IAAA,CAAAC,GAAA,GAAAC,WAAA,MAAAiB,MAAA,CAAAD,KAAA;IAEA,CAAa;IACXE,MAAA;MACAvB,YAAA,EAAAA,YAAA;MACDS,MAAA,EAAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}