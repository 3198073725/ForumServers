{"ast":null,"code":"'use strict';\n\nrequire(\"core-js/modules/es.number.constructor.js\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nvar index = require('../use-timeout/index.js');\nvar runtime = require('../../utils/vue/props/runtime.js');\nvar types = require('../../utils/types.js');\nvar useDelayedToggleProps = runtime.buildProps({\n  showAfter: {\n    type: Number,\n    \"default\": 0\n  },\n  hideAfter: {\n    type: Number,\n    \"default\": 200\n  },\n  autoClose: {\n    type: Number,\n    \"default\": 0\n  }\n});\nvar useDelayedToggle = function useDelayedToggle(_ref) {\n  var showAfter = _ref.showAfter,\n    hideAfter = _ref.hideAfter,\n    autoClose = _ref.autoClose,\n    open = _ref.open,\n    close = _ref.close;\n  var _index$useTimeout = index.useTimeout(),\n    registerTimeout = _index$useTimeout.registerTimeout;\n  var _index$useTimeout2 = index.useTimeout(),\n    registerTimeoutForAutoClose = _index$useTimeout2.registerTimeout,\n    cancelTimeoutForAutoClose = _index$useTimeout2.cancelTimeout;\n  var onOpen = function onOpen(event) {\n    registerTimeout(function () {\n      open(event);\n      var _autoClose = vue.unref(autoClose);\n      if (types.isNumber(_autoClose) && _autoClose > 0) {\n        registerTimeoutForAutoClose(function () {\n          close(event);\n        }, _autoClose);\n      }\n    }, vue.unref(showAfter));\n  };\n  var onClose = function onClose(event) {\n    cancelTimeoutForAutoClose();\n    registerTimeout(function () {\n      close(event);\n    }, vue.unref(hideAfter));\n  };\n  return {\n    onOpen: onOpen,\n    onClose: onClose\n  };\n};\nexports.useDelayedToggle = useDelayedToggle;\nexports.useDelayedToggleProps = useDelayedToggleProps;","map":{"version":3,"names":["useDelayedToggleProps","runtime","buildProps","showAfter","type","Number","hideAfter","autoClose","useDelayedToggle","_ref","open","close","_index$useTimeout","index","useTimeout","registerTimeout","_index$useTimeout2","registerTimeoutForAutoClose","cancelTimeoutForAutoClose","cancelTimeout","onOpen","event","_autoClose","vue","unref","types","isNumber","onClose"],"sources":["../../../../../packages/hooks/use-delayed-toggle/index.ts"],"sourcesContent":["import { unref } from 'vue'\nimport { buildProps, isNumber } from '@element-plus/utils'\nimport { useTimeout } from '../use-timeout'\n\nimport type { ExtractPropTypes, ToRefs } from 'vue'\n\nexport const useDelayedToggleProps = buildProps({\n  /**\n   * @description delay of appearance, in millisecond\n   */\n  showAfter: {\n    type: Number,\n    default: 0,\n  },\n  /**\n   * @description delay of disappear, in millisecond\n   */\n  hideAfter: {\n    type: Number,\n    default: 200,\n  },\n  /**\n   * @description disappear automatically, in millisecond\n   */\n  autoClose: {\n    type: Number,\n    default: 0,\n  },\n} as const)\n\nexport type UseDelayedToggleProps = {\n  open: (event?: Event) => void\n  close: (event?: Event) => void\n} & ToRefs<ExtractPropTypes<typeof useDelayedToggleProps>>\n\nexport const useDelayedToggle = ({\n  showAfter,\n  hideAfter,\n  autoClose,\n  open,\n  close,\n}: UseDelayedToggleProps) => {\n  const { registerTimeout } = useTimeout()\n  const {\n    registerTimeout: registerTimeoutForAutoClose,\n    cancelTimeout: cancelTimeoutForAutoClose,\n  } = useTimeout()\n\n  const onOpen = (event?: Event) => {\n    registerTimeout(() => {\n      open(event)\n\n      const _autoClose = unref(autoClose)\n      if (isNumber(_autoClose) && _autoClose > 0) {\n        registerTimeoutForAutoClose(() => {\n          close(event)\n        }, _autoClose)\n      }\n    }, unref(showAfter))\n  }\n\n  const onClose = (event?: Event) => {\n    cancelTimeoutForAutoClose()\n\n    registerTimeout(() => {\n      close(event)\n    }, unref(hideAfter))\n  }\n\n  return {\n    onOpen,\n    onClose,\n  }\n}\n"],"mappings":";;;;;;;;;;;AAGY,IAACA,qBAAqB,GAAGC,OAAA,CAAAC,UAAU,CAAC;EAC9CC,SAAS,EAAE;IACTC,IAAI,EAAEC,MAAM;IACZ,WAAS;EACb,CAAG;EACDC,SAAS,EAAE;IACTF,IAAI,EAAEC,MAAM;IACZ,WAAS;EACb,CAAG;EACDE,SAAS,EAAE;IACTH,IAAI,EAAEC,MAAM;IACZ,WAAS;EACb;AACA,CAAC;AACW,IAACG,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAAC,IAAA,EAMvB;EAAA,IALJN,SAAS,GAAAM,IAAA,CAATN,SAAS;IACTG,SAAS,GAAAG,IAAA,CAATH,SAAS;IACTC,SAAS,GAAAE,IAAA,CAATF,SAAS;IACTG,IAAI,GAAAD,IAAA,CAAJC,IAAI;IACJC,KAAK,GAAAF,IAAA,CAALE,KAAK;EAEL,IAAAC,iBAAA,GAA4BC,KAAA,CAAAC,UAAU,EAAE;IAAhCC,eAAe,GAAAH,iBAAA,CAAfG,eAAe;EACvB,IAAAC,kBAAA,GAGIH,KAAA,CAAAC,UAAU,EAAE;IAFGG,2BAA2B,GAAAD,kBAAA,CAA5CD,eAAe;IACAG,yBAAyB,GAAAF,kBAAA,CAAxCG,aAAa;EAEf,IAAMC,MAAM,GAAG,SAATA,MAAMA,CAAIC,KAAK,EAAK;IACxBN,eAAe,CAAC,YAAM;MACpBL,IAAI,CAACW,KAAK,CAAC;MACX,IAAMC,UAAU,GAAGC,GAAA,CAAAC,KAAK,CAACjB,SAAS,CAAC;MACnC,IAAIkB,KAAA,CAAAC,QAAQ,CAACJ,UAAU,CAAC,IAAIA,UAAU,GAAG,CAAC,EAAE;QAC1CL,2BAA2B,CAAC,YAAM;UAChCN,KAAK,CAACU,KAAK,CAAC;QACtB,CAAS,EAAEC,UAAU,CAAC;MACtB;IACA,CAAK,EAAEC,GAAA,CAAAC,KAAK,CAACrB,SAAS,CAAC,CAAC;EACxB,CAAG;EACD,IAAMwB,OAAO,GAAG,SAAVA,OAAOA,CAAIN,KAAK,EAAK;IACzBH,yBAAyB,EAAE;IAC3BH,eAAe,CAAC,YAAM;MACpBJ,KAAK,CAACU,KAAK,CAAC;IAClB,CAAK,EAAEE,GAAA,CAAAC,KAAK,CAAClB,SAAS,CAAC,CAAC;EACxB,CAAG;EACD,OAAO;IACLc,MAAM,EAANA,MAAM;IACNO,OAAO,EAAPA;EACJ,CAAG;AACH","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}