{"ast":null,"code":"'use strict';\n\nvar _objectSpread = require(\"H:/ForumServers/ForumFrontend/node_modules/@babel/runtime/helpers/objectSpread2.js\")[\"default\"];\nrequire(\"core-js/modules/es.array.find-index.js\");\nrequire(\"core-js/modules/es.array.for-each.js\");\nrequire(\"core-js/modules/es.array.push.js\");\nrequire(\"core-js/modules/es.array.splice.js\");\nrequire(\"core-js/modules/es.iterator.constructor.js\");\nrequire(\"core-js/modules/es.iterator.for-each.js\");\nrequire(\"core-js/modules/es.number.parse-int.js\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/es.object.values.js\");\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nvar notification = require('./notification2.js');\nvar notification$1 = require('./notification.js');\nvar core = require('@vueuse/core');\nvar shared = require('@vue/shared');\nvar types = require('../../../utils/types.js');\nvar error = require('../../../utils/error.js');\nvar notifications = {\n  \"top-left\": [],\n  \"top-right\": [],\n  \"bottom-left\": [],\n  \"bottom-right\": []\n};\nvar GAP_SIZE = 16;\nvar seed = 1;\nvar _notify = function notify() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var context = arguments.length > 1 ? arguments[1] : undefined;\n  if (!core.isClient) return {\n    close: function close() {\n      return void 0;\n    }\n  };\n  if (shared.isString(options) || vue.isVNode(options)) {\n    options = {\n      message: options\n    };\n  }\n  var position = options.position || \"top-right\";\n  var verticalOffset = options.offset || 0;\n  notifications[position].forEach(function (_ref) {\n    var vm2 = _ref.vm;\n    var _a;\n    verticalOffset += (((_a = vm2.el) == null ? void 0 : _a.offsetHeight) || 0) + GAP_SIZE;\n  });\n  verticalOffset += GAP_SIZE;\n  var id = \"notification_\".concat(seed++);\n  var userOnClose = options.onClose;\n  var props = _objectSpread(_objectSpread({}, options), {}, {\n    offset: verticalOffset,\n    id: id,\n    onClose: function onClose() {\n      close(id, position, userOnClose);\n    }\n  });\n  var appendTo = document.body;\n  if (types.isElement(options.appendTo)) {\n    appendTo = options.appendTo;\n  } else if (shared.isString(options.appendTo)) {\n    appendTo = document.querySelector(options.appendTo);\n  }\n  if (!types.isElement(appendTo)) {\n    error.debugWarn(\"ElNotification\", \"the appendTo option is not an HTMLElement. Falling back to document.body.\");\n    appendTo = document.body;\n  }\n  var container = document.createElement(\"div\");\n  var vm = vue.createVNode(notification[\"default\"], props, shared.isFunction(props.message) ? props.message : vue.isVNode(props.message) ? function () {\n    return props.message;\n  } : null);\n  vm.appContext = types.isUndefined(context) ? _notify._context : context;\n  vm.props.onDestroy = function () {\n    vue.render(null, container);\n  };\n  vue.render(vm, container);\n  notifications[position].push({\n    vm: vm\n  });\n  appendTo.appendChild(container.firstElementChild);\n  return {\n    close: function close() {\n      vm.component.exposed.visible.value = false;\n    }\n  };\n};\nnotification$1.notificationTypes.forEach(function (type) {\n  _notify[type] = function () {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var appContext = arguments.length > 1 ? arguments[1] : undefined;\n    if (shared.isString(options) || vue.isVNode(options)) {\n      options = {\n        message: options\n      };\n    }\n    return _notify(_objectSpread(_objectSpread({}, options), {}, {\n      type: type\n    }), appContext);\n  };\n});\nfunction close(id, position, userOnClose) {\n  var orientedNotifications = notifications[position];\n  var idx = orientedNotifications.findIndex(function (_ref2) {\n    var vm2 = _ref2.vm;\n    var _a;\n    return ((_a = vm2.component) == null ? void 0 : _a.props.id) === id;\n  });\n  if (idx === -1) return;\n  var vm = orientedNotifications[idx].vm;\n  if (!vm) return;\n  userOnClose == null ? void 0 : userOnClose(vm);\n  var removedHeight = vm.el.offsetHeight;\n  var verticalPos = position.split(\"-\")[0];\n  orientedNotifications.splice(idx, 1);\n  var len = orientedNotifications.length;\n  if (len < 1) return;\n  for (var i = idx; i < len; i++) {\n    var _orientedNotification = orientedNotifications[i].vm,\n      el = _orientedNotification.el,\n      component = _orientedNotification.component;\n    var pos = Number.parseInt(el.style[verticalPos], 10) - removedHeight - GAP_SIZE;\n    component.props.offset = pos;\n  }\n}\nfunction closeAll() {\n  for (var _i = 0, _Object$values = Object.values(notifications); _i < _Object$values.length; _i++) {\n    var orientedNotifications = _Object$values[_i];\n    orientedNotifications.forEach(function (_ref3) {\n      var vm = _ref3.vm;\n      vm.component.exposed.visible.value = false;\n    });\n  }\n}\n_notify.closeAll = closeAll;\n_notify._context = null;\nexports.close = close;\nexports.closeAll = closeAll;\nexports[\"default\"] = _notify;","map":{"version":3,"names":["notifications","GAP_SIZE","seed","notify","options","arguments","length","undefined","context","core","isClient","close","shared","isString","vue","isVNode","message","position","verticalOffset","offset","forEach","_ref","vm2","vm","_a","el","offsetHeight","id","concat","userOnClose","onClose","props","_objectSpread","appendTo","document","body","types","isElement","querySelector","error","debugWarn","container","createElement","createVNode","notification","isFunction","appContext","isUndefined","_context","onDestroy","render","push","appendChild","firstElementChild","component","exposed","visible","value","notification$1","notificationTypes","type","orientedNotifications","idx","findIndex","_ref2","removedHeight","verticalPos","split","splice","len","i","_orientedNotification","pos","Number","parseInt","style","closeAll","_i","_Object$values","Object","values","_ref3"],"sources":["../../../../../../packages/components/notification/src/notify.ts"],"sourcesContent":["import { createVNode, isVNode, render } from 'vue'\nimport {\n  debugWarn,\n  isClient,\n  isElement,\n  isFunction,\n  isString,\n  isUndefined,\n} from '@element-plus/utils'\nimport NotificationConstructor from './notification.vue'\nimport { notificationTypes } from './notification'\n\nimport type { Ref, VNode } from 'vue'\nimport type {\n  NotificationOptions,\n  NotificationProps,\n  NotificationQueue,\n  Notify,\n  NotifyFn,\n} from './notification'\n\n// This should be a queue but considering there were `non-autoclosable` notifications.\nconst notifications: Record<\n  NotificationOptions['position'],\n  NotificationQueue\n> = {\n  'top-left': [],\n  'top-right': [],\n  'bottom-left': [],\n  'bottom-right': [],\n}\n\n// the gap size between each notification\nconst GAP_SIZE = 16\nlet seed = 1\n\nconst notify: NotifyFn & Partial<Notify> = function (options = {}, context) {\n  if (!isClient) return { close: () => undefined }\n\n  if (isString(options) || isVNode(options)) {\n    options = { message: options }\n  }\n\n  const position = options.position || 'top-right'\n\n  let verticalOffset = options.offset || 0\n  notifications[position].forEach(({ vm }) => {\n    verticalOffset += (vm.el?.offsetHeight || 0) + GAP_SIZE\n  })\n  verticalOffset += GAP_SIZE\n\n  const id = `notification_${seed++}`\n  const userOnClose = options.onClose\n  const props: Partial<NotificationProps> = {\n    ...options,\n    offset: verticalOffset,\n    id,\n    onClose: () => {\n      close(id, position, userOnClose)\n    },\n  }\n\n  let appendTo: HTMLElement | null = document.body\n  if (isElement(options.appendTo)) {\n    appendTo = options.appendTo\n  } else if (isString(options.appendTo)) {\n    appendTo = document.querySelector(options.appendTo)\n  }\n\n  // should fallback to default value with a warning\n  if (!isElement(appendTo)) {\n    debugWarn(\n      'ElNotification',\n      'the appendTo option is not an HTMLElement. Falling back to document.body.'\n    )\n    appendTo = document.body\n  }\n\n  const container = document.createElement('div')\n\n  const vm = createVNode(\n    NotificationConstructor,\n    props,\n    isFunction(props.message)\n      ? props.message\n      : isVNode(props.message)\n      ? () => props.message\n      : null\n  )\n  vm.appContext = isUndefined(context) ? notify._context : context\n\n  // clean notification element preventing mem leak\n  vm.props!.onDestroy = () => {\n    render(null, container)\n  }\n\n  // instances will remove this item when close function gets called. So we do not need to worry about it.\n  render(vm, container)\n  notifications[position].push({ vm })\n  appendTo.appendChild(container.firstElementChild!)\n\n  return {\n    // instead of calling the onClose function directly, setting this value so that we can have the full lifecycle\n    // for out component, so that all closing steps will not be skipped.\n    close: () => {\n      ;(vm.component!.exposed as { visible: Ref<boolean> }).visible.value =\n        false\n    },\n  }\n}\nnotificationTypes.forEach((type) => {\n  notify[type] = (options = {}, appContext) => {\n    if (isString(options) || isVNode(options)) {\n      options = {\n        message: options,\n      }\n    }\n    return notify({ ...options, type }, appContext)\n  }\n})\n\n/**\n * This function gets called when user click `x` button or press `esc` or the time reached its limitation.\n * Emitted by transition@before-leave event so that we can fetch the current notification.offsetHeight, if this was called\n * by @after-leave the DOM element will be removed from the page thus we can no longer fetch the offsetHeight.\n * @param {String} id notification id to be closed\n * @param {Position} position the positioning strategy\n * @param {Function} userOnClose the callback called when close passed by user\n */\nexport function close(\n  id: string,\n  position: NotificationOptions['position'],\n  userOnClose?: (vm: VNode) => void\n): void {\n  // maybe we can store the index when inserting the vm to notification list.\n  const orientedNotifications = notifications[position]\n  const idx = orientedNotifications.findIndex(\n    ({ vm }) => vm.component?.props.id === id\n  )\n  if (idx === -1) return\n  const { vm } = orientedNotifications[idx]\n  if (!vm) return\n  // calling user's on close function before notification gets removed from DOM.\n  userOnClose?.(vm)\n\n  // note that this is called @before-leave, that's why we were able to fetch this property.\n  const removedHeight = vm.el!.offsetHeight\n  const verticalPos = position.split('-')[0]\n  orientedNotifications.splice(idx, 1)\n  const len = orientedNotifications.length\n  if (len < 1) return\n  // starting from the removing item.\n  for (let i = idx; i < len; i++) {\n    // new position equals the current offsetTop minus removed height plus 16px(the gap size between each item)\n    const { el, component } = orientedNotifications[i].vm\n    const pos =\n      Number.parseInt(el!.style[verticalPos], 10) - removedHeight - GAP_SIZE\n    component!.props.offset = pos\n  }\n}\n\nexport function closeAll(): void {\n  // loop through all directions, close them at once.\n  for (const orientedNotifications of Object.values(notifications)) {\n    orientedNotifications.forEach(({ vm }) => {\n      // same as the previous close method, we'd like to make sure lifecycle gets handle properly.\n      ;(vm.component!.exposed as { visible: Ref<boolean> }).visible.value =\n        false\n    })\n  }\n}\n\nnotify.closeAll = closeAll\nnotify._context = null\n\nexport default notify as Notify\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}