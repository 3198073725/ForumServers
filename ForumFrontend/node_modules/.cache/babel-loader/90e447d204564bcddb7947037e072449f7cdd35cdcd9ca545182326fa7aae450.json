{"ast":null,"code":"'use strict';\n\nvar _objectSpread = require(\"H:/ForumServers/ForumFrontend/node_modules/@babel/runtime/helpers/objectSpread2.js\")[\"default\"];\nrequire(\"core-js/modules/es.error.cause.js\");\nrequire(\"core-js/modules/es.error.to-string.js\");\nrequire(\"core-js/modules/es.array.concat.js\");\nrequire(\"core-js/modules/es.array.find.js\");\nrequire(\"core-js/modules/es.array.find-index.js\");\nrequire(\"core-js/modules/es.array.for-each.js\");\nrequire(\"core-js/modules/es.array.index-of.js\");\nrequire(\"core-js/modules/es.array.map.js\");\nrequire(\"core-js/modules/es.array.push.js\");\nrequire(\"core-js/modules/es.array.sort.js\");\nrequire(\"core-js/modules/es.array.splice.js\");\nrequire(\"core-js/modules/es.iterator.constructor.js\");\nrequire(\"core-js/modules/es.iterator.find.js\");\nrequire(\"core-js/modules/es.iterator.for-each.js\");\nrequire(\"core-js/modules/es.iterator.map.js\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nvar lodashUnified = require('lodash-unified');\nvar watcher = require('./watcher.js');\nvar index = require('../../../../hooks/use-namespace/index.js');\nfunction replaceColumn(array, column) {\n  return array.map(function (item) {\n    var _a;\n    if (item.id === column.id) {\n      return column;\n    } else if ((_a = item.children) == null ? void 0 : _a.length) {\n      item.children = replaceColumn(item.children, column);\n    }\n    return item;\n  });\n}\nfunction sortColumn(array) {\n  array.forEach(function (item) {\n    var _a, _b;\n    item.no = (_a = item.getColumnIndex) == null ? void 0 : _a.call(item);\n    if ((_b = item.children) == null ? void 0 : _b.length) {\n      sortColumn(item.children);\n    }\n  });\n  array.sort(function (cur, pre) {\n    return cur.no - pre.no;\n  });\n}\nfunction useStore() {\n  var instance = vue.getCurrentInstance();\n  var watcher$1 = watcher[\"default\"]();\n  var ns = index.useNamespace(\"table\");\n  var mutations = {\n    setData: function setData(states, data) {\n      var dataInstanceChanged = vue.unref(states._data) !== data;\n      states.data.value = data;\n      states._data.value = data;\n      instance.store.execQuery();\n      instance.store.updateCurrentRowData();\n      instance.store.updateExpandRows();\n      instance.store.updateTreeData(instance.store.states.defaultExpandAll.value);\n      if (vue.unref(states.reserveSelection)) {\n        instance.store.assertRowKey();\n        instance.store.updateSelectionByRowKey();\n      } else {\n        if (dataInstanceChanged) {\n          instance.store.clearSelection();\n        } else {\n          instance.store.cleanSelection();\n        }\n      }\n      instance.store.updateAllSelected();\n      if (instance.$ready) {\n        instance.store.scheduleLayout();\n      }\n    },\n    insertColumn: function insertColumn(states, column, parent, updateColumnOrder) {\n      var array = vue.unref(states._columns);\n      var newColumns = [];\n      if (!parent) {\n        array.push(column);\n        newColumns = array;\n      } else {\n        if (parent && !parent.children) {\n          parent.children = [];\n        }\n        parent.children.push(column);\n        newColumns = replaceColumn(array, parent);\n      }\n      sortColumn(newColumns);\n      states._columns.value = newColumns;\n      states.updateOrderFns.push(updateColumnOrder);\n      if (column.type === \"selection\") {\n        states.selectable.value = column.selectable;\n        states.reserveSelection.value = column.reserveSelection;\n      }\n      if (instance.$ready) {\n        instance.store.updateColumns();\n        instance.store.scheduleLayout();\n      }\n    },\n    updateColumnOrder: function updateColumnOrder(states, column) {\n      var _a;\n      var newColumnIndex = (_a = column.getColumnIndex) == null ? void 0 : _a.call(column);\n      if (newColumnIndex === column.no) return;\n      sortColumn(states._columns.value);\n      if (instance.$ready) {\n        instance.store.updateColumns();\n      }\n    },\n    removeColumn: function removeColumn(states, column, parent, updateColumnOrder) {\n      var array = vue.unref(states._columns) || [];\n      if (parent) {\n        parent.children.splice(parent.children.findIndex(function (item) {\n          return item.id === column.id;\n        }), 1);\n        vue.nextTick(function () {\n          var _a;\n          if (((_a = parent.children) == null ? void 0 : _a.length) === 0) {\n            delete parent.children;\n          }\n        });\n        states._columns.value = replaceColumn(array, parent);\n      } else {\n        var _index = array.indexOf(column);\n        if (_index > -1) {\n          array.splice(_index, 1);\n          states._columns.value = array;\n        }\n      }\n      var updateFnIndex = states.updateOrderFns.indexOf(updateColumnOrder);\n      updateFnIndex > -1 && states.updateOrderFns.splice(updateFnIndex, 1);\n      if (instance.$ready) {\n        instance.store.updateColumns();\n        instance.store.scheduleLayout();\n      }\n    },\n    sort: function sort(states, options) {\n      var prop = options.prop,\n        order = options.order,\n        init = options.init;\n      if (prop) {\n        var column = vue.unref(states.columns).find(function (column2) {\n          return column2.property === prop;\n        });\n        if (column) {\n          column.order = order;\n          instance.store.updateSort(column, prop, order);\n          instance.store.commit(\"changeSortCondition\", {\n            init: init\n          });\n        }\n      }\n    },\n    changeSortCondition: function changeSortCondition(states, options) {\n      var sortingColumn = states.sortingColumn,\n        sortProp = states.sortProp,\n        sortOrder = states.sortOrder;\n      var columnValue = vue.unref(sortingColumn),\n        propValue = vue.unref(sortProp),\n        orderValue = vue.unref(sortOrder);\n      if (lodashUnified.isNull(orderValue)) {\n        states.sortingColumn.value = null;\n        states.sortProp.value = null;\n      }\n      var ignore = {\n        filter: true\n      };\n      instance.store.execQuery(ignore);\n      if (!options || !(options.silent || options.init)) {\n        instance.emit(\"sort-change\", {\n          column: columnValue,\n          prop: propValue,\n          order: orderValue\n        });\n      }\n      instance.store.updateTableScrollY();\n    },\n    filterChange: function filterChange(_states, options) {\n      var column = options.column,\n        values = options.values,\n        silent = options.silent;\n      var newFilters = instance.store.updateFilters(column, values);\n      instance.store.execQuery();\n      if (!silent) {\n        instance.emit(\"filter-change\", newFilters);\n      }\n      instance.store.updateTableScrollY();\n    },\n    toggleAllSelection: function toggleAllSelection() {\n      instance.store.toggleAllSelection();\n    },\n    rowSelectedChanged: function rowSelectedChanged(_states, row) {\n      instance.store.toggleRowSelection(row);\n      instance.store.updateAllSelected();\n    },\n    setHoverRow: function setHoverRow(states, row) {\n      states.hoverRow.value = row;\n    },\n    setCurrentRow: function setCurrentRow(_states, row) {\n      instance.store.updateCurrentRow(row);\n    }\n  };\n  var commit = function commit(name) {\n    var mutations2 = instance.store.mutations;\n    if (mutations2[name]) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n      mutations2[name].apply(instance, [instance.store.states].concat(args));\n    } else {\n      throw new Error(\"Action not found: \".concat(name));\n    }\n  };\n  var updateTableScrollY = function updateTableScrollY() {\n    vue.nextTick(function () {\n      return instance.layout.updateScrollY.apply(instance.layout);\n    });\n  };\n  return _objectSpread(_objectSpread({\n    ns: ns\n  }, watcher$1), {}, {\n    mutations: mutations,\n    commit: commit,\n    updateTableScrollY: updateTableScrollY\n  });\n}\nexports[\"default\"] = useStore;","map":{"version":3,"names":["replaceColumn","array","column","map","item","_a","id","children","length","sortColumn","forEach","_b","no","getColumnIndex","call","sort","cur","pre","useStore","instance","vue","getCurrentInstance","watcher$1","watcher","ns","index","useNamespace","mutations","setData","states","data","dataInstanceChanged","unref","_data","value","store","execQuery","updateCurrentRowData","updateExpandRows","updateTreeData","defaultExpandAll","reserveSelection","assertRowKey","updateSelectionByRowKey","clearSelection","cleanSelection","updateAllSelected","$ready","scheduleLayout","insertColumn","parent","updateColumnOrder","_columns","newColumns","push","updateOrderFns","type","selectable","updateColumns","newColumnIndex","removeColumn","splice","findIndex","nextTick","indexOf","updateFnIndex","options","prop","order","init","columns","find","column2","property","updateSort","commit","changeSortCondition","sortingColumn","sortProp","sortOrder","columnValue","propValue","orderValue","lodashUnified","isNull","ignore","filter","silent","emit","updateTableScrollY","filterChange","_states","values","newFilters","updateFilters","toggleAllSelection","rowSelectedChanged","row","toggleRowSelection","setHoverRow","hoverRow","setCurrentRow","updateCurrentRow","name","mutations2","_len","arguments","args","Array","_key","apply","concat","Error","layout","updateScrollY","_objectSpread"],"sources":["../../../../../../../packages/components/table/src/store/index.ts"],"sourcesContent":["// @ts-nocheck\nimport { getCurrentInstance, nextTick, unref } from 'vue'\nimport { isNull } from 'lodash-unified'\nimport { useNamespace } from '@element-plus/hooks'\nimport useWatcher from './watcher'\n\nimport type { Ref } from 'vue'\nimport type { TableColumnCtx } from '../table-column/defaults'\nimport type { Filter, Sort, Table } from '../table/defaults'\n\ninterface WatcherPropsData<T> {\n  data: Ref<T[]>\n  rowKey: Ref<string>\n}\n\nfunction replaceColumn<T>(\n  array: TableColumnCtx<T>[],\n  column: TableColumnCtx<T>\n) {\n  return array.map((item) => {\n    if (item.id === column.id) {\n      return column\n    } else if (item.children?.length) {\n      item.children = replaceColumn(item.children, column)\n    }\n    return item\n  })\n}\n\nfunction sortColumn<T>(array: TableColumnCtx<T>[]) {\n  array.forEach((item) => {\n    item.no = item.getColumnIndex?.()\n    if (item.children?.length) {\n      sortColumn(item.children)\n    }\n  })\n  array.sort((cur, pre) => cur.no - pre.no)\n}\n\nfunction useStore<T>() {\n  const instance = getCurrentInstance() as Table<T>\n  const watcher = useWatcher<T>()\n  const ns = useNamespace('table')\n  type StoreStates = typeof watcher.states\n  const mutations = {\n    setData(states: StoreStates, data: T[]) {\n      const dataInstanceChanged = unref(states._data) !== data\n      states.data.value = data\n      states._data.value = data\n      instance.store.execQuery()\n      // 数据变化，更新部分数据。\n      // 没有使用 computed，而是手动更新部分数据 https://github.com/vuejs/vue/issues/6660#issuecomment-331417140\n      instance.store.updateCurrentRowData()\n      instance.store.updateExpandRows()\n      instance.store.updateTreeData(\n        instance.store.states.defaultExpandAll.value\n      )\n      if (unref(states.reserveSelection)) {\n        instance.store.assertRowKey()\n        instance.store.updateSelectionByRowKey()\n      } else {\n        if (dataInstanceChanged) {\n          instance.store.clearSelection()\n        } else {\n          instance.store.cleanSelection()\n        }\n      }\n      instance.store.updateAllSelected()\n      if (instance.$ready) {\n        instance.store.scheduleLayout()\n      }\n    },\n\n    insertColumn(\n      states: StoreStates,\n      column: TableColumnCtx<T>,\n      parent: TableColumnCtx<T>,\n      updateColumnOrder: () => void\n    ) {\n      const array = unref(states._columns)\n      let newColumns = []\n      if (!parent) {\n        array.push(column)\n        newColumns = array\n      } else {\n        if (parent && !parent.children) {\n          parent.children = []\n        }\n        parent.children.push(column)\n        newColumns = replaceColumn(array, parent)\n      }\n      sortColumn(newColumns)\n      states._columns.value = newColumns\n      states.updateOrderFns.push(updateColumnOrder)\n      if (column.type === 'selection') {\n        states.selectable.value = column.selectable\n        states.reserveSelection.value = column.reserveSelection\n      }\n      if (instance.$ready) {\n        instance.store.updateColumns() // hack for dynamics insert column\n        instance.store.scheduleLayout()\n      }\n    },\n\n    updateColumnOrder(states: StoreStates, column: TableColumnCtx<T>) {\n      const newColumnIndex = column.getColumnIndex?.()\n      if (newColumnIndex === column.no) return\n\n      sortColumn(states._columns.value)\n\n      if (instance.$ready) {\n        instance.store.updateColumns()\n      }\n    },\n\n    removeColumn(\n      states: StoreStates,\n      column: TableColumnCtx<T>,\n      parent: TableColumnCtx<T>,\n      updateColumnOrder: () => void\n    ) {\n      const array = unref(states._columns) || []\n      if (parent) {\n        parent.children.splice(\n          parent.children.findIndex((item) => item.id === column.id),\n          1\n        )\n        // fix #10699, delete parent.children immediately will trigger again\n        nextTick(() => {\n          if (parent.children?.length === 0) {\n            delete parent.children\n          }\n        })\n        states._columns.value = replaceColumn(array, parent)\n      } else {\n        const index = array.indexOf(column)\n        if (index > -1) {\n          array.splice(index, 1)\n          states._columns.value = array\n        }\n      }\n\n      const updateFnIndex = states.updateOrderFns.indexOf(updateColumnOrder)\n      updateFnIndex > -1 && states.updateOrderFns.splice(updateFnIndex, 1)\n\n      if (instance.$ready) {\n        instance.store.updateColumns() // hack for dynamics remove column\n        instance.store.scheduleLayout()\n      }\n    },\n\n    sort(states: StoreStates, options: Sort) {\n      const { prop, order, init } = options\n      if (prop) {\n        const column = unref(states.columns).find(\n          (column) => column.property === prop\n        )\n        if (column) {\n          column.order = order\n          instance.store.updateSort(column, prop, order)\n          instance.store.commit('changeSortCondition', { init })\n        }\n      }\n    },\n\n    changeSortCondition(states: StoreStates, options: Sort) {\n      // 修复 pr https://github.com/ElemeFE/element/pull/15012 导致的 bug\n      // https://github.com/element-plus/element-plus/pull/4640\n      const { sortingColumn, sortProp, sortOrder } = states\n      const columnValue = unref(sortingColumn),\n        propValue = unref(sortProp),\n        orderValue = unref(sortOrder)\n      if (isNull(orderValue)) {\n        states.sortingColumn.value = null\n        states.sortProp.value = null\n      }\n      const ignore = { filter: true }\n      instance.store.execQuery(ignore)\n\n      if (!options || !(options.silent || options.init)) {\n        instance.emit('sort-change', {\n          column: columnValue,\n          prop: propValue,\n          order: orderValue,\n        })\n      }\n\n      instance.store.updateTableScrollY()\n    },\n\n    filterChange(_states: StoreStates, options: Filter<T>) {\n      const { column, values, silent } = options\n      const newFilters = instance.store.updateFilters(column, values)\n      instance.store.execQuery()\n\n      if (!silent) {\n        instance.emit('filter-change', newFilters)\n      }\n      instance.store.updateTableScrollY()\n    },\n\n    toggleAllSelection() {\n      instance.store.toggleAllSelection()\n    },\n\n    rowSelectedChanged(_states, row: T) {\n      instance.store.toggleRowSelection(row)\n      instance.store.updateAllSelected()\n    },\n\n    setHoverRow(states: StoreStates, row: T) {\n      states.hoverRow.value = row\n    },\n\n    setCurrentRow(_states, row: T) {\n      instance.store.updateCurrentRow(row)\n    },\n  }\n  const commit = function (name: keyof typeof mutations, ...args) {\n    const mutations = instance.store.mutations\n    if (mutations[name]) {\n      mutations[name].apply(instance, [instance.store.states].concat(args))\n    } else {\n      throw new Error(`Action not found: ${name}`)\n    }\n  }\n  const updateTableScrollY = function () {\n    nextTick(() => instance.layout.updateScrollY.apply(instance.layout))\n  }\n  return {\n    ns,\n    ...watcher,\n    mutations,\n    commit,\n    updateTableScrollY,\n  }\n}\n\nexport default useStore\n\nclass HelperStore<T> {\n  Return = useStore<T>()\n}\n\ntype StoreFilter = Record<string, string[]>\ntype Store<T> = HelperStore<T>['Return']\nexport type { WatcherPropsData, Store, StoreFilter }\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}