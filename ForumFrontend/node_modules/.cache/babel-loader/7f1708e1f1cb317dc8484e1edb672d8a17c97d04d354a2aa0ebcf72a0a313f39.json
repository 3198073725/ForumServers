{"ast":null,"code":"'use strict';\n\nrequire(\"core-js/modules/es.symbol.js\");\nrequire(\"core-js/modules/es.symbol.description.js\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nvar index = require('../../../../hooks/use-namespace/index.js');\nvar shared = require('@vue/shared');\nvar style = require('../../../../utils/dom/style.js');\nvar dragEventsKey = Symbol(\"dragEvents\");\nfunction useDragNodeHandler(_ref) {\n  var props = _ref.props,\n    ctx = _ref.ctx,\n    el$ = _ref.el$,\n    dropIndicator$ = _ref.dropIndicator$,\n    store = _ref.store;\n  var ns = index.useNamespace(\"tree\");\n  var dragState = vue.ref({\n    showDropIndicator: false,\n    draggingNode: null,\n    dropNode: null,\n    allowDrop: true,\n    dropType: null\n  });\n  var treeNodeDragStart = function treeNodeDragStart(_ref2) {\n    var event = _ref2.event,\n      treeNode = _ref2.treeNode;\n    if (shared.isFunction(props.allowDrag) && !props.allowDrag(treeNode.node)) {\n      event.preventDefault();\n      return false;\n    }\n    event.dataTransfer.effectAllowed = \"move\";\n    try {\n      event.dataTransfer.setData(\"text/plain\", \"\");\n    } catch (e) {}\n    dragState.value.draggingNode = treeNode;\n    ctx.emit(\"node-drag-start\", treeNode.node, event);\n  };\n  var treeNodeDragOver = function treeNodeDragOver(_ref3) {\n    var event = _ref3.event,\n      treeNode = _ref3.treeNode;\n    var dropNode = treeNode;\n    var oldDropNode = dragState.value.dropNode;\n    if (oldDropNode && oldDropNode.node.id !== dropNode.node.id) {\n      style.removeClass(oldDropNode.$el, ns.is(\"drop-inner\"));\n    }\n    var draggingNode = dragState.value.draggingNode;\n    if (!draggingNode || !dropNode) return;\n    var dropPrev = true;\n    var dropInner = true;\n    var dropNext = true;\n    var userAllowDropInner = true;\n    if (shared.isFunction(props.allowDrop)) {\n      dropPrev = props.allowDrop(draggingNode.node, dropNode.node, \"prev\");\n      userAllowDropInner = dropInner = props.allowDrop(draggingNode.node, dropNode.node, \"inner\");\n      dropNext = props.allowDrop(draggingNode.node, dropNode.node, \"next\");\n    }\n    event.dataTransfer.dropEffect = dropInner || dropPrev || dropNext ? \"move\" : \"none\";\n    if ((dropPrev || dropInner || dropNext) && (oldDropNode == null ? void 0 : oldDropNode.node.id) !== dropNode.node.id) {\n      if (oldDropNode) {\n        ctx.emit(\"node-drag-leave\", draggingNode.node, oldDropNode.node, event);\n      }\n      ctx.emit(\"node-drag-enter\", draggingNode.node, dropNode.node, event);\n    }\n    if (dropPrev || dropInner || dropNext) {\n      dragState.value.dropNode = dropNode;\n    } else {\n      dragState.value.dropNode = null;\n    }\n    if (dropNode.node.nextSibling === draggingNode.node) {\n      dropNext = false;\n    }\n    if (dropNode.node.previousSibling === draggingNode.node) {\n      dropPrev = false;\n    }\n    if (dropNode.node.contains(draggingNode.node, false)) {\n      dropInner = false;\n    }\n    if (draggingNode.node === dropNode.node || draggingNode.node.contains(dropNode.node)) {\n      dropPrev = false;\n      dropInner = false;\n      dropNext = false;\n    }\n    var targetPosition = dropNode.$el.querySelector(\".\".concat(ns.be(\"node\", \"content\"))).getBoundingClientRect();\n    var treePosition = el$.value.getBoundingClientRect();\n    var dropType;\n    var prevPercent = dropPrev ? dropInner ? 0.25 : dropNext ? 0.45 : 1 : -1;\n    var nextPercent = dropNext ? dropInner ? 0.75 : dropPrev ? 0.55 : 0 : 1;\n    var indicatorTop = -9999;\n    var distance = event.clientY - targetPosition.top;\n    if (distance < targetPosition.height * prevPercent) {\n      dropType = \"before\";\n    } else if (distance > targetPosition.height * nextPercent) {\n      dropType = \"after\";\n    } else if (dropInner) {\n      dropType = \"inner\";\n    } else {\n      dropType = \"none\";\n    }\n    var iconPosition = dropNode.$el.querySelector(\".\".concat(ns.be(\"node\", \"expand-icon\"))).getBoundingClientRect();\n    var dropIndicator = dropIndicator$.value;\n    if (dropType === \"before\") {\n      indicatorTop = iconPosition.top - treePosition.top;\n    } else if (dropType === \"after\") {\n      indicatorTop = iconPosition.bottom - treePosition.top;\n    }\n    dropIndicator.style.top = \"\".concat(indicatorTop, \"px\");\n    dropIndicator.style.left = \"\".concat(iconPosition.right - treePosition.left, \"px\");\n    if (dropType === \"inner\") {\n      style.addClass(dropNode.$el, ns.is(\"drop-inner\"));\n    } else {\n      style.removeClass(dropNode.$el, ns.is(\"drop-inner\"));\n    }\n    dragState.value.showDropIndicator = dropType === \"before\" || dropType === \"after\";\n    dragState.value.allowDrop = dragState.value.showDropIndicator || userAllowDropInner;\n    dragState.value.dropType = dropType;\n    ctx.emit(\"node-drag-over\", draggingNode.node, dropNode.node, event);\n  };\n  var treeNodeDragEnd = function treeNodeDragEnd(event) {\n    var _dragState$value = dragState.value,\n      draggingNode = _dragState$value.draggingNode,\n      dropType = _dragState$value.dropType,\n      dropNode = _dragState$value.dropNode;\n    event.preventDefault();\n    if (event.dataTransfer) {\n      event.dataTransfer.dropEffect = \"move\";\n    }\n    if (draggingNode && dropNode) {\n      var draggingNodeCopy = {\n        data: draggingNode.node.data\n      };\n      if (dropType !== \"none\") {\n        draggingNode.node.remove();\n      }\n      if (dropType === \"before\") {\n        dropNode.node.parent.insertBefore(draggingNodeCopy, dropNode.node);\n      } else if (dropType === \"after\") {\n        dropNode.node.parent.insertAfter(draggingNodeCopy, dropNode.node);\n      } else if (dropType === \"inner\") {\n        dropNode.node.insertChild(draggingNodeCopy);\n      }\n      if (dropType !== \"none\") {\n        store.value.registerNode(draggingNodeCopy);\n        if (store.value.key) {\n          draggingNode.node.eachNode(function (node) {\n            var _a;\n            (_a = store.value.nodesMap[node.data[store.value.key]]) == null ? void 0 : _a.setChecked(node.checked, !store.value.checkStrictly);\n          });\n        }\n      }\n      style.removeClass(dropNode.$el, ns.is(\"drop-inner\"));\n      ctx.emit(\"node-drag-end\", draggingNode.node, dropNode.node, dropType, event);\n      if (dropType !== \"none\") {\n        ctx.emit(\"node-drop\", draggingNode.node, dropNode.node, dropType, event);\n      }\n    }\n    if (draggingNode && !dropNode) {\n      ctx.emit(\"node-drag-end\", draggingNode.node, null, dropType, event);\n    }\n    dragState.value.showDropIndicator = false;\n    dragState.value.draggingNode = null;\n    dragState.value.dropNode = null;\n    dragState.value.allowDrop = true;\n  };\n  vue.provide(dragEventsKey, {\n    treeNodeDragStart: treeNodeDragStart,\n    treeNodeDragOver: treeNodeDragOver,\n    treeNodeDragEnd: treeNodeDragEnd\n  });\n  return {\n    dragState: dragState\n  };\n}\nexports.dragEventsKey = dragEventsKey;\nexports.useDragNodeHandler = useDragNodeHandler;","map":{"version":3,"names":["dragEventsKey","Symbol","useDragNodeHandler","_ref","props","ctx","el$","dropIndicator$","store","ns","index","useNamespace","dragState","vue","ref","showDropIndicator","draggingNode","dropNode","allowDrop","dropType","treeNodeDragStart","_ref2","event","treeNode","shared","isFunction","allowDrag","node","preventDefault","dataTransfer","effectAllowed","setData","e","value","emit","treeNodeDragOver","_ref3","oldDropNode","id","style","removeClass","$el","is","dropPrev","dropInner","dropNext","userAllowDropInner","dropEffect","nextSibling","previousSibling","contains","targetPosition","querySelector","concat","be","getBoundingClientRect","treePosition","prevPercent","nextPercent","indicatorTop","distance","clientY","top","height","iconPosition","dropIndicator","bottom","left","right","addClass","treeNodeDragEnd","_dragState$value","draggingNodeCopy","data","remove","parent","insertBefore","insertAfter","insertChild","registerNode","key","eachNode","_a","nodesMap","setChecked","checked","checkStrictly","provide"],"sources":["../../../../../../../packages/components/tree/src/model/useDragNode.ts"],"sourcesContent":["// @ts-nocheck\nimport { provide, ref } from 'vue'\nimport { addClass, isFunction, removeClass } from '@element-plus/utils'\nimport { useNamespace } from '@element-plus/hooks'\nimport type { InjectionKey } from 'vue'\nimport type Node from './node'\nimport type { NodeDropType } from '../tree.type'\n\ninterface TreeNode {\n  node: Node\n  $el?: HTMLElement\n}\n\ninterface DragOptions {\n  event: DragEvent\n  treeNode: TreeNode\n}\n\nexport interface DragEvents {\n  treeNodeDragStart: (options: DragOptions) => void\n  treeNodeDragOver: (options: DragOptions) => void\n  treeNodeDragEnd: (event: DragEvent) => void\n}\n\nexport const dragEventsKey: InjectionKey<DragEvents> = Symbol('dragEvents')\n\nexport function useDragNodeHandler({ props, ctx, el$, dropIndicator$, store }) {\n  const ns = useNamespace('tree')\n  const dragState = ref({\n    showDropIndicator: false,\n    draggingNode: null,\n    dropNode: null,\n    allowDrop: true,\n    dropType: null,\n  })\n\n  const treeNodeDragStart = ({ event, treeNode }: DragOptions) => {\n    if (isFunction(props.allowDrag) && !props.allowDrag(treeNode.node)) {\n      event.preventDefault()\n      return false\n    }\n    event.dataTransfer.effectAllowed = 'move'\n\n    // wrap in try catch to address IE's error when first param is 'text/plain'\n    try {\n      // setData is required for draggable to work in FireFox\n      // the content has to be '' so dragging a node out of the tree won't open a new tab in FireFox\n      event.dataTransfer.setData('text/plain', '')\n    } catch {}\n    dragState.value.draggingNode = treeNode\n    ctx.emit('node-drag-start', treeNode.node, event)\n  }\n\n  const treeNodeDragOver = ({ event, treeNode }: DragOptions) => {\n    const dropNode = treeNode\n    const oldDropNode = dragState.value.dropNode\n    if (oldDropNode && oldDropNode.node.id !== dropNode.node.id) {\n      removeClass(oldDropNode.$el, ns.is('drop-inner'))\n    }\n    const draggingNode = dragState.value.draggingNode\n    if (!draggingNode || !dropNode) return\n\n    let dropPrev = true\n    let dropInner = true\n    let dropNext = true\n    let userAllowDropInner = true\n    if (isFunction(props.allowDrop)) {\n      dropPrev = props.allowDrop(draggingNode.node, dropNode.node, 'prev')\n      userAllowDropInner = dropInner = props.allowDrop(\n        draggingNode.node,\n        dropNode.node,\n        'inner'\n      )\n      dropNext = props.allowDrop(draggingNode.node, dropNode.node, 'next')\n    }\n    event.dataTransfer.dropEffect =\n      dropInner || dropPrev || dropNext ? 'move' : 'none'\n    if (\n      (dropPrev || dropInner || dropNext) &&\n      oldDropNode?.node.id !== dropNode.node.id\n    ) {\n      if (oldDropNode) {\n        ctx.emit('node-drag-leave', draggingNode.node, oldDropNode.node, event)\n      }\n      ctx.emit('node-drag-enter', draggingNode.node, dropNode.node, event)\n    }\n\n    if (dropPrev || dropInner || dropNext) {\n      dragState.value.dropNode = dropNode\n    } else {\n      // Reset dragState.value.dropNode to null when allowDrop is transfer from true to false.(For issue #14704)\n      dragState.value.dropNode = null\n    }\n\n    if (dropNode.node.nextSibling === draggingNode.node) {\n      dropNext = false\n    }\n    if (dropNode.node.previousSibling === draggingNode.node) {\n      dropPrev = false\n    }\n    if (dropNode.node.contains(draggingNode.node, false)) {\n      dropInner = false\n    }\n    if (\n      draggingNode.node === dropNode.node ||\n      draggingNode.node.contains(dropNode.node)\n    ) {\n      dropPrev = false\n      dropInner = false\n      dropNext = false\n    }\n\n    // find target node without children, just calc content node height\n    const targetPosition = dropNode.$el\n      .querySelector(`.${ns.be('node', 'content')}`)\n      .getBoundingClientRect()\n    const treePosition = el$.value.getBoundingClientRect()\n\n    let dropType: NodeDropType\n    const prevPercent = dropPrev ? (dropInner ? 0.25 : dropNext ? 0.45 : 1) : -1\n    const nextPercent = dropNext ? (dropInner ? 0.75 : dropPrev ? 0.55 : 0) : 1\n\n    let indicatorTop = -9999\n    const distance = event.clientY - targetPosition.top\n    if (distance < targetPosition.height * prevPercent) {\n      dropType = 'before'\n    } else if (distance > targetPosition.height * nextPercent) {\n      dropType = 'after'\n    } else if (dropInner) {\n      dropType = 'inner'\n    } else {\n      dropType = 'none'\n    }\n\n    const iconPosition = dropNode.$el\n      .querySelector(`.${ns.be('node', 'expand-icon')}`)\n      .getBoundingClientRect()\n    const dropIndicator = dropIndicator$.value\n    if (dropType === 'before') {\n      indicatorTop = iconPosition.top - treePosition.top\n    } else if (dropType === 'after') {\n      indicatorTop = iconPosition.bottom - treePosition.top\n    }\n    dropIndicator.style.top = `${indicatorTop}px`\n    dropIndicator.style.left = `${iconPosition.right - treePosition.left}px`\n\n    if (dropType === 'inner') {\n      addClass(dropNode.$el, ns.is('drop-inner'))\n    } else {\n      removeClass(dropNode.$el, ns.is('drop-inner'))\n    }\n\n    dragState.value.showDropIndicator =\n      dropType === 'before' || dropType === 'after'\n    dragState.value.allowDrop =\n      dragState.value.showDropIndicator || userAllowDropInner\n    dragState.value.dropType = dropType\n    ctx.emit('node-drag-over', draggingNode.node, dropNode.node, event)\n  }\n\n  const treeNodeDragEnd = (event: DragEvent) => {\n    const { draggingNode, dropType, dropNode } = dragState.value\n    event.preventDefault()\n\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1911486\n    if (event.dataTransfer) {\n      event.dataTransfer.dropEffect = 'move'\n    }\n\n    if (draggingNode && dropNode) {\n      const draggingNodeCopy = { data: draggingNode.node.data }\n      if (dropType !== 'none') {\n        draggingNode.node.remove()\n      }\n      if (dropType === 'before') {\n        dropNode.node.parent.insertBefore(draggingNodeCopy, dropNode.node)\n      } else if (dropType === 'after') {\n        dropNode.node.parent.insertAfter(draggingNodeCopy, dropNode.node)\n      } else if (dropType === 'inner') {\n        dropNode.node.insertChild(draggingNodeCopy)\n      }\n      if (dropType !== 'none') {\n        store.value.registerNode(draggingNodeCopy)\n        if (store.value.key) {\n          //restore checkbox state after dragging\n          draggingNode.node.eachNode((node) => {\n            store.value.nodesMap[node.data[store.value.key]]?.setChecked(\n              node.checked,\n              !store.value.checkStrictly\n            )\n          })\n        }\n      }\n\n      removeClass(dropNode.$el, ns.is('drop-inner'))\n\n      ctx.emit(\n        'node-drag-end',\n        draggingNode.node,\n        dropNode.node,\n        dropType,\n        event\n      )\n      if (dropType !== 'none') {\n        ctx.emit('node-drop', draggingNode.node, dropNode.node, dropType, event)\n      }\n    }\n    if (draggingNode && !dropNode) {\n      ctx.emit('node-drag-end', draggingNode.node, null, dropType, event)\n    }\n\n    dragState.value.showDropIndicator = false\n    dragState.value.draggingNode = null\n    dragState.value.dropNode = null\n    dragState.value.allowDrop = true\n  }\n\n  provide(dragEventsKey, {\n    treeNodeDragStart,\n    treeNodeDragOver,\n    treeNodeDragEnd,\n  })\n\n  return {\n    dragState,\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}