{"ast":null,"code":"import _typeof from \"H:/ForumServers/ForumFrontend/node_modules/@babel/runtime/helpers/esm/typeof.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.date.now.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.ends-with.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport axios from 'axios';\nimport router from '../router';\nimport { ElMessage } from 'element-plus';\n\n// 是否启用调试日志\nvar DEBUG = false;\n\n// 自定义日志函数，可以通过DEBUG开关控制\nvar log = function log() {\n  if (DEBUG) {\n    var _console;\n    (_console = console).log.apply(_console, arguments);\n  }\n};\n\n// 增强的消息去重机制\nvar messageTracker = {\n  lastMessage: '',\n  lastTime: 0,\n  messageQueue: [],\n  showMessage: function showMessage(message, type) {\n    var _this = this;\n    var source = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'unknown';\n    var now = Date.now();\n    var messageInfo = {\n      message: message,\n      type: type,\n      time: now,\n      source: source\n    };\n    log(\"\\u6D88\\u606F\\u89E6\\u53D1 [\".concat(source, \"]: \").concat(message, \" (\").concat(type, \")\"), messageInfo);\n\n    // 如果相同消息在3秒内出现，则不重复显示\n    if (message === this.lastMessage && now - this.lastTime < 3000) {\n      log(\"\\u6D88\\u606F\\u88AB\\u53BB\\u91CD: \".concat(message, \" (\\u4E0A\\u6B21\\u663E\\u793A\\u65F6\\u95F4: \").concat(new Date(this.lastTime).toLocaleTimeString(), \")\"));\n      return;\n    }\n\n    // 清理过期的消息\n    this.messageQueue = this.messageQueue.filter(function (msg) {\n      return now - msg.time < 5000;\n    });\n\n    // 检查队列中是否已有相同消息\n    var duplicate = this.messageQueue.find(function (msg) {\n      return msg.message === message;\n    });\n    if (duplicate) {\n      log(\"\\u961F\\u5217\\u4E2D\\u5DF2\\u5B58\\u5728\\u76F8\\u540C\\u6D88\\u606F: \".concat(message, \" (\\u6765\\u6E90: \").concat(duplicate.source, \")\"));\n      return;\n    }\n\n    // 添加到消息队列\n    this.messageQueue.push(messageInfo);\n    this.lastMessage = message;\n    this.lastTime = now;\n    log(\"\\u663E\\u793A\\u6D88\\u606F: \".concat(message));\n    ElMessage.closeAll(); // 关闭所有现有消息\n    ElMessage({\n      message: message,\n      type: type,\n      duration: type === 'error' ? 5 * 1000 : 3000,\n      onClose: function onClose() {\n        // 从队列中移除\n        _this.messageQueue = _this.messageQueue.filter(function (msg) {\n          return msg.message !== message;\n        });\n      }\n    });\n  }\n};\n\n// 全局挂载消息追踪器，用于其他组件直接使用\nwindow.messageTracker = messageTracker;\n\n// 创建自定义消息显示函数，替代直接调用ElMessage\nvar showSafeMessage = function showSafeMessage(options) {\n  if (typeof options === 'string') {\n    messageTracker.showMessage(options, 'info', 'safe-message');\n  } else {\n    messageTracker.showMessage(options.message, options.type || 'info', 'safe-message-' + (options.type || 'info'));\n  }\n};\n\n// 全局暴露，方便其他组件使用\nwindow.showSafeMessage = showSafeMessage;\n\n// 创建axios实例\nvar service = axios.create({\n  baseURL: process.env.NODE_ENV === 'development' ? 'http://localhost:8000' : '',\n  timeout: 15000,\n  // 增加超时时间到15秒\n  // 添加validateStatus选项，允许所有状态码通过，不抛出请求错误\n  validateStatus: function validateStatus(status) {\n    return status < 600; // 所有HTTP状态码都作为成功处理，包括500错误\n  }\n});\n\n// 请求拦截器\nservice.interceptors.request.use(function (config) {\n  var token = localStorage.getItem('token');\n\n  // 设置Authorization头\n  if (token) {\n    config.headers.Authorization = \"Bearer \".concat(token);\n  }\n\n  // 设置Content-Type头（如果没有设置）\n  if (config.method === 'post' || config.method === 'put' || config.method === 'patch') {\n    if (!config.headers['Content-Type'] && !(config.data instanceof FormData)) {\n      config.headers['Content-Type'] = 'application/json';\n    }\n  }\n  return config;\n}, function (error) {\n  console.error('请求错误:', error);\n  return Promise.reject(error);\n});\n\n// 辅助函数：判断是否为登出操作\nfunction isLogoutOperation(config) {\n  if (!config || !config.url || !config.method) {\n    return false;\n  }\n  var isPostMethod = config.method.toLowerCase() === 'post';\n  var isLogoutUrl = config.url.includes('/api/v1/auth/logout/');\n  log('请求拦截器检测登出操作:', {\n    url: config.url,\n    method: config.method,\n    isLogoutUrl: isLogoutUrl,\n    isPostMethod: isPostMethod,\n    isLogout: isLogoutUrl && isPostMethod\n  });\n  return isLogoutUrl && isPostMethod;\n}\n\n// 辅助函数：判断是否为公开内容请求（无需登录即可访问）\nfunction isPublicContentRequest(config) {\n  // 防止config为undefined\n  if (!config || !config.url || !config.method) {\n    log('无法判断是否为公开内容请求，配置不完整:', config);\n    // 默认返回true，对于无法判断的请求，视为公开内容\n    return true;\n  }\n\n  // 默认所有GET请求都视为公开内容\n  var isGetMethod = config.method.toLowerCase() === 'get';\n\n  // 如果是GET请求，直接返回true，允许所有GET请求不需要登录\n  if (isGetMethod) {\n    log('请求拦截器: GET请求被视为公开内容', config.url);\n    return true;\n  }\n\n  // 扩展公开URL匹配\n  var isPostsUrl = config.url.includes('/api/v1/posts');\n  var isBoardsUrl = config.url.includes('/api/v1/boards');\n  var isRankingUrl = config.url.includes('/api/v1/ranking');\n  var isCommentsUrl = config.url.includes('/api/v1/comments');\n  var isHomeUrl = config.url === '/' || config.url.endsWith('/index.html');\n  var isProfileUrl = config.url.includes('/api/v1/users/profile');\n  var isStaticUrl = config.url.includes('/static/') || config.url.includes('/media/');\n\n  // 所有GET请求 + 特定POST请求路径 = 公开内容请求\n  return isGetMethod || isPostsUrl || isBoardsUrl || isRankingUrl || isCommentsUrl || isHomeUrl || isProfileUrl || isStaticUrl;\n}\n\n// 响应拦截器\nservice.interceptors.response.use(function (response) {\n  // 检查是否为HTML错误页面（Django错误页面）\n  if (response.data && typeof response.data === 'string' && (response.data.includes('<!DOCTYPE html>') || response.data.includes('ContentNotRenderedError'))) {\n    console.error('响应拦截器检测到HTML错误页面:', {\n      url: response.config.url,\n      method: response.config.method,\n      status: response.status\n    });\n\n    // 提取错误信息\n    var errorMessage = '服务器错误';\n    if (response.data.includes('ContentNotRenderedError')) {\n      errorMessage = 'Django序列化错误: ContentNotRenderedError';\n      console.error('检测到Django ContentNotRenderedError，这通常是由于响应内容未正确渲染导致的');\n    }\n\n    // 对于公开内容请求，不显示错误消息\n    var _isPublic = isPublicContentRequest(response.config);\n    if (!_isPublic) {\n      messageTracker.showMessage(errorMessage, 'error', 'html-error-page');\n    } else {\n      log('公开内容请求收到HTML错误页面，不显示错误消息');\n    }\n\n    // 返回一个标准格式的错误响应，让调用方处理\n    return {\n      code: 500,\n      status: 500,\n      msg: errorMessage,\n      data: null\n    };\n  }\n\n  // 处理空响应\n  if (!response.data && response.status !== 204) {\n    log('API返回空响应:', {\n      url: response.config.url,\n      method: response.config.method,\n      status: response.status\n    });\n    return {\n      code: 0,\n      status: 0,\n      msg: '',\n      data: null\n    };\n  }\n\n  // 处理非JSON响应\n  if (response.data && typeof response.data === 'string' && response.headers['content-type'] && !response.headers['content-type'].includes('application/json')) {\n    log('非JSON响应:', {\n      url: response.config.url,\n      contentType: response.headers['content-type'],\n      status: response.status\n    });\n\n    // 返回一个包装好的响应\n    return {\n      code: 0,\n      status: response.status,\n      msg: '',\n      data: response.data\n    };\n  }\n  var res = response.data;\n  log('响应拦截器收到响应:', res);\n\n  // 检查是否为帖子创建请求\n  var isCreatePost = response.config.url === '/api/v1/posts/' && response.config.method.toLowerCase() === 'post';\n  if (isCreatePost) {\n    log('检测到帖子创建请求，响应数据:', res);\n    // 如果响应成功但没有返回帖子ID，尝试从响应中提取\n    if ((res.status === 0 || res.code === 0) && res.data) {\n      if (_typeof(res.data) === 'object' && !res.data.id) {\n        // 尝试从响应中提取帖子ID\n        var postId = res.data.post_id || res.data.postId || res.post_id || res.postId;\n        if (postId) {\n          res.data.id = postId;\n        }\n      }\n    }\n  }\n\n  // 检查是否为公开内容请求\n  var isPublic = isPublicContentRequest(response.config);\n  log('是否为公开内容请求:', isPublic);\n\n  // 检查是否有明确的错误状态\n  if (res.status !== undefined && res.status !== 0 && res.status !== 200 || res.code !== undefined && res.code !== 0 && res.code !== 200) {\n    console.error('API错误响应:', res);\n\n    // 401错误特殊处理 - 对于公开内容请求，不显示错误消息\n    if ((res.status === 401 || res.code === 401) && isPublic) {\n      log('公开内容401错误，不显示错误消息');\n      // 直接返回一个成功的空数据，让调用方继续处理\n      return {\n        code: 0,\n        status: 0,\n        msg: '',\n        data: null\n      };\n    }\n\n    // 如果是登出操作，即使返回错误也不显示错误消息\n    if (isLogoutOperation(response.config)) {\n      log('登出操作返回错误，不显示错误消息');\n      return res;\n    }\n\n    // 如果不应该抑制消息，则显示错误消息\n    if (!shouldSuppressMessage(response.config)) {\n      var errorMsg = res.msg || res.message || '请求失败';\n      messageTracker.showMessage(errorMsg, 'error', 'api-error');\n    }\n    return res;\n  }\n\n  // 检查是否为删除评论操作\n  if (isCommentDeleteOperation(response.config)) {\n    log('检测到评论删除操作，不显示成功消息');\n    return res;\n  }\n\n  // 检查是否为帖子操作\n  if (isPostOperation(response.config)) {\n    log('检测到帖子操作，不显示成功消息');\n    return res;\n  }\n\n  // 如果有成功消息且不是GET请求，显示成功消息\n  if (res.msg && response.config.method.toLowerCase() !== 'get' && !isPublic) {\n    messageTracker.showMessage(res.msg, 'success', 'api-success');\n  }\n  return res;\n}, function (error) {\n  console.error('请求错误:', error);\n\n  // 如果请求被取消，不显示错误消息\n  if (axios.isCancel(error)) {\n    log('请求被取消');\n    return Promise.reject(error);\n  }\n\n  // 检查是否为公开内容请求\n  var isPublic = error.config ? isPublicContentRequest(error.config) : false;\n\n  // 如果不是公开内容请求，显示错误消息\n  if (!isPublic && !shouldSuppressMessage(error.config)) {\n    var errorMsg = '网络错误，请检查您的网络连接';\n    if (error.response) {\n      // 服务器返回了错误状态码\n      switch (error.response.status) {\n        case 401:\n          errorMsg = '未授权，请重新登录';\n          // 清除token和用户信息\n          localStorage.removeItem('token');\n          localStorage.removeItem('userInfo');\n          // 跳转到登录页\n          router.push('/login');\n          break;\n        case 403:\n          errorMsg = '拒绝访问';\n          break;\n        case 404:\n          errorMsg = '请求的资源不存在';\n          break;\n        case 500:\n          errorMsg = '服务器错误';\n          break;\n        default:\n          errorMsg = \"\\u8BF7\\u6C42\\u5931\\u8D25 (\".concat(error.response.status, \")\");\n      }\n    } else if (error.request) {\n      // 请求已发出，但没有收到响应\n      errorMsg = '服务器无响应，请稍后重试';\n    }\n    messageTracker.showMessage(errorMsg, 'error', 'axios-error');\n  }\n\n  // 返回标准格式的错误对象\n  return {\n    code: -1,\n    status: error.response ? error.response.status : 500,\n    msg: error.message || '未知错误',\n    data: null\n  };\n});\n\n// 辅助函数：判断是否应该抑制消息\nfunction shouldSuppressMessage(config) {\n  if (!config) return false;\n\n  // 检查是否有自定义标记\n  return config.suppressErrorMessage === true || config.headers && config.headers['X-Suppress-Message'] === 'true';\n}\n\n// 辅助函数：判断是否为删除评论操作\nfunction isCommentDeleteOperation(config) {\n  if (!config || !config.url || !config.method) {\n    return false;\n  }\n  var isDeleteMethod = config.method.toLowerCase() === 'delete';\n  var isCommentUrl = config.url.includes('/api/v1/comments/');\n  return isDeleteMethod && isCommentUrl;\n}\n\n// 辅助函数：判断是否为帖子操作\nfunction isPostOperation(config) {\n  if (!config || !config.url || !config.method) {\n    return false;\n  }\n  var isPostMethod = config.method.toLowerCase() === 'post';\n  var isPutMethod = config.method.toLowerCase() === 'put';\n  var isPostUrl = config.url.includes('/api/v1/posts');\n  return (isPostMethod || isPutMethod) && isPostUrl;\n}\nexport default service;","map":{"version":3,"names":["axios","router","ElMessage","DEBUG","log","_console","console","apply","arguments","messageTracker","lastMessage","lastTime","messageQueue","showMessage","message","type","_this","source","length","undefined","now","Date","messageInfo","time","concat","toLocaleTimeString","filter","msg","duplicate","find","push","closeAll","duration","onClose","window","showSafeMessage","options","service","create","baseURL","process","env","NODE_ENV","timeout","validateStatus","status","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","method","data","FormData","error","Promise","reject","isLogoutOperation","url","isPostMethod","toLowerCase","isLogoutUrl","includes","isLogout","isPublicContentRequest","isGetMethod","isPostsUrl","isBoardsUrl","isRankingUrl","isCommentsUrl","isHomeUrl","endsWith","isProfileUrl","isStaticUrl","response","errorMessage","isPublic","code","contentType","res","isCreatePost","_typeof","id","postId","post_id","shouldSuppressMessage","errorMsg","isCommentDeleteOperation","isPostOperation","isCancel","removeItem","suppressErrorMessage","isDeleteMethod","isCommentUrl","isPutMethod","isPostUrl"],"sources":["H:/ForumServers/ForumFrontend/src/utils/request.js"],"sourcesContent":["import axios from 'axios'\nimport router from '../router'\nimport { ElMessage } from 'element-plus'\n\n// 是否启用调试日志\nconst DEBUG = false;\n\n// 自定义日志函数，可以通过DEBUG开关控制\nconst log = (...args) => {\n  if (DEBUG) {\n    console.log(...args);\n  }\n};\n\n// 增强的消息去重机制\nconst messageTracker = {\n  lastMessage: '',\n  lastTime: 0,\n  messageQueue: [],\n  showMessage(message, type, source = 'unknown') {\n    const now = Date.now();\n    const messageInfo = { message, type, time: now, source };\n    \n    log(`消息触发 [${source}]: ${message} (${type})`, messageInfo);\n    \n    // 如果相同消息在3秒内出现，则不重复显示\n    if (message === this.lastMessage && now - this.lastTime < 3000) {\n      log(`消息被去重: ${message} (上次显示时间: ${new Date(this.lastTime).toLocaleTimeString()})`);\n      return;\n    }\n    \n    // 清理过期的消息\n    this.messageQueue = this.messageQueue.filter(msg => now - msg.time < 5000);\n    \n    // 检查队列中是否已有相同消息\n    const duplicate = this.messageQueue.find(msg => msg.message === message);\n    if (duplicate) {\n      log(`队列中已存在相同消息: ${message} (来源: ${duplicate.source})`);\n      return;\n    }\n    \n    // 添加到消息队列\n    this.messageQueue.push(messageInfo);\n    this.lastMessage = message;\n    this.lastTime = now;\n    \n    log(`显示消息: ${message}`);\n    ElMessage.closeAll(); // 关闭所有现有消息\n    ElMessage({\n      message: message,\n      type: type,\n      duration: type === 'error' ? 5 * 1000 : 3000,\n      onClose: () => {\n        // 从队列中移除\n        this.messageQueue = this.messageQueue.filter(msg => msg.message !== message);\n      }\n    });\n  }\n};\n\n// 全局挂载消息追踪器，用于其他组件直接使用\nwindow.messageTracker = messageTracker;\n\n// 创建自定义消息显示函数，替代直接调用ElMessage\nconst showSafeMessage = (options) => {\n  if (typeof options === 'string') {\n    messageTracker.showMessage(options, 'info', 'safe-message');\n  } else {\n    messageTracker.showMessage(\n      options.message, \n      options.type || 'info', \n      'safe-message-' + (options.type || 'info')\n    );\n  }\n};\n\n// 全局暴露，方便其他组件使用\nwindow.showSafeMessage = showSafeMessage;\n\n// 创建axios实例\nconst service = axios.create({\n  baseURL: process.env.NODE_ENV === 'development' ? 'http://localhost:8000' : '',\n  timeout: 15000, // 增加超时时间到15秒\n  // 添加validateStatus选项，允许所有状态码通过，不抛出请求错误\n  validateStatus: function (status) {\n    return status < 600 // 所有HTTP状态码都作为成功处理，包括500错误\n  }\n})\n\n// 请求拦截器\nservice.interceptors.request.use(\n  config => {\n    const token = localStorage.getItem('token')\n    \n    // 设置Authorization头\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`\n    }\n\n    // 设置Content-Type头（如果没有设置）\n    if (config.method === 'post' || config.method === 'put' || config.method === 'patch') {\n      if (!config.headers['Content-Type'] && !(config.data instanceof FormData)) {\n        config.headers['Content-Type'] = 'application/json'\n      }\n    }\n\n    return config\n  },\n  error => {\n    console.error('请求错误:', error)\n    return Promise.reject(error)\n  }\n)\n\n// 辅助函数：判断是否为登出操作\nfunction isLogoutOperation(config) {\n  if (!config || !config.url || !config.method) {\n    return false\n  }\n  \n  const isPostMethod = config.method.toLowerCase() === 'post'\n  const isLogoutUrl = config.url.includes('/api/v1/auth/logout/')\n  \n  log('请求拦截器检测登出操作:', {\n    url: config.url,\n    method: config.method,\n    isLogoutUrl,\n    isPostMethod,\n    isLogout: isLogoutUrl && isPostMethod\n  })\n  \n  return isLogoutUrl && isPostMethod\n}\n\n// 辅助函数：判断是否为公开内容请求（无需登录即可访问）\nfunction isPublicContentRequest(config) {\n  // 防止config为undefined\n  if (!config || !config.url || !config.method) {\n    log('无法判断是否为公开内容请求，配置不完整:', config)\n    // 默认返回true，对于无法判断的请求，视为公开内容\n    return true\n  }\n  \n  // 默认所有GET请求都视为公开内容\n  const isGetMethod = config.method.toLowerCase() === 'get'\n  \n  // 如果是GET请求，直接返回true，允许所有GET请求不需要登录\n  if (isGetMethod) {\n    log('请求拦截器: GET请求被视为公开内容', config.url);\n    return true;\n  }\n  \n  // 扩展公开URL匹配\n  const isPostsUrl = config.url.includes('/api/v1/posts') \n  const isBoardsUrl = config.url.includes('/api/v1/boards')\n  const isRankingUrl = config.url.includes('/api/v1/ranking')\n  const isCommentsUrl = config.url.includes('/api/v1/comments')\n  const isHomeUrl = config.url === '/' || config.url.endsWith('/index.html')\n  const isProfileUrl = config.url.includes('/api/v1/users/profile')\n  const isStaticUrl = config.url.includes('/static/') || config.url.includes('/media/')\n  \n  // 所有GET请求 + 特定POST请求路径 = 公开内容请求\n  return isGetMethod || (\n    (isPostsUrl || isBoardsUrl || isRankingUrl || \n    isCommentsUrl || isHomeUrl || isProfileUrl || isStaticUrl)\n  )\n}\n\n// 响应拦截器\nservice.interceptors.response.use(\n  response => {\n    // 检查是否为HTML错误页面（Django错误页面）\n    if (response.data && typeof response.data === 'string' && \n        (response.data.includes('<!DOCTYPE html>') || \n         response.data.includes('ContentNotRenderedError'))) {\n      console.error('响应拦截器检测到HTML错误页面:', {\n        url: response.config.url,\n        method: response.config.method,\n        status: response.status\n      });\n      \n      // 提取错误信息\n      let errorMessage = '服务器错误';\n      if (response.data.includes('ContentNotRenderedError')) {\n        errorMessage = 'Django序列化错误: ContentNotRenderedError';\n        console.error('检测到Django ContentNotRenderedError，这通常是由于响应内容未正确渲染导致的');\n      }\n      \n      // 对于公开内容请求，不显示错误消息\n      const isPublic = isPublicContentRequest(response.config);\n      if (!isPublic) {\n        messageTracker.showMessage(errorMessage, 'error', 'html-error-page');\n      } else {\n        log('公开内容请求收到HTML错误页面，不显示错误消息');\n      }\n      \n      // 返回一个标准格式的错误响应，让调用方处理\n      return {\n        code: 500,\n        status: 500,\n        msg: errorMessage,\n        data: null\n      };\n    }\n    \n    // 处理空响应\n    if (!response.data && response.status !== 204) {\n      log('API返回空响应:', {\n        url: response.config.url,\n        method: response.config.method,\n        status: response.status\n      });\n      \n      return {\n        code: 0,\n        status: 0,\n        msg: '',\n        data: null\n      };\n    }\n    \n    // 处理非JSON响应\n    if (response.data && typeof response.data === 'string' && response.headers['content-type'] && \n        !response.headers['content-type'].includes('application/json')) {\n      log('非JSON响应:', {\n        url: response.config.url,\n        contentType: response.headers['content-type'],\n        status: response.status\n      });\n      \n      // 返回一个包装好的响应\n      return {\n        code: 0,\n        status: response.status,\n        msg: '',\n        data: response.data\n      };\n    }\n    \n    const res = response.data\n    log('响应拦截器收到响应:', res)\n    \n    // 检查是否为帖子创建请求\n    const isCreatePost = response.config.url === '/api/v1/posts/' && \n                        response.config.method.toLowerCase() === 'post';\n    if (isCreatePost) {\n      log('检测到帖子创建请求，响应数据:', res);\n      // 如果响应成功但没有返回帖子ID，尝试从响应中提取\n      if ((res.status === 0 || res.code === 0) && res.data) {\n        if (typeof res.data === 'object' && !res.data.id) {\n          // 尝试从响应中提取帖子ID\n          const postId = res.data.post_id || res.data.postId || res.post_id || res.postId;\n          if (postId) {\n            res.data.id = postId;\n          }\n        }\n      }\n    }\n    \n    // 检查是否为公开内容请求\n    const isPublic = isPublicContentRequest(response.config);\n    log('是否为公开内容请求:', isPublic);\n    \n    // 检查是否有明确的错误状态\n    if ((res.status !== undefined && res.status !== 0 && res.status !== 200) || \n        (res.code !== undefined && res.code !== 0 && res.code !== 200)) {\n      console.error('API错误响应:', res)\n      \n      // 401错误特殊处理 - 对于公开内容请求，不显示错误消息\n      if ((res.status === 401 || res.code === 401) && isPublic) {\n        log('公开内容401错误，不显示错误消息')\n        // 直接返回一个成功的空数据，让调用方继续处理\n        return {\n          code: 0,\n          status: 0,\n          msg: '',\n          data: null\n        }\n      }\n      \n      // 如果是登出操作，即使返回错误也不显示错误消息\n      if (isLogoutOperation(response.config)) {\n        log('登出操作返回错误，不显示错误消息')\n        return res\n      }\n      \n      // 如果不应该抑制消息，则显示错误消息\n      if (!shouldSuppressMessage(response.config)) {\n        const errorMsg = res.msg || res.message || '请求失败'\n        messageTracker.showMessage(errorMsg, 'error', 'api-error')\n      }\n      \n      return res\n    }\n    \n    // 检查是否为删除评论操作\n    if (isCommentDeleteOperation(response.config)) {\n      log('检测到评论删除操作，不显示成功消息')\n      return res\n    }\n    \n    // 检查是否为帖子操作\n    if (isPostOperation(response.config)) {\n      log('检测到帖子操作，不显示成功消息')\n      return res\n    }\n    \n    // 如果有成功消息且不是GET请求，显示成功消息\n    if (res.msg && response.config.method.toLowerCase() !== 'get' && !isPublic) {\n      messageTracker.showMessage(res.msg, 'success', 'api-success')\n    }\n    \n    return res\n  },\n  error => {\n    console.error('请求错误:', error)\n    \n    // 如果请求被取消，不显示错误消息\n    if (axios.isCancel(error)) {\n      log('请求被取消')\n      return Promise.reject(error)\n    }\n    \n    // 检查是否为公开内容请求\n    const isPublic = error.config ? isPublicContentRequest(error.config) : false\n    \n    // 如果不是公开内容请求，显示错误消息\n    if (!isPublic && !shouldSuppressMessage(error.config)) {\n      let errorMsg = '网络错误，请检查您的网络连接'\n      \n      if (error.response) {\n        // 服务器返回了错误状态码\n        switch (error.response.status) {\n          case 401:\n            errorMsg = '未授权，请重新登录'\n            // 清除token和用户信息\n            localStorage.removeItem('token')\n            localStorage.removeItem('userInfo')\n            // 跳转到登录页\n            router.push('/login')\n            break\n          case 403:\n            errorMsg = '拒绝访问'\n            break\n          case 404:\n            errorMsg = '请求的资源不存在'\n            break\n          case 500:\n            errorMsg = '服务器错误'\n            break\n          default:\n            errorMsg = `请求失败 (${error.response.status})`\n        }\n      } else if (error.request) {\n        // 请求已发出，但没有收到响应\n        errorMsg = '服务器无响应，请稍后重试'\n      }\n      \n      messageTracker.showMessage(errorMsg, 'error', 'axios-error')\n    }\n    \n    // 返回标准格式的错误对象\n    return {\n      code: -1,\n      status: error.response ? error.response.status : 500,\n      msg: error.message || '未知错误',\n      data: null\n    }\n  }\n)\n\n// 辅助函数：判断是否应该抑制消息\nfunction shouldSuppressMessage(config) {\n  if (!config) return false\n  \n  // 检查是否有自定义标记\n  return config.suppressErrorMessage === true || \n         (config.headers && config.headers['X-Suppress-Message'] === 'true')\n}\n\n// 辅助函数：判断是否为删除评论操作\nfunction isCommentDeleteOperation(config) {\n  if (!config || !config.url || !config.method) {\n    return false\n  }\n  \n  const isDeleteMethod = config.method.toLowerCase() === 'delete'\n  const isCommentUrl = config.url.includes('/api/v1/comments/')\n  \n  return isDeleteMethod && isCommentUrl\n}\n\n// 辅助函数：判断是否为帖子操作\nfunction isPostOperation(config) {\n  if (!config || !config.url || !config.method) {\n    return false\n  }\n  \n  const isPostMethod = config.method.toLowerCase() === 'post'\n  const isPutMethod = config.method.toLowerCase() === 'put'\n  const isPostUrl = config.url.includes('/api/v1/posts')\n  \n  return (isPostMethod || isPutMethod) && isPostUrl\n}\n\nexport default service\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}