{"ast":null,"code":"import \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.string.starts-with.js\";\nimport { computed } from 'vue';\n\n// 是否启用调试日志\nvar DEBUG = false;\n\n// 自定义日志函数，可以通过DEBUG开关控制\nvar log = function log() {\n  if (DEBUG) {\n    var _console;\n    (_console = console).log.apply(_console, arguments);\n  }\n};\nexport default {\n  name: 'UserAvatar',\n  props: {\n    user: {\n      type: Object,\n      required: true\n    },\n    size: {\n      type: [Number, String],\n      \"default\": 'default'\n    }\n  },\n  setup: function setup(props) {\n    // 处理头像URL，确保使用完整路径\n    var processedAvatarUrl = computed(function () {\n      var _props$user;\n      var avatarUrl = (_props$user = props.user) === null || _props$user === void 0 ? void 0 : _props$user.avatar_url;\n      if (!avatarUrl) return '';\n\n      // 如果已经是完整URL，直接返回\n      if (avatarUrl.startsWith('http')) {\n        return avatarUrl;\n      }\n\n      // 否则添加后端服务器地址\n      return \"http://localhost:8000\".concat(avatarUrl);\n    });\n\n    // 获取用于显示的文本（用户昵称或用户名的首字母）\n    var fallbackText = computed(function () {\n      var _props$user$nickname, _props$user$username;\n      if (!props.user) return 'U';\n      return ((_props$user$nickname = props.user.nickname) === null || _props$user$nickname === void 0 ? void 0 : _props$user$nickname.charAt(0)) || ((_props$user$username = props.user.username) === null || _props$user$username === void 0 ? void 0 : _props$user$username.charAt(0)) || 'U';\n    });\n\n    // 处理头像加载错误\n    var handleError = function handleError() {\n      log('头像加载失败，使用文字替代');\n    };\n    return {\n      processedAvatarUrl: processedAvatarUrl,\n      fallbackText: fallbackText,\n      handleError: handleError\n    };\n  }\n};","map":{"version":3,"names":["computed","DEBUG","log","_console","console","apply","arguments","name","props","user","type","Object","required","size","Number","String","setup","processedAvatarUrl","_props$user","avatarUrl","avatar_url","startsWith","concat","fallbackText","_props$user$nickname","_props$user$username","nickname","charAt","username","handleError"],"sources":["H:\\ForumServers\\ForumFrontend\\src\\components\\UserAvatar.vue"],"sourcesContent":["<template>\n  <el-avatar \n    :size=\"size\" \n    :src=\"processedAvatarUrl\" \n    @error=\"handleError\"\n  >\n    {{ fallbackText }}\n  </el-avatar>\n</template>\n\n<script>\nimport { computed } from 'vue'\n\n// 是否启用调试日志\nconst DEBUG = false;\n\n// 自定义日志函数，可以通过DEBUG开关控制\nconst log = (...args) => {\n  if (DEBUG) {\n    console.log(...args);\n  }\n};\n\nexport default {\n  name: 'UserAvatar',\n  props: {\n    user: {\n      type: Object,\n      required: true\n    },\n    size: {\n      type: [Number, String],\n      default: 'default'\n    }\n  },\n  setup(props) {\n    // 处理头像URL，确保使用完整路径\n    const processedAvatarUrl = computed(() => {\n      const avatarUrl = props.user?.avatar_url\n      if (!avatarUrl) return ''\n      \n      // 如果已经是完整URL，直接返回\n      if (avatarUrl.startsWith('http')) {\n        return avatarUrl\n      }\n      \n      // 否则添加后端服务器地址\n      return `http://localhost:8000${avatarUrl}`\n    })\n\n    // 获取用于显示的文本（用户昵称或用户名的首字母）\n    const fallbackText = computed(() => {\n      if (!props.user) return 'U'\n      return props.user.nickname?.charAt(0) || props.user.username?.charAt(0) || 'U'\n    })\n\n    // 处理头像加载错误\n    const handleError = () => {\n      log('头像加载失败，使用文字替代')\n    }\n\n    return {\n      processedAvatarUrl,\n      fallbackText,\n      handleError\n    }\n  }\n}\n</script>\n\n<style scoped>\n/* 可以添加自定义样式 */\n</style>\n"],"mappings":";;AAWA,SAASA,QAAO,QAAS,KAAI;;AAE7B;AACA,IAAMC,KAAI,GAAI,KAAK;;AAEnB;AACA,IAAMC,GAAE,GAAI,SAANA,GAAEA,CAAA,EAAiB;EACvB,IAAID,KAAK,EAAE;IAAA,IAAAE,QAAA;IACT,CAAAA,QAAA,GAAAC,OAAO,EAACF,GAAG,CAAAG,KAAA,CAAAF,QAAA,EAAAG,SAAQ,CAAC;EACtB;AACF,CAAC;AAED,eAAe;EACbC,IAAI,EAAE,YAAY;EAClBC,KAAK,EAAE;IACLC,IAAI,EAAE;MACJC,IAAI,EAAEC,MAAM;MACZC,QAAQ,EAAE;IACZ,CAAC;IACDC,IAAI,EAAE;MACJH,IAAI,EAAE,CAACI,MAAM,EAAEC,MAAM,CAAC;MACtB,WAAS;IACX;EACF,CAAC;EACDC,KAAK,WAALA,KAAKA,CAACR,KAAK,EAAE;IACX;IACA,IAAMS,kBAAiB,GAAIjB,QAAQ,CAAC,YAAM;MAAA,IAAAkB,WAAA;MACxC,IAAMC,SAAQ,IAAAD,WAAA,GAAIV,KAAK,CAACC,IAAI,cAAAS,WAAA,uBAAVA,WAAA,CAAYE,UAAS;MACvC,IAAI,CAACD,SAAS,EAAE,OAAO,EAAC;;MAExB;MACA,IAAIA,SAAS,CAACE,UAAU,CAAC,MAAM,CAAC,EAAE;QAChC,OAAOF,SAAQ;MACjB;;MAEA;MACA,+BAAAG,MAAA,CAA+BH,SAAS;IAC1C,CAAC;;IAED;IACA,IAAMI,YAAW,GAAIvB,QAAQ,CAAC,YAAM;MAAA,IAAAwB,oBAAA,EAAAC,oBAAA;MAClC,IAAI,CAACjB,KAAK,CAACC,IAAI,EAAE,OAAO,GAAE;MAC1B,OAAO,EAAAe,oBAAA,GAAAhB,KAAK,CAACC,IAAI,CAACiB,QAAQ,cAAAF,oBAAA,uBAAnBA,oBAAA,CAAqBG,MAAM,CAAC,CAAC,QAAAF,oBAAA,GAAKjB,KAAK,CAACC,IAAI,CAACmB,QAAQ,cAAAH,oBAAA,uBAAnBA,oBAAA,CAAqBE,MAAM,CAAC,CAAC,MAAK,GAAE;IAC/E,CAAC;;IAED;IACA,IAAME,WAAU,GAAI,SAAdA,WAAUA,CAAA,EAAU;MACxB3B,GAAG,CAAC,eAAe;IACrB;IAEA,OAAO;MACLe,kBAAkB,EAAlBA,kBAAkB;MAClBM,YAAY,EAAZA,YAAY;MACZM,WAAU,EAAVA;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}