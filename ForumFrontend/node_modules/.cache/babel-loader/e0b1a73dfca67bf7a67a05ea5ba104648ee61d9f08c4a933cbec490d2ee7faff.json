{"ast":null,"code":"'use strict';\n\nvar _classCallCheck = require(\"H:/ForumServers/ForumFrontend/node_modules/@babel/runtime/helpers/classCallCheck.js\")[\"default\"];\nvar _createClass = require(\"H:/ForumServers/ForumFrontend/node_modules/@babel/runtime/helpers/createClass.js\")[\"default\"];\nrequire(\"core-js/modules/es.array.concat.js\");\nrequire(\"core-js/modules/es.array.find.js\");\nrequire(\"core-js/modules/es.array.for-each.js\");\nrequire(\"core-js/modules/es.array.map.js\");\nrequire(\"core-js/modules/es.array.push.js\");\nrequire(\"core-js/modules/es.array.reduce.js\");\nrequire(\"core-js/modules/es.iterator.constructor.js\");\nrequire(\"core-js/modules/es.iterator.find.js\");\nrequire(\"core-js/modules/es.iterator.for-each.js\");\nrequire(\"core-js/modules/es.iterator.map.js\");\nrequire(\"core-js/modules/es.iterator.reduce.js\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar lodashUnified = require('lodash-unified');\nvar node = require('./node.js');\nvar _flatNodes = function flatNodes(nodes, leafOnly) {\n  return nodes.reduce(function (res, node) {\n    if (node.isLeaf) {\n      res.push(node);\n    } else {\n      !leafOnly && res.push(node);\n      res = res.concat(_flatNodes(node.children, leafOnly));\n    }\n    return res;\n  }, []);\n};\nvar Store = /*#__PURE__*/function () {\n  function Store(data, config) {\n    var _this = this;\n    _classCallCheck(this, Store);\n    this.config = config;\n    var nodes = (data || []).map(function (nodeData) {\n      return new node[\"default\"](nodeData, _this.config);\n    });\n    this.nodes = nodes;\n    this.allNodes = _flatNodes(nodes, false);\n    this.leafNodes = _flatNodes(nodes, true);\n  }\n  return _createClass(Store, [{\n    key: \"getNodes\",\n    value: function getNodes() {\n      return this.nodes;\n    }\n  }, {\n    key: \"getFlattedNodes\",\n    value: function getFlattedNodes(leafOnly) {\n      return leafOnly ? this.leafNodes : this.allNodes;\n    }\n  }, {\n    key: \"appendNode\",\n    value: function appendNode(nodeData, parentNode) {\n      var node$1 = parentNode ? parentNode.appendChild(nodeData) : new node[\"default\"](nodeData, this.config);\n      if (!parentNode) this.nodes.push(node$1);\n      this.appendAllNodesAndLeafNodes(node$1);\n    }\n  }, {\n    key: \"appendNodes\",\n    value: function appendNodes(nodeDataList, parentNode) {\n      var _this2 = this;\n      nodeDataList.forEach(function (nodeData) {\n        return _this2.appendNode(nodeData, parentNode);\n      });\n    }\n  }, {\n    key: \"appendAllNodesAndLeafNodes\",\n    value: function appendAllNodesAndLeafNodes(node) {\n      var _this3 = this;\n      this.allNodes.push(node);\n      node.isLeaf && this.leafNodes.push(node);\n      if (node.children) {\n        node.children.forEach(function (subNode) {\n          _this3.appendAllNodesAndLeafNodes(subNode);\n        });\n      }\n    }\n  }, {\n    key: \"getNodeByValue\",\n    value: function getNodeByValue(value) {\n      var leafOnly = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (!value && value !== 0) return null;\n      var node = this.getFlattedNodes(leafOnly).find(function (node2) {\n        return lodashUnified.isEqual(node2.value, value) || lodashUnified.isEqual(node2.pathValues, value);\n      });\n      return node || null;\n    }\n  }, {\n    key: \"getSameNode\",\n    value: function getSameNode(node) {\n      if (!node) return null;\n      var node_ = this.getFlattedNodes(false).find(function (_ref) {\n        var value = _ref.value,\n          level = _ref.level;\n        return lodashUnified.isEqual(node.value, value) && node.level === level;\n      });\n      return node_ || null;\n    }\n  }]);\n}();\nexports[\"default\"] = Store;","map":{"version":3,"names":["flatNodes","nodes","leafOnly","reduce","res","node","isLeaf","push","concat","children","Store","data","config","_this","_classCallCheck","map","nodeData","allNodes","leafNodes","_createClass","key","value","getNodes","getFlattedNodes","appendNode","parentNode","node$1","appendChild","appendAllNodesAndLeafNodes","appendNodes","nodeDataList","_this2","forEach","_this3","subNode","getNodeByValue","arguments","length","undefined","find","node2","lodashUnified","isEqual","pathValues","getSameNode","node_","_ref","level"],"sources":["../../../../../../packages/components/cascader-panel/src/store.ts"],"sourcesContent":["import { isEqual } from 'lodash-unified'\nimport Node from './node'\n\nimport type { Nullable } from '@element-plus/utils'\nimport type {\n  CascaderConfig,\n  CascaderNodePathValue,\n  CascaderNodeValue,\n  CascaderOption,\n} from './node'\n\nconst flatNodes = (nodes: Node[], leafOnly: boolean) => {\n  return nodes.reduce((res, node) => {\n    if (node.isLeaf) {\n      res.push(node)\n    } else {\n      !leafOnly && res.push(node)\n      res = res.concat(flatNodes(node.children, leafOnly))\n    }\n    return res\n  }, [] as Node[])\n}\n\nexport default class Store {\n  readonly nodes: Node[]\n  readonly allNodes: Node[]\n  readonly leafNodes: Node[]\n\n  constructor(data: CascaderOption[], readonly config: CascaderConfig) {\n    const nodes = (data || []).map(\n      (nodeData) => new Node(nodeData, this.config)\n    )\n    this.nodes = nodes\n    this.allNodes = flatNodes(nodes, false)\n    this.leafNodes = flatNodes(nodes, true)\n  }\n\n  getNodes() {\n    return this.nodes\n  }\n\n  getFlattedNodes(leafOnly: boolean) {\n    return leafOnly ? this.leafNodes : this.allNodes\n  }\n\n  appendNode(nodeData: CascaderOption, parentNode?: Node) {\n    const node = parentNode\n      ? parentNode.appendChild(nodeData)\n      : new Node(nodeData, this.config)\n\n    if (!parentNode) this.nodes.push(node)\n\n    this.appendAllNodesAndLeafNodes(node)\n  }\n\n  appendNodes(nodeDataList: CascaderOption[], parentNode: Node) {\n    nodeDataList.forEach((nodeData) => this.appendNode(nodeData, parentNode))\n  }\n\n  appendAllNodesAndLeafNodes(node: Node) {\n    this.allNodes.push(node)\n    node.isLeaf && this.leafNodes.push(node)\n    if (node.children) {\n      node.children.forEach((subNode) => {\n        this.appendAllNodesAndLeafNodes(subNode)\n      })\n    }\n  }\n\n  // when checkStrictly, leaf node first\n  getNodeByValue(\n    value: CascaderNodeValue | CascaderNodePathValue,\n    leafOnly = false\n  ): Nullable<Node> {\n    if (!value && value !== 0) return null\n\n    const node = this.getFlattedNodes(leafOnly).find(\n      (node) => isEqual(node.value, value) || isEqual(node.pathValues, value)\n    )\n\n    return node || null\n  }\n\n  getSameNode(node: Node): Nullable<Node> {\n    if (!node) return null\n\n    const node_ = this.getFlattedNodes(false).find(\n      ({ value, level }) => isEqual(node.value, value) && node.level === level\n    )\n\n    return node_ || null\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}