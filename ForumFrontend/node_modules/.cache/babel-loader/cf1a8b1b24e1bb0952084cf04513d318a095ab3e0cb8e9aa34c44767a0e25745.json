{"ast":null,"code":"import _objectSpread from \"H:/ForumServers/ForumFrontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport { ref, watch, onMounted } from 'vue';\nimport { QuillEditor } from '@vueup/vue-quill';\nimport '@vueup/vue-quill/dist/vue-quill.snow.css';\nimport { defaultQuillOptions } from '@/utils/quill-config';\nexport default {\n  name: 'RichTextEditor',\n  components: {\n    QuillEditor: QuillEditor\n  },\n  props: {\n    modelValue: {\n      type: String,\n      \"default\": ''\n    },\n    disabled: {\n      type: Boolean,\n      \"default\": false\n    }\n  },\n  emits: ['update:modelValue', 'change'],\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit;\n    var content = ref(props.modelValue);\n    var quillEditor = ref(null);\n    watch(function () {\n      return props.modelValue;\n    }, function (newValue) {\n      if (newValue !== content.value) {\n        content.value = newValue;\n      }\n    });\n    var handleChange = function handleChange(delta, oldDelta, source) {\n      if (source === 'user') {\n        emit('update:modelValue', content.value);\n        emit('change', content.value);\n      }\n    };\n\n    // 使用默认配置并添加自定义设置\n    var editorOption = _objectSpread(_objectSpread({}, defaultQuillOptions), {}, {\n      readOnly: props.disabled\n    });\n    onMounted(function () {\n      // 初始化时设置内容\n      if (props.modelValue && quillEditor.value) {\n        quillEditor.value.setContents(props.modelValue);\n      }\n\n      // 添加警告监听器，捕获并屏蔽Quill相关警告\n      var originalWarn = console.warn;\n      console.warn = function (msg) {\n        if (msg && typeof msg === 'string' && (msg.includes('DOMNodeInserted') || msg.includes('Listener added for a') || msg.includes('mutation event'))) {\n          // 忽略Quill相关警告\n          return;\n        }\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n        originalWarn.call.apply(originalWarn, [console, msg].concat(args));\n      };\n    });\n    return {\n      content: content,\n      editorOption: editorOption,\n      handleChange: handleChange,\n      quillEditor: quillEditor\n    };\n  }\n};","map":{"version":3,"names":["ref","watch","onMounted","QuillEditor","defaultQuillOptions","name","components","props","modelValue","type","String","disabled","Boolean","emits","setup","_ref","emit","content","quillEditor","newValue","value","handleChange","delta","oldDelta","source","editorOption","_objectSpread","readOnly","setContents","originalWarn","console","warn","msg","includes","_len","arguments","length","args","Array","_key","call","apply","concat"],"sources":["H:\\ForumServers\\ForumFrontend\\src\\components\\RichTextEditor.vue"],"sourcesContent":["<template>\n  <div class=\"rich-text-editor\">\n    <quill-editor\n      :content=\"content\"\n      @update:content=\"val => content = val\"\n      :options=\"editorOption\"\n      @textChange=\"handleChange\"\n      :disabled=\"disabled\"\n      ref=\"quillEditor\"\n    />\n  </div>\n</template>\n\n<script>\nimport { ref, watch, onMounted } from 'vue'\nimport { QuillEditor } from '@vueup/vue-quill'\nimport '@vueup/vue-quill/dist/vue-quill.snow.css'\nimport { defaultQuillOptions } from '@/utils/quill-config'\n\nexport default {\n  name: 'RichTextEditor',\n  components: {\n    QuillEditor\n  },\n  props: {\n    modelValue: {\n      type: String,\n      default: ''\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['update:modelValue', 'change'],\n  setup(props, { emit }) {\n    const content = ref(props.modelValue)\n    const quillEditor = ref(null)\n\n    watch(() => props.modelValue, (newValue) => {\n      if (newValue !== content.value) {\n        content.value = newValue\n      }\n    })\n\n    const handleChange = (delta, oldDelta, source) => {\n      if (source === 'user') {\n        emit('update:modelValue', content.value)\n        emit('change', content.value)\n      }\n    }\n\n    // 使用默认配置并添加自定义设置\n    const editorOption = {\n      ...defaultQuillOptions,\n      readOnly: props.disabled\n    }\n\n    onMounted(() => {\n      // 初始化时设置内容\n      if (props.modelValue && quillEditor.value) {\n        quillEditor.value.setContents(props.modelValue)\n      }\n      \n      // 添加警告监听器，捕获并屏蔽Quill相关警告\n      const originalWarn = console.warn;\n      console.warn = function(msg, ...args) {\n        if (msg && typeof msg === 'string' && \n            (msg.includes('DOMNodeInserted') || \n             msg.includes('Listener added for a') ||\n             msg.includes('mutation event'))) {\n          // 忽略Quill相关警告\n          return;\n        }\n        originalWarn.call(console, msg, ...args);\n      };\n    })\n\n    return {\n      content,\n      editorOption,\n      handleChange,\n      quillEditor\n    }\n  }\n}\n</script>\n\n<style scoped>\n.rich-text-editor {\n  width: 100%;\n}\n\n:deep(.ql-container) {\n  min-height: 300px;\n  font-size: 16px;\n  line-height: 1.5;\n}\n\n:deep(.ql-editor) {\n  min-height: 300px;\n  padding: 12px 15px;\n}\n\n:deep(.ql-toolbar) {\n  border-top-left-radius: 4px;\n  border-top-right-radius: 4px;\n  background-color: #f8f9fa;\n}\n\n:deep(.ql-container) {\n  border-bottom-left-radius: 4px;\n  border-bottom-right-radius: 4px;\n}\n\n:deep(.ql-editor p) {\n  margin-bottom: 1em;\n}\n\n:deep(.ql-editor img) {\n  max-width: 100%;\n  height: auto;\n}\n\n:deep(.ql-editor blockquote) {\n  border-left: 4px solid #ccc;\n  margin: 0;\n  padding-left: 16px;\n}\n\n:deep(.ql-editor pre.ql-syntax) {\n  background-color: #f8f9fa;\n  border-radius: 4px;\n  padding: 12px;\n  margin: 8px 0;\n}\n</style> "],"mappings":";;;;AAcA,SAASA,GAAG,EAAEC,KAAK,EAAEC,SAAQ,QAAS,KAAI;AAC1C,SAASC,WAAU,QAAS,kBAAiB;AAC7C,OAAO,0CAAyC;AAChD,SAASC,mBAAkB,QAAS,sBAAqB;AAEzD,eAAe;EACbC,IAAI,EAAE,gBAAgB;EACtBC,UAAU,EAAE;IACVH,WAAU,EAAVA;EACF,CAAC;EACDI,KAAK,EAAE;IACLC,UAAU,EAAE;MACVC,IAAI,EAAEC,MAAM;MACZ,WAAS;IACX,CAAC;IACDC,QAAQ,EAAE;MACRF,IAAI,EAAEG,OAAO;MACb,WAAS;IACX;EACF,CAAC;EACDC,KAAK,EAAE,CAAC,mBAAmB,EAAE,QAAQ,CAAC;EACtCC,KAAK,WAALA,KAAKA,CAACP,KAAK,EAAAQ,IAAA,EAAY;IAAA,IAARC,IAAG,GAAAD,IAAA,CAAHC,IAAG;IAChB,IAAMC,OAAM,GAAIjB,GAAG,CAACO,KAAK,CAACC,UAAU;IACpC,IAAMU,WAAU,GAAIlB,GAAG,CAAC,IAAI;IAE5BC,KAAK,CAAC;MAAA,OAAMM,KAAK,CAACC,UAAU;IAAA,GAAE,UAACW,QAAQ,EAAK;MAC1C,IAAIA,QAAO,KAAMF,OAAO,CAACG,KAAK,EAAE;QAC9BH,OAAO,CAACG,KAAI,GAAID,QAAO;MACzB;IACF,CAAC;IAED,IAAME,YAAW,GAAI,SAAfA,YAAWA,CAAKC,KAAK,EAAEC,QAAQ,EAAEC,MAAM,EAAK;MAChD,IAAIA,MAAK,KAAM,MAAM,EAAE;QACrBR,IAAI,CAAC,mBAAmB,EAAEC,OAAO,CAACG,KAAK;QACvCJ,IAAI,CAAC,QAAQ,EAAEC,OAAO,CAACG,KAAK;MAC9B;IACF;;IAEA;IACA,IAAMK,YAAW,GAAAC,aAAA,CAAAA,aAAA,KACZtB,mBAAmB;MACtBuB,QAAQ,EAAEpB,KAAK,CAACI;IAAO,EACzB;IAEAT,SAAS,CAAC,YAAM;MACd;MACA,IAAIK,KAAK,CAACC,UAAS,IAAKU,WAAW,CAACE,KAAK,EAAE;QACzCF,WAAW,CAACE,KAAK,CAACQ,WAAW,CAACrB,KAAK,CAACC,UAAU;MAChD;;MAEA;MACA,IAAMqB,YAAW,GAAIC,OAAO,CAACC,IAAI;MACjCD,OAAO,CAACC,IAAG,GAAI,UAASC,GAAG,EAAW;QACpC,IAAIA,GAAE,IAAK,OAAOA,GAAE,KAAM,QAAO,KAC5BA,GAAG,CAACC,QAAQ,CAAC,iBAAiB,KAC9BD,GAAG,CAACC,QAAQ,CAAC,sBAAsB,KACnCD,GAAG,CAACC,QAAQ,CAAC,gBAAgB,CAAC,CAAC,EAAE;UACpC;UACA;QACF;QAAA,SAAAC,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAP8BC,IAAI,OAAAC,KAAA,CAAAJ,IAAA,OAAAA,IAAA,WAAAK,IAAA,MAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA;UAAJF,IAAI,CAAAE,IAAA,QAAAJ,SAAA,CAAAI,IAAA;QAAA;QAQlCV,YAAY,CAACW,IAAI,CAAAC,KAAA,CAAjBZ,YAAY,GAAMC,OAAO,EAAEE,GAAG,EAAAU,MAAA,CAAKL,IAAI,EAAC;MAC1C,CAAC;IACH,CAAC;IAED,OAAO;MACLpB,OAAO,EAAPA,OAAO;MACPQ,YAAY,EAAZA,YAAY;MACZJ,YAAY,EAAZA,YAAY;MACZH,WAAU,EAAVA;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}