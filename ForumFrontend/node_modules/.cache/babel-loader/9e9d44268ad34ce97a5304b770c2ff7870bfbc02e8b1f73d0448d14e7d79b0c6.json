{"ast":null,"code":"import _objectSpread from \"H:/ForumServers/ForumFrontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.includes.js\";\n/**\r\n * Quill编辑器全局配置\r\n * 用于解决Quill中的警告和配置问题\r\n */\n\n// 默认的Quill配置选项\nexport var defaultQuillOptions = {\n  theme: 'snow',\n  modules: {\n    toolbar: [['bold', 'italic', 'underline', 'strike'], ['blockquote', 'code-block'], [{\n      'header': 1\n    }, {\n      'header': 2\n    }], [{\n      'list': 'ordered'\n    }, {\n      'list': 'bullet'\n    }], [{\n      'script': 'sub'\n    }, {\n      'script': 'super'\n    }], [{\n      'indent': '-1'\n    }, {\n      'indent': '+1'\n    }], [{\n      'direction': 'rtl'\n    }], [{\n      'size': ['small', false, 'large', 'huge']\n    }], [{\n      'header': [1, 2, 3, 4, 5, 6, false]\n    }], [{\n      'color': []\n    }, {\n      'background': []\n    }], [{\n      'font': []\n    }], [{\n      'align': []\n    }], ['clean'], ['link', 'image']]\n  },\n  placeholder: '请输入内容...',\n  scrollingContainer: 'html',\n  bounds: document.body,\n  // 使用 MutationObserver 替代已弃用的 DOM 事件\n  experimental: {\n    useModernScrollingApi: true,\n    useMutationObserver: true\n  }\n};\n\n// 初始化Quill，应用全局配置\nexport function initQuill() {\n  if (typeof window === 'undefined') return;\n\n  // 确保 Quill 对象存在\n  window.Quill = window.Quill || {};\n\n  // 设置默认配置\n  var defaults = window.Quill.DEFAULTS || {};\n  window.Quill.DEFAULTS = _objectSpread(_objectSpread({}, defaults), {}, {\n    experimental: {\n      useModernScrollingApi: true,\n      useMutationObserver: true\n    }\n  });\n\n  // 替换原生的 MutationObserver\n  if (window.MutationObserver) {\n    var originalMutationObserver = window.MutationObserver;\n    window.MutationObserver = function (callback) {\n      return new originalMutationObserver(function (mutations) {\n        // 过滤掉不需要的 DOM 变更事件\n        var filteredMutations = mutations.filter(function (mutation) {\n          var _mutation$target$clas;\n          return !((_mutation$target$clas = mutation.target.classList) !== null && _mutation$target$clas !== void 0 && _mutation$target$clas.contains('ql-clipboard'));\n        });\n        if (filteredMutations.length > 0) {\n          callback(filteredMutations);\n        }\n      });\n    };\n  }\n\n  // 禁用控制台警告\n  if (process.env.NODE_ENV === 'production') {\n    console.warn = function (originalWarn) {\n      return function (msg) {\n        // 过滤掉Quill的特定警告\n        if (msg && typeof msg === 'string' && (msg.includes('DOMNodeInserted') || msg.includes('Listener added for a') || msg.includes('mutation event'))) {\n          return;\n        }\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n        originalWarn.call.apply(originalWarn, [console, msg].concat(args));\n      };\n    }(console.warn);\n  }\n}","map":{"version":3,"names":["defaultQuillOptions","theme","modules","toolbar","placeholder","scrollingContainer","bounds","document","body","experimental","useModernScrollingApi","useMutationObserver","initQuill","window","Quill","defaults","DEFAULTS","_objectSpread","MutationObserver","originalMutationObserver","callback","mutations","filteredMutations","filter","mutation","_mutation$target$clas","target","classList","contains","length","process","env","NODE_ENV","console","warn","originalWarn","msg","includes","_len","arguments","args","Array","_key","call","apply","concat"],"sources":["H:/ForumServers/ForumFrontend/src/utils/quill-config.js"],"sourcesContent":["/**\r\n * Quill编辑器全局配置\r\n * 用于解决Quill中的警告和配置问题\r\n */\r\n\r\n// 默认的Quill配置选项\r\nexport const defaultQuillOptions = {\r\n  theme: 'snow',\r\n  modules: {\r\n    toolbar: [\r\n      ['bold', 'italic', 'underline', 'strike'],\r\n      ['blockquote', 'code-block'],\r\n      [{ 'header': 1 }, { 'header': 2 }],\r\n      [{ 'list': 'ordered' }, { 'list': 'bullet' }],\r\n      [{ 'script': 'sub' }, { 'script': 'super' }],\r\n      [{ 'indent': '-1' }, { 'indent': '+1' }],\r\n      [{ 'direction': 'rtl' }],\r\n      [{ 'size': ['small', false, 'large', 'huge'] }],\r\n      [{ 'header': [1, 2, 3, 4, 5, 6, false] }],\r\n      [{ 'color': [] }, { 'background': [] }],\r\n      [{ 'font': [] }],\r\n      [{ 'align': [] }],\r\n      ['clean'],\r\n      ['link', 'image']\r\n    ]\r\n  },\r\n  placeholder: '请输入内容...',\r\n  scrollingContainer: 'html',\r\n  bounds: document.body,\r\n  // 使用 MutationObserver 替代已弃用的 DOM 事件\r\n  experimental: {\r\n    useModernScrollingApi: true,\r\n    useMutationObserver: true\r\n  }\r\n};\r\n\r\n// 初始化Quill，应用全局配置\r\nexport function initQuill() {\r\n  if (typeof window === 'undefined') return;\r\n\r\n  // 确保 Quill 对象存在\r\n  window.Quill = window.Quill || {};\r\n  \r\n  // 设置默认配置\r\n  const defaults = window.Quill.DEFAULTS || {};\r\n  window.Quill.DEFAULTS = {\r\n    ...defaults,\r\n    experimental: {\r\n      useModernScrollingApi: true,\r\n      useMutationObserver: true\r\n    }\r\n  };\r\n\r\n  // 替换原生的 MutationObserver\r\n  if (window.MutationObserver) {\r\n    const originalMutationObserver = window.MutationObserver;\r\n    window.MutationObserver = function(callback) {\r\n      return new originalMutationObserver((mutations) => {\r\n        // 过滤掉不需要的 DOM 变更事件\r\n        const filteredMutations = mutations.filter(mutation => {\r\n          return !mutation.target.classList?.contains('ql-clipboard');\r\n        });\r\n        if (filteredMutations.length > 0) {\r\n          callback(filteredMutations);\r\n        }\r\n      });\r\n    };\r\n  }\r\n\r\n  // 禁用控制台警告\r\n  if (process.env.NODE_ENV === 'production') {\r\n    console.warn = (function(originalWarn) {\r\n      return function(msg, ...args) {\r\n        // 过滤掉Quill的特定警告\r\n        if (msg && typeof msg === 'string' && \r\n            (msg.includes('DOMNodeInserted') || \r\n             msg.includes('Listener added for a') ||\r\n             msg.includes('mutation event'))) {\r\n          return;\r\n        }\r\n        originalWarn.call(console, msg, ...args);\r\n      };\r\n    })(console.warn);\r\n  }\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}