{"ast":null,"code":"'use strict';\n\nvar _toConsumableArray = require(\"H:/ForumServers/ForumFrontend/node_modules/@babel/runtime/helpers/toConsumableArray.js\")[\"default\"];\nvar _defineProperty = require(\"H:/ForumServers/ForumFrontend/node_modules/@babel/runtime/helpers/defineProperty.js\")[\"default\"];\nvar _objectSpread = require(\"H:/ForumServers/ForumFrontend/node_modules/@babel/runtime/helpers/objectSpread2.js\")[\"default\"];\nrequire(\"core-js/modules/es.array.filter.js\");\nrequire(\"core-js/modules/es.array.map.js\");\nrequire(\"core-js/modules/es.array.sort.js\");\nrequire(\"core-js/modules/es.iterator.constructor.js\");\nrequire(\"core-js/modules/es.iterator.filter.js\");\nrequire(\"core-js/modules/es.iterator.map.js\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.object.keys.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/es.regexp.exec.js\");\nrequire(\"core-js/modules/es.string.replace.js\");\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nvar index$1 = require('../../icon/index.js');\nvar rate = require('./rate.js');\nvar pluginVue_exportHelper = require('../../../_virtual/plugin-vue_export-helper.js');\nvar constants = require('../../form/src/constants.js');\nvar useFormCommonProps = require('../../form/src/hooks/use-form-common-props.js');\nvar index = require('../../../hooks/use-namespace/index.js');\nvar useFormItem = require('../../form/src/hooks/use-form-item.js');\nvar shared = require('@vue/shared');\nvar event = require('../../../constants/event.js');\nvar aria = require('../../../constants/aria.js');\nvar style = require('../../../utils/dom/style.js');\nvar __default__ = vue.defineComponent({\n  name: \"ElRate\"\n});\nvar _sfc_main = /* @__PURE__ */vue.defineComponent(_objectSpread(_objectSpread({}, __default__), {}, {\n  props: rate.rateProps,\n  emits: rate.rateEmits,\n  setup: function setup(__props, _ref) {\n    var expose = _ref.expose,\n      emit = _ref.emit;\n    var props = __props;\n    function getValueFromMap(value, map) {\n      var isExcludedObject = function isExcludedObject(val) {\n        return shared.isObject(val);\n      };\n      var matchedKeys = Object.keys(map).map(function (key) {\n        return +key;\n      }).filter(function (key) {\n        var val = map[key];\n        var excluded = isExcludedObject(val) ? val.excluded : false;\n        return excluded ? value < key : value <= key;\n      }).sort(function (a, b) {\n        return a - b;\n      });\n      var matchedValue = map[matchedKeys[0]];\n      return isExcludedObject(matchedValue) && matchedValue.value || matchedValue;\n    }\n    var formContext = vue.inject(constants.formContextKey, void 0);\n    var formItemContext = vue.inject(constants.formItemContextKey, void 0);\n    var rateSize = useFormCommonProps.useFormSize();\n    var ns = index.useNamespace(\"rate\");\n    var _useFormItem$useFormI = useFormItem.useFormItemInputId(props, {\n        formItemContext: formItemContext\n      }),\n      inputId = _useFormItem$useFormI.inputId,\n      isLabeledByFormItem = _useFormItem$useFormI.isLabeledByFormItem;\n    var currentValue = vue.ref(props.modelValue);\n    var hoverIndex = vue.ref(-1);\n    var pointerAtLeftHalf = vue.ref(true);\n    var rateClasses = vue.computed(function () {\n      return [ns.b(), ns.m(rateSize.value)];\n    });\n    var rateDisabled = vue.computed(function () {\n      return props.disabled || (formContext == null ? void 0 : formContext.disabled);\n    });\n    var rateStyles = vue.computed(function () {\n      return ns.cssVarBlock({\n        \"void-color\": props.voidColor,\n        \"disabled-void-color\": props.disabledVoidColor,\n        \"fill-color\": activeColor.value\n      });\n    });\n    var text = vue.computed(function () {\n      var result = \"\";\n      if (props.showScore) {\n        result = props.scoreTemplate.replace(/\\{\\s*value\\s*\\}/, rateDisabled.value ? \"\".concat(props.modelValue) : \"\".concat(currentValue.value));\n      } else if (props.showText) {\n        result = props.texts[Math.ceil(currentValue.value) - 1];\n      }\n      return result;\n    });\n    var valueDecimal = vue.computed(function () {\n      return props.modelValue * 100 - Math.floor(props.modelValue) * 100;\n    });\n    var colorMap = vue.computed(function () {\n      return shared.isArray(props.colors) ? _defineProperty(_defineProperty(_defineProperty({}, props.lowThreshold, props.colors[0]), props.highThreshold, {\n        value: props.colors[1],\n        excluded: true\n      }), props.max, props.colors[2]) : props.colors;\n    });\n    var activeColor = vue.computed(function () {\n      var color = getValueFromMap(currentValue.value, colorMap.value);\n      return shared.isObject(color) ? \"\" : color;\n    });\n    var decimalStyle = vue.computed(function () {\n      var width = \"\";\n      if (rateDisabled.value) {\n        width = \"\".concat(valueDecimal.value, \"%\");\n      } else if (props.allowHalf) {\n        width = \"50%\";\n      }\n      return {\n        color: activeColor.value,\n        width: width\n      };\n    });\n    var componentMap = vue.computed(function () {\n      var icons = shared.isArray(props.icons) ? _toConsumableArray(props.icons) : _objectSpread({}, props.icons);\n      icons = vue.markRaw(icons);\n      return shared.isArray(icons) ? _defineProperty(_defineProperty(_defineProperty({}, props.lowThreshold, icons[0]), props.highThreshold, {\n        value: icons[1],\n        excluded: true\n      }), props.max, icons[2]) : icons;\n    });\n    var decimalIconComponent = vue.computed(function () {\n      return getValueFromMap(props.modelValue, componentMap.value);\n    });\n    var voidComponent = vue.computed(function () {\n      return rateDisabled.value ? shared.isString(props.disabledVoidIcon) ? props.disabledVoidIcon : vue.markRaw(props.disabledVoidIcon) : shared.isString(props.voidIcon) ? props.voidIcon : vue.markRaw(props.voidIcon);\n    });\n    var activeComponent = vue.computed(function () {\n      return getValueFromMap(currentValue.value, componentMap.value);\n    });\n    function showDecimalIcon(item) {\n      var showWhenDisabled = rateDisabled.value && valueDecimal.value > 0 && item - 1 < props.modelValue && item > props.modelValue;\n      var showWhenAllowHalf = props.allowHalf && pointerAtLeftHalf.value && item - 0.5 <= currentValue.value && item > currentValue.value;\n      return showWhenDisabled || showWhenAllowHalf;\n    }\n    function emitValue(value) {\n      if (props.clearable && value === props.modelValue) {\n        value = 0;\n      }\n      emit(event.UPDATE_MODEL_EVENT, value);\n      if (props.modelValue !== value) {\n        emit(event.CHANGE_EVENT, value);\n      }\n    }\n    function selectValue(value) {\n      if (rateDisabled.value) {\n        return;\n      }\n      if (props.allowHalf && pointerAtLeftHalf.value) {\n        emitValue(currentValue.value);\n      } else {\n        emitValue(value);\n      }\n    }\n    function handleKey(e) {\n      if (rateDisabled.value) {\n        return;\n      }\n      var _currentValue = currentValue.value;\n      var code = e.code;\n      if (code === aria.EVENT_CODE.up || code === aria.EVENT_CODE.right) {\n        if (props.allowHalf) {\n          _currentValue += 0.5;\n        } else {\n          _currentValue += 1;\n        }\n        e.stopPropagation();\n        e.preventDefault();\n      } else if (code === aria.EVENT_CODE.left || code === aria.EVENT_CODE.down) {\n        if (props.allowHalf) {\n          _currentValue -= 0.5;\n        } else {\n          _currentValue -= 1;\n        }\n        e.stopPropagation();\n        e.preventDefault();\n      }\n      _currentValue = _currentValue < 0 ? 0 : _currentValue;\n      _currentValue = _currentValue > props.max ? props.max : _currentValue;\n      emit(event.UPDATE_MODEL_EVENT, _currentValue);\n      emit(event.CHANGE_EVENT, _currentValue);\n      return _currentValue;\n    }\n    function setCurrentValue(value, event) {\n      if (rateDisabled.value) {\n        return;\n      }\n      if (props.allowHalf && event) {\n        var target = event.target;\n        if (style.hasClass(target, ns.e(\"item\"))) {\n          target = target.querySelector(\".\".concat(ns.e(\"icon\")));\n        }\n        if (target.clientWidth === 0 || style.hasClass(target, ns.e(\"decimal\"))) {\n          target = target.parentNode;\n        }\n        pointerAtLeftHalf.value = event.offsetX * 2 <= target.clientWidth;\n        currentValue.value = pointerAtLeftHalf.value ? value - 0.5 : value;\n      } else {\n        currentValue.value = value;\n      }\n      hoverIndex.value = value;\n    }\n    function resetCurrentValue() {\n      if (rateDisabled.value) {\n        return;\n      }\n      if (props.allowHalf) {\n        pointerAtLeftHalf.value = props.modelValue !== Math.floor(props.modelValue);\n      }\n      currentValue.value = props.modelValue;\n      hoverIndex.value = -1;\n    }\n    vue.watch(function () {\n      return props.modelValue;\n    }, function (val) {\n      currentValue.value = val;\n      pointerAtLeftHalf.value = props.modelValue !== Math.floor(props.modelValue);\n    });\n    if (!props.modelValue) {\n      emit(event.UPDATE_MODEL_EVENT, 0);\n    }\n    expose({\n      setCurrentValue: setCurrentValue,\n      resetCurrentValue: resetCurrentValue\n    });\n    return function (_ctx, _cache) {\n      var _a;\n      return vue.openBlock(), vue.createElementBlock(\"div\", {\n        id: vue.unref(inputId),\n        \"class\": vue.normalizeClass([vue.unref(rateClasses), vue.unref(ns).is(\"disabled\", vue.unref(rateDisabled))]),\n        role: \"slider\",\n        \"aria-label\": !vue.unref(isLabeledByFormItem) ? _ctx.ariaLabel || \"rating\" : void 0,\n        \"aria-labelledby\": vue.unref(isLabeledByFormItem) ? (_a = vue.unref(formItemContext)) == null ? void 0 : _a.labelId : void 0,\n        \"aria-valuenow\": currentValue.value,\n        \"aria-valuetext\": vue.unref(text) || void 0,\n        \"aria-valuemin\": \"0\",\n        \"aria-valuemax\": _ctx.max,\n        tabindex: \"0\",\n        style: vue.normalizeStyle(vue.unref(rateStyles)),\n        onKeydown: handleKey\n      }, [(vue.openBlock(true), vue.createElementBlock(vue.Fragment, null, vue.renderList(_ctx.max, function (item, key) {\n        return vue.openBlock(), vue.createElementBlock(\"span\", {\n          key: key,\n          \"class\": vue.normalizeClass(vue.unref(ns).e(\"item\")),\n          onMousemove: function onMousemove($event) {\n            return setCurrentValue(item, $event);\n          },\n          onMouseleave: resetCurrentValue,\n          onClick: function onClick($event) {\n            return selectValue(item);\n          }\n        }, [vue.createVNode(vue.unref(index$1.ElIcon), {\n          \"class\": vue.normalizeClass([vue.unref(ns).e(\"icon\"), {\n            hover: hoverIndex.value === item\n          }, vue.unref(ns).is(\"active\", item <= currentValue.value)])\n        }, {\n          \"default\": vue.withCtx(function () {\n            return [!showDecimalIcon(item) ? (vue.openBlock(), vue.createElementBlock(vue.Fragment, {\n              key: 0\n            }, [vue.withDirectives((vue.openBlock(), vue.createBlock(vue.resolveDynamicComponent(vue.unref(activeComponent)), null, null, 512)), [[vue.vShow, item <= currentValue.value]]), vue.withDirectives((vue.openBlock(), vue.createBlock(vue.resolveDynamicComponent(vue.unref(voidComponent)), null, null, 512)), [[vue.vShow, !(item <= currentValue.value)]])], 64)) : vue.createCommentVNode(\"v-if\", true), showDecimalIcon(item) ? (vue.openBlock(), vue.createElementBlock(vue.Fragment, {\n              key: 1\n            }, [(vue.openBlock(), vue.createBlock(vue.resolveDynamicComponent(vue.unref(voidComponent)), {\n              \"class\": vue.normalizeClass([vue.unref(ns).em(\"decimal\", \"box\")])\n            }, null, 8, [\"class\"])), vue.createVNode(vue.unref(index$1.ElIcon), {\n              style: vue.normalizeStyle(vue.unref(decimalStyle)),\n              \"class\": vue.normalizeClass([vue.unref(ns).e(\"icon\"), vue.unref(ns).e(\"decimal\")])\n            }, {\n              \"default\": vue.withCtx(function () {\n                return [(vue.openBlock(), vue.createBlock(vue.resolveDynamicComponent(vue.unref(decimalIconComponent))))];\n              }),\n              _: 1\n            }, 8, [\"style\", \"class\"])], 64)) : vue.createCommentVNode(\"v-if\", true)];\n          }),\n          _: 2\n        }, 1032, [\"class\"])], 42, [\"onMousemove\", \"onClick\"]);\n      }), 128)), _ctx.showText || _ctx.showScore ? (vue.openBlock(), vue.createElementBlock(\"span\", {\n        key: 0,\n        \"class\": vue.normalizeClass(vue.unref(ns).e(\"text\")),\n        style: vue.normalizeStyle({\n          color: _ctx.textColor\n        })\n      }, vue.toDisplayString(vue.unref(text)), 7)) : vue.createCommentVNode(\"v-if\", true)], 46, [\"id\", \"aria-label\", \"aria-labelledby\", \"aria-valuenow\", \"aria-valuetext\", \"aria-valuemax\"]);\n    };\n  }\n}));\nvar Rate = /* @__PURE__ */pluginVue_exportHelper[\"default\"](_sfc_main, [[\"__file\", \"rate.vue\"]]);\nexports[\"default\"] = Rate;","map":{"version":3,"names":["name","getValueFromMap","value","map","isExcludedObject","val","shared","isObject","matchedKeys","Object","keys","key","filter","excluded","sort","a","b","matchedValue","formContext","vue","inject","constants","formContextKey","formItemContext","formItemContextKey","rateSize","useFormCommonProps","useFormSize","ns","index","useNamespace","_useFormItem$useFormI","useFormItem","useFormItemInputId","props","inputId","isLabeledByFormItem","currentValue","ref","modelValue","hoverIndex","pointerAtLeftHalf","rateClasses","computed","m","rateDisabled","disabled","rateStyles","cssVarBlock","voidColor","disabledVoidColor","activeColor","text","result","showScore","scoreTemplate","replace","concat","showText","texts","Math","ceil","valueDecimal","floor","colorMap","isArray","colors","_defineProperty","lowThreshold","highThreshold","max","color","decimalStyle","width","allowHalf","componentMap","icons","_toConsumableArray","_objectSpread","markRaw","decimalIconComponent","voidComponent","isString","disabledVoidIcon","voidIcon","activeComponent","showDecimalIcon","item","showWhenDisabled","showWhenAllowHalf","emitValue","clearable","emit","event","UPDATE_MODEL_EVENT","CHANGE_EVENT","selectValue","handleKey","e","_currentValue","code","aria","EVENT_CODE","up","right","stopPropagation","preventDefault","left","down","setCurrentValue","target","style","hasClass","querySelector","clientWidth","parentNode","offsetX","resetCurrentValue","watch","expose","_ctx","_cache","_a","openBlock","createElementBlock","id","unref","normalizeClass","is","role","ariaLabel","labelId","tabindex","normalizeStyle","onKeydown","Fragment","renderList"],"sources":["../../../../../../packages/components/rate/src/rate.vue"],"sourcesContent":["<template>\n  <div\n    :id=\"inputId\"\n    :class=\"[rateClasses, ns.is('disabled', rateDisabled)]\"\n    role=\"slider\"\n    :aria-label=\"!isLabeledByFormItem ? ariaLabel || 'rating' : undefined\"\n    :aria-labelledby=\"\n      isLabeledByFormItem ? formItemContext?.labelId : undefined\n    \"\n    :aria-valuenow=\"currentValue\"\n    :aria-valuetext=\"text || undefined\"\n    aria-valuemin=\"0\"\n    :aria-valuemax=\"max\"\n    tabindex=\"0\"\n    :style=\"rateStyles\"\n    @keydown=\"handleKey\"\n  >\n    <span\n      v-for=\"(item, key) in max\"\n      :key=\"key\"\n      :class=\"ns.e('item')\"\n      @mousemove=\"setCurrentValue(item, $event)\"\n      @mouseleave=\"resetCurrentValue\"\n      @click=\"selectValue(item)\"\n    >\n      <el-icon\n        :class=\"[\n          ns.e('icon'),\n          { hover: hoverIndex === item },\n          ns.is('active', item <= currentValue),\n        ]\"\n      >\n        <template v-if=\"!showDecimalIcon(item)\">\n          <component :is=\"activeComponent\" v-show=\"item <= currentValue\" />\n          <component :is=\"voidComponent\" v-show=\"!(item <= currentValue)\" />\n        </template>\n        <template v-if=\"showDecimalIcon(item)\">\n          <component :is=\"voidComponent\" :class=\"[ns.em('decimal', 'box')]\" />\n          <el-icon\n            :style=\"decimalStyle\"\n            :class=\"[ns.e('icon'), ns.e('decimal')]\"\n          >\n            <component :is=\"decimalIconComponent\" />\n          </el-icon>\n        </template>\n      </el-icon>\n    </span>\n    <span\n      v-if=\"showText || showScore\"\n      :class=\"ns.e('text')\"\n      :style=\"{ color: textColor }\"\n    >\n      {{ text }}\n    </span>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { computed, inject, markRaw, ref, watch } from 'vue'\nimport {\n  CHANGE_EVENT,\n  EVENT_CODE,\n  UPDATE_MODEL_EVENT,\n} from '@element-plus/constants'\nimport { hasClass, isArray, isObject, isString } from '@element-plus/utils'\nimport {\n  formContextKey,\n  formItemContextKey,\n  useFormItemInputId,\n  useFormSize,\n} from '@element-plus/components/form'\nimport { ElIcon } from '@element-plus/components/icon'\nimport { useNamespace } from '@element-plus/hooks'\nimport { rateEmits, rateProps } from './rate'\nimport type { CSSProperties, Component } from 'vue'\n\nfunction getValueFromMap<T>(\n  value: number,\n  map: Record<string, T | { excluded?: boolean; value: T }>\n) {\n  const isExcludedObject = (\n    val: unknown\n  ): val is { excluded?: boolean } & Record<any, unknown> => isObject(val)\n\n  const matchedKeys = Object.keys(map)\n    .map((key) => +key)\n    .filter((key) => {\n      const val = map[key]\n      const excluded = isExcludedObject(val) ? val.excluded : false\n      return excluded ? value < key : value <= key\n    })\n    .sort((a, b) => a - b)\n  const matchedValue = map[matchedKeys[0]]\n  return (isExcludedObject(matchedValue) && matchedValue.value) || matchedValue\n}\n\ndefineOptions({\n  name: 'ElRate',\n})\n\nconst props = defineProps(rateProps)\nconst emit = defineEmits(rateEmits)\n\nconst formContext = inject(formContextKey, undefined)\nconst formItemContext = inject(formItemContextKey, undefined)\nconst rateSize = useFormSize()\nconst ns = useNamespace('rate')\nconst { inputId, isLabeledByFormItem } = useFormItemInputId(props, {\n  formItemContext,\n})\n\nconst currentValue = ref(props.modelValue)\nconst hoverIndex = ref(-1)\nconst pointerAtLeftHalf = ref(true)\n\nconst rateClasses = computed(() => [ns.b(), ns.m(rateSize.value)])\nconst rateDisabled = computed(() => props.disabled || formContext?.disabled)\nconst rateStyles = computed(() => {\n  return ns.cssVarBlock({\n    'void-color': props.voidColor,\n    'disabled-void-color': props.disabledVoidColor,\n    'fill-color': activeColor.value,\n  }) as CSSProperties\n})\n\nconst text = computed(() => {\n  let result = ''\n  if (props.showScore) {\n    result = props.scoreTemplate.replace(\n      /\\{\\s*value\\s*\\}/,\n      rateDisabled.value ? `${props.modelValue}` : `${currentValue.value}`\n    )\n  } else if (props.showText) {\n    result = props.texts[Math.ceil(currentValue.value) - 1]\n  }\n  return result\n})\nconst valueDecimal = computed(\n  () => props.modelValue * 100 - Math.floor(props.modelValue) * 100\n)\nconst colorMap = computed(() =>\n  isArray(props.colors)\n    ? {\n        [props.lowThreshold]: props.colors[0],\n        [props.highThreshold]: { value: props.colors[1], excluded: true },\n        [props.max]: props.colors[2],\n      }\n    : props.colors\n)\nconst activeColor = computed(() => {\n  const color = getValueFromMap(currentValue.value, colorMap.value)\n  // {value: '', excluded: true} returned\n  return isObject(color) ? '' : color\n})\nconst decimalStyle = computed(() => {\n  let width = ''\n  if (rateDisabled.value) {\n    width = `${valueDecimal.value}%`\n  } else if (props.allowHalf) {\n    width = '50%'\n  }\n  return {\n    color: activeColor.value,\n    width,\n  }\n})\nconst componentMap = computed(() => {\n  let icons = isArray(props.icons) ? [...props.icons] : { ...props.icons }\n  icons = markRaw(icons) as\n    | Array<string | Component>\n    | Record<number, string | Component>\n  return isArray(icons)\n    ? {\n        [props.lowThreshold]: icons[0],\n        [props.highThreshold]: {\n          value: icons[1],\n          excluded: true,\n        },\n        [props.max]: icons[2],\n      }\n    : icons\n})\nconst decimalIconComponent = computed(() =>\n  getValueFromMap(props.modelValue, componentMap.value)\n)\nconst voidComponent = computed(() =>\n  rateDisabled.value\n    ? isString(props.disabledVoidIcon)\n      ? props.disabledVoidIcon\n      : (markRaw(props.disabledVoidIcon) as Component)\n    : isString(props.voidIcon)\n    ? props.voidIcon\n    : (markRaw(props.voidIcon) as Component)\n)\nconst activeComponent = computed(() =>\n  getValueFromMap(currentValue.value, componentMap.value)\n)\n\nfunction showDecimalIcon(item: number) {\n  const showWhenDisabled =\n    rateDisabled.value &&\n    valueDecimal.value > 0 &&\n    item - 1 < props.modelValue &&\n    item > props.modelValue\n  const showWhenAllowHalf =\n    props.allowHalf &&\n    pointerAtLeftHalf.value &&\n    item - 0.5 <= currentValue.value &&\n    item > currentValue.value\n  return showWhenDisabled || showWhenAllowHalf\n}\n\nfunction emitValue(value: number) {\n  // if allow clear, and selected value is same as modelValue, reset value to 0\n  if (props.clearable && value === props.modelValue) {\n    value = 0\n  }\n\n  emit(UPDATE_MODEL_EVENT, value)\n  if (props.modelValue !== value) {\n    emit(CHANGE_EVENT, value)\n  }\n}\n\nfunction selectValue(value: number) {\n  if (rateDisabled.value) {\n    return\n  }\n  if (props.allowHalf && pointerAtLeftHalf.value) {\n    emitValue(currentValue.value)\n  } else {\n    emitValue(value)\n  }\n}\n\nfunction handleKey(e: KeyboardEvent) {\n  if (rateDisabled.value) {\n    return\n  }\n  let _currentValue = currentValue.value\n  const code = e.code\n  if (code === EVENT_CODE.up || code === EVENT_CODE.right) {\n    if (props.allowHalf) {\n      _currentValue += 0.5\n    } else {\n      _currentValue += 1\n    }\n    e.stopPropagation()\n    e.preventDefault()\n  } else if (code === EVENT_CODE.left || code === EVENT_CODE.down) {\n    if (props.allowHalf) {\n      _currentValue -= 0.5\n    } else {\n      _currentValue -= 1\n    }\n    e.stopPropagation()\n    e.preventDefault()\n  }\n  _currentValue = _currentValue < 0 ? 0 : _currentValue\n  _currentValue = _currentValue > props.max ? props.max : _currentValue\n  emit(UPDATE_MODEL_EVENT, _currentValue)\n  emit(CHANGE_EVENT, _currentValue)\n  return _currentValue\n}\n\nfunction setCurrentValue(value: number, event?: MouseEvent) {\n  if (rateDisabled.value) {\n    return\n  }\n  if (props.allowHalf && event) {\n    // TODO: use cache via computed https://github.com/element-plus/element-plus/pull/5456#discussion_r786472092\n    let target = event.target as HTMLElement\n    if (hasClass(target, ns.e('item'))) {\n      target = target.querySelector(`.${ns.e('icon')}`)!\n    }\n    if (target.clientWidth === 0 || hasClass(target, ns.e('decimal'))) {\n      target = target.parentNode as HTMLElement\n    }\n    pointerAtLeftHalf.value = event.offsetX * 2 <= target.clientWidth\n    currentValue.value = pointerAtLeftHalf.value ? value - 0.5 : value\n  } else {\n    currentValue.value = value\n  }\n  hoverIndex.value = value\n}\n\nfunction resetCurrentValue() {\n  if (rateDisabled.value) {\n    return\n  }\n  if (props.allowHalf) {\n    pointerAtLeftHalf.value = props.modelValue !== Math.floor(props.modelValue)\n  }\n  currentValue.value = props.modelValue\n  hoverIndex.value = -1\n}\n\nwatch(\n  () => props.modelValue,\n  (val) => {\n    currentValue.value = val\n    pointerAtLeftHalf.value = props.modelValue !== Math.floor(props.modelValue)\n  }\n)\n\nif (!props.modelValue) {\n  emit(UPDATE_MODEL_EVENT, 0)\n}\n\ndefineExpose({\n  /** @description set current value */\n  setCurrentValue,\n  /** @description reset current value */\n  resetCurrentValue,\n})\n</script>\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;qCAgGc;EACZA,IAAM;AACR;;;;;;;;IAtBS,SAAAC,gBACPC,KAAA,EACAC,GACA;MACA,IAAMC,gBAAmB,YAAnBA,gBAAmBA,CACvBC,GACyD;QAAA,OAAAC,MAAA,CAAAC,QAAA,CAASF,GAAG;MAAA;MAEvE,IAAMG,WAAc,GAAAC,MAAA,CAAOC,IAAK,CAAAP,GAAG,CAChC,CAAAA,GAAA,CAAI,UAACQ,GAAA;QAAA,OAAQ,CAACA,GAAG;MAAA,EACjB,CAAAC,MAAA,CAAO,UAACD,GAAQ;QACT,IAAAN,GAAA,GAAMF,GAAA,CAAIQ,GAAG;QACnB,IAAME,QAAW,GAAAT,gBAAA,CAAiBC,GAAG,IAAIA,GAAA,CAAIQ,QAAW;QACjD,OAAAA,QAAA,GAAWX,KAAQ,GAAAS,GAAA,GAAMT,KAAS,IAAAS,GAAA;MAAA,CAC1C,CACA,CAAAG,IAAA,CAAK,UAACC,CAAG,EAAAC,CAAA;QAAA,OAAMD,CAAA,GAAIC,CAAC;MAAA;MACvB,IAAMC,YAAe,GAAAd,GAAA,CAAIK,WAAY,EAAC,CAAC;MACvC,OAAQJ,gBAAiB,CAAAa,YAAY,CAAK,IAAAA,YAAA,CAAaf,KAAU,IAAAe,YAAA;IAAA;IAU7D,IAAAC,WAAA,GAAcC,GAAA,CAAAC,MAAO,CAAAC,SAAA,CAAAC,cAAA,EAAgB,KAAS;IAC9C,IAAAC,eAAA,GAAkBJ,GAAA,CAAAC,MAAO,CAAAC,SAAA,CAAAG,kBAAA,EAAoB,KAAS;IAC5D,IAAMC,QAAA,GAAWC,kBAAA,CAAAC,WAAY;IACvB,IAAAC,EAAA,GAAKC,KAAA,CAAAC,YAAA,CAAa,MAAM;IAC9B,IAAAC,qBAAA,GAAyCC,WAAA,CAAAC,kBAAA,CAAmBC,KAAO;QACjEX,eAAA,EAAAA;MAAA,CACD;MAFOY,OAAA,GAAAJ,qBAAA,CAAAI,OAAA;MAASC,mBAAoB,GAAAL,qBAAA,CAApBK,mBAAoB;IAI/B,IAAAC,YAAA,GAAelB,GAAA,CAAAmB,GAAI,CAAAJ,KAAA,CAAMK,UAAU;IACnC,IAAAC,UAAA,GAAarB,GAAA,CAAAmB,GAAA,CAAI,CAAE;IACnB,IAAAG,iBAAA,GAAoBtB,GAAA,CAAAmB,GAAA,CAAI,IAAI;IAElC,IAAMI,WAAc,GAAAvB,GAAA,CAAAwB,QAAA,CAAS;MAAA,OAAM,CAACf,EAAG,CAAAZ,CAAA,EAAK,EAAAY,EAAA,CAAGgB,CAAE,CAAAnB,QAAA,CAASvB,KAAK,CAAC,CAAC;IAAA;IACjE,IAAM2C,YAAA,GAAe1B,GAAA,CAAAwB,QAAS;MAAA,OAAMT,KAAM,CAAAY,QAAA,KAAA5B,WAAA,IAAiC,gBAAAA,WAAA,CAAA4B,QAAA;IAAA;IACrE,IAAAC,UAAA,GAAa5B,GAAA,CAAAwB,QAAA,CAAS,YAAM;MAChC,OAAOf,EAAA,CAAGoB,WAAY;QACpB,cAAcd,KAAM,CAAAe,SAAA;QACpB,uBAAuBf,KAAM,CAAAgB,iBAAA;QAC7B,cAAcC,WAAY,CAAAjD;MAAA,CAC3B;IAAA,CACF;IAEK,IAAAkD,IAAA,GAAOjC,GAAA,CAAAwB,QAAA,CAAS,YAAM;MAC1B,IAAIU,MAAS;MACb,IAAInB,KAAA,CAAMoB,SAAW;QACnBD,MAAA,GAASnB,KAAA,CAAMqB,aAAc,CAAAC,OAAA,oBAAAX,YAAA,CAAA3C,KAAA,MAAAuD,MAAA,CAAAvB,KAAA,CAAAK,UAAA,OAAAkB,MAAA,CAAApB,YAAA,CAAAnC,KAAA;MAAA,CAC3B,UAAAgC,KAAA,CAAAwB,QAAA;QACAL,MAAA,GAAAnB,KAAA,CAAayB,KAAA,CAAAC,IAAW,CAAAC,IAAA,CAAAxB,YAAqB,CAAAnC,KAAA,CAAG;MAAkB;MAEtE,OAAAmD,MAAA;IACE;IACF,IAAAS,YAAA,GAAA3C,GAAA,CAAAwB,QAAA;MAAA,OAAAT,KAAA,CAAAK,UAAA,SAAAqB,IAAA,CAAAG,KAAA,CAAA7B,KAAA,CAAAK,UAAA;IAAA;IACO,IAAAyB,QAAA,GAAA7C,GAAA,CAAAwB,QAAA;MAAA,OAAArC,MAAA,CAAA2D,OAAA,CAAA/B,KAAA,CAAAgC,MAAA,IAAAC,eAAA,CAAAA,eAAA,CAAAA,eAAA,KACRjC,KAAA,CAAAkC,YAAA,EAAAlC,KAAA,CAAAgC,MAAA,MACDhC,KAAqB,CAAAmC,aAAA;QAAAnE,KAAA,EAAAgC,KAAA,CAAAgC,MAAA;QAAArD,QAAA;MAAA,IACnBqB,KAAM,CAAAoC,GAAA,EAAmBpC,KAAA,CAAAgC,MAAA,OAC3BhC,KAAA,CAAAgC,MAAA;IAAA;IACA,IAAMf,WAAW,GAAAhC,GAAA,CAAAwB,QAAA;MAAS,IACxB4B,KAAA,GAAQtE,eACJ,CAAAoC,YAAA,CAAAnC,KAAA,EAAA8D,QAAA,CAAA9D,KAAA;MAAA,OACSI,MAAA,CAAAC,QAAA,CAAAgE,KAAY,CAAG,QAAMA,KAAA;IAAQ,CACpC;IAAgE,IACzDC,YAAM,GAAArD,GAAA,CAAAwB,QAAA,CAAa,YAAC;MAC7B,IACA8B,KAAM;MACZ,IAAA5B,YAAA,CAAA3C,KAAA;QACMuE,KAAA,MAAAhB,MAAA,CAAAK,YAAA,CAAA5D,KAA6B;MACjC,OAAc,IAAAgC,KAAA,CAAAwC,SAAA;QAEPD,KAAA;MAAuB;MAE1B;QACJF,KAAY,EAAApB,WAAA,CAAAjD,KAAA;QACZuE,KAAA,EAAAA;MACE,CAAQ;IAAqB,CAC/B;IACU,IAAAE,YAAA,GAAAxD,GAAA,CAAAwB,QAAA;MACV,IAAAiC,KAAA,GAAAtE,MAAA,CAAA2D,OAAA,CAAA/B,KAAA,CAAA0C,KAAA,IAAAC,kBAAA,CAAA3C,KAAA,CAAA0C,KAAA,IAAAE,aAAA,KAAA5C,KAAA,CAAA0C,KAAA;MACOA,KAAA,GAAAzD,GAAA,CAAA4D,OAAA,CAAAH,KAAA;MAAA,OAAAtE,MAAA,CAAA2D,OACc,CAAAW,KAAA,IAAAT,eAAA,CAAAA,eAAA,CAAAA,eAAA,KACnBjC,KAAA,CAAAkC,YAAA,EAAAQ,KAAA,MACF1C,KAAA,CAAAmC,aAAA;QACDnE,KAAA,EAAA0E,KAAA;QACK/D,QAAA;MACJ,IACAqB,KAAQ,CAAAoC,GAAA,EAAAM,KAAa,OAGdA,KAAA;IACH;IAEE,IAAOI,oBAAgB,GAAA7D,GAAA,CAAAwB,QAAA;MAAA,OAAA1C,eAAA,CAAAiC,KAAA,CAAAK,UAAA,EAAAoC,YAAA,CAAAzE,KAAA;IAAA;IACrB,IAAA+E,aAAa,GAAC9D,GAAA,CAAAwB,QAAA;MAAA,OAAAE,YAAA,CAAA3C,KAAA,GAAAI,MAAA,CAAA4E,QAAA,CAAAhD,KAAA,CAAAiD,gBAAA,IAAAjD,KAAA,CAAAiD,gBAAA,GAAAhE,GAAA,CAAA4D,OAAA,CAAA7C,KAAA,CAAAiD,gBAAA,IAAA7E,MAAA,CAAA4E,QAAA,CAAAhD,KAAA,CAAAkD,QAAA,IAAAlD,KAAA,CAAAkD,QAAA,GAAAjE,GAAA,CAAA4D,OAAA,CAAA7C,KAAA,CAAAkD,QAAA;IAAA;IAAA,IACdC,eAAU,GAAAlE,GAAA,CAAAwB,QAAA;MAAA,OAAA1C,eAAA,CAAAoC,YAAA,CAAAnC,KAAA,EAAAyE,YAAA,CAAAzE,KAAA;IAAA;IACZ,SAAAoF,gBAAAC,IAAA;MAAA,IACCC,gBAAmB,GAAA3C,YAAA,CAAA3C,KAAA,IAAA4D,YAAA,CAAA5D,KAAA,QAAAqF,IAAA,OAAArD,KAAA,CAAAK,UAAA,IAAAgD,IAAA,GAAArD,KAAA,CAAAK,UAAA;MACtB,IACAkD,iBAAA,GAAAvD,KAAA,CAAAwC,SAAA,IAAAjC,iBAAA,CAAAvC,KAAA,IAAAqF,IAAA,UAAAlD,YAAA,CAAAnC,KAAA,IAAAqF,IAAA,GAAAlD,YAAA,CAAAnC,KAAA;MACL,OAAAsF,gBAAA,IAAAC,iBAAA;IACD;IAA6B,SAC3BC,UAAAxF,KAAgB,EAAM;MACxB,IAAAgC,KAAA,CAAAyD,SAAA,IAAAzF,KAAA,KAAAgC,KAAA,CAAAK,UAAA;QACArC,KAAsB;MAAA;MAQtB0F,IAAA,CAAAC,KAAA,CAAAC,kBAAA,EAAA5F,KAAA;MACA,IAAMgC,KAAkB,CAAAK,UAAA,KAAArC,KAAA;QACtB0F,IAAA,CAAAC,KAAA,CAAAE,YAAA,EAAA7F,KAA6B;MAAyB;IAGxD;IACQ,SAAA8F,YAAA9F,KAAA,EACS;MAIT,IAAA2C,YAAA,CAAA3C,KAAA;QAKN;MAA2B;MAG7B,IAAAgC,KAAA,CAAAwC,SAAkC,IAAAjC,iBAAA,CAAAvC,KAAA;QAEhCwF,SAAU,CAAArD,YAAuB,CAAAnC,KAAA;MAC/B,CAAQ;QACVwF,SAAA,CAAAxF,KAAA;MAEA;IACA;IACE,SAAK+F,UAAAC,CAAA;MACP,IAAArD,YAAA,CAAA3C,KAAA;QACF;MAEA;MACE,IAAIiG,aAAa,GAAO9D,YAAA,CAAAnC,KAAA;MACtB,IAAAkG,IAAA,GAAAF,CAAA,CAAAE,IAAA;MACF,IAAAA,IAAA,KAAAC,IAAA,CAAAC,UAAA,CAAAC,EAAA,IAAAH,IAAA,KAAAC,IAAA,CAAAC,UAAA,CAAAE,KAAA;QACI,IAAAtE,KAAmB,CAAAwC,SAAA;UACrByB,aAAA;QAA4B,CACvB;UACLA,aAAe;QAAA;QAEnBD,CAAA,CAAAO,eAAA;QAEAP,CAAA,CAAAQ,cAAqC;MACnC,WAAAN,IAAA,KAAwBC,IAAA,CAAAC,UAAA,CAAAK,IAAA,IAAAP,IAAA,KAAAC,IAAA,CAAAC,UAAA,CAAAM,IAAA;QACtB,IAAA1E,KAAA,CAAAwC,SAAA;UACFyB,aAAA;QACA;UACAA,aAAe;QACf;QACED,CAAA,CAAAO,eAAqB;QACFP,CAAA,CAAAQ,cAAA;MAAA;MAEAP,aAAA,GAAAA,aAAA,WAAAA,aAAA;MACnBA,aAAA,GAAAA,aAAA,GAAAjE,KAAA,CAAAoC,GAAA,GAAApC,KAAA,CAAAoC,GAAA,GAAA6B,aAAA;MACAP,IAAE,CAAgBC,KAAA,CAAAC,kBAAA,EAAAK,aAAA;MAClBP,IAAE,CAAeC,KAAA,CAAAE,YAAA,EAAAI,aAAA;MACnB,OAAAA,aAAoB;IAClB;IACmB,SAAAU,gBAAA3G,KAAA,EAAA2F,KAAA;MAAA,IACZhD,YAAA,CAAA3C,KAAA;QACY;MAAA;MAEnB,IAAEgC,KAAgB,CAAAwC,SAAA,IAAAmB,KAAA;QAClB,IAAiBiB,MAAA,GAAAjB,KAAA,CAAAiB,MAAA;QACnB,IAAAC,KAAA,CAAAC,QAAA,CAAAF,MAAA,EAAAlF,EAAA,CAAAsE,CAAA;UACgBY,MAAA,GAAAA,MAAA,CAAAG,aAAA,KAAAxD,MAAA,CAAwB7B,EAAA,CAAAsE,CAAA;QACxC;QACA,IAAAY,MAAA,CAAAI,WAAA,KAAsC,KAAAH,KAAA,CAAAC,QAAA,CAAAF,MAAA,EAAAlF,EAAA,CAAAsE,CAAA;UACtCY,MAAA,GAAAA,MAAmB,CAAaK,UAAA;QAChC;QACF1E,iBAAA,CAAAvC,KAAA,GAAA2F,KAAA,CAAAuB,OAAA,QAAAN,MAAA,CAAAI,WAAA;QAES7E,YAAA,CAAAnC,KAAA,GAAgBuC,iBAAmC,CAAAvC,KAAA,GAAAA,KAAA,SAAAA,KAAA;MAC1D;QACEmC,YAAA,CAAAnC,KAAA,GAAAA,KAAA;MAAA;MAEEsC,UAAM,CAAAtC,KAAA,GAAAA,KAAoB;IAE5B;IACA,SAAAmH,iBAAqBA,CAAA,EAAK;MACxB,IAAAxE,YAAA,CAAA3C,KAA8B;QAChC;MACA;MACE,IAAAgC,KAAA,CAAAwC,SAAgB;QAClBjC,iBAAA,CAAAvC,KAAA,GAAAgC,KAAA,CAAAK,UAAA,KAAAqB,IAAA,CAAAG,KAAA,CAAA7B,KAAA,CAAAK,UAAA;MACA;MACAF,YAAA,CAAAnC,KAAqB,GAAAgC,KAAA,CAAAK,UAAA;MACvBC,UAAO,CAAAtC,KAAA;IACL;IACFiB,GAAA,CAAAmG,KAAA;MAAA,OAAApF,KAAA,CAAAK,UAAA;IAAA,aAAAlC,GAAA;MACAgC,YAAmB,CAAAnC,KAAA,GAAAG,GAAA;MACrBoC,iBAAA,CAAAvC,KAAA,GAAAgC,KAAA,CAAAK,UAAA,KAAAqB,IAAA,CAAAG,KAAA,CAAA7B,KAAA,CAAAK,UAAA;IAEA;IACE,KAAAL,KAAA,CAAAK,UAAwB;MACtBqD,IAAA,CAAAC,KAAA,CAAAC,kBAAA;IAAA;IAEFyB,MAAI;MACFV,eAAA,EAAAA,eAAA;MACFQ,iBAAA,EAAAA;IACA;IACA,iBAAAG,IAAA,EAAmBC,MAAA;MACrB,IAAAC,EAAA;MAEA,OAAAvG,GAAA,CAAAwG,SAAA,IAAAxG,GAAA,CAAAyG,kBAAA;QAAAC,EAAA,EACQ1G,GAAA,CAAA2G,KAAM,CAAA3F,OAAA;QACH,SAAAhB,GAAA,CAAA4G,cAAA,EAAA5G,GAAA,CAAA2G,KAAA,CAAApF,WAAA,GAAAvB,GAAA,CAAA2G,KAAA,CAAAlG,EAAA,EAAAoG,EAAA,aAAA7G,GAAA,CAAA2G,KAAA,CAAAjF,YAAA;QACPoF,IAAA,UAAqB;QACrB,eAAA9G,GAAA,CAAA2G,KAAA,CAAA1F,mBAAgC,IAAAoF,IAAoB,CAAAU,SAAA,YAAsB;QAC5E,mBAAA/G,GAAA,CAAA2G,KAAA,CAAA1F,mBAAA,KAAAsF,EAAA,GAAAvG,GAAA,CAAA2G,KAAA,CAAAvG,eAAA,sBAAAmG,EAAA,CAAAS,OAAA;QACF,iBAAA9F,YAAA,CAAAnC,KAAA;QAEI,gBAAmB,EAAAiB,GAAA,CAAA2G,KAAA,CAAA1E,IAAA;QACrB;QACF,iBAAAoE,IAAA,CAAAlD,GAAA;QAEa8D,QAAA;QAAArB,KAAA,EAAA5F,GAAA,CAAAkH,cAAA,CAAAlH,GAAA,CAAA2G,KAAA,CAAA/E,UAAA;QAEXuF,SAAA,EAAArC;MAAA,KAEA9E,GAAA,CAAAwG,SAAA,QAAAxG,GAAA,CAAAyG,kBAAA,CAAAzG,GAAA,CAAAoH,QAAA,QAAApH,GAAA,CAAAqH,UAAA,CAAAhB,IAAA,CAAAlD,GAAA,YAAAiB,IAAA,EAAA5E,GAAA;QACD,OAAAQ,GAAA,CAAAwG,SAAA,IAAAxG,GAAA,CAAAyG,kBAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}