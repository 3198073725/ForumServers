{"ast":null,"code":"'use strict';\n\nvar _slicedToArray = require(\"H:/ForumServers/ForumFrontend/node_modules/@babel/runtime/helpers/slicedToArray.js\")[\"default\"];\nrequire(\"core-js/modules/es.array.slice.js\");\nrequire(\"core-js/modules/es.number.parse-float.js\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nvar lodashUnified = require('lodash-unified');\nvar index$1 = require('../../../scrollbar/index.js');\nvar index$2 = require('../../../icon/index.js');\nvar iconsVue = require('@element-plus/icons-vue');\nvar constants = require('../constants.js');\nvar utils = require('../utils.js');\nvar basicTimeSpinner = require('../props/basic-time-spinner.js');\nvar useTimePicker = require('../composables/use-time-picker.js');\nvar pluginVue_exportHelper = require('../../../../_virtual/plugin-vue_export-helper.js');\nvar index$3 = require('../../../../directives/repeat-click/index.js');\nvar event = require('../../../../constants/event.js');\nvar index = require('../../../../hooks/use-namespace/index.js');\nvar style = require('../../../../utils/dom/style.js');\nvar types = require('../../../../utils/types.js');\nvar _sfc_main = /* @__PURE__ */vue.defineComponent({\n  __name: \"basic-time-spinner\",\n  props: basicTimeSpinner.basicTimeSpinnerProps,\n  emits: [event.CHANGE_EVENT, \"select-range\", \"set-option\"],\n  setup: function setup(__props, _ref) {\n    var emit = _ref.emit;\n    var props = __props;\n    var pickerBase = vue.inject(\"EP_PICKER_BASE\");\n    var _pickerBase$props = pickerBase.props,\n      isRange = _pickerBase$props.isRange,\n      format = _pickerBase$props.format;\n    var ns = index.useNamespace(\"time\");\n    var _useTimePicker$getTim = useTimePicker.getTimeLists(props.disabledHours, props.disabledMinutes, props.disabledSeconds),\n      getHoursList = _useTimePicker$getTim.getHoursList,\n      getMinutesList = _useTimePicker$getTim.getMinutesList,\n      getSecondsList = _useTimePicker$getTim.getSecondsList;\n    var isScrolling = false;\n    var currentScrollbar = vue.ref();\n    var listHoursRef = vue.ref();\n    var listMinutesRef = vue.ref();\n    var listSecondsRef = vue.ref();\n    var listRefsMap = {\n      hours: listHoursRef,\n      minutes: listMinutesRef,\n      seconds: listSecondsRef\n    };\n    var spinnerItems = vue.computed(function () {\n      return props.showSeconds ? constants.timeUnits : constants.timeUnits.slice(0, 2);\n    });\n    var timePartials = vue.computed(function () {\n      var spinnerDate = props.spinnerDate;\n      var hours = spinnerDate.hour();\n      var minutes = spinnerDate.minute();\n      var seconds = spinnerDate.second();\n      return {\n        hours: hours,\n        minutes: minutes,\n        seconds: seconds\n      };\n    });\n    var timeList = vue.computed(function () {\n      var _vue$unref = vue.unref(timePartials),\n        hours = _vue$unref.hours,\n        minutes = _vue$unref.minutes;\n      var role = props.role,\n        spinnerDate = props.spinnerDate;\n      var compare = !isRange ? spinnerDate : void 0;\n      return {\n        hours: getHoursList(role, compare),\n        minutes: getMinutesList(hours, role, compare),\n        seconds: getSecondsList(hours, minutes, role, compare)\n      };\n    });\n    var arrowControlTimeList = vue.computed(function () {\n      var _vue$unref2 = vue.unref(timePartials),\n        hours = _vue$unref2.hours,\n        minutes = _vue$unref2.minutes,\n        seconds = _vue$unref2.seconds;\n      return {\n        hours: utils.buildTimeList(hours, 23),\n        minutes: utils.buildTimeList(minutes, 59),\n        seconds: utils.buildTimeList(seconds, 59)\n      };\n    });\n    var debouncedResetScroll = lodashUnified.debounce(function (type) {\n      isScrolling = false;\n      adjustCurrentSpinner(type);\n    }, 200);\n    var getAmPmFlag = function getAmPmFlag(hour) {\n      var shouldShowAmPm = !!props.amPmMode;\n      if (!shouldShowAmPm) return \"\";\n      var isCapital = props.amPmMode === \"A\";\n      var content = hour < 12 ? \" am\" : \" pm\";\n      if (isCapital) content = content.toUpperCase();\n      return content;\n    };\n    var emitSelectRange = function emitSelectRange(type) {\n      var range = [0, 0];\n      if (!format || format === constants.DEFAULT_FORMATS_TIME) {\n        switch (type) {\n          case \"hours\":\n            range = [0, 2];\n            break;\n          case \"minutes\":\n            range = [3, 5];\n            break;\n          case \"seconds\":\n            range = [6, 8];\n            break;\n        }\n      }\n      var _range = range,\n        _range2 = _slicedToArray(_range, 2),\n        left = _range2[0],\n        right = _range2[1];\n      emit(\"select-range\", left, right);\n      currentScrollbar.value = type;\n    };\n    var adjustCurrentSpinner = function adjustCurrentSpinner(type) {\n      adjustSpinner(type, vue.unref(timePartials)[type]);\n    };\n    var adjustSpinners = function adjustSpinners() {\n      adjustCurrentSpinner(\"hours\");\n      adjustCurrentSpinner(\"minutes\");\n      adjustCurrentSpinner(\"seconds\");\n    };\n    var getScrollbarElement = function getScrollbarElement(el) {\n      return el.querySelector(\".\".concat(ns.namespace.value, \"-scrollbar__wrap\"));\n    };\n    var adjustSpinner = function adjustSpinner(type, value) {\n      if (props.arrowControl) return;\n      var scrollbar = vue.unref(listRefsMap[type]);\n      if (scrollbar && scrollbar.$el) {\n        getScrollbarElement(scrollbar.$el).scrollTop = Math.max(0, value * typeItemHeight(type));\n      }\n    };\n    var typeItemHeight = function typeItemHeight(type) {\n      var scrollbar = vue.unref(listRefsMap[type]);\n      var listItem = scrollbar == null ? void 0 : scrollbar.$el.querySelector(\"li\");\n      if (listItem) {\n        return Number.parseFloat(style.getStyle(listItem, \"height\")) || 0;\n      }\n      return 0;\n    };\n    var onIncrement = function onIncrement() {\n      scrollDown(1);\n    };\n    var onDecrement = function onDecrement() {\n      scrollDown(-1);\n    };\n    var scrollDown = function scrollDown(step) {\n      if (!currentScrollbar.value) {\n        emitSelectRange(\"hours\");\n      }\n      var label = currentScrollbar.value;\n      var now = vue.unref(timePartials)[label];\n      var total = currentScrollbar.value === \"hours\" ? 24 : 60;\n      var next = findNextUnDisabled(label, now, step, total);\n      modifyDateField(label, next);\n      adjustSpinner(label, next);\n      vue.nextTick(function () {\n        return emitSelectRange(label);\n      });\n    };\n    var findNextUnDisabled = function findNextUnDisabled(type, now, step, total) {\n      var next = (now + step + total) % total;\n      var list = vue.unref(timeList)[type];\n      while (list[next] && next !== now) {\n        next = (next + step + total) % total;\n      }\n      return next;\n    };\n    var modifyDateField = function modifyDateField(type, value) {\n      var list = vue.unref(timeList)[type];\n      var isDisabled = list[value];\n      if (isDisabled) return;\n      var _vue$unref3 = vue.unref(timePartials),\n        hours = _vue$unref3.hours,\n        minutes = _vue$unref3.minutes,\n        seconds = _vue$unref3.seconds;\n      var changeTo;\n      switch (type) {\n        case \"hours\":\n          changeTo = props.spinnerDate.hour(value).minute(minutes).second(seconds);\n          break;\n        case \"minutes\":\n          changeTo = props.spinnerDate.hour(hours).minute(value).second(seconds);\n          break;\n        case \"seconds\":\n          changeTo = props.spinnerDate.hour(hours).minute(minutes).second(value);\n          break;\n      }\n      emit(event.CHANGE_EVENT, changeTo);\n    };\n    var handleClick = function handleClick(type, _ref2) {\n      var value = _ref2.value,\n        disabled = _ref2.disabled;\n      if (!disabled) {\n        modifyDateField(type, value);\n        emitSelectRange(type);\n        adjustSpinner(type, value);\n      }\n    };\n    var handleScroll = function handleScroll(type) {\n      var scrollbar = vue.unref(listRefsMap[type]);\n      if (!scrollbar) return;\n      isScrolling = true;\n      debouncedResetScroll(type);\n      var value = Math.min(Math.round((getScrollbarElement(scrollbar.$el).scrollTop - (scrollBarHeight(type) * 0.5 - 10) / typeItemHeight(type) + 3) / typeItemHeight(type)), type === \"hours\" ? 23 : 59);\n      modifyDateField(type, value);\n    };\n    var scrollBarHeight = function scrollBarHeight(type) {\n      return vue.unref(listRefsMap[type]).$el.offsetHeight;\n    };\n    var bindScrollEvent = function bindScrollEvent() {\n      var bindFunction = function bindFunction(type) {\n        var scrollbar = vue.unref(listRefsMap[type]);\n        if (scrollbar && scrollbar.$el) {\n          getScrollbarElement(scrollbar.$el).onscroll = function () {\n            handleScroll(type);\n          };\n        }\n      };\n      bindFunction(\"hours\");\n      bindFunction(\"minutes\");\n      bindFunction(\"seconds\");\n    };\n    vue.onMounted(function () {\n      vue.nextTick(function () {\n        !props.arrowControl && bindScrollEvent();\n        adjustSpinners();\n        if (props.role === \"start\") emitSelectRange(\"hours\");\n      });\n    });\n    var setRef = function setRef(scrollbar, type) {\n      listRefsMap[type].value = scrollbar != null ? scrollbar : void 0;\n    };\n    emit(\"set-option\", [\"\".concat(props.role, \"_scrollDown\"), scrollDown]);\n    emit(\"set-option\", [\"\".concat(props.role, \"_emitSelectRange\"), emitSelectRange]);\n    vue.watch(function () {\n      return props.spinnerDate;\n    }, function () {\n      if (isScrolling) return;\n      adjustSpinners();\n    });\n    return function (_ctx, _cache) {\n      return vue.openBlock(), vue.createElementBlock(\"div\", {\n        \"class\": vue.normalizeClass([vue.unref(ns).b(\"spinner\"), {\n          \"has-seconds\": _ctx.showSeconds\n        }])\n      }, [!_ctx.arrowControl ? (vue.openBlock(true), vue.createElementBlock(vue.Fragment, {\n        key: 0\n      }, vue.renderList(vue.unref(spinnerItems), function (item) {\n        return vue.openBlock(), vue.createBlock(vue.unref(index$1.ElScrollbar), {\n          key: item,\n          ref_for: true,\n          ref: function ref(scrollbar) {\n            return setRef(scrollbar, item);\n          },\n          \"class\": vue.normalizeClass(vue.unref(ns).be(\"spinner\", \"wrapper\")),\n          \"wrap-style\": \"max-height: inherit;\",\n          \"view-class\": vue.unref(ns).be(\"spinner\", \"list\"),\n          noresize: \"\",\n          tag: \"ul\",\n          onMouseenter: function onMouseenter($event) {\n            return emitSelectRange(item);\n          },\n          onMousemove: function onMousemove($event) {\n            return adjustCurrentSpinner(item);\n          }\n        }, {\n          \"default\": vue.withCtx(function () {\n            return [(vue.openBlock(true), vue.createElementBlock(vue.Fragment, null, vue.renderList(vue.unref(timeList)[item], function (disabled, key) {\n              return vue.openBlock(), vue.createElementBlock(\"li\", {\n                key: key,\n                \"class\": vue.normalizeClass([vue.unref(ns).be(\"spinner\", \"item\"), vue.unref(ns).is(\"active\", key === vue.unref(timePartials)[item]), vue.unref(ns).is(\"disabled\", disabled)]),\n                onClick: function onClick($event) {\n                  return handleClick(item, {\n                    value: key,\n                    disabled: disabled\n                  });\n                }\n              }, [item === \"hours\" ? (vue.openBlock(), vue.createElementBlock(vue.Fragment, {\n                key: 0\n              }, [vue.createTextVNode(vue.toDisplayString((\"0\" + (_ctx.amPmMode ? key % 12 || 12 : key)).slice(-2)) + vue.toDisplayString(getAmPmFlag(key)), 1)], 64)) : (vue.openBlock(), vue.createElementBlock(vue.Fragment, {\n                key: 1\n              }, [vue.createTextVNode(vue.toDisplayString((\"0\" + key).slice(-2)), 1)], 64))], 10, [\"onClick\"]);\n            }), 128))];\n          }),\n          _: 2\n        }, 1032, [\"class\", \"view-class\", \"onMouseenter\", \"onMousemove\"]);\n      }), 128)) : vue.createCommentVNode(\"v-if\", true), _ctx.arrowControl ? (vue.openBlock(true), vue.createElementBlock(vue.Fragment, {\n        key: 1\n      }, vue.renderList(vue.unref(spinnerItems), function (item) {\n        return vue.openBlock(), vue.createElementBlock(\"div\", {\n          key: item,\n          \"class\": vue.normalizeClass([vue.unref(ns).be(\"spinner\", \"wrapper\"), vue.unref(ns).is(\"arrow\")]),\n          onMouseenter: function onMouseenter($event) {\n            return emitSelectRange(item);\n          }\n        }, [vue.withDirectives((vue.openBlock(), vue.createBlock(vue.unref(index$2.ElIcon), {\n          \"class\": vue.normalizeClass([\"arrow-up\", vue.unref(ns).be(\"spinner\", \"arrow\")])\n        }, {\n          \"default\": vue.withCtx(function () {\n            return [vue.createVNode(vue.unref(iconsVue.ArrowUp))];\n          }),\n          _: 1\n        }, 8, [\"class\"])), [[vue.unref(index$3.vRepeatClick), onDecrement]]), vue.withDirectives((vue.openBlock(), vue.createBlock(vue.unref(index$2.ElIcon), {\n          \"class\": vue.normalizeClass([\"arrow-down\", vue.unref(ns).be(\"spinner\", \"arrow\")])\n        }, {\n          \"default\": vue.withCtx(function () {\n            return [vue.createVNode(vue.unref(iconsVue.ArrowDown))];\n          }),\n          _: 1\n        }, 8, [\"class\"])), [[vue.unref(index$3.vRepeatClick), onIncrement]]), vue.createElementVNode(\"ul\", {\n          \"class\": vue.normalizeClass(vue.unref(ns).be(\"spinner\", \"list\"))\n        }, [(vue.openBlock(true), vue.createElementBlock(vue.Fragment, null, vue.renderList(vue.unref(arrowControlTimeList)[item], function (time, key) {\n          return vue.openBlock(), vue.createElementBlock(\"li\", {\n            key: key,\n            \"class\": vue.normalizeClass([vue.unref(ns).be(\"spinner\", \"item\"), vue.unref(ns).is(\"active\", time === vue.unref(timePartials)[item]), vue.unref(ns).is(\"disabled\", vue.unref(timeList)[item][time])])\n          }, [vue.unref(types.isNumber)(time) ? (vue.openBlock(), vue.createElementBlock(vue.Fragment, {\n            key: 0\n          }, [item === \"hours\" ? (vue.openBlock(), vue.createElementBlock(vue.Fragment, {\n            key: 0\n          }, [vue.createTextVNode(vue.toDisplayString((\"0\" + (_ctx.amPmMode ? time % 12 || 12 : time)).slice(-2)) + vue.toDisplayString(getAmPmFlag(time)), 1)], 64)) : (vue.openBlock(), vue.createElementBlock(vue.Fragment, {\n            key: 1\n          }, [vue.createTextVNode(vue.toDisplayString((\"0\" + time).slice(-2)), 1)], 64))], 64)) : vue.createCommentVNode(\"v-if\", true)], 2);\n        }), 128))], 2)], 42, [\"onMouseenter\"]);\n      }), 128)) : vue.createCommentVNode(\"v-if\", true)], 2);\n    };\n  }\n});\nvar TimeSpinner = /* @__PURE__ */pluginVue_exportHelper[\"default\"](_sfc_main, [[\"__file\", \"basic-time-spinner.vue\"]]);\nexports[\"default\"] = TimeSpinner;","map":{"version":3,"names":["pickerBase","vue","inject","_pickerBase$props","props","isRange","format","ns","index","useNamespace","_useTimePicker$getTim","useTimePicker","getTimeLists","disabledHours","disabledMinutes","disabledSeconds","getHoursList","getMinutesList","getSecondsList","isScrolling","currentScrollbar","ref","listHoursRef","listMinutesRef","listSecondsRef","listRefsMap","hours","minutes","seconds","spinnerItems","computed","showSeconds","constants","timeUnits","slice","timePartials","spinnerDate","hour","minute","second","timeList","_vue$unref","unref","role","compare","arrowControlTimeList","_vue$unref2","utils","buildTimeList","debouncedResetScroll","lodashUnified","debounce","type","adjustCurrentSpinner","getAmPmFlag","shouldShowAmPm","amPmMode","isCapital","content","toUpperCase","emitSelectRange","range","DEFAULT_FORMATS_TIME","_range","_range2","_slicedToArray","left","right","emit","value","adjustSpinner","adjustSpinners","getScrollbarElement","el","querySelector","concat","namespace","arrowControl","scrollbar","$el","scrollTop","Math","max","typeItemHeight","listItem","Number","parseFloat","style","getStyle","onIncrement","scrollDown","onDecrement","step","label","now","total","next","findNextUnDisabled","modifyDateField","nextTick","list","isDisabled","_vue$unref3","changeTo","event","CHANGE_EVENT","handleClick","_ref2","disabled","handleScroll","min","round","scrollBarHeight","offsetHeight","bindScrollEvent","bindFunction","onscroll","onMounted","setRef","watch","_ctx","_cache","openBlock","createElementBlock","normalizeClass","b","Fragment","key","renderList","item","createBlock","index$1","ElScrollbar","ref_for"],"sources":["../../../../../../../packages/components/time-picker/src/time-picker-com/basic-time-spinner.vue"],"sourcesContent":["<template>\n  <div :class=\"[ns.b('spinner'), { 'has-seconds': showSeconds }]\">\n    <template v-if=\"!arrowControl\">\n      <el-scrollbar\n        v-for=\"item in spinnerItems\"\n        :key=\"item\"\n        :ref=\"(scrollbar: unknown) => setRef(scrollbar as any, item)\"\n        :class=\"ns.be('spinner', 'wrapper')\"\n        wrap-style=\"max-height: inherit;\"\n        :view-class=\"ns.be('spinner', 'list')\"\n        noresize\n        tag=\"ul\"\n        @mouseenter=\"emitSelectRange(item)\"\n        @mousemove=\"adjustCurrentSpinner(item)\"\n      >\n        <li\n          v-for=\"(disabled, key) in timeList[item]\"\n          :key=\"key\"\n          :class=\"[\n            ns.be('spinner', 'item'),\n            ns.is('active', key === timePartials[item]),\n            ns.is('disabled', disabled),\n          ]\"\n          @click=\"handleClick(item, { value: key, disabled })\"\n        >\n          <template v-if=\"item === 'hours'\">\n            {{ ('0' + (amPmMode ? key % 12 || 12 : key)).slice(-2)\n            }}{{ getAmPmFlag(key) }}\n          </template>\n          <template v-else>\n            {{ ('0' + key).slice(-2) }}\n          </template>\n        </li>\n      </el-scrollbar>\n    </template>\n    <template v-if=\"arrowControl\">\n      <div\n        v-for=\"item in spinnerItems\"\n        :key=\"item\"\n        :class=\"[ns.be('spinner', 'wrapper'), ns.is('arrow')]\"\n        @mouseenter=\"emitSelectRange(item)\"\n      >\n        <el-icon\n          v-repeat-click=\"onDecrement\"\n          :class=\"['arrow-up', ns.be('spinner', 'arrow')]\"\n        >\n          <arrow-up />\n        </el-icon>\n        <el-icon\n          v-repeat-click=\"onIncrement\"\n          :class=\"['arrow-down', ns.be('spinner', 'arrow')]\"\n        >\n          <arrow-down />\n        </el-icon>\n        <ul :class=\"ns.be('spinner', 'list')\">\n          <li\n            v-for=\"(time, key) in arrowControlTimeList[item]\"\n            :key=\"key\"\n            :class=\"[\n              ns.be('spinner', 'item'),\n              ns.is('active', time === timePartials[item]),\n              ns.is('disabled', timeList[item][time!]),\n            ]\"\n          >\n            <template v-if=\"isNumber(time)\">\n              <template v-if=\"item === 'hours'\">\n                {{ ('0' + (amPmMode ? time % 12 || 12 : time)).slice(-2)\n                }}{{ getAmPmFlag(time) }}\n              </template>\n              <template v-else>\n                {{ ('0' + time).slice(-2) }}\n              </template>\n            </template>\n          </li>\n        </ul>\n      </div>\n    </template>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { computed, inject, nextTick, onMounted, ref, unref, watch } from 'vue'\nimport { debounce } from 'lodash-unified'\nimport { vRepeatClick } from '@element-plus/directives'\nimport ElScrollbar from '@element-plus/components/scrollbar'\nimport ElIcon from '@element-plus/components/icon'\nimport { ArrowDown, ArrowUp } from '@element-plus/icons-vue'\nimport { useNamespace } from '@element-plus/hooks'\nimport { getStyle, isNumber } from '@element-plus/utils'\nimport { CHANGE_EVENT } from '@element-plus/constants'\nimport { DEFAULT_FORMATS_TIME, timeUnits } from '../constants'\nimport { buildTimeList } from '../utils'\nimport { basicTimeSpinnerProps } from '../props/basic-time-spinner'\nimport { getTimeLists } from '../composables/use-time-picker'\n\nimport type { Ref } from 'vue'\nimport type { ScrollbarInstance } from '@element-plus/components/scrollbar'\nimport type { TimeUnit } from '../constants'\nimport type { TimeList } from '../utils'\n\nconst props = defineProps(basicTimeSpinnerProps)\nconst pickerBase = inject('EP_PICKER_BASE') as any\nconst { isRange, format } = pickerBase.props\nconst emit = defineEmits([CHANGE_EVENT, 'select-range', 'set-option'])\n\nconst ns = useNamespace('time')\n\nconst { getHoursList, getMinutesList, getSecondsList } = getTimeLists(\n  props.disabledHours,\n  props.disabledMinutes,\n  props.disabledSeconds\n)\n\n// data\nlet isScrolling = false\n\nconst currentScrollbar = ref<TimeUnit>()\nconst listHoursRef = ref<ScrollbarInstance>()\nconst listMinutesRef = ref<ScrollbarInstance>()\nconst listSecondsRef = ref<ScrollbarInstance>()\nconst listRefsMap: Record<TimeUnit, Ref<ScrollbarInstance | undefined>> = {\n  hours: listHoursRef,\n  minutes: listMinutesRef,\n  seconds: listSecondsRef,\n}\n\n// computed\nconst spinnerItems = computed(() => {\n  return props.showSeconds ? timeUnits : timeUnits.slice(0, 2)\n})\n\nconst timePartials = computed<Record<TimeUnit, number>>(() => {\n  const { spinnerDate } = props\n  const hours = spinnerDate.hour()\n  const minutes = spinnerDate.minute()\n  const seconds = spinnerDate.second()\n  return { hours, minutes, seconds }\n})\n\nconst timeList = computed(() => {\n  const { hours, minutes } = unref(timePartials)\n  const { role, spinnerDate } = props\n  const compare = !isRange ? spinnerDate : undefined\n  return {\n    hours: getHoursList(role, compare),\n    minutes: getMinutesList(hours, role, compare),\n    seconds: getSecondsList(hours, minutes, role, compare),\n  }\n})\n\nconst arrowControlTimeList = computed<Record<TimeUnit, TimeList>>(() => {\n  const { hours, minutes, seconds } = unref(timePartials)\n\n  return {\n    hours: buildTimeList(hours, 23),\n    minutes: buildTimeList(minutes, 59),\n    seconds: buildTimeList(seconds, 59),\n  }\n})\n\nconst debouncedResetScroll = debounce((type) => {\n  isScrolling = false\n  adjustCurrentSpinner(type)\n}, 200)\n\nconst getAmPmFlag = (hour: number) => {\n  const shouldShowAmPm = !!props.amPmMode\n  if (!shouldShowAmPm) return ''\n  const isCapital = props.amPmMode === 'A'\n  // todo locale\n  let content = hour < 12 ? ' am' : ' pm'\n  if (isCapital) content = content.toUpperCase()\n  return content\n}\n\nconst emitSelectRange = (type: TimeUnit) => {\n  let range = [0, 0]\n  if (!format || format === DEFAULT_FORMATS_TIME) {\n    switch (type) {\n      case 'hours':\n        range = [0, 2]\n        break\n      case 'minutes':\n        range = [3, 5]\n        break\n      case 'seconds':\n        range = [6, 8]\n        break\n    }\n  }\n  const [left, right] = range\n\n  emit('select-range', left, right)\n  currentScrollbar.value = type\n}\n\nconst adjustCurrentSpinner = (type: TimeUnit) => {\n  adjustSpinner(type, unref(timePartials)[type])\n}\n\nconst adjustSpinners = () => {\n  adjustCurrentSpinner('hours')\n  adjustCurrentSpinner('minutes')\n  adjustCurrentSpinner('seconds')\n}\n\nconst getScrollbarElement = (el: HTMLElement) =>\n  el.querySelector(`.${ns.namespace.value}-scrollbar__wrap`) as HTMLElement\n\nconst adjustSpinner = (type: TimeUnit, value: number) => {\n  if (props.arrowControl) return\n  const scrollbar = unref(listRefsMap[type])\n  if (scrollbar && scrollbar.$el) {\n    getScrollbarElement(scrollbar.$el).scrollTop = Math.max(\n      0,\n      value * typeItemHeight(type)\n    )\n  }\n}\n\nconst typeItemHeight = (type: TimeUnit): number => {\n  const scrollbar = unref(listRefsMap[type])\n  const listItem = scrollbar?.$el.querySelector('li')\n  if (listItem) {\n    return Number.parseFloat(getStyle(listItem, 'height')) || 0\n  }\n  return 0\n}\n\nconst onIncrement = () => {\n  scrollDown(1)\n}\n\nconst onDecrement = () => {\n  scrollDown(-1)\n}\n\nconst scrollDown = (step: number) => {\n  if (!currentScrollbar.value) {\n    emitSelectRange('hours')\n  }\n\n  const label = currentScrollbar.value!\n  const now = unref(timePartials)[label]\n  const total = currentScrollbar.value === 'hours' ? 24 : 60\n  const next = findNextUnDisabled(label, now, step, total)\n\n  modifyDateField(label, next)\n  adjustSpinner(label, next)\n  nextTick(() => emitSelectRange(label))\n}\n\nconst findNextUnDisabled = (\n  type: TimeUnit,\n  now: number,\n  step: number,\n  total: number\n) => {\n  let next = (now + step + total) % total\n  const list = unref(timeList)[type]\n  while (list[next] && next !== now) {\n    next = (next + step + total) % total\n  }\n  return next\n}\n\nconst modifyDateField = (type: TimeUnit, value: number) => {\n  const list = unref(timeList)[type]\n  const isDisabled = list[value]\n  if (isDisabled) return\n\n  const { hours, minutes, seconds } = unref(timePartials)\n\n  let changeTo\n  switch (type) {\n    case 'hours':\n      changeTo = props.spinnerDate.hour(value).minute(minutes).second(seconds)\n      break\n    case 'minutes':\n      changeTo = props.spinnerDate.hour(hours).minute(value).second(seconds)\n      break\n    case 'seconds':\n      changeTo = props.spinnerDate.hour(hours).minute(minutes).second(value)\n      break\n  }\n  emit(CHANGE_EVENT, changeTo)\n}\n\nconst handleClick = (\n  type: TimeUnit,\n  { value, disabled }: { value: number; disabled: boolean }\n) => {\n  if (!disabled) {\n    modifyDateField(type, value)\n    emitSelectRange(type)\n    adjustSpinner(type, value)\n  }\n}\n\nconst handleScroll = (type: TimeUnit) => {\n  const scrollbar = unref(listRefsMap[type])\n  if (!scrollbar) return\n\n  isScrolling = true\n  debouncedResetScroll(type)\n  const value = Math.min(\n    Math.round(\n      (getScrollbarElement(scrollbar.$el).scrollTop -\n        (scrollBarHeight(type) * 0.5 - 10) / typeItemHeight(type) +\n        3) /\n        typeItemHeight(type)\n    ),\n    type === 'hours' ? 23 : 59\n  )\n  modifyDateField(type, value)\n}\n\nconst scrollBarHeight = (type: TimeUnit) => {\n  return unref(listRefsMap[type])!.$el.offsetHeight\n}\n\nconst bindScrollEvent = () => {\n  const bindFunction = (type: TimeUnit) => {\n    const scrollbar = unref(listRefsMap[type])\n    if (scrollbar && scrollbar.$el) {\n      getScrollbarElement(scrollbar.$el).onscroll = () => {\n        // TODO: scroll is emitted when set scrollTop programmatically\n        // should find better solutions in the future!\n        handleScroll(type)\n      }\n    }\n  }\n  bindFunction('hours')\n  bindFunction('minutes')\n  bindFunction('seconds')\n}\n\nonMounted(() => {\n  nextTick(() => {\n    !props.arrowControl && bindScrollEvent()\n    adjustSpinners()\n    // set selection on the first hour part\n    if (props.role === 'start') emitSelectRange('hours')\n  })\n})\n\nconst setRef = (scrollbar: ScrollbarInstance | null, type: TimeUnit) => {\n  listRefsMap[type].value = scrollbar ?? undefined\n}\n\nemit('set-option', [`${props.role}_scrollDown`, scrollDown])\nemit('set-option', [`${props.role}_emitSelectRange`, emitSelectRange])\n\nwatch(\n  () => props.spinnerDate,\n  () => {\n    if (isScrolling) return\n    adjustSpinners()\n  }\n)\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}