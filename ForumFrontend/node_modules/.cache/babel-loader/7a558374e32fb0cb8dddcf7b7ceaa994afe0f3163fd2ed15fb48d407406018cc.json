{"ast":null,"code":"'use strict';\n\nvar _createForOfIteratorHelper = require(\"H:/ForumServers/ForumFrontend/node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js\")[\"default\"];\nrequire(\"core-js/modules/es.array.includes.js\");\nrequire(\"core-js/modules/es.array.map.js\");\nrequire(\"core-js/modules/es.iterator.constructor.js\");\nrequire(\"core-js/modules/es.iterator.map.js\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar aria = require('../../../constants/aria.js');\nvar MAP_KEY_TO_FOCUS_INTENT = {\n  ArrowLeft: \"prev\",\n  ArrowUp: \"prev\",\n  ArrowRight: \"next\",\n  ArrowDown: \"next\",\n  PageUp: \"first\",\n  Home: \"first\",\n  PageDown: \"last\",\n  End: \"last\"\n};\nvar getDirectionAwareKey = function getDirectionAwareKey(key, dir) {\n  if (dir !== \"rtl\") return key;\n  switch (key) {\n    case aria.EVENT_CODE.right:\n      return aria.EVENT_CODE.left;\n    case aria.EVENT_CODE.left:\n      return aria.EVENT_CODE.right;\n    default:\n      return key;\n  }\n};\nvar getFocusIntent = function getFocusIntent(event, orientation, dir) {\n  var key = getDirectionAwareKey(event.code, dir);\n  if (orientation === \"vertical\" && [aria.EVENT_CODE.left, aria.EVENT_CODE.right].includes(key)) return void 0;\n  if (orientation === \"horizontal\" && [aria.EVENT_CODE.up, aria.EVENT_CODE.down].includes(key)) return void 0;\n  return MAP_KEY_TO_FOCUS_INTENT[key];\n};\nvar reorderArray = function reorderArray(array, atIdx) {\n  return array.map(function (_, idx) {\n    return array[(idx + atIdx) % array.length];\n  });\n};\nvar focusFirst = function focusFirst(elements) {\n  var _document = document,\n    prevActive = _document.activeElement;\n  var _iterator = _createForOfIteratorHelper(elements),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var element = _step.value;\n      if (element === prevActive) return;\n      element.focus();\n      if (prevActive !== document.activeElement) return;\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n};\nexports.focusFirst = focusFirst;\nexports.getFocusIntent = getFocusIntent;\nexports.reorderArray = reorderArray;","map":{"version":3,"names":["MAP_KEY_TO_FOCUS_INTENT","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","PageUp","Home","PageDown","End","getDirectionAwareKey","key","dir","aria","EVENT_CODE","right","left","getFocusIntent","event","orientation","code","includes","up","down","reorderArray","array","atIdx","map","_","idx","length","focusFirst","elements","_document","document","prevActive","activeElement","_iterator","_createForOfIteratorHelper","_step","s","n","done","element","value","focus","err","e","f"],"sources":["../../../../../../packages/components/roving-focus-group/src/utils.ts"],"sourcesContent":["import { EVENT_CODE } from '@element-plus/constants'\nimport type { HTMLAttributes } from 'vue'\n\ntype Orientation = HTMLAttributes['aria-orientation']\ntype Direction = 'ltr' | 'rtl'\ntype FocusIntent = 'first' | 'last' | 'prev' | 'next'\n\nconst MAP_KEY_TO_FOCUS_INTENT: Record<string, FocusIntent> = {\n  ArrowLeft: 'prev',\n  ArrowUp: 'prev',\n  ArrowRight: 'next',\n  ArrowDown: 'next',\n  PageUp: 'first',\n  Home: 'first',\n  PageDown: 'last',\n  End: 'last',\n}\n\nconst getDirectionAwareKey = (key: string, dir?: Direction) => {\n  if (dir !== 'rtl') return key\n\n  switch (key) {\n    case EVENT_CODE.right:\n      return EVENT_CODE.left\n    case EVENT_CODE.left:\n      return EVENT_CODE.right\n    default:\n      return key\n  }\n}\n\nexport const getFocusIntent = (\n  event: KeyboardEvent,\n  orientation?: Orientation,\n  dir?: Direction\n) => {\n  const key = getDirectionAwareKey(event.code, dir)\n  if (\n    orientation === 'vertical' &&\n    [EVENT_CODE.left, EVENT_CODE.right].includes(key)\n  )\n    return undefined\n  if (\n    orientation === 'horizontal' &&\n    [EVENT_CODE.up, EVENT_CODE.down].includes(key)\n  )\n    return undefined\n  return MAP_KEY_TO_FOCUS_INTENT[key]\n}\n\nexport const reorderArray = <T>(array: T[], atIdx: number) => {\n  return array.map((_, idx) => array[(idx + atIdx) % array.length])\n}\n\nexport const focusFirst = (elements: HTMLElement[]) => {\n  const { activeElement: prevActive } = document\n\n  for (const element of elements) {\n    if (element === prevActive) return\n    element.focus()\n    if (prevActive !== document.activeElement) return\n  }\n}\n"],"mappings":";;;;;;;;;;;;;AACA,IAAMA,uBAAuB,GAAG;EAC9BC,SAAS,EAAE,MAAM;EACjBC,OAAO,EAAE,MAAM;EACfC,UAAU,EAAE,MAAM;EAClBC,SAAS,EAAE,MAAM;EACjBC,MAAM,EAAE,OAAO;EACfC,IAAI,EAAE,OAAO;EACbC,QAAQ,EAAE,MAAM;EAChBC,GAAG,EAAE;AACP,CAAC;AACD,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAoBA,CAAIC,GAAG,EAAEC,GAAG,EAAK;EACzC,IAAIA,GAAG,KAAK,KAAK,EACf,OAAOD,GAAG;EACZ,QAAQA,GAAG;IACT,KAAKE,IAAA,CAAAC,UAAU,CAACC,KAAK;MACnB,OAAOF,IAAA,CAAAC,UAAU,CAACE,IAAI;IACxB,KAAKH,IAAA,CAAAC,UAAU,CAACE,IAAI;MAClB,OAAOH,IAAA,CAAAC,UAAU,CAACC,KAAK;IACzB;MACE,OAAOJ,GAAG;EAChB;AACA,CAAC;AACW,IAACM,cAAc,GAAG,SAAjBA,cAAcA,CAAIC,KAAK,EAAEC,WAAW,EAAEP,GAAG,EAAK;EACzD,IAAMD,GAAG,GAAGD,oBAAoB,CAACQ,KAAK,CAACE,IAAI,EAAER,GAAG,CAAC;EACjD,IAAIO,WAAW,KAAK,UAAU,IAAI,CAACN,IAAA,CAAAC,UAAU,CAACE,IAAI,EAAEH,IAAA,CAAAC,UAAU,CAACC,KAAK,CAAC,CAACM,QAAQ,CAACV,GAAG,CAAC,EACjF,OAAO,KAAK,CAAC;EACf,IAAIQ,WAAW,KAAK,YAAY,IAAI,CAACN,IAAA,CAAAC,UAAU,CAACQ,EAAE,EAAET,IAAA,CAAAC,UAAU,CAACS,IAAI,CAAC,CAACF,QAAQ,CAACV,GAAG,CAAC,EAChF,OAAO,KAAK,CAAC;EACf,OAAOV,uBAAuB,CAACU,GAAG,CAAC;AACrC;AACY,IAACa,YAAY,GAAG,SAAfA,YAAYA,CAAIC,KAAK,EAAEC,KAAK,EAAK;EAC5C,OAAOD,KAAK,CAACE,GAAG,CAAC,UAACC,CAAC,EAAEC,GAAG;IAAA,OAAKJ,KAAK,CAAC,CAACI,GAAG,GAAGH,KAAK,IAAID,KAAK,CAACK,MAAM,CAAC;EAAA,EAAC;AACnE;AACY,IAACC,UAAU,GAAG,SAAbA,UAAUA,CAAIC,QAAQ,EAAK;EACtC,IAAAC,SAAA,GAAsCC,QAAQ;IAAvBC,UAAU,GAAAF,SAAA,CAAzBG,aAAa;EAA0B,IAAAC,SAAA,GAAAC,0BAAA,CACzBN,QAAQ;IAAAO,KAAA;EAAA;IAA9B,KAAAF,SAAA,CAAAG,CAAA,MAAAD,KAAA,GAAAF,SAAA,CAAAI,CAAA,IAAAC,IAAA,GAAgC;MAAA,IAArBC,OAAO,GAAAJ,KAAA,CAAAK,KAAA;MAChB,IAAID,OAAO,KAAKR,UAAU,EACxB;MACFQ,OAAO,CAACE,KAAK,EAAE;MACf,IAAIV,UAAU,KAAKD,QAAQ,CAACE,aAAa,EACvC;IACN;EAAG,SAAAU,GAAA;IAAAT,SAAA,CAAAU,CAAA,CAAAD,GAAA;EAAA;IAAAT,SAAA,CAAAW,CAAA;EAAA;AACH","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}