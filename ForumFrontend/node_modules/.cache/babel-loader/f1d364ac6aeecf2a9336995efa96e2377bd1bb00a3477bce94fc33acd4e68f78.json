{"ast":null,"code":"import \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport request from '@/utils/request';\n\n// 获取评论列表\nexport function getCommentList(params) {\n  return request({\n    url: '/api/v1/comments/',\n    method: 'get',\n    params: params\n  });\n}\n\n// 获取帖子的评论列表\nexport function getPostComments(postId) {\n  var forceRefresh = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  // 添加时间戳参数，避免浏览器缓存\n  var timestamp = forceRefresh ? \"&_t=\".concat(new Date().getTime()) : '';\n  return request({\n    url: \"/api/v1/comments/?post=\".concat(postId).concat(timestamp),\n    method: 'get'\n  });\n}\n\n// 获取评论详情\nexport function getCommentDetail(id) {\n  return request({\n    url: \"/api/v1/comments/\".concat(id, \"/\"),\n    method: 'get'\n  });\n}\n\n// 创建评论\nexport function createComment(data) {\n  return request({\n    url: '/api/v1/comments/',\n    method: 'post',\n    data: data\n  });\n}\n\n// 回复评论\nexport function replyComment(postId, parentId, content) {\n  return request({\n    url: '/api/v1/comments/',\n    method: 'post',\n    data: {\n      post: postId,\n      parent: parentId,\n      content: content\n    }\n  });\n}\n\n// 更新评论\nexport function updateComment(id, data) {\n  return request({\n    url: \"/api/v1/comments/\".concat(id, \"/\"),\n    method: 'put',\n    data: data\n  });\n}\n\n// 删除评论\nexport function deleteComment(id) {\n  console.log(\"\\u51C6\\u5907\\u5220\\u9664\\u8BC4\\u8BBA\\uFF0CID: \".concat(id));\n  return request({\n    url: \"/api/v1/comments/\".concat(id, \"/\"),\n    method: 'delete'\n  }).then(function (response) {\n    console.log(\"\\u5220\\u9664\\u8BC4\\u8BBAAPI\\u54CD\\u5E94:\", response);\n    return response;\n  })[\"catch\"](function (error) {\n    console.error(\"\\u5220\\u9664\\u8BC4\\u8BBAAPI\\u9519\\u8BEF:\", error);\n    throw error;\n  });\n}","map":{"version":3,"names":["request","getCommentList","params","url","method","getPostComments","postId","forceRefresh","arguments","length","undefined","timestamp","concat","Date","getTime","getCommentDetail","id","createComment","data","replyComment","parentId","content","post","parent","updateComment","deleteComment","console","log","then","response","error"],"sources":["H:/ForumServers/ForumFrontend/src/api/comment.js"],"sourcesContent":["import request from '@/utils/request'\n\n// 获取评论列表\nexport function getCommentList(params) {\n  return request({\n    url: '/api/v1/comments/',\n    method: 'get',\n    params\n  })\n}\n\n// 获取帖子的评论列表\nexport function getPostComments(postId, forceRefresh = false) {\n  // 添加时间戳参数，避免浏览器缓存\n  const timestamp = forceRefresh ? `&_t=${new Date().getTime()}` : ''\n  return request({\n    url: `/api/v1/comments/?post=${postId}${timestamp}`,\n    method: 'get'\n  })\n}\n\n// 获取评论详情\nexport function getCommentDetail(id) {\n  return request({\n    url: `/api/v1/comments/${id}/`,\n    method: 'get'\n  })\n}\n\n// 创建评论\nexport function createComment(data) {\n  return request({\n    url: '/api/v1/comments/',\n    method: 'post',\n    data\n  })\n}\n\n// 回复评论\nexport function replyComment(postId, parentId, content) {\n  return request({\n    url: '/api/v1/comments/',\n    method: 'post',\n    data: {\n      post: postId,\n      parent: parentId,\n      content\n    }\n  })\n}\n\n// 更新评论\nexport function updateComment(id, data) {\n  return request({\n    url: `/api/v1/comments/${id}/`,\n    method: 'put',\n    data\n  })\n}\n\n// 删除评论\nexport function deleteComment(id) {\n  console.log(`准备删除评论，ID: ${id}`)\n  return request({\n    url: `/api/v1/comments/${id}/`,\n    method: 'delete'\n  }).then(response => {\n    console.log(`删除评论API响应:`, response)\n    return response\n  }).catch(error => {\n    console.error(`删除评论API错误:`, error)\n    throw error\n  })\n}\n"],"mappings":";;AAAA,OAAOA,OAAO,MAAM,iBAAiB;;AAErC;AACA,OAAO,SAASC,cAAcA,CAACC,MAAM,EAAE;EACrC,OAAOF,OAAO,CAAC;IACbG,GAAG,EAAE,mBAAmB;IACxBC,MAAM,EAAE,KAAK;IACbF,MAAM,EAANA;EACF,CAAC,CAAC;AACJ;;AAEA;AACA,OAAO,SAASG,eAAeA,CAACC,MAAM,EAAwB;EAAA,IAAtBC,YAAY,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,KAAK;EAC1D;EACA,IAAMG,SAAS,GAAGJ,YAAY,UAAAK,MAAA,CAAU,IAAIC,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,IAAK,EAAE;EACnE,OAAOd,OAAO,CAAC;IACbG,GAAG,4BAAAS,MAAA,CAA4BN,MAAM,EAAAM,MAAA,CAAGD,SAAS,CAAE;IACnDP,MAAM,EAAE;EACV,CAAC,CAAC;AACJ;;AAEA;AACA,OAAO,SAASW,gBAAgBA,CAACC,EAAE,EAAE;EACnC,OAAOhB,OAAO,CAAC;IACbG,GAAG,sBAAAS,MAAA,CAAsBI,EAAE,MAAG;IAC9BZ,MAAM,EAAE;EACV,CAAC,CAAC;AACJ;;AAEA;AACA,OAAO,SAASa,aAAaA,CAACC,IAAI,EAAE;EAClC,OAAOlB,OAAO,CAAC;IACbG,GAAG,EAAE,mBAAmB;IACxBC,MAAM,EAAE,MAAM;IACdc,IAAI,EAAJA;EACF,CAAC,CAAC;AACJ;;AAEA;AACA,OAAO,SAASC,YAAYA,CAACb,MAAM,EAAEc,QAAQ,EAAEC,OAAO,EAAE;EACtD,OAAOrB,OAAO,CAAC;IACbG,GAAG,EAAE,mBAAmB;IACxBC,MAAM,EAAE,MAAM;IACdc,IAAI,EAAE;MACJI,IAAI,EAAEhB,MAAM;MACZiB,MAAM,EAAEH,QAAQ;MAChBC,OAAO,EAAPA;IACF;EACF,CAAC,CAAC;AACJ;;AAEA;AACA,OAAO,SAASG,aAAaA,CAACR,EAAE,EAAEE,IAAI,EAAE;EACtC,OAAOlB,OAAO,CAAC;IACbG,GAAG,sBAAAS,MAAA,CAAsBI,EAAE,MAAG;IAC9BZ,MAAM,EAAE,KAAK;IACbc,IAAI,EAAJA;EACF,CAAC,CAAC;AACJ;;AAEA;AACA,OAAO,SAASO,aAAaA,CAACT,EAAE,EAAE;EAChCU,OAAO,CAACC,GAAG,kDAAAf,MAAA,CAAeI,EAAE,CAAE,CAAC;EAC/B,OAAOhB,OAAO,CAAC;IACbG,GAAG,sBAAAS,MAAA,CAAsBI,EAAE,MAAG;IAC9BZ,MAAM,EAAE;EACV,CAAC,CAAC,CAACwB,IAAI,CAAC,UAAAC,QAAQ,EAAI;IAClBH,OAAO,CAACC,GAAG,6CAAeE,QAAQ,CAAC;IACnC,OAAOA,QAAQ;EACjB,CAAC,CAAC,SAAM,CAAC,UAAAC,KAAK,EAAI;IAChBJ,OAAO,CAACI,KAAK,6CAAeA,KAAK,CAAC;IAClC,MAAMA,KAAK;EACb,CAAC,CAAC;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}