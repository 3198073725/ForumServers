{"ast":null,"code":"import _regeneratorRuntime from \"H:/ForumServers/ForumFrontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"H:/ForumServers/ForumFrontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.is-array.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.date.now.js\";\nimport \"core-js/modules/es.date.to-iso-string.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/web.timers.js\";\nimport { ref, computed, onMounted } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { useStore } from 'vuex';\nimport { ElMessage } from 'element-plus';\nimport { View, ChatDotRound, Star } from '@element-plus/icons-vue';\nimport { logout } from '../api/user';\nimport { getHotBoards } from '../api/board';\nimport { getHotUsers } from '../api/profile';\nimport { getPostList } from '../api/post';\nimport { formatDateTime } from '../utils/index';\nimport UserAvatar from '../components/UserAvatar.vue';\nexport default {\n  name: 'Home',\n  components: {\n    View: View,\n    ChatDotRound: ChatDotRound,\n    Star: Star,\n    UserAvatar: UserAvatar\n  },\n  setup: function setup() {\n    var router = useRouter();\n    var store = useStore();\n\n    // 获取认证状态和用户信息\n    var isAuthenticated = computed(function () {\n      return store.getters.isAuthenticated;\n    });\n    var userInfo = computed(function () {\n      return store.getters.userInfo;\n    });\n\n    // 判断是否为管理员\n    var isAdmin = computed(function () {\n      return userInfo.value && userInfo.value.role === 'admin';\n    });\n\n    // 数据状态\n    var latestPosts = ref([]);\n    var hotBoards = ref([]);\n    var hotUsers = ref([]);\n    var loading = ref({\n      posts: false,\n      boards: false,\n      users: false\n    });\n\n    // 格式化日期\n    var formatDate = function formatDate(date) {\n      return formatDateTime(date);\n    };\n\n    // 页面跳转方法\n    var goToLogin = function goToLogin() {\n      return router.push('/login');\n    };\n    var goToRegister = function goToRegister() {\n      return router.push('/register');\n    };\n    var goToProfile = function goToProfile() {\n      return router.push('/profile/me');\n    };\n    var goToAdminDashboard = function goToAdminDashboard() {\n      return router.push('/admin/dashboard');\n    };\n    var goToUserManagement = function goToUserManagement() {\n      return router.push('/admin/users');\n    };\n    var goToPostList = function goToPostList() {\n      return router.push('/posts');\n    };\n    var goToNewPost = function goToNewPost() {\n      if (!isAuthenticated.value) {\n        ElMessage.warning('请先登录才能发布帖子');\n        router.push({\n          name: 'Login',\n          query: {\n            redirect: '/post/create'\n          }\n        });\n        return;\n      }\n\n      // 清除可能的成功消息提示\n      ElMessage.closeAll();\n      router.push('/post/create');\n    };\n\n    // 退出登录\n    var handleLogout = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return logout();\n            case 3:\n              response = _context.sent;\n              store.dispatch('logout');\n              // 使用messageTracker替代直接调用ElMessage\n              if (window.messageTracker) {\n                window.messageTracker.showMessage(response.msg || '退出登录成功', 'success', 'home-logout');\n              } else {\n                ElMessage({\n                  message: '退出登录成功',\n                  type: 'success'\n                });\n              }\n              router.push('/');\n              _context.next = 13;\n              break;\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](0);\n              console.error('退出登录失败:', _context.t0);\n              if (window.messageTracker) {\n                window.messageTracker.showMessage('退出登录失败', 'error', 'home-logout-error');\n              } else {\n                ElMessage({\n                  message: '退出登录失败',\n                  type: 'error'\n                });\n              }\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[0, 9]]);\n      }));\n      return function handleLogout() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    // 获取最新帖子\n    var fetchLatestPosts = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              loading.value.posts = true;\n              _context2.prev = 1;\n              console.log('开始获取最新帖子...');\n              _context2.next = 5;\n              return getPostList({\n                page: 1,\n                page_size: 5,\n                ordering: '-created_at'\n              });\n            case 5:\n              response = _context2.sent;\n              console.log('最新帖子响应:', response);\n\n              // 增加更多的响应格式判断\n              if (response && response.count !== undefined && response.results) {\n                // 处理DRF分页响应\n                console.log('使用DRF分页响应格式处理最新帖子数据');\n                latestPosts.value = response.results || [];\n              } else if (response && response.code === 0 && response.data) {\n                // 处理自定义响应格式\n                console.log('使用自定义响应格式处理最新帖子数据');\n                if (response.data.results) {\n                  latestPosts.value = response.data.results || [];\n                } else if (Array.isArray(response.data)) {\n                  latestPosts.value = response.data || [];\n                }\n              } else if (response && response.status === 0 && response.data) {\n                // 处理另一种自定义响应格式\n                console.log('使用status=0格式处理最新帖子数据');\n                if (response.data.results) {\n                  latestPosts.value = response.data.results || [];\n                } else if (Array.isArray(response.data)) {\n                  latestPosts.value = response.data || [];\n                }\n              } else if (response && Array.isArray(response)) {\n                // 直接返回数组的情况\n                console.log('使用数组格式处理最新帖子数据');\n                latestPosts.value = response;\n              } else if (response && Array.isArray(response.results)) {\n                // 直接带有results属性的情况\n                console.log('使用带results属性的响应格式处理最新帖子数据');\n                latestPosts.value = response.results;\n              } else {\n                console.error('获取最新帖子失败:', response ? response.msg : '未知错误');\n                console.log('使用模拟数据代替');\n                useMockPosts();\n              }\n              _context2.next = 14;\n              break;\n            case 10:\n              _context2.prev = 10;\n              _context2.t0 = _context2[\"catch\"](1);\n              console.error('获取最新帖子失败:', _context2.t0);\n              // 使用更友好的错误提示\n              if (_context2.t0.response && _context2.t0.response.status === 401) {\n                console.log('未登录状态，使用模拟数据');\n                useMockPosts();\n              } else {\n                ElMessage.error('获取最新帖子失败，请稍后再试');\n                useMockPosts();\n              }\n            case 14:\n              _context2.prev = 14;\n              loading.value.posts = false;\n              return _context2.finish(14);\n            case 17:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[1, 10, 14, 17]]);\n      }));\n      return function fetchLatestPosts() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    // 使用模拟帖子数据\n    var useMockPosts = function useMockPosts() {\n      console.log('使用模拟帖子数据');\n      latestPosts.value = [{\n        id: 1,\n        title: '欢迎使用论坛系统',\n        content: '这是一个基于Vue和Django的论坛系统',\n        created_at: new Date().toISOString(),\n        views: 100,\n        likes_count: 50,\n        comments_count: 20,\n        is_pinned: true,\n        is_featured: false,\n        board_name: '公告板块',\n        user: {\n          id: 1,\n          username: 'admin',\n          nickname: '管理员',\n          avatar_url: ''\n        }\n      }, {\n        id: 2,\n        title: '如何使用论坛的功能',\n        content: '本帖介绍论坛的基本功能和使用方法',\n        created_at: new Date(Date.now() - 86400000).toISOString(),\n        // 一天前\n        views: 85,\n        likes_count: 30,\n        comments_count: 15,\n        is_pinned: false,\n        is_featured: true,\n        board_name: '使用指南',\n        user: {\n          id: 2,\n          username: 'guide',\n          nickname: '指南员',\n          avatar_url: ''\n        }\n      }, {\n        id: 3,\n        title: '分享一些有用的网站资源',\n        content: '这里收集了一些学习编程的好网站',\n        created_at: new Date(Date.now() - 172800000).toISOString(),\n        // 两天前\n        views: 65,\n        likes_count: 25,\n        comments_count: 10,\n        is_pinned: false,\n        is_featured: false,\n        board_name: '资源分享',\n        user: {\n          id: 3,\n          username: 'resource',\n          nickname: '资源达人',\n          avatar_url: ''\n        }\n      }, {\n        id: 4,\n        title: '前端开发常见问题解答',\n        content: '解答前端开发中的常见问题和技巧',\n        created_at: new Date(Date.now() - 259200000).toISOString(),\n        // 三天前\n        views: 55,\n        likes_count: 20,\n        comments_count: 8,\n        is_pinned: false,\n        is_featured: false,\n        board_name: '前端开发',\n        user: {\n          id: 4,\n          username: 'frontend',\n          nickname: '前端工程师',\n          avatar_url: ''\n        }\n      }, {\n        id: 5,\n        title: '后端开发技术讨论',\n        content: '讨论后端开发的技术选型和架构设计',\n        created_at: new Date(Date.now() - 345600000).toISOString(),\n        // 四天前\n        views: 45,\n        likes_count: 15,\n        comments_count: 5,\n        is_pinned: false,\n        is_featured: false,\n        board_name: '后端开发',\n        user: {\n          id: 5,\n          username: 'backend',\n          nickname: '后端工程师',\n          avatar_url: ''\n        }\n      }];\n    };\n\n    // 获取热门板块\n    var fetchHotBoards = /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              loading.value.boards = true;\n              _context3.prev = 1;\n              console.log('开始获取热门板块...');\n              _context3.next = 5;\n              return getHotBoards(5);\n            case 5:\n              response = _context3.sent;\n              console.log('热门板块响应:', response);\n              if (response && response.status === 0 && response.data) {\n                // 处理Django REST framework自定义响应格式\n                console.log('使用status=0格式处理热门板块数据');\n                hotBoards.value = response.data || [];\n              } else if (response && response.code === 0 && response.data) {\n                // 处理另一种自定义响应格式\n                console.log('使用code=0格式处理热门板块数据');\n                hotBoards.value = response.data || [];\n              } else if (response && Array.isArray(response)) {\n                // 直接返回数组的情况\n                console.log('使用数组格式处理热门板块数据');\n                hotBoards.value = response;\n              } else {\n                console.error('获取热门板块失败:', response ? response.msg : '未知错误');\n                hotBoards.value = []; // 如果获取失败，设置为空数组\n              }\n              _context3.next = 15;\n              break;\n            case 10:\n              _context3.prev = 10;\n              _context3.t0 = _context3[\"catch\"](1);\n              console.error('获取热门板块失败:', _context3.t0);\n              ElMessage.error('获取热门板块失败，请稍后再试');\n              hotBoards.value = []; // 如果发生错误，设置为空数组\n            case 15:\n              _context3.prev = 15;\n              loading.value.boards = false;\n              return _context3.finish(15);\n            case 18:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, null, [[1, 10, 15, 18]]);\n      }));\n      return function fetchHotBoards() {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    // 获取热门用户\n    var fetchHotUsers = /*#__PURE__*/function () {\n      var _ref4 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              loading.value.users = true;\n              _context4.prev = 1;\n              console.log('开始获取热门用户...');\n              _context4.next = 5;\n              return getHotUsers(5);\n            case 5:\n              response = _context4.sent;\n              console.log('热门用户响应:', response);\n              if (response && response.code === 0 && response.data) {\n                console.log('使用code=0格式处理热门用户数据');\n                hotUsers.value = response.data || [];\n              } else if (response && Array.isArray(response)) {\n                // 直接返回数组的情况\n                console.log('使用数组格式处理热门用户数据');\n                hotUsers.value = response;\n              } else if (response && response.status === 0 && response.data) {\n                // 另一种响应格式\n                console.log('使用status=0格式处理热门用户数据');\n                hotUsers.value = response.data || [];\n              } else {\n                console.error('获取热门用户失败:', response ? response.msg : '未知错误');\n                hotUsers.value = []; // 如果获取失败，设置为空数组\n              }\n              _context4.next = 15;\n              break;\n            case 10:\n              _context4.prev = 10;\n              _context4.t0 = _context4[\"catch\"](1);\n              console.error('获取热门用户失败:', _context4.t0);\n              ElMessage.error('获取热门用户失败，请稍后再试');\n              hotUsers.value = []; // 如果发生错误，设置为空数组\n            case 15:\n              _context4.prev = 15;\n              loading.value.users = false;\n              return _context4.finish(15);\n            case 18:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4, null, [[1, 10, 15, 18]]);\n      }));\n      return function fetchHotUsers() {\n        return _ref4.apply(this, arguments);\n      };\n    }();\n\n    // 生命周期钩子\n    onMounted(function () {\n      // 加载首页数据\n      fetchLatestPosts();\n      fetchHotBoards();\n      fetchHotUsers();\n\n      // 添加重试机制，确保数据加载成功\n      setTimeout(function () {\n        // 如果首次加载失败，尝试重新加载\n        if (latestPosts.value.length === 0 && !loading.value.posts) {\n          console.log('首次加载帖子失败，尝试重新加载...');\n          fetchLatestPosts();\n        }\n        if (hotBoards.value.length === 0 && !loading.value.boards) {\n          console.log('首次加载板块失败，尝试重新加载...');\n          fetchHotBoards();\n        }\n      }, 2000); // 2秒后检查并重试\n    });\n    return {\n      isAuthenticated: isAuthenticated,\n      userInfo: userInfo,\n      isAdmin: isAdmin,\n      latestPosts: latestPosts,\n      hotBoards: hotBoards,\n      hotUsers: hotUsers,\n      loading: loading,\n      formatDate: formatDate,\n      goToLogin: goToLogin,\n      goToRegister: goToRegister,\n      goToProfile: goToProfile,\n      goToAdminDashboard: goToAdminDashboard,\n      goToUserManagement: goToUserManagement,\n      goToPostList: goToPostList,\n      goToNewPost: goToNewPost,\n      handleLogout: handleLogout\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","useRouter","useStore","ElMessage","View","ChatDotRound","Star","logout","getHotBoards","getHotUsers","getPostList","formatDateTime","UserAvatar","name","components","setup","router","store","isAuthenticated","getters","userInfo","isAdmin","value","role","latestPosts","hotBoards","hotUsers","loading","posts","boards","users","formatDate","date","goToLogin","push","goToRegister","goToProfile","goToAdminDashboard","goToUserManagement","goToPostList","goToNewPost","warning","query","redirect","closeAll","handleLogout","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","sent","dispatch","window","messageTracker","showMessage","msg","message","type","t0","console","error","stop","apply","arguments","fetchLatestPosts","_ref2","_callee2","_callee2$","_context2","log","page","page_size","ordering","count","undefined","results","code","data","Array","isArray","status","useMockPosts","finish","id","title","content","created_at","Date","toISOString","views","likes_count","comments_count","is_pinned","is_featured","board_name","user","username","nickname","avatar_url","now","fetchHotBoards","_ref3","_callee3","_callee3$","_context3","fetchHotUsers","_ref4","_callee4","_callee4$","_context4","setTimeout","length"],"sources":["H:\\ForumServers\\ForumFrontend\\src\\views\\Home.vue"],"sourcesContent":["<template>\n  <div class=\"home-container\">\n    <el-container>\n      <el-main>\n        <div class=\"main-content\">\n          <el-row :gutter=\"20\">\n            <el-col :span=\"18\">\n              <div class=\"content-area\">\n                <div class=\"welcome-message\" v-if=\"isAuthenticated\">\n                  <h2>欢迎回来，{{ userInfo?.nickname || userInfo?.username }}！</h2>\n                  <p>今天有什么想法要分享吗？</p>\n                  <el-button type=\"primary\" @click=\"goToNewPost\">发布新帖</el-button>\n                </div>\n                <div class=\"welcome-message\" v-else>\n                  <h2>欢迎来到论坛系统</h2>\n                  <p>这里是一个交流和分享的平台，您可以浏览所有帖子和内容。</p>\n                  <p>登录后可以发帖和参与讨论。</p>\n                  <el-button type=\"primary\" @click=\"goToLogin\">立即登录</el-button>\n                  <el-button @click=\"goToRegister\">注册账号</el-button>\n                </div>\n\n                <div class=\"section-title\">\n                  <h3>最新帖子</h3>\n                  <el-button text @click=\"goToPostList\">查看更多</el-button>\n                </div>\n\n                <div class=\"post-list\">\n                  <div v-if=\"loading.posts\" class=\"loading-container\">\n                    <el-skeleton :rows=\"5\" animated />\n                  </div>\n                  <el-empty description=\"暂无帖子\" v-else-if=\"!latestPosts.length\"></el-empty>\n                  <div v-else>\n                    <div v-for=\"post in latestPosts\" :key=\"post.id\" class=\"post-item\">\n                      <div class=\"post-avatar\">\n                        <el-avatar :size=\"40\" :src=\"post.user?.avatar_url || ''\">\n                          {{ post.user?.nickname?.charAt(0) || post.user?.username?.charAt(0) || 'U' }}\n                        </el-avatar>\n                      </div>\n                      <div class=\"post-content\">\n                        <div class=\"post-title\">\n                          <router-link :to=\"`/posts/${post.id}`\">{{ post.title || '无标题' }}</router-link>\n                          <el-tag size=\"small\" type=\"success\" v-if=\"post.is_pinned\">置顶</el-tag>\n                          <el-tag size=\"small\" type=\"warning\" v-if=\"post.is_featured\">精华</el-tag>\n                        </div>\n                        <div class=\"post-info\">\n                          <span class=\"author\">{{ post.user?.nickname || post.user?.username || '匿名用户' }}</span>\n                          <span class=\"board\">{{ post.board_name || '未分类' }}</span>\n                          <span class=\"time\">{{ formatDate(post.created_at || new Date()) }}</span>\n                        </div>\n                        <div class=\"post-stats\">\n                          <span class=\"views\">\n                            <el-icon><View /></el-icon> {{ post.views || 0 }}\n                          </span>\n                          <span class=\"comments\">\n                            <el-icon><ChatDotRound /></el-icon> {{ post.comments_count || 0 }}\n                          </span>\n                          <span class=\"likes\">\n                            <el-icon><Star /></el-icon> {{ post.likes_count || 0 }}\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </el-col>\n\n            <el-col :span=\"6\">\n              <div class=\"sidebar\">\n                <div class=\"sidebar-section\">\n                  <div class=\"section-title\">\n                    <h3>热门板块</h3>\n                  </div>\n                  <div class=\"board-list\">\n                    <div v-if=\"loading.boards\" class=\"loading-container\">\n                      <el-skeleton :rows=\"3\" animated />\n                    </div>\n                    <el-empty description=\"暂无板块\" v-else-if=\"!hotBoards.length\"></el-empty>\n                    <div v-else>\n                      <div v-for=\"board in hotBoards\" :key=\"board.id\" class=\"board-item\">\n                        <router-link :to=\"`/boards/${board.id}`\">{{ board.name }}</router-link>\n                        <span class=\"post-count\">{{ board.posts_count }}帖子</span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div class=\"sidebar-section\">\n                  <div class=\"section-title\">\n                    <h3>热门用户</h3>\n                  </div>\n                  <div class=\"user-list\">\n                    <div v-if=\"loading.users\" class=\"loading-container\">\n                      <el-skeleton :rows=\"3\" animated />\n                    </div>\n                    <el-empty description=\"暂无用户\" v-else-if=\"!hotUsers.length\"></el-empty>\n                    <div v-else>\n                      <div v-for=\"user in hotUsers\" :key=\"user.id\" class=\"user-item\">\n                        <user-avatar :user=\"user\" :size=\"32\" />\n                        <span class=\"user-nickname\">{{ user.nickname || user.username }}</span>\n                        <span class=\"post-count\">{{ user.posts_count }}帖子</span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </el-col>\n          </el-row>\n        </div>\n      </el-main>\n\n      <el-footer height=\"60px\">\n        <div class=\"footer-content\">\n          <p>© 2025 论坛系统 - 基于Vue + Django + MySQL的PC端论坛系统</p>\n        </div>\n      </el-footer>\n    </el-container>\n  </div>\n</template>\n\n<script>\nimport { ref, computed, onMounted } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useStore } from 'vuex'\nimport { ElMessage } from 'element-plus'\nimport { View, ChatDotRound, Star } from '@element-plus/icons-vue'\nimport { logout } from '../api/user'\nimport { getHotBoards } from '../api/board'\nimport { getHotUsers } from '../api/profile'\nimport { getPostList } from '../api/post'\nimport { formatDateTime } from '../utils/index'\nimport UserAvatar from '../components/UserAvatar.vue'\n\nexport default {\n  name: 'Home',\n  components: {\n    View,\n    ChatDotRound,\n    Star,\n    UserAvatar\n  },\n  setup() {\n    const router = useRouter()\n    const store = useStore()\n\n    // 获取认证状态和用户信息\n    const isAuthenticated = computed(() => store.getters.isAuthenticated)\n    const userInfo = computed(() => store.getters.userInfo)\n\n    // 判断是否为管理员\n    const isAdmin = computed(() => {\n      return userInfo.value && userInfo.value.role === 'admin'\n    })\n\n    // 数据状态\n    const latestPosts = ref([])\n    const hotBoards = ref([])\n    const hotUsers = ref([])\n    const loading = ref({\n      posts: false,\n      boards: false,\n      users: false\n    })\n\n    // 格式化日期\n    const formatDate = (date) => {\n      return formatDateTime(date)\n    }\n\n    // 页面跳转方法\n    const goToLogin = () => router.push('/login')\n    const goToRegister = () => router.push('/register')\n    const goToProfile = () => router.push('/profile/me')\n    const goToAdminDashboard = () => router.push('/admin/dashboard')\n    const goToUserManagement = () => router.push('/admin/users')\n    const goToPostList = () => router.push('/posts')\n    const goToNewPost = () => {\n      if (!isAuthenticated.value) {\n        ElMessage.warning('请先登录才能发布帖子')\n        router.push({ name: 'Login', query: { redirect: '/post/create' } })\n        return\n      }\n      \n      // 清除可能的成功消息提示\n      ElMessage.closeAll()\n      router.push('/post/create')\n    }\n\n    // 退出登录\n    const handleLogout = async () => {\n      try {\n        const response = await logout()\n        store.dispatch('logout')\n        // 使用messageTracker替代直接调用ElMessage\n        if (window.messageTracker) {\n          window.messageTracker.showMessage(response.msg || '退出登录成功', 'success', 'home-logout');\n        } else {\n          ElMessage({\n            message: '退出登录成功',\n            type: 'success'\n          })\n        }\n        router.push('/')\n      } catch (error) {\n        console.error('退出登录失败:', error)\n        if (window.messageTracker) {\n          window.messageTracker.showMessage('退出登录失败', 'error', 'home-logout-error');\n        } else {\n          ElMessage({\n            message: '退出登录失败',\n            type: 'error'\n          })\n        }\n      }\n    }\n\n    // 获取最新帖子\n    const fetchLatestPosts = async () => {\n      loading.value.posts = true\n      try {\n        console.log('开始获取最新帖子...')\n        const response = await getPostList({\n          page: 1,\n          page_size: 5,\n          ordering: '-created_at'\n        })\n\n        console.log('最新帖子响应:', response)\n\n        // 增加更多的响应格式判断\n        if (response && response.count !== undefined && response.results) {\n          // 处理DRF分页响应\n          console.log('使用DRF分页响应格式处理最新帖子数据')\n          latestPosts.value = response.results || []\n        } else if (response && response.code === 0 && response.data) {\n          // 处理自定义响应格式\n          console.log('使用自定义响应格式处理最新帖子数据')\n          if (response.data.results) {\n            latestPosts.value = response.data.results || []\n          } else if (Array.isArray(response.data)) {\n            latestPosts.value = response.data || []\n          }\n        } else if (response && response.status === 0 && response.data) {\n          // 处理另一种自定义响应格式\n          console.log('使用status=0格式处理最新帖子数据')\n          if (response.data.results) {\n            latestPosts.value = response.data.results || []\n          } else if (Array.isArray(response.data)) {\n            latestPosts.value = response.data || []\n          }\n        } else if (response && Array.isArray(response)) {\n          // 直接返回数组的情况\n          console.log('使用数组格式处理最新帖子数据')\n          latestPosts.value = response\n        } else if (response && Array.isArray(response.results)) {\n          // 直接带有results属性的情况\n          console.log('使用带results属性的响应格式处理最新帖子数据')\n          latestPosts.value = response.results\n        } else {\n          console.error('获取最新帖子失败:', response ? response.msg : '未知错误')\n          console.log('使用模拟数据代替')\n          useMockPosts()\n        }\n      } catch (error) {\n        console.error('获取最新帖子失败:', error)\n        // 使用更友好的错误提示\n        if (error.response && error.response.status === 401) {\n          console.log('未登录状态，使用模拟数据')\n          useMockPosts()\n        } else {\n          ElMessage.error('获取最新帖子失败，请稍后再试')\n          useMockPosts()\n        }\n      } finally {\n        loading.value.posts = false\n      }\n    }\n\n    // 使用模拟帖子数据\n    const useMockPosts = () => {\n      console.log('使用模拟帖子数据')\n      latestPosts.value = [\n        {\n          id: 1,\n          title: '欢迎使用论坛系统',\n          content: '这是一个基于Vue和Django的论坛系统',\n          created_at: new Date().toISOString(),\n          views: 100,\n          likes_count: 50,\n          comments_count: 20,\n          is_pinned: true,\n          is_featured: false,\n          board_name: '公告板块',\n          user: {\n            id: 1,\n            username: 'admin',\n            nickname: '管理员',\n            avatar_url: ''\n          }\n        },\n        {\n          id: 2,\n          title: '如何使用论坛的功能',\n          content: '本帖介绍论坛的基本功能和使用方法',\n          created_at: new Date(Date.now() - 86400000).toISOString(), // 一天前\n          views: 85,\n          likes_count: 30,\n          comments_count: 15,\n          is_pinned: false,\n          is_featured: true,\n          board_name: '使用指南',\n          user: {\n            id: 2,\n            username: 'guide',\n            nickname: '指南员',\n            avatar_url: ''\n          }\n        },\n        {\n          id: 3,\n          title: '分享一些有用的网站资源',\n          content: '这里收集了一些学习编程的好网站',\n          created_at: new Date(Date.now() - 172800000).toISOString(), // 两天前\n          views: 65,\n          likes_count: 25,\n          comments_count: 10,\n          is_pinned: false,\n          is_featured: false,\n          board_name: '资源分享',\n          user: {\n            id: 3,\n            username: 'resource',\n            nickname: '资源达人',\n            avatar_url: ''\n          }\n        },\n        {\n          id: 4,\n          title: '前端开发常见问题解答',\n          content: '解答前端开发中的常见问题和技巧',\n          created_at: new Date(Date.now() - 259200000).toISOString(), // 三天前\n          views: 55,\n          likes_count: 20,\n          comments_count: 8,\n          is_pinned: false,\n          is_featured: false,\n          board_name: '前端开发',\n          user: {\n            id: 4,\n            username: 'frontend',\n            nickname: '前端工程师',\n            avatar_url: ''\n          }\n        },\n        {\n          id: 5,\n          title: '后端开发技术讨论',\n          content: '讨论后端开发的技术选型和架构设计',\n          created_at: new Date(Date.now() - 345600000).toISOString(), // 四天前\n          views: 45,\n          likes_count: 15,\n          comments_count: 5,\n          is_pinned: false,\n          is_featured: false,\n          board_name: '后端开发',\n          user: {\n            id: 5,\n            username: 'backend',\n            nickname: '后端工程师',\n            avatar_url: ''\n          }\n        }\n      ]\n    }\n\n    // 获取热门板块\n    const fetchHotBoards = async () => {\n      loading.value.boards = true\n      try {\n        console.log('开始获取热门板块...')\n        const response = await getHotBoards(5)\n\n        console.log('热门板块响应:', response)\n\n        if (response && response.status === 0 && response.data) {\n          // 处理Django REST framework自定义响应格式\n          console.log('使用status=0格式处理热门板块数据')\n          hotBoards.value = response.data || []\n        } else if (response && response.code === 0 && response.data) {\n          // 处理另一种自定义响应格式\n          console.log('使用code=0格式处理热门板块数据')\n          hotBoards.value = response.data || []\n        } else if (response && Array.isArray(response)) {\n          // 直接返回数组的情况\n          console.log('使用数组格式处理热门板块数据')\n          hotBoards.value = response\n        } else {\n          console.error('获取热门板块失败:', response ? response.msg : '未知错误')\n          hotBoards.value = [] // 如果获取失败，设置为空数组\n        }\n      } catch (error) {\n        console.error('获取热门板块失败:', error)\n        ElMessage.error('获取热门板块失败，请稍后再试')\n        hotBoards.value = [] // 如果发生错误，设置为空数组\n      } finally {\n        loading.value.boards = false\n      }\n    }\n\n    // 获取热门用户\n    const fetchHotUsers = async () => {\n      loading.value.users = true\n      try {\n        console.log('开始获取热门用户...')\n        const response = await getHotUsers(5)\n\n        console.log('热门用户响应:', response)\n\n        if (response && response.code === 0 && response.data) {\n          console.log('使用code=0格式处理热门用户数据')\n          hotUsers.value = response.data || []\n        } else if (response && Array.isArray(response)) {\n          // 直接返回数组的情况\n          console.log('使用数组格式处理热门用户数据')\n          hotUsers.value = response\n        } else if (response && response.status === 0 && response.data) {\n          // 另一种响应格式\n          console.log('使用status=0格式处理热门用户数据')\n          hotUsers.value = response.data || []\n        } else {\n          console.error('获取热门用户失败:', response ? response.msg : '未知错误')\n          hotUsers.value = [] // 如果获取失败，设置为空数组\n        }\n      } catch (error) {\n        console.error('获取热门用户失败:', error)\n        ElMessage.error('获取热门用户失败，请稍后再试')\n        hotUsers.value = [] // 如果发生错误，设置为空数组\n      } finally {\n        loading.value.users = false\n      }\n    }\n\n    // 生命周期钩子\n    onMounted(() => {\n      // 加载首页数据\n      fetchLatestPosts()\n      fetchHotBoards()\n      fetchHotUsers()\n      \n      // 添加重试机制，确保数据加载成功\n      setTimeout(() => {\n        // 如果首次加载失败，尝试重新加载\n        if (latestPosts.value.length === 0 && !loading.value.posts) {\n          console.log('首次加载帖子失败，尝试重新加载...')\n          fetchLatestPosts()\n        }\n        \n        if (hotBoards.value.length === 0 && !loading.value.boards) {\n          console.log('首次加载板块失败，尝试重新加载...')\n          fetchHotBoards()\n        }\n      }, 2000) // 2秒后检查并重试\n    })\n\n    return {\n      isAuthenticated,\n      userInfo,\n      isAdmin,\n      latestPosts,\n      hotBoards,\n      hotUsers,\n      loading,\n      formatDate,\n      goToLogin,\n      goToRegister,\n      goToProfile,\n      goToAdminDashboard,\n      goToUserManagement,\n      goToPostList,\n      goToNewPost,\n      handleLogout\n    }\n  }\n}\n</script>\n\n<style scoped>\n.home-container {\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n}\n\n.el-container {\n  min-height: 100vh;\n}\n\n.el-main {\n  padding: 20px;\n  background-color: #f5f7fa;\n}\n\n.main-content {\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\n.content-area {\n  background-color: #fff;\n  border-radius: 8px;\n  padding: 20px;\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.05);\n}\n\n.welcome-message {\n  background-color: #f0f9ff;\n  border-radius: 8px;\n  padding: 20px;\n  margin-bottom: 20px;\n  border-left: 4px solid #409eff;\n}\n\n.welcome-message h2 {\n  margin-top: 0;\n  color: #303133;\n}\n\n.section-title {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 15px;\n  border-bottom: 1px solid #ebeef5;\n  padding-bottom: 10px;\n}\n\n.section-title h3 {\n  margin: 0;\n  font-size: 18px;\n  color: #303133;\n}\n\n.post-list {\n  margin-bottom: 20px;\n}\n\n.post-item {\n  display: flex;\n  padding: 15px 0;\n  border-bottom: 1px solid #ebeef5;\n}\n\n.post-avatar {\n  margin-right: 15px;\n}\n\n.post-content {\n  flex-grow: 1;\n}\n\n.post-title {\n  font-size: 16px;\n  font-weight: 500;\n  margin-bottom: 8px;\n  display: flex;\n  align-items: center;\n}\n\n.post-title a {\n  color: #303133;\n  text-decoration: none;\n  margin-right: 8px;\n}\n\n.post-title a:hover {\n  color: #409eff;\n}\n\n.post-info {\n  font-size: 12px;\n  color: #909399;\n  margin-bottom: 8px;\n}\n\n.post-info .author {\n  margin-right: 10px;\n}\n\n.post-info .board {\n  margin-right: 10px;\n  background-color: #f0f9ff;\n  color: #409eff;\n  padding: 2px 6px;\n  border-radius: 4px;\n}\n\n.post-stats {\n  font-size: 12px;\n  color: #909399;\n  display: flex;\n  gap: 15px;\n}\n\n.sidebar {\n  position: sticky;\n  top: 80px;\n}\n\n.sidebar-section {\n  background-color: #fff;\n  border-radius: 8px;\n  padding: 15px;\n  margin-bottom: 20px;\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.05);\n}\n\n.board-list, .user-list {\n  margin-top: 10px;\n}\n\n.board-item, .user-item {\n  display: flex;\n  align-items: center;\n  padding: 8px 0;\n  border-bottom: 1px solid #ebeef5;\n}\n\n.board-item a {\n  color: #303133;\n  text-decoration: none;\n  flex-grow: 1;\n}\n\n.board-item a:hover {\n  color: #409eff;\n}\n\n.post-count {\n  font-size: 12px;\n  color: #909399;\n}\n\n.user-item {\n  gap: 10px;\n}\n\n.user-nickname {\n  flex-grow: 1;\n  font-size: 14px;\n}\n\n.el-footer {\n  background-color: #fff;\n  border-top: 1px solid #ebeef5;\n}\n\n.footer-content {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 0 20px;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #909399;\n  font-size: 14px;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}